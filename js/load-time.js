!function(){let e=null;function t(){try{if(null!==e)return void n(e);let t=0,o="约";const r=document.querySelector("footer");if(r){const e=r.querySelector('div > a[href*="icp.gov.moe"]');if(e&&e.parentNode){const t=e.nextSibling;t&&t.nodeType===Node.TEXT_NODE&&t.textContent.includes("页面加载时间")&&e.parentNode.removeChild(t)}}if(document.querySelectorAll(".load-time-element").forEach(e=>e.remove()),performance.timing&&performance.timing.loadEventEnd&&performance.timing.navigationStart)t=performance.timing.loadEventEnd-performance.timing.navigationStart,o="";else if("undefined"!=typeof PerformanceObserver){const e=new PerformanceObserver(function(e){const n=e.getEntries();for(let e=0;e<n.length;e++)if("navigation"===n[e].entryType){const r=n[e];if(r.loadEventEnd&&r.startTime){t=r.loadEventEnd-r.startTime,o="";break}}});try{e.observe({entryTypes:["navigation"]})}catch(e){console.warn("PerformanceObserver 初始化失败:",e)}}else{const e=performance.getEntriesByType("navigation");e&&e.length>0&&(t=e[0].loadEventEnd-e[0].startTime,o="")}t<=0&&(t=150,o="约"),(t<0||t>3e4)&&(t=150,o="约"),e={value:t,displayText:o},n(e)}catch(t){console.error("计算页面加载时间出错:",t),e={value:150,displayText:"约"},n(e)}}function n(e){try{const t=(e.value/1e3).toFixed(3);window.loadTimeData={value:e.value,formatted:t,displayText:e.displayText};const n=document.querySelector("footer");if(n){const o=n.querySelector('div > a[href*="icp.gov.moe"]');if(o&&o.parentNode)o.parentNode.insertBefore(document.createTextNode(` | 页面加载时间: ${e.displayText}${t}s`),o.nextSibling);else{const o=document.createElement("div");o.className="load-time-element",o.style.textAlign="center",o.style.marginTop="10px",o.style.color="#666",o.style.fontSize="14px",o.textContent=`页面加载时间: ${e.displayText}${t}s`,n.appendChild(o)}}}catch(e){console.error("显示加载时间出错:",e)}}window.addEventListener("load",function(){setTimeout(t,100)}),document.addEventListener("pjax:complete",function(){e=null,setTimeout(t,100)})}();