const __vite__mapDeps=(e,t=__vite__mapDeps,n=t.f||(t.f=["assets/index-Tjjv2xOT.js","assets/index.dom-C3-224fz.js"]))=>e.map(e=>n[e]);function ob(e,t){for(var n=0;n<t.length;n++){const r=t[n];if("string"!=typeof r&&!Array.isArray(r))for(const t in r)if("default"!==t&&!(t in e)){const n=Object.getOwnPropertyDescriptor(r,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>r[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Cs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jy,$y,Wy,zy,I7={exports:{}},ag={},F7={exports:{}},Qt={};
/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function sb(){if(jy)return Qt;jy=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),a=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),d=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,p={};function g(e,t,n){this.props=e,this.context=t,this.refs=p,this.updater=n||h}function m(){}function v(e,t,n){this.props=e,this.context=t,this.refs=p,this.updater=n||h}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=g.prototype;var y=v.prototype=new m;y.constructor=v,f(y,g.prototype),y.isPureReactComponent=!0;var b=Array.isArray,w=Object.prototype.hasOwnProperty,x={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function E(t,n,r){var o,i={},a=null,s=null;if(null!=n)for(o in void 0!==n.ref&&(s=n.ref),void 0!==n.key&&(a=""+n.key),n)w.call(n,o)&&!C.hasOwnProperty(o)&&(i[o]=n[o]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(o in l=t.defaultProps)void 0===i[o]&&(i[o]=l[o]);return{$$typeof:e,type:t,key:a,ref:s,props:i,_owner:x.current}}function D(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}var S=/\/+/g;function P(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(n,r,o,i,a){var s=typeof n;("undefined"===s||"boolean"===s)&&(n=null);var l=!1;if(null===n)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(n.$$typeof){case e:case t:l=!0}}if(l)return a=a(l=n),n=""===i?"."+P(l,0):i,b(a)?(o="",null!=n&&(o=n.replace(S,"$&/")+"/"),T(a,r,o,"",function(e){return e})):null!=a&&(D(a)&&(a=function(t,n){return{$$typeof:e,type:t.type,key:n,ref:t.ref,props:t.props,_owner:t._owner}}(a,o+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(S,"$&/")+"/")+n)),r.push(a)),1;if(l=0,i=""===i?".":i+":",b(n))for(var u=0;u<n.length;u++){var c=i+P(s=n[u],u);l+=T(s,r,o,c,a)}else if(c=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(n),"function"==typeof c)for(n=c.call(n),u=0;!(s=n.next()).done;)l+=T(s=s.value,r,o,c=i+P(s,u++),a);else if("object"===s)throw r=String(n),Error("Objects are not valid as a React child (found: "+("[object Object]"===r?"object with keys {"+Object.keys(n).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],o=0;return T(e,r,"","",function(e){return t.call(n,e,o++)}),r}function M(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){(0===e._status||-1===e._status)&&(e._status=1,e._result=t)},function(t){(0===e._status||-1===e._status)&&(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var k={current:null},B={transition:null},F={ReactCurrentDispatcher:k,ReactCurrentBatchConfig:B,ReactCurrentOwner:x};function I(){throw Error("act(...) is not supported in production builds of React.")}return Qt.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!D(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},Qt.Component=g,Qt.Fragment=n,Qt.Profiler=o,Qt.PureComponent=v,Qt.StrictMode=r,Qt.Suspense=l,Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,Qt.act=I,Qt.cloneElement=function(t,n,r){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var o=f({},t.props),i=t.key,a=t.ref,s=t._owner;if(null!=n){if(void 0!==n.ref&&(a=n.ref,s=x.current),void 0!==n.key&&(i=""+n.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in n)w.call(n,u)&&!C.hasOwnProperty(u)&&(o[u]=void 0===n[u]&&void 0!==l?l[u]:n[u])}var u=arguments.length-2;if(1===u)o.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];o.children=l}return{$$typeof:e,type:t.type,key:i,ref:a,props:o,_owner:s}},Qt.createContext=function(e){return(e={$$typeof:a,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},Qt.createElement=E,Qt.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},Qt.createRef=function(){return{current:null}},Qt.forwardRef=function(e){return{$$typeof:s,render:e}},Qt.isValidElement=D,Qt.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:M}},Qt.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},Qt.startTransition=function(e){var t=B.transition;B.transition={};try{e()}finally{B.transition=t}},Qt.unstable_act=I,Qt.useCallback=function(e,t){return k.current.useCallback(e,t)},Qt.useContext=function(e){return k.current.useContext(e)},Qt.useDebugValue=function(){},Qt.useDeferredValue=function(e){return k.current.useDeferredValue(e)},Qt.useEffect=function(e,t){return k.current.useEffect(e,t)},Qt.useId=function(){return k.current.useId()},Qt.useImperativeHandle=function(e,t,n){return k.current.useImperativeHandle(e,t,n)},Qt.useInsertionEffect=function(e,t){return k.current.useInsertionEffect(e,t)},Qt.useLayoutEffect=function(e,t){return k.current.useLayoutEffect(e,t)},Qt.useMemo=function(e,t){return k.current.useMemo(e,t)},Qt.useReducer=function(e,t,n){return k.current.useReducer(e,t,n)},Qt.useRef=function(e){return k.current.useRef(e)},Qt.useState=function(e){return k.current.useState(e)},Qt.useSyncExternalStore=function(e,t,n){return k.current.useSyncExternalStore(e,t,n)},Qt.useTransition=function(){return k.current.useTransition()},Qt.version="18.3.1",Qt}function y4(){return $y||($y=1,F7.exports=sb()),F7.exports}
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function ab(){if(Wy)return ag;Wy=1;var e=y4(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(e,n,a){var s,l={},u=null,c=null;for(s in void 0!==a&&(u=""+a),void 0!==n.key&&(u=""+n.key),void 0!==n.ref&&(c=n.ref),n)r.call(n,s)&&!i.hasOwnProperty(s)&&(l[s]=n[s]);if(e&&e.defaultProps)for(s in n=e.defaultProps)void 0===l[s]&&(l[s]=n[s]);return{$$typeof:t,type:e,key:u,ref:c,props:l,_owner:o.current}}return ag.Fragment=n,ag.jsx=a,ag.jsxs=a,ag}function ub(){return zy||(zy=1,I7.exports=ab()),I7.exports}var b=ub(),j=y4();const xt=vc(j),lb=ob({__proto__:null,default:xt},[j]);var Vy,Uy,Xy,Ky,Yy,em={},L7={exports:{}},lo={},_7={exports:{}},N7={};
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function cb(){return Vy||(Vy=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>o(l,n))u<i&&0>o(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>o(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],u=[],c=1,d=null,h=3,f=!1,p=!1,g=!1,m="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;function b(e){for(var o=n(u);null!==o;){if(null===o.callback)r(u);else{if(!(o.startTime<=e))break;r(u),o.sortIndex=o.expirationTime,t(l,o)}o=n(u)}}function w(e){if(g=!1,b(e),!p)if(null!==n(l))p=!0,F(x);else{var t=n(u);null!==t&&I(w,t.startTime-e)}}function x(t,o){p=!1,g&&(g=!1,v(S),S=-1),f=!0;var i=h;try{for(b(o),d=n(l);null!==d&&(!(d.expirationTime>o)||t&&!A());){var a=d.callback;if("function"==typeof a){d.callback=null,h=d.priorityLevel;var s=a(d.expirationTime<=o);o=e.unstable_now(),"function"==typeof s?d.callback=s:d===n(l)&&r(l),b(o)}else r(l);d=n(l)}if(null!==d)var c=!0;else{var m=n(u);null!==m&&I(w,m.startTime-o),c=!1}return c}finally{d=null,h=i,f=!1}}typeof navigator<"u"&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,E=!1,D=null,S=-1,P=5,T=-1;function A(){return!(e.unstable_now()-T<P)}function M(){if(null!==D){var t=e.unstable_now();T=t;var n=!0;try{n=D(!0,t)}finally{n?C():(E=!1,D=null)}}else E=!1}if("function"==typeof y)C=function(){y(M)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,B=k.port2;k.port1.onmessage=M,C=function(){B.postMessage(null)}}else C=function(){m(M,0)};function F(e){D=e,E||(E=!0,C())}function I(t,n){S=m(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){p||f||(p=!0,F(x))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,o,i){var a=e.unstable_now();switch("object"==typeof i&&null!==i?i="number"==typeof(i=i.delay)&&0<i?a+i:a:i=a,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return r={id:c++,callback:o,priorityLevel:r,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>a?(r.sortIndex=i,t(u,r),null===n(l)&&r===n(u)&&(g?(v(S),S=-1):g=!0,I(w,i-a))):(r.sortIndex=s,t(l,r),p||f||(p=!0,F(x))),r},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(N7)),N7}function fb(){return Uy||(Uy=1,_7.exports=cb()),_7.exports}
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function hb(){if(Xy)return lo;Xy=1;var e=y4(),t=fb();function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function i(e,t){a(e,t),a(e+"Capture",t)}function a(e,t){for(o[e]=t,e=0;e<t.length;e++)r.add(t[e])}var s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},d={};function h(e,t,n,r,o,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var f={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){f[e]=new h(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];f[t]=new h(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){f[e]=new h(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){f[e]=new h(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){f[e]=new h(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){f[e]=new h(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){f[e]=new h(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){f[e]=new h(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){f[e]=new h(e,5,!1,e.toLowerCase(),null,!1,!1)});var p=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function m(e,t,n,r){var o=f.hasOwnProperty(t)?f[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||typeof t>"u"||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!l.call(d,e)||!l.call(c,e)&&(u.test(e)?d[e]=!0:(c[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(p,g);f[t]=new h(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(p,g);f[t]=new h(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(p,g);f[t]=new h(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){f[e]=new h(e,1,!1,e.toLowerCase(),null,!1,!1)}),f.xlinkHref=new h("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){f[e]=new h(e,1,!1,e.toLowerCase(),null,!0,!0)});var v=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,y=Symbol.for("react.element"),b=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),D=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),k=Symbol.for("react.offscreen"),B=Symbol.iterator;function F(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=B&&e[B]||e["@@iterator"])?e:null}var I,R=Object.assign;function _(e){if(void 0===I)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);I=t&&t[1]||""}return"\n"+I+e}var O=!1;function L(e,t){if(!e||O)return"";O=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var o=t.stack.split("\n"),i=r.stack.split("\n"),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(1!==a||1!==s)do{if(a--,0>--s||o[a]!==i[s]){var l="\n"+o[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{O=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?_(e):""}function j(e){switch(e.tag){case 5:return _(e.type);case 16:return _("Lazy");case 13:return _("Suspense");case 19:return _("SuspenseList");case 0:case 2:case 15:return e=L(e.type,!1);case 11:return e=L(e.type.render,!1);case 1:return e=L(e.type,!0);default:return""}}function N(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case w:return"Fragment";case b:return"Portal";case C:return"Profiler";case x:return"StrictMode";case P:return"Suspense";case T:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case D:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:N(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return N(e(t))}catch{}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return N(t);case 8:return t===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function z(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=z(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&"function"==typeof n.get&&"function"==typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function V(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=z(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function $(e){if(typeof(e=e||(typeof document<"u"?document:void 0))>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function K(e,t){var n=t.checked;return R({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function U(e,t){null!=(t=t.checked)&&m(e,"checked",t,!1)}function q(e,t){U(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Y(e,t.type,n):t.hasOwnProperty("defaultValue")&&Y(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Y(e,t,n){("number"!==t||$(e.ownerDocument)!==e)&&(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Z=Array.isArray;function J(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function ee(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(n(91));return R({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function te(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(n(92));if(Z(r)){if(1<r.length)throw Error(n(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:H(r)}}function ne(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function re(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ie(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ae,se,le=(se=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ae=ae||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ae.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return se(e,t)})}:se);function ue(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ce={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},de=["Webkit","ms","Moz","O"];function he(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ce.hasOwnProperty(e)&&ce[e]?(""+t).trim():t+"px"}function fe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=he(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(ce).forEach(function(e){de.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ce[t]=ce[e]})});var pe=R({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(pe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(n(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(n(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(n(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(n(62))}}function me(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function ye(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var be=null,we=null,xe=null;function Ce(e){if(e=yo(e)){if("function"!=typeof be)throw Error(n(280));var t=e.stateNode;t&&(t=wo(t),be(e.stateNode,e.type,t))}}function Ee(e){we?xe?xe.push(e):xe=[e]:we=e}function De(){if(we){var e=we,t=xe;if(xe=we=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Se(e,t){return e(t)}function Pe(){}var Te=!1;function Ae(e,t,n){if(Te)return e(t,n);Te=!0;try{return Se(e,t,n)}finally{Te=!1,(null!==we||null!==xe)&&(Pe(),De())}}function Me(e,t){var r=e.stateNode;if(null===r)return null;var o=wo(r);if(null===o)return null;r=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(o=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!o;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(n(231,t,typeof r));return r}var ke=!1;if(s)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){ke=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch{ke=!1}function Fe(e,t,n,r,o,i,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}var Ie=!1,Re=null,_e=!1,Oe=null,Le={onError:function(e){Ie=!0,Re=e}};function je(e,t,n,r,o,i,a,s,l){Ie=!1,Re=null,Fe.apply(Le,arguments)}function Ne(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ne(e)!==e)throw Error(n(188))}function ze(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ne(e)))throw Error(n(188));return t!==e?null:e}for(var r=e,o=t;;){var i=r.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(o=i.return)){r=o;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return He(i),e;if(a===o)return He(i),t;a=a.sibling}throw Error(n(188))}if(r.return!==o.return)r=i,o=a;else{for(var s=!1,l=i.child;l;){if(l===r){s=!0,r=i,o=a;break}if(l===o){s=!0,o=i,r=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===r){s=!0,r=a,o=i;break}if(l===o){s=!0,o=a,r=i;break}l=l.sibling}if(!s)throw Error(n(189))}}if(r.alternate!==o)throw Error(n(190))}if(3!==r.tag)throw Error(n(188));return r.stateNode.current===r?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ve=t.unstable_scheduleCallback,$e=t.unstable_cancelCallback,Ke=t.unstable_shouldYield,Xe=t.unstable_requestPaint,Ue=t.unstable_now,qe=t.unstable_getCurrentPriorityLevel,Qe=t.unstable_ImmediatePriority,Ye=t.unstable_UserBlockingPriority,Ze=t.unstable_NormalPriority,Je=t.unstable_LowPriority,et=t.unstable_IdlePriority,tt=null,nt=null;var rt=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/it|0)|0},ot=Math.log,it=Math.LN2;var at=64,st=4194304;function lt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ut(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~o;0!==s?r=lt(s):0!==(i&=a)&&(r=lt(i))}else 0!==(a=n&~o)?r=lt(a):0!==i&&(r=lt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(i=t&-t)||16===o&&4194240&i))return t;if(!!(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-rt(t)),r|=e[n],t&=~o;return r}function ct(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function dt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ht(){var e=at;return!(4194240&(at<<=1))&&(at=64),e}function ft(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function pt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-rt(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-rt(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var mt=0;function vt(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var yt,bt,wt,xt,Ct,Et=!1,Dt=[],St=null,Pt=null,Tt=null,At=new Map,Mt=new Map,kt=[],Bt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ft(e,t){switch(e){case"focusin":case"focusout":St=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function It(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=yo(t))&&bt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Rt(e){var t=vo(e.target);if(null!==t){var n=Ne(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ge(n)))return e.blockedOn=t,void Ct(e.priority,function(){wt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function _t(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yo(n))&&bt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ve=r,n.target.dispatchEvent(r),ve=null,t.shift()}return!0}function Ot(e,t,n){_t(e)&&n.delete(t)}function Lt(){Et=!1,null!==St&&_t(St)&&(St=null),null!==Pt&&_t(Pt)&&(Pt=null),null!==Tt&&_t(Tt)&&(Tt=null),At.forEach(Ot),Mt.forEach(Ot)}function jt(e,n){e.blockedOn===n&&(e.blockedOn=null,Et||(Et=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Lt)))}function Nt(e){function t(t){return jt(t,e)}if(0<Dt.length){jt(Dt[0],e);for(var n=1;n<Dt.length;n++){var r=Dt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==St&&jt(St,e),null!==Pt&&jt(Pt,e),null!==Tt&&jt(Tt,e),At.forEach(t),Mt.forEach(t),n=0;n<kt.length;n++)(r=kt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<kt.length&&null===(n=kt[0]).blockedOn;)Rt(n),null===n.blockedOn&&kt.shift()}var Gt=v.ReactCurrentBatchConfig,Ht=!0;function zt(e,t,n,r){var o=mt,i=Gt.transition;Gt.transition=null;try{mt=1,Vt(e,t,n,r)}finally{mt=o,Gt.transition=i}}function Wt(e,t,n,r){var o=mt,i=Gt.transition;Gt.transition=null;try{mt=4,Vt(e,t,n,r)}finally{mt=o,Gt.transition=i}}function Vt(e,t,n,r){if(Ht){var o=Kt(e,t,n,r);if(null===o)Hr(e,t,r,$t,n),Ft(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return St=It(St,e,t,n,r,o),!0;case"dragenter":return Pt=It(Pt,e,t,n,r,o),!0;case"mouseover":return Tt=It(Tt,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return At.set(i,It(At.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Mt.set(i,It(Mt.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Ft(e,r),4&t&&-1<Bt.indexOf(e)){for(;null!==o;){var i=yo(o);if(null!==i&&yt(i),null===(i=Kt(e,t,n,r))&&Hr(e,t,r,$t,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var $t=null;function Kt(e,t,n,r){if($t=null,null!==(e=vo(e=ye(r))))if(null===(t=Ne(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $t=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qe()){case Qe:return 1;case Ye:return 4;case Ze:case Je:return 16;case et:return 536870912;default:return 16}default:return 16}}var Ut=null,qt=null,Qt=null;function Yt(){if(Qt)return Qt;var e,t,n=qt,r=n.length,o="value"in Ut?Ut.value:Ut.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return Qt=o.slice(e,1<t?1-t:void 0)}function Zt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Jt(){return!0}function en(){return!1}function tn(e){function t(t,n,r,o,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?Jt:en,this.isPropagationStopped=en,this}return R(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Jt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Jt)},persist:function(){},isPersistent:Jt}),t}var nn,rn,on,an={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sn=tn(an),ln=R({},an,{view:0,detail:0}),un=tn(ln),cn=R({},ln,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==on&&(on&&"mousemove"===e.type?(nn=e.screenX-on.screenX,rn=e.screenY-on.screenY):rn=nn=0,on=e),nn)},movementY:function(e){return"movementY"in e?e.movementY:rn}}),dn=tn(cn),hn=tn(R({},cn,{dataTransfer:0})),fn=tn(R({},ln,{relatedTarget:0})),pn=tn(R({},an,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=R({},an,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mn=tn(gn),vn=tn(R({},an,{data:0})),yn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function Cn(){return xn}var En=R({},ln,{key:function(e){if(e.key){var t=yn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Zt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?Zt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Zt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Dn=tn(En),Sn=tn(R({},cn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=tn(R({},ln,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Tn=tn(R({},an,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=R({},cn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=tn(An),kn=[9,13,27,32],Bn=s&&"CompositionEvent"in window,Fn=null;s&&"documentMode"in document&&(Fn=document.documentMode);var In=s&&"TextEvent"in window&&!Fn,Rn=s&&(!Bn||Fn&&8<Fn&&11>=Fn),_n=" ",On=!1;function Ln(e,t){switch(e){case"keyup":return-1!==kn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Nn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function zn(e,t,n,r){Ee(r),0<(t=Wr(t,"onChange")).length&&(n=new sn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Vn=null;function $n(e){_r(e,0)}function Kn(e){if(V(bo(e)))return e}function Xn(e,t){if("change"===e)return t}var Un=!1;if(s){var qn;if(s){var Qn="oninput"in document;if(!Qn){var Yn=document.createElement("div");Yn.setAttribute("oninput","return;"),Qn="function"==typeof Yn.oninput}qn=Qn}else qn=!1;Un=qn&&(!document.documentMode||9<document.documentMode)}function Zn(){Wn&&(Wn.detachEvent("onpropertychange",Jn),Vn=Wn=null)}function Jn(e){if("value"===e.propertyName&&Kn(Vn)){var t=[];zn(t,Vn,e,ye(e)),Ae($n,t)}}function er(e,t,n){"focusin"===e?(Zn(),Vn=n,(Wn=t).attachEvent("onpropertychange",Jn)):"focusout"===e&&Zn()}function tr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(Vn)}function nr(e,t){if("click"===e)return Kn(t)}function rr(e,t){if("input"===e||"change"===e)return Kn(t)}var or="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function ir(e,t){if(or(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!l.call(t,o)||!or(e[o],t[o]))return!1}return!0}function ar(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sr(e,t){var n,r=ar(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ar(r)}}function lr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?lr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ur(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch{n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function cr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function dr(e){var t=ur(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&lr(n.ownerDocument.documentElement,n)){if(null!==r&&cr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=void 0===r.end?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=sr(n,i);var a=sr(n,r);o&&a&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hr=s&&"documentMode"in document&&11>=document.documentMode,fr=null,pr=null,gr=null,mr=!1;function vr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;mr||null==fr||fr!==$(r)||("selectionStart"in(r=fr)&&cr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ir(gr,r)||(gr=r,0<(r=Wr(pr,"onSelect")).length&&(t=new sn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=fr)))}function yr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:yr("Animation","AnimationEnd"),animationiteration:yr("Animation","AnimationIteration"),animationstart:yr("Animation","AnimationStart"),transitionend:yr("Transition","TransitionEnd")},wr={},xr={};function Cr(e){if(wr[e])return wr[e];if(!br[e])return e;var t,n=br[e];for(t in n)if(n.hasOwnProperty(t)&&t in xr)return wr[e]=n[t];return e}s&&(xr=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var Er=Cr("animationend"),Dr=Cr("animationiteration"),Sr=Cr("animationstart"),Pr=Cr("transitionend"),Tr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(e,t){Tr.set(e,t),i(t,[e])}for(var kr=0;kr<Ar.length;kr++){var Br=Ar[kr];Mr(Br.toLowerCase(),"on"+(Br[0].toUpperCase()+Br.slice(1)))}Mr(Er,"onAnimationEnd"),Mr(Dr,"onAnimationIteration"),Mr(Sr,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Pr,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ir=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fr));function Rr(e,t,r){var o=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,o,i,a,s,l,u){if(je.apply(this,arguments),Ie){if(!Ie)throw Error(n(198));var c=Re;Ie=!1,Re=null,_e||(_e=!0,Oe=c)}}(o,t,void 0,e),e.currentTarget=null}function _r(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==i&&o.isPropagationStopped())break e;Rr(o,s,u),i=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==i&&o.isPropagationStopped())break e;Rr(o,s,u),i=l}}}if(_e)throw e=Oe,_e=!1,Oe=null,e}function Or(e,t){var n=t[po];void 0===n&&(n=t[po]=new Set);var r=e+"__bubble";n.has(r)||(Gr(t,e,2,!1),n.add(r))}function Lr(e,t,n){var r=0;t&&(r|=4),Gr(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function Nr(e){if(!e[jr]){e[jr]=!0,r.forEach(function(t){"selectionchange"!==t&&(Ir.has(t)||Lr(t,!1,e),Lr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Lr("selectionchange",!1,t))}}function Gr(e,t,n,r){switch(Xt(t)){case 1:var o=zt;break;case 4:o=Wt;break;default:o=Vt}n=o.bind(null,t,n,e),o=void 0,!ke||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,o){var i=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;a=a.return}for(;null!==s;){if(null===(a=vo(s)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}s=s.parentNode}}r=r.return}Ae(function(){var r=i,o=ye(n),a=[];e:{var s=Tr.get(e);if(void 0!==s){var l=sn,u=e;switch(e){case"keypress":if(0===Zt(n))break e;case"keydown":case"keyup":l=Dn;break;case"focusin":u="focus",l=fn;break;case"focusout":u="blur",l=fn;break;case"beforeblur":case"afterblur":l=fn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=dn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=hn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Er:case Dr:case Sr:l=pn;break;case Pr:l=Tn;break;case"scroll":l=un;break;case"wheel":l=Mn;break;case"copy":case"cut":case"paste":l=mn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Sn}var c=!!(4&t),d=!c&&"scroll"===e,h=c?null!==s?s+"Capture":null:s;c=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&(null!=(g=Me(p,h))&&c.push(zr(p,g,f)))),d)break;p=p.return}0<c.length&&(s=new l(s,u,null,n,o),a.push({event:s,listeners:c}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===ve||!(u=n.relatedTarget||n.fromElement)||!vo(u)&&!u[fo])&&(l||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?vo(u):null)&&(u!==(d=Ne(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=dn,g="onMouseLeave",h="onMouseEnter",p="mouse",("pointerout"===e||"pointerover"===e)&&(c=Sn,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?s:bo(l),f=null==u?s:bo(u),(s=new c(g,p+"leave",l,n,o)).target=d,s.relatedTarget=f,g=null,vo(o)===r&&((c=new c(h,p+"enter",u,n,o)).target=f,c.relatedTarget=d,g=c),d=g,l&&u)e:{for(h=u,p=0,f=c=l;f;f=Vr(f))p++;for(f=0,g=h;g;g=Vr(g))f++;for(;0<p-f;)c=Vr(c),p--;for(;0<f-p;)h=Vr(h),f--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=Vr(c),h=Vr(h)}c=null}else c=null;null!==l&&$r(a,s,l,c,!1),null!==u&&null!==d&&$r(a,d,u,c,!0)}if("select"===(l=(s=r?bo(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=Xn;else if(Hn(s))if(Un)m=rr;else{m=tr;var v=er}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=nr);switch(m&&(m=m(e,r))?zn(a,m,n,o):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&Y(s,"number",s.value)),v=r?bo(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(fr=v,pr=r,gr=null);break;case"focusout":gr=pr=fr=null;break;case"mousedown":mr=!0;break;case"contextmenu":case"mouseup":case"dragend":mr=!1,vr(a,n,o);break;case"selectionchange":if(hr)break;case"keydown":case"keyup":vr(a,n,o)}var y;if(Bn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Nn?Ln(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Rn&&"ko"!==n.locale&&(Nn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Nn&&(y=Yt()):(qt="value"in(Ut=o)?Ut.value:Ut.textContent,Nn=!0)),0<(v=Wr(r,b)).length&&(b=new vn(b,e,null,n,o),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=jn(n))&&(b.data=y))),(y=In?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(On=!0,_n);case"textInput":return(e=t.data)===_n&&On?null:e;default:return null}}(e,n):function(e,t){if(Nn)return"compositionend"===e||!Bn&&Ln(e,t)?(e=Yt(),Qt=qt=Ut=null,Nn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(o=new vn("onBeforeInput","beforeinput",null,n,o),a.push({event:o,listeners:r}),o.data=y))}_r(a,t)})}function zr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=Me(e,n))&&r.unshift(zr(e,i,o)),null!=(i=Me(e,t))&&r.push(zr(e,i,o))),e=e.return}return r}function Vr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function $r(e,t,n,r,o){for(var i=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,o?null!=(l=Me(n,i))&&a.unshift(zr(n,l,s)):o||null!=(l=Me(n,i))&&a.push(zr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Kr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Ur(e){return("string"==typeof e?e:""+e).replace(Kr,"\n").replace(Xr,"")}function qr(e,t,r){if(t=Ur(t),Ur(e)!==t&&r)throw Error(n(425))}function Qr(){}var Yr=null,Zr=null;function Jr(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var eo="function"==typeof setTimeout?setTimeout:void 0,to="function"==typeof clearTimeout?clearTimeout:void 0,no="function"==typeof Promise?Promise:void 0,ro="function"==typeof queueMicrotask?queueMicrotask:typeof no<"u"?function(e){return no.resolve(null).then(e).catch(oo)}:eo;function oo(e){setTimeout(function(){throw e})}function io(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void Nt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);Nt(t)}function ao(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function so(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var uo=Math.random().toString(36).slice(2),co="__reactFiber$"+uo,ho="__reactProps$"+uo,fo="__reactContainer$"+uo,po="__reactEvents$"+uo,go="__reactListeners$"+uo,mo="__reactHandles$"+uo;function vo(e){var t=e[co];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fo]||n[co]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=so(e);null!==e;){if(n=e[co])return n;e=so(e)}return t}n=(e=n).parentNode}return null}function yo(e){return!(e=e[co]||e[fo])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(n(33))}function wo(e){return e[ho]||null}var xo=[],Co=-1;function Eo(e){return{current:e}}function Do(e){0>Co||(e.current=xo[Co],xo[Co]=null,Co--)}function So(e,t){Co++,xo[Co]=e.current,e.current=t}var Po={},To=Eo(Po),Ao=Eo(!1),Mo=Po;function ko(e,t){var n=e.type.contextTypes;if(!n)return Po;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Bo(e){return null!=(e=e.childContextTypes)}function Fo(){Do(Ao),Do(To)}function Io(e,t,r){if(To.current!==Po)throw Error(n(168));So(To,t),So(Ao,r)}function Ro(e,t,r){var o=e.stateNode;if(t=t.childContextTypes,"function"!=typeof o.getChildContext)return r;for(var i in o=o.getChildContext())if(!(i in t))throw Error(n(108,G(e)||"Unknown",i));return R({},r,o)}function _o(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Po,Mo=To.current,So(To,e),So(Ao,Ao.current),!0}function Oo(e,t,r){var o=e.stateNode;if(!o)throw Error(n(169));r?(e=Ro(e,t,Mo),o.__reactInternalMemoizedMergedChildContext=e,Do(Ao),Do(To),So(To,e)):Do(Ao),So(Ao,r)}var Lo=null,jo=!1,No=!1;function Go(e){null===Lo?Lo=[e]:Lo.push(e)}function Ho(){if(!No&&null!==Lo){No=!0;var e=0,t=mt;try{var n=Lo;for(mt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Lo=null,jo=!1}catch(t){throw null!==Lo&&(Lo=Lo.slice(e+1)),Ve(Qe,Ho),t}finally{mt=t,No=!1}}return null}var zo=[],Wo=0,Vo=null,$o=0,Ko=[],Xo=0,Uo=null,qo=1,Qo="";function Yo(e,t){zo[Wo++]=$o,zo[Wo++]=Vo,Vo=e,$o=t}function Zo(e,t,n){Ko[Xo++]=qo,Ko[Xo++]=Qo,Ko[Xo++]=Uo,Uo=e;var r=qo;e=Qo;var o=32-rt(r)-1;r&=~(1<<o),n+=1;var i=32-rt(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,qo=1<<32-rt(t)+o|n<<o|r,Qo=i+e}else qo=1<<i|n<<o|r,Qo=e}function Jo(e){null!==e.return&&(Yo(e,1),Zo(e,1,0))}function ei(e){for(;e===Vo;)Vo=zo[--Wo],zo[Wo]=null,$o=zo[--Wo],zo[Wo]=null;for(;e===Uo;)Uo=Ko[--Xo],Ko[Xo]=null,Qo=Ko[--Xo],Ko[Xo]=null,qo=Ko[--Xo],Ko[Xo]=null}var ti=null,ni=null,ri=!1,oi=null;function ii(e,t){var n=Mu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ai(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ti=e,ni=ao(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ti=e,ni=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Uo?{id:qo,overflow:Qo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Mu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ti=e,ni=null,!0);default:return!1}}function si(e){return!(!(1&e.mode)||128&e.flags)}function li(e){if(ri){var t=ni;if(t){var r=t;if(!ai(e,t)){if(si(e))throw Error(n(418));t=ao(r.nextSibling);var o=ti;t&&ai(e,t)?ii(o,r):(e.flags=-4097&e.flags|2,ri=!1,ti=e)}}else{if(si(e))throw Error(n(418));e.flags=-4097&e.flags|2,ri=!1,ti=e}}}function ui(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ti=e}function ci(e){if(e!==ti)return!1;if(!ri)return ui(e),ri=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Jr(e.type,e.memoizedProps)),t&&(t=ni)){if(si(e))throw di(),Error(n(418));for(;t;)ii(e,t),t=ao(t.nextSibling)}if(ui(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(n(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){ni=ao(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}ni=null}}else ni=ti?ao(e.stateNode.nextSibling):null;return!0}function di(){for(var e=ni;e;)e=ao(e.nextSibling)}function hi(){ni=ti=null,ri=!1}function fi(e){null===oi?oi=[e]:oi.push(e)}var pi=v.ReactCurrentBatchConfig;function gi(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(n(309));var o=r.stateNode}if(!o)throw Error(n(147,e));var i=o,a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:((t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e})._stringRef=a,t)}if("string"!=typeof e)throw Error(n(284));if(!r._owner)throw Error(n(290,e))}return e}function mi(e,t){throw e=Object.prototype.toString.call(t),Error(n(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vi(e){return(0,e._init)(e._payload)}function yi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function r(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function o(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Bu(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=_u(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var o=n.type;return o===w?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===M&&vi(o)===t.type)?((r=i(t,n.props)).ref=gi(e,t,n),r.return=e,r):((r=Fu(n.type,n.key,n.props,null,e.mode,r)).ref=gi(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ou(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Iu(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=_u(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case y:return(n=Fu(t.type,t.key,t.props,null,e.mode,n)).ref=gi(e,null,t),n.return=e,n;case b:return(t=Ou(t,e.mode,n)).return=e,t;case M:return h(e,(0,t._init)(t._payload),n)}if(Z(t)||F(t))return(t=Iu(t,e.mode,n,null)).return=e,t;mi(e,t)}return null}function f(e,t,n,r){var o=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==o?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case y:return n.key===o?u(e,t,n,r):null;case b:return n.key===o?c(e,t,n,r):null;case M:return f(e,t,(o=n._init)(n._payload),r)}if(Z(n)||F(n))return null!==o?null:d(e,t,n,r,null);mi(e,n)}return null}function p(e,t,n,r,o){if("string"==typeof r&&""!==r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"==typeof r&&null!==r){switch(r.$$typeof){case y:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case M:return p(e,t,n,(0,r._init)(r._payload),o)}if(Z(r)||F(r))return d(t,e=e.get(n)||null,r,o,null);mi(t,r)}return null}return function l(u,c,d,g){if("object"==typeof d&&null!==d&&d.type===w&&null===d.key&&(d=d.props.children),"object"==typeof d&&null!==d){switch(d.$$typeof){case y:e:{for(var m=d.key,v=c;null!==v;){if(v.key===m){if((m=d.type)===w){if(7===v.tag){r(u,v.sibling),(c=i(v,d.props.children)).return=u,u=c;break e}}else if(v.elementType===m||"object"==typeof m&&null!==m&&m.$$typeof===M&&vi(m)===v.type){r(u,v.sibling),(c=i(v,d.props)).ref=gi(u,v,d),c.return=u,u=c;break e}r(u,v);break}t(u,v),v=v.sibling}d.type===w?((c=Iu(d.props.children,u.mode,g,d.key)).return=u,u=c):((g=Fu(d.type,d.key,d.props,null,u.mode,g)).ref=gi(u,c,d),g.return=u,u=g)}return s(u);case b:e:{for(v=d.key;null!==c;){if(c.key===v){if(4===c.tag&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){r(u,c.sibling),(c=i(c,d.children||[])).return=u,u=c;break e}r(u,c);break}t(u,c),c=c.sibling}(c=Ou(d,u.mode,g)).return=u,u=c}return s(u);case M:return l(u,c,(v=d._init)(d._payload),g)}if(Z(d))return function(n,i,s,l){for(var u=null,c=null,d=i,g=i=0,m=null;null!==d&&g<s.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var v=f(n,d,s[g],l);if(null===v){null===d&&(d=m);break}e&&d&&null===v.alternate&&t(n,d),i=a(v,i,g),null===c?u=v:c.sibling=v,c=v,d=m}if(g===s.length)return r(n,d),ri&&Yo(n,g),u;if(null===d){for(;g<s.length;g++)null!==(d=h(n,s[g],l))&&(i=a(d,i,g),null===c?u=d:c.sibling=d,c=d);return ri&&Yo(n,g),u}for(d=o(n,d);g<s.length;g++)null!==(m=p(d,n,g,s[g],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),i=a(m,i,g),null===c?u=m:c.sibling=m,c=m);return e&&d.forEach(function(e){return t(n,e)}),ri&&Yo(n,g),u}(u,c,d,g);if(F(d))return function(i,s,l,u){var c=F(l);if("function"!=typeof c)throw Error(n(150));if(null==(l=c.call(l)))throw Error(n(151));for(var d=c=null,g=s,m=s=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var b=f(i,g,y.value,u);if(null===b){null===g&&(g=v);break}e&&g&&null===b.alternate&&t(i,g),s=a(b,s,m),null===d?c=b:d.sibling=b,d=b,g=v}if(y.done)return r(i,g),ri&&Yo(i,m),c;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=h(i,y.value,u))&&(s=a(y,s,m),null===d?c=y:d.sibling=y,d=y);return ri&&Yo(i,m),c}for(g=o(i,g);!y.done;m++,y=l.next())null!==(y=p(g,i,m,y.value,u))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),s=a(y,s,m),null===d?c=y:d.sibling=y,d=y);return e&&g.forEach(function(e){return t(i,e)}),ri&&Yo(i,m),c}(u,c,d,g);mi(u,d)}return"string"==typeof d&&""!==d||"number"==typeof d?(d=""+d,null!==c&&6===c.tag?(r(u,c.sibling),(c=i(c,d)).return=u,u=c):(r(u,c),(c=_u(d,u.mode,g)).return=u,u=c),s(u)):r(u,c)}}var bi=yi(!0),wi=yi(!1),xi=Eo(null),Ci=null,Ei=null,Di=null;function Si(){Di=Ei=Ci=null}function Pi(e){var t=xi.current;Do(xi),e._currentValue=t}function Ti(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ai(e,t){Ci=e,Di=Ei=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vs=!0),e.firstContext=null)}function Mi(e){var t=e._currentValue;if(Di!==e)if(e={context:e,memoizedValue:t,next:null},null===Ei){if(null===Ci)throw Error(n(308));Ei=e,Ci.dependencies={lanes:0,firstContext:e}}else Ei=Ei.next=e;return t}var ki=null;function Bi(e){null===ki?ki=[e]:ki.push(e)}function Fi(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,Bi(t)):(n.next=o.next,o.next=n),t.interleaved=n,Ii(e,r)}function Ii(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ri=!1;function _i(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Li(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ji(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&Pl){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Ii(e,n)}return null===(o=r.interleaved)?(t.next=t,Bi(r)):(t.next=o.next,o.next=t),r.interleaved=t,Ii(e,n)}function Ni(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Gi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?o=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hi(e,t,n,r){var o=e.updateQueue;Ri=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var l=s,u=l.next;l.next=null,null===a?i=u:a.next=u,a=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==i){var d=o.baseState;for(a=0,c=u=l=null,s=i;;){var h=s.lane,f=s.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,g=s;switch(h=t,f=n,g.tag){case 1:if("function"==typeof(p=g.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=g.payload)?p.call(f,d,h):p))break e;d=R({},d,h);break e;case 2:Ri=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=o.effects)?o.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=f,l=d):c=c.next=f,a|=h;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(h=s).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}if(null===c&&(l=d),o.baseState=l,o.firstBaseUpdate=u,o.lastBaseUpdate=c,null!==(t=o.shared.interleaved)){o=t;do{a|=o.lane,o=o.next}while(o!==t)}else null===i&&(o.shared.lanes=0);Rl|=a,e.lanes=a,e.memoizedState=d}}function zi(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var o=e[t],i=o.callback;if(null!==i){if(o.callback=null,o=r,"function"!=typeof i)throw Error(n(191,i));i.call(o)}}}var Wi={},Vi=Eo(Wi),$i=Eo(Wi),Ki=Eo(Wi);function Xi(e){if(e===Wi)throw Error(n(174));return e}function Ui(e,t){switch(So(Ki,t),So($i,e),So(Vi,Wi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ie(null,"");break;default:t=ie(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Do(Vi),So(Vi,t)}function qi(){Do(Vi),Do($i),Do(Ki)}function Qi(e){Xi(Ki.current);var t=Xi(Vi.current),n=ie(t,e.type);t!==n&&(So($i,e),So(Vi,n))}function Yi(e){$i.current===e&&(Do(Vi),Do($i))}var Zi=Eo(0);function Ji(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ea=[];function ta(){for(var e=0;e<ea.length;e++)ea[e]._workInProgressVersionPrimary=null;ea.length=0}var na=v.ReactCurrentDispatcher,ra=v.ReactCurrentBatchConfig,oa=0,ia=null,aa=null,sa=null,la=!1,ua=!1,ca=0,da=0;function ha(){throw Error(n(321))}function fa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function pa(e,t,r,o,i,a){if(oa=a,ia=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,na.current=null===e||null===e.memoizedState?Ya:Za,e=r(o,i),ua){a=0;do{if(ua=!1,ca=0,25<=a)throw Error(n(301));a+=1,sa=aa=null,t.updateQueue=null,na.current=Ja,e=r(o,i)}while(ua)}if(na.current=Qa,t=null!==aa&&null!==aa.next,oa=0,sa=aa=ia=null,la=!1,t)throw Error(n(300));return e}function ga(){var e=0!==ca;return ca=0,e}function ma(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===sa?ia.memoizedState=sa=e:sa=sa.next=e,sa}function va(){if(null===aa){var e=ia.alternate;e=null!==e?e.memoizedState:null}else e=aa.next;var t=null===sa?ia.memoizedState:sa.next;if(null!==t)sa=t,aa=e;else{if(null===e)throw Error(n(310));e={memoizedState:(aa=e).memoizedState,baseState:aa.baseState,baseQueue:aa.baseQueue,queue:aa.queue,next:null},null===sa?ia.memoizedState=sa=e:sa=sa.next=e}return sa}function ya(e,t){return"function"==typeof t?t(e):t}function ba(e){var t=va(),r=t.queue;if(null===r)throw Error(n(311));r.lastRenderedReducer=e;var o=aa,i=o.baseQueue,a=r.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}o.baseQueue=i=a,r.pending=null}if(null!==i){a=i.next,o=o.baseState;var l=s=null,u=null,c=a;do{var d=c.lane;if((oa&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),o=c.hasEagerState?c.eagerState:e(o,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=h,s=o):u=u.next=h,ia.lanes|=d,Rl|=d}c=c.next}while(null!==c&&c!==a);null===u?s=o:u.next=l,or(o,t.memoizedState)||(vs=!0),t.memoizedState=o,t.baseState=s,t.baseQueue=u,r.lastRenderedState=o}if(null!==(e=r.interleaved)){i=e;do{a=i.lane,ia.lanes|=a,Rl|=a,i=i.next}while(i!==e)}else null===i&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function wa(e){var t=va(),r=t.queue;if(null===r)throw Error(n(311));r.lastRenderedReducer=e;var o=r.dispatch,i=r.pending,a=t.memoizedState;if(null!==i){r.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);or(a,t.memoizedState)||(vs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),r.lastRenderedState=a}return[a,o]}function xa(){}function Ca(e,t){var r=ia,o=va(),i=t(),a=!or(o.memoizedState,i);if(a&&(o.memoizedState=i,vs=!0),o=o.queue,Ra(Sa.bind(null,r,o,e),[e]),o.getSnapshot!==t||a||null!==sa&&1&sa.memoizedState.tag){if(r.flags|=2048,Ma(9,Da.bind(null,r,o,i,t),void 0,null),null===Tl)throw Error(n(349));30&oa||Ea(r,t,i)}return i}function Ea(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ia.updateQueue)?(t={lastEffect:null,stores:null},ia.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Da(e,t,n,r){t.value=n,t.getSnapshot=r,Pa(t)&&Ta(e)}function Sa(e,t,n){return n(function(){Pa(t)&&Ta(e)})}function Pa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch{return!0}}function Ta(e){var t=Ii(e,1);null!==t&&eu(t,e,1,-1)}function Aa(e){var t=ma();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:e},t.queue=e,e=e.dispatch=Ka.bind(null,ia,e),[t.memoizedState,e]}function Ma(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ia.updateQueue)?(t={lastEffect:null,stores:null},ia.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ka(){return va().memoizedState}function Ba(e,t,n,r){var o=ma();ia.flags|=e,o.memoizedState=Ma(1|t,n,void 0,void 0===r?null:r)}function Fa(e,t,n,r){var o=va();r=void 0===r?null:r;var i=void 0;if(null!==aa){var a=aa.memoizedState;if(i=a.destroy,null!==r&&fa(r,a.deps))return void(o.memoizedState=Ma(t,n,i,r))}ia.flags|=e,o.memoizedState=Ma(1|t,n,i,r)}function Ia(e,t){return Ba(8390656,8,e,t)}function Ra(e,t){return Fa(2048,8,e,t)}function _a(e,t){return Fa(4,2,e,t)}function Oa(e,t){return Fa(4,4,e,t)}function La(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ja(e,t,n){return n=null!=n?n.concat([e]):null,Fa(4,4,La.bind(null,t,e),n)}function Na(){}function Ga(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ha(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function za(e,t,n){return 21&oa?(or(n,t)||(n=ht(),ia.lanes|=n,Rl|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,vs=!0),e.memoizedState=n)}function Wa(e,t){var n=mt;mt=0!==n&&4>n?n:4,e(!0);var r=ra.transition;ra.transition={};try{e(!1),t()}finally{mt=n,ra.transition=r}}function Va(){return va().memoizedState}function $a(e,t,n){var r=Jl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xa(e))Ua(t,n);else if(null!==(n=Fi(e,t,n,r))){eu(n,e,r,Zl()),qa(n,t,r)}}function Ka(e,t,n){var r=Jl(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xa(e))Ua(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,or(s,a)){var l=t.interleaved;return null===l?(o.next=o,Bi(t)):(o.next=l.next,l.next=o),void(t.interleaved=o)}}catch{}null!==(n=Fi(e,t,o,r))&&(eu(n,e,r,o=Zl()),qa(n,t,r))}}function Xa(e){var t=e.alternate;return e===ia||null!==t&&t===ia}function Ua(e,t){ua=la=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function qa(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var Qa={readContext:Mi,useCallback:ha,useContext:ha,useEffect:ha,useImperativeHandle:ha,useInsertionEffect:ha,useLayoutEffect:ha,useMemo:ha,useReducer:ha,useRef:ha,useState:ha,useDebugValue:ha,useDeferredValue:ha,useTransition:ha,useMutableSource:ha,useSyncExternalStore:ha,useId:ha,unstable_isNewReconciler:!1},Ya={readContext:Mi,useCallback:function(e,t){return ma().memoizedState=[e,void 0===t?null:t],e},useContext:Mi,useEffect:Ia,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Ba(4194308,4,La.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ba(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ba(4,2,e,t)},useMemo:function(e,t){var n=ma();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ma();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=$a.bind(null,ia,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ma().memoizedState=e},useState:Aa,useDebugValue:Na,useDeferredValue:function(e){return ma().memoizedState=e},useTransition:function(){var e=Aa(!1),t=e[0];return e=Wa.bind(null,e[1]),ma().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var o=ia,i=ma();if(ri){if(void 0===r)throw Error(n(407));r=r()}else{if(r=t(),null===Tl)throw Error(n(349));30&oa||Ea(o,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,Ia(Sa.bind(null,o,a,e),[e]),o.flags|=2048,Ma(9,Da.bind(null,o,a,r,t),void 0,null),r},useId:function(){var e=ma(),t=Tl.identifierPrefix;if(ri){var n=Qo;t=":"+t+"R"+(n=(qo&~(1<<32-rt(qo)-1)).toString(32)+n),0<(n=ca++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=da++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Mi,useCallback:Ga,useContext:Mi,useEffect:Ra,useImperativeHandle:ja,useInsertionEffect:_a,useLayoutEffect:Oa,useMemo:Ha,useReducer:ba,useRef:ka,useState:function(){return ba(ya)},useDebugValue:Na,useDeferredValue:function(e){return za(va(),aa.memoizedState,e)},useTransition:function(){return[ba(ya)[0],va().memoizedState]},useMutableSource:xa,useSyncExternalStore:Ca,useId:Va,unstable_isNewReconciler:!1},Ja={readContext:Mi,useCallback:Ga,useContext:Mi,useEffect:Ra,useImperativeHandle:ja,useInsertionEffect:_a,useLayoutEffect:Oa,useMemo:Ha,useReducer:wa,useRef:ka,useState:function(){return wa(ya)},useDebugValue:Na,useDeferredValue:function(e){var t=va();return null===aa?t.memoizedState=e:za(t,aa.memoizedState,e)},useTransition:function(){return[wa(ya)[0],va().memoizedState]},useMutableSource:xa,useSyncExternalStore:Ca,useId:Va,unstable_isNewReconciler:!1};function es(e,t){if(e&&e.defaultProps){for(var n in t=R({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ts(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:R({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ns={isMounted:function(e){return!!(e=e._reactInternals)&&Ne(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Zl(),o=Jl(e),i=Li(r,o);i.payload=t,null!=n&&(i.callback=n),null!==(t=ji(e,i,o))&&(eu(t,e,o,r),Ni(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Zl(),o=Jl(e),i=Li(r,o);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=ji(e,i,o))&&(eu(t,e,o,r),Ni(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Zl(),r=Jl(e),o=Li(n,r);o.tag=2,null!=t&&(o.callback=t),null!==(t=ji(e,o,r))&&(eu(t,e,r,n),Ni(t,e,r))}};function rs(e,t,n,r,o,i,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!ir(n,r)||!ir(o,i))}function os(e,t,n){var r=!1,o=Po,i=t.contextType;return"object"==typeof i&&null!==i?i=Mi(i):(o=Bo(t)?Mo:To.current,i=(r=null!=(r=t.contextTypes))?ko(e,o):Po),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ns,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function is(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ns.enqueueReplaceState(t,t.state,null)}function as(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},_i(e);var i=t.contextType;"object"==typeof i&&null!==i?o.context=Mi(i):(i=Bo(t)?Mo:To.current,o.context=ko(e,i)),o.state=e.memoizedState,"function"==typeof(i=t.getDerivedStateFromProps)&&(ts(e,t,i,n),o.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(t=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&ns.enqueueReplaceState(o,o.state,null),Hi(e,n,o,r),o.state=e.memoizedState),"function"==typeof o.componentDidMount&&(e.flags|=4194308)}function ss(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var o=n}catch(e){o="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:o,digest:null}}function ls(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function us(e,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var cs="function"==typeof WeakMap?WeakMap:Map;function ds(e,t,n){(n=Li(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zl||(zl=!0,Wl=r),us(0,t)},n}function hs(e,t,n){(n=Li(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){us(0,t)}}var i=e.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&(n.callback=function(){us(0,t),"function"!=typeof r&&(null===Vl?Vl=new Set([this]):Vl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new cs;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Eu.bind(null,e,t,n),t.then(e,e))}function ps(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,o){return 1&e.mode?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Li(-1,1)).tag=2,ji(n,t,1))),n.lanes|=1),e)}var ms=v.ReactCurrentOwner,vs=!1;function ys(e,t,n,r){t.child=null===e?wi(t,null,n,r):bi(t,e.child,n,r)}function bs(e,t,n,r,o){n=n.render;var i=t.ref;return Ai(t,o),r=pa(e,t,n,r,i,o),n=ga(),null===e||vs?(ri&&n&&Jo(t),t.flags|=1,ys(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,zs(e,t,o))}function ws(e,t,n,r,o){if(null===e){var i=n.type;return"function"!=typeof i||ku(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Fu(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,xs(e,t,i,r,o))}if(i=e.child,0===(e.lanes&o)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:ir)(a,r)&&e.ref===t.ref)return zs(e,t,o)}return t.flags|=1,(e=Bu(i,r)).ref=t.ref,e.return=t,t.child=e}function xs(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(ir(i,r)&&e.ref===t.ref){if(vs=!1,t.pendingProps=r=i,0===(e.lanes&o))return t.lanes=e.lanes,zs(e,t,o);131072&e.flags&&(vs=!0)}}return Ds(e,t,n,r,o)}function Cs(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,So(Bl,kl),kl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,So(Bl,kl),kl|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},So(Bl,kl),kl|=n;else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,So(Bl,kl),kl|=r;return ys(e,t,o,n),t.child}function Es(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ds(e,t,n,r,o){var i=Bo(n)?Mo:To.current;return i=ko(t,i),Ai(t,o),n=pa(e,t,n,r,i,o),r=ga(),null===e||vs?(ri&&r&&Jo(t),t.flags|=1,ys(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,zs(e,t,o))}function Ss(e,t,n,r,o){if(Bo(n)){var i=!0;_o(t)}else i=!1;if(Ai(t,o),null===t.stateNode)Hs(e,t),os(t,n,r),as(t,n,r,o),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;"object"==typeof u&&null!==u?u=Mi(u):u=ko(t,u=Bo(n)?Mo:To.current);var c=n.getDerivedStateFromProps,d="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;d||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==u)&&is(t,a,r,u),Ri=!1;var h=t.memoizedState;a.state=h,Hi(t,r,a,o),l=t.memoizedState,s!==r||h!==l||Ao.current||Ri?("function"==typeof c&&(ts(t,n,c,r),l=t.memoizedState),(s=Ri||rs(t,n,s,r,h,l,u))?(d||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Oi(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:es(t.type,s),a.props=u,d=t.pendingProps,h=a.context,"object"==typeof(l=n.contextType)&&null!==l?l=Mi(l):l=ko(t,l=Bo(n)?Mo:To.current);var f=n.getDerivedStateFromProps;(c="function"==typeof f||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==d||h!==l)&&is(t,a,r,l),Ri=!1,h=t.memoizedState,a.state=h,Hi(t,r,a,o);var p=t.memoizedState;s!==d||h!==p||Ao.current||Ri?("function"==typeof f&&(ts(t,n,f,r),p=t.memoizedState),(u=Ri||rs(t,n,u,r,h,p,l)||!1)?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=u):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ps(e,t,n,r,i,o)}function Ps(e,t,n,r,o,i){Es(e,t);var a=!!(128&t.flags);if(!r&&!a)return o&&Oo(t,n,!1),zs(e,t,i);r=t.stateNode,ms.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=bi(t,e.child,null,i),t.child=bi(t,null,s,i)):ys(e,t,s,i),t.memoizedState=r.state,o&&Oo(t,n,!0),t.child}function Ts(e){var t=e.stateNode;t.pendingContext?Io(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Io(0,t.context,!1),Ui(e,t.containerInfo)}function As(e,t,n,r,o){return hi(),fi(o),t.flags|=256,ys(e,t,n,r),t.child}var Ms,ks,Bs,Fs,Is={dehydrated:null,treeContext:null,retryLane:0};function Rs(e){return{baseLanes:e,cachePool:null,transitions:null}}function _s(e,t,r){var o,i=t.pendingProps,a=Zi.current,s=!1,l=!!(128&t.flags);if((o=l)||(o=(null===e||null!==e.memoizedState)&&!!(2&a)),o?(s=!0,t.flags&=-129):(null===e||null!==e.memoizedState)&&(a|=1),So(Zi,1&a),null===e)return li(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},1&i||null===s?s=Ru(l,i,0,null):(s.childLanes=0,s.pendingProps=l),e=Iu(e,i,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Rs(r),t.memoizedState=Is,e):Os(t,l));if(null!==(a=e.memoizedState)&&null!==(o=a.dehydrated))return function(e,t,r,o,i,a,s){if(r)return 256&t.flags?(t.flags&=-257,o=ls(Error(n(422))),Ls(e,t,s,o)):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=o.fallback,i=t.mode,o=Ru({mode:"visible",children:o.children},i,0,null),a=Iu(a,i,s,null),a.flags|=2,o.return=t,a.return=t,o.sibling=a,t.child=o,!!(1&t.mode)&&bi(t,e.child,null,s),t.child.memoizedState=Rs(s),t.memoizedState=Is,a);if(!(1&t.mode))return Ls(e,t,s,null);if("$!"===i.data){if(o=i.nextSibling&&i.nextSibling.dataset)var l=o.dgst;return o=l,Ls(e,t,s,o=ls(a=Error(n(419)),o,void 0))}if(l=0!==(s&e.childLanes),vs||l){if(null!==(o=Tl)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(o.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Ii(e,i),eu(o,e,i,-1))}return fu(),Ls(e,t,s,o=ls(Error(n(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Su.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ni=ao(i.nextSibling),ti=t,ri=!0,oi=null,null!==e&&(Ko[Xo++]=qo,Ko[Xo++]=Qo,Ko[Xo++]=Uo,qo=e.id,Qo=e.overflow,Uo=t),t=Os(t,o.children),t.flags|=4096,t)}(e,t,l,i,o,a,r);if(s){s=i.fallback,l=t.mode,o=(a=e.child).sibling;var u={mode:"hidden",children:i.children};return 1&l||t.child===a?(i=Bu(a,u)).subtreeFlags=14680064&a.subtreeFlags:((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null),null!==o?s=Bu(o,s):(s=Iu(s,l,r,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Rs(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~r,t.memoizedState=Is,i}return e=(s=e.child).sibling,i=Bu(s,{mode:"visible",children:i.children}),!(1&t.mode)&&(i.lanes=r),i.return=t,i.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function Os(e,t){return(t=Ru({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ls(e,t,n,r){return null!==r&&fi(r),bi(t,e.child,null,n),(e=Os(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function js(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ti(e.return,t,n)}function Ns(e,t,n,r,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function Gs(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(ys(e,t,r.children,n),2&(r=Zi.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&js(e,n,t);else if(19===e.tag)js(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(So(Zi,r),1&t.mode)switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===Ji(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Ns(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===Ji(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Ns(t,!0,n,null,i);break;case"together":Ns(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Hs(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zs(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Rl|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(n(153));if(null!==t.child){for(r=Bu(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Bu(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Ws(e,t){if(!ri)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Vs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function $s(e,t,r){var i=t.pendingProps;switch(ei(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vs(t),null;case 1:case 17:return Bo(t.type)&&Fo(),Vs(t),null;case 3:return i=t.stateNode,qi(),Do(Ao),Do(To),ta(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(null===e||null===e.child)&&(ci(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==oi&&(ou(oi),oi=null))),ks(e,t),Vs(t),null;case 5:Yi(t);var a=Xi(Ki.current);if(r=t.type,null!==e&&null!=t.stateNode)Bs(e,t,r,i,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(n(166));return Vs(t),null}if(e=Xi(Vi.current),ci(t)){i=t.stateNode,r=t.type;var s=t.memoizedProps;switch(i[co]=t,i[ho]=s,e=!!(1&t.mode),r){case"dialog":Or("cancel",i),Or("close",i);break;case"iframe":case"object":case"embed":Or("load",i);break;case"video":case"audio":for(a=0;a<Fr.length;a++)Or(Fr[a],i);break;case"source":Or("error",i);break;case"img":case"image":case"link":Or("error",i),Or("load",i);break;case"details":Or("toggle",i);break;case"input":X(i,s),Or("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Or("invalid",i);break;case"textarea":te(i,s),Or("invalid",i)}for(var l in ge(r,s),a=null,s)if(s.hasOwnProperty(l)){var u=s[l];"children"===l?"string"==typeof u?i.textContent!==u&&(!0!==s.suppressHydrationWarning&&qr(i.textContent,u,e),a=["children",u]):"number"==typeof u&&i.textContent!==""+u&&(!0!==s.suppressHydrationWarning&&qr(i.textContent,u,e),a=["children",""+u]):o.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Or("scroll",i)}switch(r){case"input":W(i),Q(i,s,!0);break;case"textarea":W(i),re(i);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(i.onclick=Qr)}i=a,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof i.is?e=l.createElement(r,{is:i.is}):(e=l.createElement(r),"select"===r&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,r),e[co]=t,e[ho]=i,Ms(e,t,!1,!1),t.stateNode=e;e:{switch(l=me(r,i),r){case"dialog":Or("cancel",e),Or("close",e),a=i;break;case"iframe":case"object":case"embed":Or("load",e),a=i;break;case"video":case"audio":for(a=0;a<Fr.length;a++)Or(Fr[a],e);a=i;break;case"source":Or("error",e),a=i;break;case"img":case"image":case"link":Or("error",e),Or("load",e),a=i;break;case"details":Or("toggle",e),a=i;break;case"input":X(e,i),a=K(e,i),Or("invalid",e);break;case"option":default:a=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},a=R({},i,{value:void 0}),Or("invalid",e);break;case"textarea":te(e,i),a=ee(e,i),Or("invalid",e)}for(s in ge(r,a),u=a)if(u.hasOwnProperty(s)){var c=u[s];"style"===s?fe(e,c):"dangerouslySetInnerHTML"===s?null!=(c=c?c.__html:void 0)&&le(e,c):"children"===s?"string"==typeof c?("textarea"!==r||""!==c)&&ue(e,c):"number"==typeof c&&ue(e,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(o.hasOwnProperty(s)?null!=c&&"onScroll"===s&&Or("scroll",e):null!=c&&m(e,s,c,l))}switch(r){case"input":W(e),Q(e,i,!1);break;case"textarea":W(e),re(e);break;case"option":null!=i.value&&e.setAttribute("value",""+H(i.value));break;case"select":e.multiple=!!i.multiple,null!=(s=i.value)?J(e,!!i.multiple,s,!1):null!=i.defaultValue&&J(e,!!i.multiple,i.defaultValue,!0);break;default:"function"==typeof a.onClick&&(e.onclick=Qr)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Vs(t),null;case 6:if(e&&null!=t.stateNode)Fs(e,t,e.memoizedProps,i);else{if("string"!=typeof i&&null===t.stateNode)throw Error(n(166));if(r=Xi(Ki.current),Xi(Vi.current),ci(t)){if(i=t.stateNode,r=t.memoizedProps,i[co]=t,(s=i.nodeValue!==r)&&null!==(e=ti))switch(e.tag){case 3:qr(i.nodeValue,r,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&qr(i.nodeValue,r,!!(1&e.mode))}s&&(t.flags|=4)}else(i=(9===r.nodeType?r:r.ownerDocument).createTextNode(i))[co]=t,t.stateNode=i}return Vs(t),null;case 13:if(Do(Zi),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ri&&null!==ni&&1&t.mode&&!(128&t.flags))di(),hi(),t.flags|=98560,s=!1;else if(s=ci(t),null!==i&&null!==i.dehydrated){if(null===e){if(!s)throw Error(n(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(n(317));s[co]=t}else hi(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Vs(t),s=!1}else null!==oi&&(ou(oi),oi=null),s=!0;if(!s)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=r,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,!!(1&t.mode)&&(null===e||1&Zi.current?0===Fl&&(Fl=3):fu())),null!==t.updateQueue&&(t.flags|=4),Vs(t),null);case 4:return qi(),ks(e,t),null===e&&Nr(t.stateNode.containerInfo),Vs(t),null;case 10:return Pi(t.type._context),Vs(t),null;case 19:if(Do(Zi),null===(s=t.memoizedState))return Vs(t),null;if(i=!!(128&t.flags),null===(l=s.rendering))if(i)Ws(s,!1);else{if(0!==Fl||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(l=Ji(e))){for(t.flags|=128,Ws(s,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;null!==r;)e=i,(s=r).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return So(Zi,1&Zi.current|2),t.child}e=e.sibling}null!==s.tail&&Ue()>Gl&&(t.flags|=128,i=!0,Ws(s,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=Ji(l))){if(t.flags|=128,i=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Ws(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ri)return Vs(t),null}else 2*Ue()-s.renderingStartTime>Gl&&1073741824!==r&&(t.flags|=128,i=!0,Ws(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=s.last)?r.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ue(),t.sibling=null,r=Zi.current,So(Zi,i?1&r|2:1&r),t):(Vs(t),null);case 22:case 23:return uu(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&1&t.mode?!!(1073741824&kl)&&(Vs(t),6&t.subtreeFlags&&(t.flags|=8192)):Vs(t),null;case 24:case 25:return null}throw Error(n(156,t.tag))}function Ks(e,t){switch(ei(t),t.tag){case 1:return Bo(t.type)&&Fo(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return qi(),Do(Ao),Do(To),ta(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Yi(t),null;case 13:if(Do(Zi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(n(340));hi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Do(Zi),null;case 4:return qi(),null;case 10:return Pi(t.type._context),null;case 22:case 23:return uu(),null;default:return null}}Ms=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ks=function(){},Bs=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Xi(Vi.current);var a,s=null;switch(n){case"input":i=K(e,i),r=K(e,r),s=[];break;case"select":i=R({},i,{value:void 0}),r=R({},r,{value:void 0}),s=[];break;case"textarea":i=ee(e,i),r=ee(e,r),s=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Qr)}for(c in ge(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(o.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(s=s||[]).push(c,u)):"children"===c?"string"!=typeof u&&"number"!=typeof u||(s=s||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(o.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Or("scroll",e),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}},Fs=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xs=!1,Us=!1,qs="function"==typeof WeakSet?WeakSet:Set,Qs=null;function Ys(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){Cu(e,t,n)}else n.current=null}function Zs(e,t,n){try{n()}catch(n){Cu(e,t,n)}}var Js=!1;function el(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,void 0!==i&&Zs(t,n,i)}o=o.next}while(o!==r)}}function tl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function nl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function rl(e){var t=e.alternate;null!==t&&(e.alternate=null,rl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[co],delete t[ho],delete t[po],delete t[go],delete t[mo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function il(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags||null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function al(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Qr));else if(4!==r&&null!==(e=e.child))for(al(e,t,n),e=e.sibling;null!==e;)al(e,t,n),e=e.sibling}function sl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(sl(e,t,n),e=e.sibling;null!==e;)sl(e,t,n),e=e.sibling}var ll=null,ul=!1;function cl(e,t,n){for(n=n.child;null!==n;)dl(e,t,n),n=n.sibling}function dl(e,t,n){if(nt&&"function"==typeof nt.onCommitFiberUnmount)try{nt.onCommitFiberUnmount(tt,n)}catch{}switch(n.tag){case 5:Us||Ys(n,t);case 6:var r=ll,o=ul;ll=null,cl(e,t,n),ul=o,null!==(ll=r)&&(ul?(e=ll,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ll.removeChild(n.stateNode));break;case 18:null!==ll&&(ul?(e=ll,n=n.stateNode,8===e.nodeType?io(e.parentNode,n):1===e.nodeType&&io(e,n),Nt(e)):io(ll,n.stateNode));break;case 4:r=ll,o=ul,ll=n.stateNode.containerInfo,ul=!0,cl(e,t,n),ll=r,ul=o;break;case 0:case 11:case 14:case 15:if(!Us&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var i=o,a=i.destroy;i=i.tag,void 0!==a&&(!!(2&i)||!!(4&i))&&Zs(n,t,a),o=o.next}while(o!==r)}cl(e,t,n);break;case 1:if(!Us&&(Ys(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){Cu(n,t,e)}cl(e,t,n);break;case 21:cl(e,t,n);break;case 22:1&n.mode?(Us=(r=Us)||null!==n.memoizedState,cl(e,t,n),Us=r):cl(e,t,n);break;default:cl(e,t,n)}}function hl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new qs),t.forEach(function(t){var r=Pu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function fl(e,t){var r=t.deletions;if(null!==r)for(var o=0;o<r.length;o++){var i=r[o];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ll=l.stateNode,ul=!1;break e;case 3:case 4:ll=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===ll)throw Error(n(160));dl(a,s,i),ll=null,ul=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(e){Cu(i,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)pl(t,e),t=t.sibling}function pl(e,t){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),gl(e),4&o){try{el(3,e,e.return),tl(3,e)}catch(t){Cu(e,e.return,t)}try{el(5,e,e.return)}catch(t){Cu(e,e.return,t)}}break;case 1:fl(t,e),gl(e),512&o&&null!==r&&Ys(r,r.return);break;case 5:if(fl(t,e),gl(e),512&o&&null!==r&&Ys(r,r.return),32&e.flags){var i=e.stateNode;try{ue(i,"")}catch(t){Cu(e,e.return,t)}}if(4&o&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==r?r.memoizedProps:a,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===a.type&&null!=a.name&&U(i,a),me(l,s);var c=me(l,a);for(s=0;s<u.length;s+=2){var d=u[s],h=u[s+1];"style"===d?fe(i,h):"dangerouslySetInnerHTML"===d?le(i,h):"children"===d?ue(i,h):m(i,d,h,c)}switch(l){case"input":q(i,a);break;case"textarea":ne(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?J(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?J(i,!!a.multiple,a.defaultValue,!0):J(i,!!a.multiple,a.multiple?[]:"",!1))}i[ho]=a}catch(t){Cu(e,e.return,t)}}break;case 6:if(fl(t,e),gl(e),4&o){if(null===e.stateNode)throw Error(n(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(t){Cu(e,e.return,t)}}break;case 3:if(fl(t,e),gl(e),4&o&&null!==r&&r.memoizedState.isDehydrated)try{Nt(t.containerInfo)}catch(t){Cu(e,e.return,t)}break;case 4:default:fl(t,e),gl(e);break;case 13:fl(t,e),gl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Nl=Ue())),4&o&&hl(e);break;case 22:if(d=null!==r&&null!==r.memoizedState,1&e.mode?(Us=(c=Us)||d,fl(t,e),Us=c):fl(t,e),gl(e),8192&o){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&1&e.mode)for(Qs=e,d=e.child;null!==d;){for(h=Qs=d;null!==Qs;){switch(p=(f=Qs).child,f.tag){case 0:case 11:case 14:case 15:el(4,f,f.return);break;case 1:Ys(f,f.return);var g=f.stateNode;if("function"==typeof g.componentWillUnmount){o=f,r=f.return;try{t=o,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(e){Cu(o,r,e)}}break;case 5:Ys(f,f.return);break;case 22:if(null!==f.memoizedState){bl(h);continue}}null!==p?(p.return=f,Qs=p):bl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,c?"function"==typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,s=null!=(u=h.memoizedProps.style)&&u.hasOwnProperty("display")?u.display:null,l.style.display=he("display",s))}catch(t){Cu(e,e.return,t)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(t){Cu(e,e.return,t)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),gl(e),4&o&&hl(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(ol(r)){var o=r;break e}r=r.return}throw Error(n(160))}switch(o.tag){case 5:var i=o.stateNode;32&o.flags&&(ue(i,""),o.flags&=-33),sl(e,il(e),i);break;case 3:case 4:var a=o.stateNode.containerInfo;al(e,il(e),a);break;default:throw Error(n(161))}}catch(t){Cu(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ml(e,t,n){Qs=e,vl(e)}function vl(e,t,n){for(var r=!!(1&e.mode);null!==Qs;){var o=Qs,i=o.child;if(22===o.tag&&r){var a=null!==o.memoizedState||Xs;if(!a){var s=o.alternate,l=null!==s&&null!==s.memoizedState||Us;s=Xs;var u=Us;if(Xs=a,(Us=l)&&!u)for(Qs=o;null!==Qs;)l=(a=Qs).child,22===a.tag&&null!==a.memoizedState?wl(o):null!==l?(l.return=a,Qs=l):wl(o);for(;null!==i;)Qs=i,vl(i),i=i.sibling;Qs=o,Xs=s,Us=u}yl(e)}else 8772&o.subtreeFlags&&null!==i?(i.return=o,Qs=i):yl(e)}}function yl(e){for(;null!==Qs;){var t=Qs;if(8772&t.flags){var r=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Us||tl(5,t);break;case 1:var o=t.stateNode;if(4&t.flags&&!Us)if(null===r)o.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:es(t.type,r.memoizedProps);o.componentDidUpdate(i,r.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&zi(t,a,o);break;case 3:var s=t.updateQueue;if(null!==s){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}zi(t,s,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Nt(h)}}}break;default:throw Error(n(163))}Us||512&t.flags&&nl(t)}catch(e){Cu(t,t.return,e)}}if(t===e){Qs=null;break}if(null!==(r=t.sibling)){r.return=t.return,Qs=r;break}Qs=t.return}}function bl(e){for(;null!==Qs;){var t=Qs;if(t===e){Qs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qs=n;break}Qs=t.return}}function wl(e){for(;null!==Qs;){var t=Qs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{tl(4,t)}catch(e){Cu(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(e){Cu(t,o,e)}}var i=t.return;try{nl(t)}catch(e){Cu(t,i,e)}break;case 5:var a=t.return;try{nl(t)}catch(e){Cu(t,a,e)}}}catch(e){Cu(t,t.return,e)}if(t===e){Qs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Qs=s;break}Qs=t.return}}var xl,Cl=Math.ceil,El=v.ReactCurrentDispatcher,Dl=v.ReactCurrentOwner,Sl=v.ReactCurrentBatchConfig,Pl=0,Tl=null,Al=null,Ml=0,kl=0,Bl=Eo(0),Fl=0,Il=null,Rl=0,_l=0,Ol=0,Ll=null,jl=null,Nl=0,Gl=1/0,Hl=null,zl=!1,Wl=null,Vl=null,$l=!1,Kl=null,Xl=0,Ul=0,ql=null,Ql=-1,Yl=0;function Zl(){return 6&Pl?Ue():-1!==Ql?Ql:Ql=Ue()}function Jl(e){return 1&e.mode?2&Pl&&0!==Ml?Ml&-Ml:null!==pi.transition?(0===Yl&&(Yl=ht()),Yl):(0!==(e=mt)||(e=void 0===(e=window.event)?16:Xt(e.type)),e):1}function eu(e,t,r,o){if(50<Ul)throw Ul=0,ql=null,Error(n(185));pt(e,r,o),(!(2&Pl)||e!==Tl)&&(e===Tl&&(!(2&Pl)&&(_l|=r),4===Fl&&iu(e,Ml)),tu(e,o),1===r&&0===Pl&&!(1&t.mode)&&(Gl=Ue()+500,jo&&Ho()))}function tu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-rt(i),s=1<<a,l=o[a];-1===l?(0===(s&n)||0!==(s&r))&&(o[a]=ct(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=ut(e,e===Tl?Ml:0);if(0===r)null!==n&&$e(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&$e(n),1===t)0===e.tag?function(e){jo=!0,Go(e)}(au.bind(null,e)):Go(au.bind(null,e)),ro(function(){!(6&Pl)&&Ho()}),n=null;else{switch(vt(r)){case 1:n=Qe;break;case 4:n=Ye;break;case 16:default:n=Ze;break;case 536870912:n=et}n=Tu(n,nu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function nu(e,t){if(Ql=-1,Yl=0,6&Pl)throw Error(n(327));var r=e.callbackNode;if(wu()&&e.callbackNode!==r)return null;var o=ut(e,e===Tl?Ml:0);if(0===o)return null;if(30&o||0!==(o&e.expiredLanes)||t)t=pu(e,o);else{t=o;var i=Pl;Pl|=2;var a=hu();for((Tl!==e||Ml!==t)&&(Hl=null,Gl=Ue()+500,cu(e,t));;)try{mu();break}catch(t){du(e,t)}Si(),El.current=a,Pl=i,null!==Al?t=0:(Tl=null,Ml=0,t=Fl)}if(0!==t){if(2===t&&(0!==(i=dt(e))&&(o=i,t=ru(e,i))),1===t)throw r=Il,cu(e,0),iu(e,o),tu(e,Ue()),r;if(6===t)iu(e,o);else{if(i=e.current.alternate,!(30&o||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!or(i(),o))return!1}catch{return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)||(t=pu(e,o),2===t&&(a=dt(e),0!==a&&(o=a,t=ru(e,a))),1!==t)))throw r=Il,cu(e,0),iu(e,o),tu(e,Ue()),r;switch(e.finishedWork=i,e.finishedLanes=o,t){case 0:case 1:throw Error(n(345));case 2:case 5:bu(e,jl,Hl);break;case 3:if(iu(e,o),(130023424&o)===o&&10<(t=Nl+500-Ue())){if(0!==ut(e,0))break;if(((i=e.suspendedLanes)&o)!==o){Zl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=eo(bu.bind(null,e,jl,Hl),t);break}bu(e,jl,Hl);break;case 4:if(iu(e,o),(4194240&o)===o)break;for(t=e.eventTimes,i=-1;0<o;){var s=31-rt(o);a=1<<s,(s=t[s])>i&&(i=s),o&=~a}if(o=i,10<(o=(120>(o=Ue()-o)?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*Cl(o/1960))-o)){e.timeoutHandle=eo(bu.bind(null,e,jl,Hl),o);break}bu(e,jl,Hl);break;default:throw Error(n(329))}}}return tu(e,Ue()),e.callbackNode===r?nu.bind(null,e):null}function ru(e,t){var n=Ll;return e.current.memoizedState.isDehydrated&&(cu(e,t).flags|=256),2!==(e=pu(e,t))&&(t=jl,jl=n,null!==t&&ou(t)),e}function ou(e){null===jl?jl=e:jl.push.apply(jl,e)}function iu(e,t){for(t&=~Ol,t&=~_l,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-rt(t),r=1<<n;e[n]=-1,t&=~r}}function au(e){if(6&Pl)throw Error(n(327));wu();var t=ut(e,0);if(!(1&t))return tu(e,Ue()),null;var r=pu(e,t);if(0!==e.tag&&2===r){var o=dt(e);0!==o&&(t=o,r=ru(e,o))}if(1===r)throw r=Il,cu(e,0),iu(e,t),tu(e,Ue()),r;if(6===r)throw Error(n(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bu(e,jl,Hl),tu(e,Ue()),null}function su(e,t){var n=Pl;Pl|=1;try{return e(t)}finally{0===(Pl=n)&&(Gl=Ue()+500,jo&&Ho())}}function lu(e){null!==Kl&&0===Kl.tag&&!(6&Pl)&&wu();var t=Pl;Pl|=1;var n=Sl.transition,r=mt;try{if(Sl.transition=null,mt=1,e)return e()}finally{mt=r,Sl.transition=n,!(6&(Pl=t))&&Ho()}}function uu(){kl=Bl.current,Do(Bl)}function cu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,to(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ei(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Fo();break;case 3:qi(),Do(Ao),Do(To),ta();break;case 5:Yi(r);break;case 4:qi();break;case 13:case 19:Do(Zi);break;case 10:Pi(r.type._context);break;case 22:case 23:uu()}n=n.return}if(Tl=e,Al=e=Bu(e.current,null),Ml=kl=t,Fl=0,Il=null,Ol=_l=Rl=0,jl=Ll=null,null!==ki){for(t=0;t<ki.length;t++)if(null!==(r=(n=ki[t]).interleaved)){n.interleaved=null;var o=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=o,r.next=a}n.pending=r}ki=null}return e}function du(e,t){for(;;){var r=Al;try{if(Si(),na.current=Qa,la){for(var o=ia.memoizedState;null!==o;){var i=o.queue;null!==i&&(i.pending=null),o=o.next}la=!1}if(oa=0,sa=aa=ia=null,ua=!1,ca=0,Dl.current=null,null===r||null===r.return){Fl=1,Il=t,Al=null;break}e:{var a=e,s=r.return,l=r,u=t;if(t=Ml,l.flags|=32768,null!==u&&"object"==typeof u&&"function"==typeof u.then){var c=u,d=l,h=d.tag;if(!(1&d.mode||0!==h&&11!==h&&15!==h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ps(s);if(null!==p){p.flags&=-257,gs(p,s,l,0,t),1&p.mode&&fs(a,c,t),u=c;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(u),t.updateQueue=m}else g.add(u);break e}if(!(1&t)){fs(a,c,t),fu();break e}u=Error(n(426))}else if(ri&&1&l.mode){var v=ps(s);if(null!==v){!(65536&v.flags)&&(v.flags|=256),gs(v,s,l,0,t),fi(ss(u,l));break e}}a=u=ss(u,l),4!==Fl&&(Fl=2),null===Ll?Ll=[a]:Ll.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Gi(a,ds(0,u,t));break e;case 1:l=u;var y=a.type,b=a.stateNode;if(!(128&a.flags||"function"!=typeof y.getDerivedStateFromError&&(null===b||"function"!=typeof b.componentDidCatch||null!==Vl&&Vl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Gi(a,hs(a,l,t));break e}}a=a.return}while(null!==a)}yu(r)}catch(e){t=e,Al===r&&null!==r&&(Al=r=r.return);continue}break}}function hu(){var e=El.current;return El.current=Qa,null===e?Qa:e}function fu(){(0===Fl||3===Fl||2===Fl)&&(Fl=4),null===Tl||!(268435455&Rl)&&!(268435455&_l)||iu(Tl,Ml)}function pu(e,t){var r=Pl;Pl|=2;var o=hu();for((Tl!==e||Ml!==t)&&(Hl=null,cu(e,t));;)try{gu();break}catch(t){du(e,t)}if(Si(),Pl=r,El.current=o,null!==Al)throw Error(n(261));return Tl=null,Ml=0,Fl}function gu(){for(;null!==Al;)vu(Al)}function mu(){for(;null!==Al&&!Ke();)vu(Al)}function vu(e){var t=xl(e.alternate,e,kl);e.memoizedProps=e.pendingProps,null===t?yu(e):Al=t,Dl.current=null}function yu(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Ks(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Fl=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=$s(n,t,kl)))return void(Al=n);if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Fl&&(Fl=5)}function bu(e,t,r){var o=mt,i=Sl.transition;try{Sl.transition=null,mt=1,function(e,t,r,o){do{wu()}while(null!==Kl);if(6&Pl)throw Error(n(327));r=e.finishedWork;var i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(n(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-rt(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}(e,a),e===Tl&&(Al=Tl=null,Ml=0),!(2064&r.subtreeFlags)&&!(2064&r.flags)||$l||($l=!0,Tu(Ze,function(){return wu(),null})),a=!!(15990&r.flags),15990&r.subtreeFlags||a){a=Sl.transition,Sl.transition=null;var s=mt;mt=1;var l=Pl;Pl|=4,Dl.current=null,function(e,t){if(Yr=Ht,cr(e=ur())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var o=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(o&&0!==o.rangeCount){r=o.anchorNode;var i=o.anchorOffset,a=o.focusNode;o=o.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var s=0,l=-1,u=-1,c=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==r||0!==i&&3!==h.nodeType||(l=s+i),h!==a||0!==o&&3!==h.nodeType||(u=s+o),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===r&&++c===i&&(l=s),f===a&&++d===o&&(u=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}r=-1===l||-1===u?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(Zr={focusedElem:e,selectionRange:r},Ht=!1,Qs=t;null!==Qs;)if(e=(t=Qs).child,1028&t.subtreeFlags&&null!==e)e.return=t,Qs=e;else for(;null!==Qs;){t=Qs;try{var g=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:es(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(n(163))}}catch(e){Cu(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Qs=e;break}Qs=t.return}g=Js,Js=!1}(e,r),pl(r,e),dr(Zr),Ht=!!Yr,Zr=Yr=null,e.current=r,ml(r),Xe(),Pl=l,mt=s,Sl.transition=a}else e.current=r;if($l&&($l=!1,Kl=e,Xl=i),a=e.pendingLanes,0===a&&(Vl=null),function(e){if(nt&&"function"==typeof nt.onCommitFiberRoot)try{nt.onCommitFiberRoot(tt,e,void 0,!(128&~e.current.flags))}catch{}}(r.stateNode),tu(e,Ue()),null!==t)for(o=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],o(i.value,{componentStack:i.stack,digest:i.digest});if(zl)throw zl=!1,e=Wl,Wl=null,e;!!(1&Xl)&&0!==e.tag&&wu(),a=e.pendingLanes,1&a?e===ql?Ul++:(Ul=0,ql=e):Ul=0,Ho()}(e,t,r,o)}finally{Sl.transition=i,mt=o}return null}function wu(){if(null!==Kl){var e=vt(Xl),t=Sl.transition,r=mt;try{if(Sl.transition=null,mt=16>e?16:e,null===Kl)var o=!1;else{if(e=Kl,Kl=null,Xl=0,6&Pl)throw Error(n(331));var i=Pl;for(Pl|=4,Qs=e.current;null!==Qs;){var a=Qs,s=a.child;if(16&Qs.flags){var l=a.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Qs=c;null!==Qs;){var d=Qs;switch(d.tag){case 0:case 11:case 15:el(8,d,a)}var h=d.child;if(null!==h)h.return=d,Qs=h;else for(;null!==Qs;){var f=(d=Qs).sibling,p=d.return;if(rl(d),d===c){Qs=null;break}if(null!==f){f.return=p,Qs=f;break}Qs=p}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Qs=a}}if(2064&a.subtreeFlags&&null!==s)s.return=a,Qs=s;else e:for(;null!==Qs;){if(2048&(a=Qs).flags)switch(a.tag){case 0:case 11:case 15:el(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Qs=y;break e}Qs=a.return}}var b=e.current;for(Qs=b;null!==Qs;){var w=(s=Qs).child;if(2064&s.subtreeFlags&&null!==w)w.return=s,Qs=w;else e:for(s=b;null!==Qs;){if(2048&(l=Qs).flags)try{switch(l.tag){case 0:case 11:case 15:tl(9,l)}}catch(e){Cu(l,l.return,e)}if(l===s){Qs=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Qs=x;break e}Qs=l.return}}if(Pl=i,Ho(),nt&&"function"==typeof nt.onPostCommitFiberRoot)try{nt.onPostCommitFiberRoot(tt,e)}catch{}o=!0}return o}finally{mt=r,Sl.transition=t}}return!1}function xu(e,t,n){e=ji(e,t=ds(0,t=ss(n,t),1),1),t=Zl(),null!==e&&(pt(e,1,t),tu(e,t))}function Cu(e,t,n){if(3===e.tag)xu(e,e,n);else for(;null!==t;){if(3===t.tag){xu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Vl||!Vl.has(r))){t=ji(t,e=hs(t,e=ss(n,e),1),1),e=Zl(),null!==t&&(pt(t,1,e),tu(t,e));break}}t=t.return}}function Eu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Zl(),e.pingedLanes|=e.suspendedLanes&n,Tl===e&&(Ml&n)===n&&(4===Fl||3===Fl&&(130023424&Ml)===Ml&&500>Ue()-Nl?cu(e,0):Ol|=n),tu(e,t)}function Du(e,t){0===t&&(1&e.mode?(t=st,!(130023424&(st<<=1))&&(st=4194304)):t=1);var n=Zl();null!==(e=Ii(e,t))&&(pt(e,t,n),tu(e,n))}function Su(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Du(e,n)}function Pu(e,t){var r=0;switch(e.tag){case 13:var o=e.stateNode,i=e.memoizedState;null!==i&&(r=i.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(n(314))}null!==o&&o.delete(t),Du(e,r)}function Tu(e,t){return Ve(e,t)}function Au(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mu(e,t,n,r){return new Au(e,t,n,r)}function ku(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Bu(e,t){var n=e.alternate;return null===n?((n=Mu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Fu(e,t,r,o,i,a){var s=2;if(o=e,"function"==typeof e)ku(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case w:return Iu(r.children,i,a,t);case x:s=8,i|=8;break;case C:return(e=Mu(12,r,t,2|i)).elementType=C,e.lanes=a,e;case P:return(e=Mu(13,r,t,i)).elementType=P,e.lanes=a,e;case T:return(e=Mu(19,r,t,i)).elementType=T,e.lanes=a,e;case k:return Ru(r,i,a,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case E:s=10;break e;case D:s=9;break e;case S:s=11;break e;case A:s=14;break e;case M:s=16,o=null;break e}throw Error(n(130,null==e?e:typeof e,""))}return(t=Mu(s,r,t,i)).elementType=e,t.type=o,t.lanes=a,t}function Iu(e,t,n,r){return(e=Mu(7,e,r,t)).lanes=n,e}function Ru(e,t,n,r){return(e=Mu(22,e,r,t)).elementType=k,e.lanes=n,e.stateNode={isHidden:!1},e}function _u(e,t,n){return(e=Mu(6,e,null,t)).lanes=n,e}function Ou(e,t,n){return(t=Mu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Lu(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ft(0),this.expirationTimes=ft(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ft(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function ju(e,t,n,r,o,i,a,s,l){return e=new Lu(e,t,n,s,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Mu(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_i(i),e}function Nu(e){if(!e)return Po;e:{if(Ne(e=e._reactInternals)!==e||1!==e.tag)throw Error(n(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Bo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(n(171))}if(1===e.tag){var r=e.type;if(Bo(r))return Ro(e,r,t)}return t}function Gu(e,t,n,r,o,i,a,s,l){return(e=ju(n,r,!0,e,0,i,0,s,l)).context=Nu(null),n=e.current,(i=Li(r=Zl(),o=Jl(n))).callback=t??null,ji(n,i,o),e.current.lanes=o,pt(e,o,r),tu(e,r),e}function Hu(e,t,n,r){var o=t.current,i=Zl(),a=Jl(o);return n=Nu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Li(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=ji(o,t,a))&&(eu(e,o,a,i),Ni(e,o,a)),a}function zu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Vu(e,t){Wu(e,t),(e=e.alternate)&&Wu(e,t)}xl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ao.current)vs=!0;else{if(0===(e.lanes&r)&&!(128&t.flags))return vs=!1,function(e,t,n){switch(t.tag){case 3:Ts(t),hi();break;case 5:Qi(t);break;case 1:Bo(t.type)&&_o(t);break;case 4:Ui(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;So(xi,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(So(Zi,1&Zi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?_s(e,t,n):(So(Zi,1&Zi.current),null!==(e=zs(e,t,n))?e.sibling:null);So(Zi,1&Zi.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return Gs(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),So(Zi,Zi.current),r)break;return null;case 22:case 23:return t.lanes=0,Cs(e,t,n)}return zs(e,t,n)}(e,t,r);vs=!!(131072&e.flags)}else vs=!1,ri&&1048576&t.flags&&Zo(t,$o,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;Hs(e,t),e=t.pendingProps;var i=ko(t,To.current);Ai(t,r),i=pa(null,t,o,e,i,r);var a=ga();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Bo(o)?(a=!0,_o(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,_i(t),i.updater=ns,t.stateNode=i,i._reactInternals=t,as(t,o,e,r),t=Ps(null,t,o,!0,a,r)):(t.tag=0,ri&&a&&Jo(t),ys(null,t,i,r),t=t.child),t;case 16:o=t.elementType;e:{switch(Hs(e,t),e=t.pendingProps,o=(i=o._init)(o._payload),t.type=o,i=t.tag=function(e){if("function"==typeof e)return ku(e)?1:0;if(null!=e){if((e=e.$$typeof)===S)return 11;if(e===A)return 14}return 2}(o),e=es(o,e),i){case 0:t=Ds(null,t,o,e,r);break e;case 1:t=Ss(null,t,o,e,r);break e;case 11:t=bs(null,t,o,e,r);break e;case 14:t=ws(null,t,o,es(o.type,e),r);break e}throw Error(n(306,o,""))}return t;case 0:return o=t.type,i=t.pendingProps,Ds(e,t,o,i=t.elementType===o?i:es(o,i),r);case 1:return o=t.type,i=t.pendingProps,Ss(e,t,o,i=t.elementType===o?i:es(o,i),r);case 3:e:{if(Ts(t),null===e)throw Error(n(387));o=t.pendingProps,i=(a=t.memoizedState).element,Oi(e,t),Hi(t,o,null,r);var s=t.memoizedState;if(o=s.element,a.isDehydrated){if(a={element:o,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=As(e,t,o,r,i=ss(Error(n(423)),t));break e}if(o!==i){t=As(e,t,o,r,i=ss(Error(n(424)),t));break e}for(ni=ao(t.stateNode.containerInfo.firstChild),ti=t,ri=!0,oi=null,r=wi(t,null,o,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(hi(),o===i){t=zs(e,t,r);break e}ys(e,t,o,r)}t=t.child}return t;case 5:return Qi(t),null===e&&li(t),o=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,Jr(o,i)?s=null:null!==a&&Jr(o,a)&&(t.flags|=32),Es(e,t),ys(e,t,s,r),t.child;case 6:return null===e&&li(t),null;case 13:return _s(e,t,r);case 4:return Ui(t,t.stateNode.containerInfo),o=t.pendingProps,null===e?t.child=bi(t,null,o,r):ys(e,t,o,r),t.child;case 11:return o=t.type,i=t.pendingProps,bs(e,t,o,i=t.elementType===o?i:es(o,i),r);case 7:return ys(e,t,t.pendingProps,r),t.child;case 8:case 12:return ys(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(o=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,So(xi,o._currentValue),o._currentValue=s,null!==a)if(or(a.value,s)){if(a.children===i.children&&!Ao.current){t=zs(e,t,r);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var u=l.firstContext;null!==u;){if(u.context===o){if(1===a.tag){(u=Li(-1,r&-r)).tag=2;var c=a.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}a.lanes|=r,null!==(u=a.alternate)&&(u.lanes|=r),Ti(a.return,r,t),l.lanes|=r;break}u=u.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(n(341));s.lanes|=r,null!==(l=s.alternate)&&(l.lanes|=r),Ti(s,r,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}ys(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,o=t.pendingProps.children,Ai(t,r),o=o(i=Mi(i)),t.flags|=1,ys(e,t,o,r),t.child;case 14:return i=es(o=t.type,t.pendingProps),ws(e,t,o,i=es(o.type,i),r);case 15:return xs(e,t,t.type,t.pendingProps,r);case 17:return o=t.type,i=t.pendingProps,i=t.elementType===o?i:es(o,i),Hs(e,t),t.tag=1,Bo(o)?(e=!0,_o(t)):e=!1,Ai(t,r),os(t,o,i),as(t,o,i,r),Ps(null,t,o,!0,e,r);case 19:return Gs(e,t,r);case 22:return Cs(e,t,r)}throw Error(n(156,t.tag))};var $u="function"==typeof reportError?reportError:function(e){console.error(e)};function Ku(e){this._internalRoot=e}function Xu(e){this._internalRoot=e}function Uu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qu(){}function Yu(e,t,n,r,o){var i=n._reactRootContainer;if(i){var a=i;if("function"==typeof o){var s=o;o=function(){var e=zu(a);s.call(e)}}Hu(t,a,e,o)}else a=function(e,t,n,r,o){if(o){if("function"==typeof r){var i=r;r=function(){var e=zu(a);i.call(e)}}var a=Gu(t,r,e,0,null,!1,0,"",Qu);return e._reactRootContainer=a,e[fo]=a.current,Nr(8===e.nodeType?e.parentNode:e),lu(),a}for(;o=e.lastChild;)e.removeChild(o);if("function"==typeof r){var s=r;r=function(){var e=zu(l);s.call(e)}}var l=ju(e,0,!1,null,0,!1,0,"",Qu);return e._reactRootContainer=l,e[fo]=l.current,Nr(8===e.nodeType?e.parentNode:e),lu(function(){Hu(t,l,n,r)}),l}(n,t,e,o,r);return zu(a)}Xu.prototype.render=Ku.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(n(409));Hu(e,t,null,null)},Xu.prototype.unmount=Ku.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lu(function(){Hu(null,e,null,null)}),t[fo]=null}},Xu.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<kt.length&&0!==t&&t<kt[n].priority;n++);kt.splice(n,0,e),0===n&&Rt(e)}},yt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=lt(t.pendingLanes);0!==n&&(gt(t,1|n),tu(t,Ue()),!(6&Pl)&&(Gl=Ue()+500,Ho()))}break;case 13:lu(function(){var t=Ii(e,1);if(null!==t){var n=Zl();eu(t,e,1,n)}}),Vu(e,1)}},bt=function(e){if(13===e.tag){var t=Ii(e,134217728);if(null!==t)eu(t,e,134217728,Zl());Vu(e,134217728)}},wt=function(e){if(13===e.tag){var t=Jl(e),n=Ii(e,t);if(null!==n)eu(n,e,t,Zl());Vu(e,t)}},xt=function(){return mt},Ct=function(e,t){var n=mt;try{return mt=e,t()}finally{mt=n}},be=function(e,t,r){switch(t){case"input":if(q(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var o=r[t];if(o!==e&&o.form===e.form){var i=wo(o);if(!i)throw Error(n(90));V(o),q(o,i)}}}break;case"textarea":ne(e,r);break;case"select":null!=(t=r.value)&&J(e,!!r.multiple,t,!1)}},Se=su,Pe=lu;var Zu={usingClientEntryPoint:!1,Events:[yo,bo,wo,Ee,De,su]},Ju={findFiberByHostInstance:vo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ec={bundleType:Ju.bundleType,version:Ju.version,rendererPackageName:Ju.rendererPackageName,rendererConfig:Ju.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=ze(e))?null:e.stateNode},findFiberByHostInstance:Ju.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tc.isDisabled&&tc.supportsFiber)try{tt=tc.inject(ec),nt=tc}catch{}}return lo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zu,lo.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Uu(t))throw Error(n(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:b,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,r)},lo.createRoot=function(e,t){if(!Uu(e))throw Error(n(299));var r=!1,o="",i=$u;return null!=t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(o=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=ju(e,1,!1,null,0,r,0,o,i),e[fo]=t.current,Nr(8===e.nodeType?e.parentNode:e),new Ku(t)},lo.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t)throw"function"==typeof e.render?Error(n(188)):(e=Object.keys(e).join(","),Error(n(268,e)));return e=null===(e=ze(t))?null:e.stateNode},lo.flushSync=function(e){return lu(e)},lo.hydrate=function(e,t,r){if(!qu(t))throw Error(n(200));return Yu(null,e,t,!0,r)},lo.hydrateRoot=function(e,t,r){if(!Uu(e))throw Error(n(405));var o=null!=r&&r.hydratedSources||null,i=!1,a="",s=$u;if(null!=r&&(!0===r.unstable_strictMode&&(i=!0),void 0!==r.identifierPrefix&&(a=r.identifierPrefix),void 0!==r.onRecoverableError&&(s=r.onRecoverableError)),t=Gu(t,null,e,1,r??null,i,0,a,s),e[fo]=t.current,Nr(e),o)for(e=0;e<o.length;e++)i=(i=(r=o[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Xu(t)},lo.render=function(e,t,r){if(!qu(t))throw Error(n(200));return Yu(null,e,t,!1,r)},lo.unmountComponentAtNode=function(e){if(!qu(e))throw Error(n(40));return!!e._reactRootContainer&&(lu(function(){Yu(null,null,e,!1,function(){e._reactRootContainer=null,e[fo]=null})}),!0)},lo.unstable_batchedUpdates=su,lo.unstable_renderSubtreeIntoContainer=function(e,t,r,o){if(!qu(r))throw Error(n(200));if(null==e||void 0===e._reactInternals)throw Error(n(38));return Yu(e,t,r,!1,o)},lo.version="18.3.1-next-f1338f8080-20240426",lo}function EE(){if(Ky)return L7.exports;return Ky=1,function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||"function"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),L7.exports=hb(),L7.exports}function db(){if(Yy)return em;Yy=1;var e=EE();return em.createRoot=e.createRoot,em.hydrateRoot=e.hydrateRoot,em}var z3=db();const gb=[{id:"Sfftf",type:"geometry",shape:"terminal",angle:0,opacity:1,textHeight:20,text:{children:[{text:""}],align:"center"},points:[[-276.50609579402317,624.50390625],[-156.50609579402317,684.50390625]],strokeWidth:2},{id:"aMJWD",type:"geometry",shape:"process",angle:0,opacity:1,textHeight:20,text:{children:[{text:""}],align:"center"},points:[[-71.50609579402317,464.50390625],[48.49390420597683,524.50390625]],strokeWidth:2},{id:"FHSxH",type:"geometry",shape:"decision",angle:0,opacity:1,textHeight:20,text:{children:[{text:""}],align:"center"},points:[[-286.50609579402317,459.50390625],[-146.50609579402317,529.50390625]],strokeWidth:2},{id:"xnnhM",type:"geometry",shape:"process",angle:0,opacity:1,textHeight:20,text:{children:[{text:""}],align:"center"},points:[[-276.50609579402317,344.50390625],[-156.50609579402317,404.50390625]],strokeWidth:2},{id:"FAkXk",type:"geometry",shape:"terminal",angle:0,opacity:1,textHeight:20,text:{children:[{text:""}],align:"center"},points:[[-276.50609579402317,229.50390625],[-156.50609579402317,289.50390625]],strokeWidth:2},{id:"mrdfi",type:"line",shape:"elbow",source:{marker:"none",connection:[.5,1],boundId:"aMJWD"},texts:[],target:{marker:"arrow",connection:[1,.5],boundId:"Sfftf"},opacity:1,points:[[-11.506095794023167,524.50390625],[-156.50609579402317,654.50390625]],strokeWidth:2},{id:"bjjcw",type:"line",shape:"elbow",source:{marker:"none",connection:[1,.5],boundId:"FHSxH"},texts:[{text:{children:[{text:""}]},position:.5,width:14,height:20}],target:{marker:"arrow",connection:[0,.5],boundId:"aMJWD"},opacity:1,points:[[-146.50609579402317,494.50390625],[-71.50609579402317,494.50390625]],strokeWidth:2},{id:"mnzKm",type:"line",shape:"elbow",source:{marker:"none",connection:[.5,1],boundId:"FHSxH"},texts:[{text:{children:[{text:""}]},position:.5,width:14,height:20}],target:{marker:"arrow",connection:[.5,0],boundId:"Sfftf"},opacity:1,points:[[-216.50609579402317,529.50390625],[-216.50609579402317,624.50390625]],strokeWidth:2},{id:"bJmWK",type:"line",shape:"elbow",source:{marker:"none",connection:[.5,1],boundId:"xnnhM"},texts:[],target:{marker:"arrow",connection:[.5,0],boundId:"FHSxH"},opacity:1,points:[[-216.50609579402317,404.50390625],[-216.50609579402317,459.50390625]],strokeWidth:2},{id:"zZtTs",type:"line",shape:"elbow",source:{marker:"none",connection:[.5,1],boundId:"FAkXk"},texts:[],target:{marker:"arrow",connection:[.5,0],boundId:"xnnhM"},opacity:1,points:[[-216.50609579402317,289.50390625],[-216.50609579402317,344.50390625]],strokeWidth:2},{type:"mindmap",id:"rzdDJ",rightNodeCount:4,data:{topic:{children:[{text:""}]}},children:[{id:"WKQyj",data:{topic:{children:[{text:""}]}},children:[{id:"RYSRd",data:{topic:{children:[{text:""}]}},children:[{id:"nDBRj",data:{topic:{children:[{text:""}]}},children:[],width:14,height:20}],width:14,height:20}],width:42,height:20},{id:"PWzAD",data:{topic:{children:[{text:""}]}},children:[{id:"bTRmh",data:{topic:{children:[{text:""}]}},children:[{id:"bnZEJ",data:{topic:{children:[{text:""}]}},children:[],width:14,height:20}],width:14,height:20}],width:42,height:20},{id:"nJTYp",data:{topic:{children:[{text:""}]}},children:[{id:"GtyaH",data:{topic:{children:[{text:""}]}},children:[{id:"JsPEN",data:{topic:{children:[{text:""}]}},children:[],width:14,height:20}],width:14,height:20}],width:42,height:20},{id:"aCpyY",data:{topic:{children:[{text:""}]}},children:[{id:"iHynm",data:{topic:{children:[{text:""}]}},children:[{id:"TiZGR",data:{topic:{children:[{text:""}]}},children:[],width:14,height:20}],width:14,height:20}],width:42,height:20}],width:72,height:25,isRoot:!0,points:[[248.24308817248368,470.83369157012714]]},{id:"KXysP",type:"freehand",shape:"feltTipPen",points:[[42.91255547331053,302.4106436724954],[42.91255547331053,302.4106436724954],[42.91255547331053,302.94303472562143],[42.91255547331053,303.6494630350447],[43.30577852049311,305.2479999310129],[43.56933178275932,307.7310582325393],[43.739438069128084,311.12389489834214],[43.855740766990095,315.8164264100736],[43.96492597868843,322.6297134163672],[44.04510428695181,331.4298388256405],[43.800067978237905,341.65545526338],[43.57330869752974,352.71036640029735],[43.07346103637457,363.90530146670363],[42.36826123801535,373.77911119731317],[41.80176985242798,382.6007917969476],[41.050101023702894,390.22783046821706],[40.13474095313774,396.15692679809973],[39.39258212224382,400.6820450814642],[38.54748622256426,403.7768437354819],[37.6139535260923,405.2185182175875],[36.92333546175661,405.2964726869589],[36.131425080979454,404.20079465502687],[35.50071089523186,401.899151188188],[34.73785580109626,398.6839479717576]],strokeWidth:2},{id:"ieFQi",type:"freehand",shape:"feltTipPen",points:[[25.61158363876399,370.9967488504811],[24.916797897797608,369.6071773685483],[24.67749697208211,368.6131714048036],[24.568808312533577,367.69766584799555],[24.885076423453768,366.7492749338374],[25.814401426806455,365.80719346179495],[27.472139546659776,364.8344983351174],[29.643691195005033,363.49568318743997],[32.693254384731574,361.9420582621281],[36.67141481223808,360.52686710208155],[41.460509155073225,358.7994936728549],[46.363154873429096,357.5239529722815],[51.357258169067165,356.2862923784672],[56.080029524996746,355.0491584530558],[60.609899785114806,353.4775345173878],[64.56194534795014,352.02103573276264],[68.11000361516409,350.60845154555255],[71.0432829003974,348.88126019241946]],strokeWidth:2},{id:"ZjTpX",type:"freehand",shape:"feltTipPen",points:[[68.86401322513058,312.91491483450346],[68.1735521778042,310.84353169252546],[67.41961422156675,309.6087095594078],[67.00428402343306,309.3536935515943],[66.81450089413721,310.0550514771515],[66.34038086399784,311.9321737730109],[65.99930516212868,314.9252733774777],[65.76493120773563,319.0075757836469],[65.50698001538291,324.8454447611596],[65.02776614620694,332.64203520547954],[64.67902100438306,341.6264849819357],[64.11463195585026,351.0762550531984],[63.657958293810964,360.48902188913536],[63.04473447686752,368.75232276852813],[62.55449492935492,375.95277981063674],[62.18436301867911,381.56388568202357],[61.893086608457736,386.0039779745096],[62.00383585376545,389.32395830976594],[62.44846840613474,390.88398031753724],[63.15060860052046,391.07489696871954],[64.34449034644518,390.5884944484836],[65.64211346916642,389.4261418477857],[67.25944277236914,387.782242059898],[69.23165633563673,385.76120575866327],[71.71743027002805,383.19494124915974],[74.20940897208703,380.6129718614996],[76.77953783638219,377.6509795241994],[79.34979535526082,374.4745011719527],[81.89429223163853,370.7737675988022],[84.10618191487475,367.04968089075675],[86.03563505299923,363.63088507493677],[87.46080352054906,360.399521388795],[88.1056750656117,357.6989220306362],[88.16828991777567,355.7236120330629],[87.48244052706974,355.00434990648984],[86.2333550765257,355.27069617696844],[84.51910378471422,356.9340997592056],[82.51573374887522,359.32984726594015],[80.27308198379643,362.24551851202096],[78.21667296709421,365.22803860275263],[76.35201341247313,368.5401097166253],[74.99308933654112,371.6932036120464],[74.35212759703364,374.70821482483126],[74.60967360095816,377.26474387207355],[75.8849959549687,379.3530494492573],[77.94172322119522,380.842715697145],[80.57299755293872,381.8430887164298],[83.95715202891785,382.2149938287469],[87.7255628157082,381.7306166114225],[91.40530995863634,380.2991663616734],[95.13913472270957,378.13128514703686],[98.92708765115646,375.7552142431162],[102.0579850561092,372.9253456761065],[104.97507141472926,369.44997213897597]],strokeWidth:2},{id:"BcwPw",type:"freehand",shape:"feltTipPen",points:[[107.17330800162682,315.3864822394383],[107.17330800162682,314.68788165725556],[107.68605557639017,312.90885394396474],[107.96149974513816,313.2362923673821],[108.10703733793963,315.0497318130668],[107.8487479673318,318.03523127197906],[107.32153980175809,322.12789466339774],[106.61305306052401,327.6496629440474],[105.74690506062763,335.00159663015376],[104.73739866196371,343.78755873208894],[103.94267964865736,352.97766303651343],[103.35592288485196,361.47102300039325],[102.91428825429313,368.76097715745465],[102.6058707992234,374.9056149852507],[102.71664913860292,379.9377566430242],[103.17859970557953,383.6504834901055],[103.92926148783505,386.2850629415473],[105.18518596763676,387.2232908455765],[106.47876774090406,386.58627383548384],[108.42878794523818,384.57530357161824],[110.29842036408337,381.5909146492971],[112.34070966123869,377.28716626469696]],strokeWidth:2},{id:"yMmdM",type:"freehand",shape:"feltTipPen",points:[[128.1816309435763,331.4516703715174],[129.51989239862593,327.43688600636807],[131.005085696143,323.4655010709533],[132.17321403650323,320.22803619761754],[133.24924577177063,317.90628029633746],[134.02975227964959,316.5798884844974],[134.14783424896297,316.54041718292166],[133.8926984321866,317.4977479623561],[133.22287144213902,318.7988827390612],[132.27887681412,321.3442647147925],[130.829808383076,324.8231649206603],[129.27178361773264,329.3964588424354],[127.78393542349028,334.4312208988461],[126.31888454196638,340.2327386833279],[125.22792882378127,346.5727097657512],[124.13664240037093,353.24911989309595],[123.36064559305925,359.88700063912194],[122.81705197935372,366.0875872230375],[122.79462123094964,371.3624312339792],[123.15298153689861,375.5286555827964],[123.81108128708121,378.64043637310743],[124.6839217725904,380.3996198544631],[125.97026539321524,380.7890049944302],[127.99056067292241,380.19213831837743],[130.21153900142696,378.88476388393275],[132.56469019269213,377.07184390433423],[134.71141990522602,374.91101506003025],[136.96790159302333,372.5508270030653],[138.9351434822873,370.14526674676773],[140.72162313101268,367.6906625775785],[142.03572860518085,365.5229081393748],[142.89232465753918,363.3325348487063],[143.47467228900274,361.3929185298751],[143.84497915370986,359.6507432215033],[144.08901675659746,358.05932667710414],[143.8855064656289,356.820346202075],[143.34705522373548,356.3725972874557],[142.5808927595545,356.7898143492387],[141.9800274132959,357.49246689183866],[141.20573421822047,358.75234451256193],[140.60413838294454,360.40611171229585],[140.11465596613886,362.41982095785744],[139.76488822540597,364.9797643765863],[139.54737858625236,367.56314059669813],[139.74002812916643,370.2232473322459],[140.26313308226082,372.78694339848727],[141.0063724813411,375.06357617497207],[142.27660832589373,376.7366991982256],[143.90287253970297,377.2456393097712],[145.77666987749132,376.86319717881844],[147.58367859613742,375.4638233638746],[149.25082847105915,373.33115185586604],[150.50962222932145,370.61436904767044],[151.43056032976693,367.46666561075864],[151.44918900033605,364.2979858863094],[150.68786139509513,361.64371212257294],[148.71372979842073,359.9930422568298],[146.43462336140402,359.1790375455451]],strokeWidth:2},{id:"mGnrA",type:"freehand",shape:"feltTipPen",points:[[177.499248662022,358.6389118258051],[178.19838756103655,357.240634027776],[178.44740448759654,357.73951734758367],[178.55074397484105,359.33715074880394],[178.61014442712673,361.4559598986337],[178.64812496426435,364.2721952687746],[178.67290254524488,367.2007471343571],[179.01405705257372,370.25629081582184],[179.32285897543971,373.5847859160079],[179.84516425618978,376.4537648810213],[180.89634486087044,378.84118449524004],[182.04776635223294,380.5504960546162],[183.59627761223265,381.1254591487498],[185.41297733632092,380.38858883018776],[187.4644196745192,378.70642262542907],[190.0164112387286,376.2831107782752],[192.61780039149068,373.0528249699667],[195.21903098900867,369.54518732001935],[197.46178243734954,366.1757458818859],[199.45547340950435,363.28229190347093],[201.02062392742647,361.29363533703264],[201.6806297994729,360.75294306951065],[201.77853184386782,361.7431025372819],[201.72497431135622,363.63138804040074],[201.29432857716762,366.2245554151353],[200.87616025463996,369.3207624083346],[200.50422730959127,372.52586028824345],[200.5296583169607,375.60774436001003],[200.89620266978778,378.2107264732288],[201.87814701245662,380.18178744391145],[203.3237210060252,381.1444162192723],[205.0952749780102,381.0964166703482],[207.12816635710493,380.2710789162705],[209.69166653409167,378.53143858393224],[212.3259393904696,376.11874256230595],[214.96944377406982,373.1964359099332],[217.6021329743906,369.60896619783244],[220.1777634274652,365.88642929980443],[222.37298449208703,362.7935994579123],[223.6327261608729,360.8606551033893],[224.5684389548988,359.7015188824592],[224.848266046967,358.9966931873808],[224.61214610266467,358.909744955666],[224.33578711229762,359.2864283518914],[224.33158681173774,359.7816923132753],[224.33524221214162,359.9371871220031],[224.5894090448324,360.01990397554465]],strokeWidth:2},{id:"zZrtc",type:"freehand",shape:"feltTipPen",points:[[235.5810826780001,358.6389118258051],[234.87964309260298,358.6389118258051],[234.61889445335038,358.1611628971107],[234.12449763453247,357.8656015196187],[233.46096624185958,357.7287023810416],[232.64446222875682,357.96746526656835],[231.76248040139313,358.80157625025123],[231.11962755143333,360.3701824969706],[230.17840909863168,362.6051131656107],[229.4605095880559,365.37953360092007],[228.64780049405414,368.46029452436534],[228.04048779767805,371.5130428011137],[227.9466860371993,374.48234753046864],[228.57108726883013,376.7707524845849],[229.75509474791085,378.03104531888886],[231.33021885632598,378.2125552146311],[233.2322381762786,377.24153734271596],[235.350270710728,375.3812154051514],[237.66842033402082,372.8432426035336],[239.49839693217888,369.784392518722],[241.1186238910853,366.75311790215375],[241.97995651143202,363.75648976309395],[242.20144532604337,361.4990092726251],[241.62986112851473,359.9686264420855],[240.7453803173824,359.4909918772258],[239.70060619713928,359.61493973409625],[238.46628906983943,359.86025588147396],[237.4495263714012,360.48134818521913],[237.32546352205378,361.03727631242265],[237.67287740498483,361.4655667580785],[238.6168285626605,361.8240157781095],[240.09541291123065,361.7730616971306],[241.94515372652637,361.6449551519184],[244.0967417348616,361.5205918740306],[246.47485211045438,361.7366995224559],[248.5281031434509,362.2144873500386],[250.0551312107114,363.24407262563483],[251.141761027491,365.0075690683382],[251.57281377925102,367.3754897553393],[251.47296243247825,369.8655611461757],[250.9934349814344,372.4362369970025],[250.53594587826825,374.7619348242309],[249.76259042304292,376.65352381560507],[249.13345875134888,377.59033921163],[249.01758827576901,377.5135455035091],[249.2624580703403,376.38359800758855],[250.12886115846942,374.1032174977402],[251.49417534682476,370.9500521532448],[253.27634649718476,367.34397132727764],[255.34885490762855,363.50176547657185],[257.57968519334173,360.0180973881018],[259.93922766570523,357.0787636938888],[262.0338021629971,354.5988338504333]],strokeWidth:2},{id:"yrTcA",type:"freehand",shape:"feltTipPen",points:[[278.8335122643667,328.9801029665826],[278.8335122643667,327.58830961444465],[278.8335122643667,326.5959858143718],[278.8335122643667,325.2256164828744],[279.2202967000033,324.008793202733],[279.4897740257475,322.8820472857736],[279.64959309551983,322.8548143681749],[279.76489652259744,323.81932610205087],[279.55136734276704,325.7282939759892],[279.0469836389587,328.9265161868364],[278.32282063931353,333.4341849751875],[277.10897753909836,338.967797349744],[275.80804316619884,345.12771157867274],[274.17889365103616,352.1356790585608],[272.6178913237164,358.64921406843797],[271.41762031628906,364.19170052087367],[270.54105291047614,368.60978897979686],[270.4934399784657,372.05877484991225],[271.21196242857883,373.64407770722056],[272.48962823800144,373.91799434599244],[274.1945640050822,372.91718788023474],[276.56099368131737,370.8606177518944],[279.05255793107864,368.16885395093806],[281.6954588460365,365.6147549907885],[284.3210051820004,363.0317168239456],[286.5745619365569,361.06681357824556],[287.8386683035131,359.701713408231],[288.41766561788614,358.71257258676934],[288.46219133030223,357.71887731353246],[288.3509886237719,356.74788405508053],[288.21574014326217,355.81649124761344],[287.6921519926746,355.04123324765834],[287.20458811748864,354.28059387569857],[286.5366712370856,353.67469994964114],[286.0639823531331,353.26353898266126],[285.4028205618868,353.2472010262457],[284.89198925774696,353.6075500359978],[284.1754186117499,354.5654800797532],[283.6143451968117,356.3366877408201],[282.89526099457754,358.744193285432],[282.0497432745652,361.5342572721623],[281.42469080018606,364.6708777838733],[280.94234835119533,368.111457274031],[280.6220914499307,370.98002970199497],[280.6919263435569,373.5788838303336],[281.13260414606276,375.42029417245186],[282.1178378200148,376.3341376652573],[283.570040972345,376.2527794576102],[285.391336049941,374.76440288736677],[287.75696108880953,372.1776960561668],[290.2704700021132,368.7432288511066],[292.8572238825105,364.40833820819563],[295.76403028033593,359.0734292865994],[298.614612813743,352.7127720393922],[301.33369432594924,345.64741876713407],[304.31571852994176,338.29865298186206],[306.85002528026104,331.5874947865453],[308.98008917265,325.9873090464628],[310.87505010500837,321.17110936169894],[312.64995449177974,317.471917041323],[313.94677557613323,314.55913036891735],[314.7208301206402,312.5081990010961],[315.2561778603836,310.8273470804464],[315.26904792981105,309.6496526322556],[315.17033200858265,309.2719821681497],[314.7824604408059,309.7235194802009],[314.10816358766994,310.78949256064817],[313.2312029081143,312.61697650816615],[312.22582977048097,315.36794383162606],[310.7534439208212,319.281782296823],[308.9489254373196,324.35597900703516],[306.9755744939469,330.12329863704446],[304.493667287492,337.11131793098076],[302.31011773607935,344.5789287650153],[300.3790682428367,351.50855019317197],[299.22926948805804,357.7435772931197],[298.740627570031,362.97524129361165],[299.09200346723725,367.2079571723273],[300.11060198752654,370.19497449338206],[301.95944004060544,371.9472792300979],[304.48750888277056,372.2649938952066],[307.4720288779993,371.2380847471798],[310.4153822205861,369.94518305581397]],strokeWidth:2},{id:"HbPrm",type:"freehand",shape:"feltTipPen",points:[[109.79648768166226,133.37994384765625],[109.79648768166226,133.37994384765625],[109.79648768166226,133.9123349007832],[109.35614145739532,135.0590592685703],[107.92467957992176,136.9081105477071],[105.54602400589988,139.89632636757142],[102.22437505814241,143.97527653826364],[98.2323240448261,148.82873858727453],[93.03957175123014,154.77254023719797],[87.82217952377141,160.22274567033946],[82.87207777257095,164.97604470290207],[78.43988043643094,168.89361830389134],[74.92514185628988,171.65364666951973],[73.16273355102089,172.8008668319053],[72.72678674637518,172.75799013834512],[73.56446149572434,171.5057982144417],[75.46011315061105,169.30611943401436],[78.06326495751387,166.83023687563946],[80.89177496218963,164.1492169154344],[83.74302232315267,161.77609084008327],[86.52786623520956,159.72121594618693],[88.92919005742374,157.88893596626713],[90.83737637182617,156.76316868521644],[91.96824066614568,156.499483152842],[92.74501288515603,157.05151147170636],[93.23631882298469,158.54590251763057],[93.21063268077478,161.10313759670316],[93.09991735976064,164.7555844442213],[92.61551771865675,170.06007640283133],[92.19777453728466,176.64557341439468],[91.57947742445594,184.88165725068666],[91.08734598566502,193.733023773686],[90.4100087041877,203.39437308513607],[89.56907229557487,212.84067133937333],[88.94170137486913,221.55993804135778],[88.46988974647365,228.69696750760158],[88.1386715665974,234.6720730365687],[88.18530703949568,238.60818260499582],[88.60912347798967,240.26579825107638],[89.27882089095988,239.9505076331161],[90.1680066995807,237.32672133212418],[91.21010746975185,233.36227246339604],[92.31854092168419,229.1926961149211]],strokeWidth:2},{id:"kMZAM",type:"freehand",shape:"feltTipPen",points:[[109.79648768166226,176.01455212283236],[110.47730304077572,173.97210604549218],[113.60359420488385,168.88895139502438],[116.55805167600397,165.32083242489352],[119.07015329460933,162.48903314530617],[121.08808758329019,160.60806238385976],[122.59399319206136,159.5449683533252],[123.4383540132701,159.63081944625537],[124.47644899613306,160.5056192368811],[124.68081080472007,162.58220980128863],[123.87039770098863,166.21483986701696],[122.14649040750373,170.43777706596939],[120.04625823383185,174.81654420157338],[117.44861914941498,179.3449239145848],[114.48392604556079,183.74285710743152],[111.55243060776866,187.37306490617084],[108.96531256464687,190.00587273526708],[106.89756953989877,191.67963897436857],[105.63239245311524,191.61777196173716],[105.69073445652862,190.41486647040438],[106.50334253691972,188.411643983638],[108.22396503161735,185.72552327618723],[110.65678013453339,182.88013718326783],[114.00310168570081,179.88153451767266],[117.81528899610657,177.09553020166823],[122.10298304415164,174.6241675184092],[126.67412525685359,172.54312507943268],[131.03259880876362,171.07496677106155],[135.63274730673675,169.740897555861],[139.6485547432594,168.84001753127814],[143.3010582388713,168.54362376587596],[146.24445645689957,168.73770189413426],[148.38372205561677,169.62494926835734],[149.48357508174172,171.32170048543685],[149.4985441387903,173.66066774159754],[148.40464690482418,176.45576577130305],[146.08596713506427,179.94211424173682],[142.90077150256775,183.28842837446882],[139.0435370732214,186.79938392325766],[134.78688485788848,189.73916435197953],[131.24274161566223,191.86461980618424]],strokeWidth:2},{id:"zRYyC",type:"freehand",shape:"feltTipPen",points:[[125.86167581374139,185.9008217425735],[125.86167581374139,185.20137187537875],[126.33634777264842,184.93865978775648],[127.01205571525793,184.8452152910486],[127.48372706680584,184.42526521858872],[128.0781427591328,184.10418497309274],[128.80083983394275,184.53177880910607],[129.32182407505888,185.19062012362065],[129.8404950950137,186.62539903127526],[130.20600353478062,188.74760676485766],[130.4730519524419,191.44528758157685],[130.64704728480933,194.91556697310352],[130.75964075113166,198.89369789348075],[130.48040536152484,203.2462307066753],[130.2145160211844,208.09953094585308],[129.6979902316143,213.06423902224196],[129.2881101043597,218.06172587877245],[128.6616968845758,222.41483867346687],[128.16900154264022,225.9684511247442],[127.45729599567244,228.72681328942326],[126.89238376667026,230.21359041232336],[126.55329688370807,230.4423000068282],[126.28838884215929,229.79279292528554],[126.11511349518992,228.49183102940333],[125.66272929726551,226.32730342068862],[124.9996570541291,223.86850546535698],[124.15557193372524,220.9112663852875],[122.89575666454198,218.08398566082815],[121.26827359280583,214.99563295945427],[120.02019183115067,212.38609744841233]],strokeWidth:2},{id:"iixpb",type:"freehand",shape:"feltTipPen",points:[[115.97540619400024,201.96600987465172],[115.97540619400024,201.96600987465172],[115.97540619400024,203.02985937583708],[115.54032758907783,204.0070671514286],[114.88800913723844,205.33321060054277],[113.74972834251412,206.90973225832658],[112.62888170390261,208.65340637972622],[111.52872781486985,210.5177311502839],[110.58280353034593,212.47644418757773]],strokeWidth:2},{id:"xaJii",type:"freehand",shape:"feltTipPen",points:[[139.455296540885,200.7302261721843],[140.15474640807975,200.7302261721843],[141.43569668226633,200.7302261721843],[142.95263655931922,200.7302261721843],[144.2463899393897,201.112900216227],[145.42172017496,201.3817113071973],[146.54306293509512,201.88117725575376],[147.9361619503029,202.55635001542396],[149.52934565224496,203.43187635623053],[151.03365414805467,204.425541391327],[152.53195236756756,205.2591203687398],[153.91735055263598,206.18576475125337],[155.25118970327185,206.87342478932715]],strokeWidth:2},{id:"nHaGM",type:"freehand",shape:"feltTipPen",points:[[195.06556315192802,184.66503804010517],[194.36577270567545,183.96524759385284],[194.11966243371353,183.2156912285518],[194.42839689931543,182.413391420685],[195.38255817085064,181.93059307953172],[196.71015574468674,181.64745291630243],[198.9836776168852,181.45047424326094],[202.24180015166553,181.31342301711902],[206.5531121045251,181.4341227980467],[211.55474336330417,181.5866082480352],[217.4207978979657,181.74723474440088],[223.32020948372315,181.8912387717337],[229.06086802732807,181.99931874442427],[234.37513761124728,182.08183961140458],[238.96182670526377,182.1454340663986],[242.6114125480285,182.19347063517034],[245.45635766125383,182.50532452339849]],strokeWidth:2},{id:"EDFJM",type:"freehand",shape:"feltTipPen",points:[[224.72437201115076,169.83563361049437],[224.72437201115076,169.13455663361037],[225.2079955920576,169.36076453227815],[225.89008018478512,170.3583013813186],[226.31165432393618,172.1067967876479],[226.57572496593116,174.66616349979358],[226.7538355421318,178.12330470745565],[226.87645078870196,182.52686844185246],[226.41127251909484,188.3322416368237],[225.0348371284283,194.60819591541895],[222.95133088796047,200.9662623094182],[220.33316719163213,207.03685764458442],[217.34622210823318,212.23298829259875],[214.0825521121924,216.69038015615297],[210.87450113748218,219.98009561713116],[208.14025566872465,222.2130275818863],[205.77022936942967,223.71135888882418],[203.9556967168569,224.0171503529582],[202.82487976095376,223.02012038579687]],strokeWidth:2},{id:"tPPjW",type:"freehand",shape:"feltTipPen",points:[[214.83810239140985,174.77876842036403],[215.53557379662493,174.77876842036403],[215.31310253187962,175.26021256012427],[215.14029082245952,176.34950917375045],[214.67482574322503,178.13835448118243],[214.01172808707815,180.72119891576767],[212.8818987570528,184.53974762699363],[211.42967488231852,188.87145114071245],[209.55013469246683,193.93392264882277],[207.4512400567005,198.69907022289226],[205.23306515042214,202.9184009216524],[203.1813185653882,206.10501297465999],[201.54427258160263,208.21386687290487],[200.50406876930015,208.82949491306226],[200.07467236854131,208.42414579901924],[200.48235915331747,207.2563553075879],[201.53793171604798,205.87624633142332],[203.41501919103302,204.36880053149162],[205.651966890802,202.75698331904277],[208.35284358660806,201.59237753626167],[211.10942180954476,201.38335532602196],[214.4799684297409,201.99610116851727],[217.70672589360743,203.85157615492972],[221.0369614966396,206.68130269487938],[224.486754623965,210.19983154970123],[227.3261063084026,213.56297067303785],[229.79142906059064,216.55482508601926],[231.84971094453863,219.10534193545482],[233.75743845898182,221.09207119329403],[235.06137802772287,221.85164764448928],[235.89807799547953,221.54480701567536],[236.4394236685862,220.17265552988738]],strokeWidth:2},{id:"XDkHb",type:"freehand",shape:"feltTipPen",points:[[243.26112754816495,179.7219032302346],[243.9553454502302,179.02768532816935],[245.73672549383127,177.75999517274977],[247.5136816472534,176.680809019128],[249.3223450780731,176.05208500486788],[251.19330404012317,176.0175285502355],[252.79138229464093,176.35245384896552],[254.2541983529636,177.5682024874468],[255.6123567509444,179.0794366765167],[256.6125158297839,181.2610535734575],[257.2758319461491,184.02050198639336],[257.3698832334496,186.84793701923445],[256.69694657784544,189.6541390298471],[255.43939762442483,192.38743898242137],[253.76668343730717,194.7846885095114],[252.12347143357056,196.798490382801],[250.56091296426553,198.57701124288815],[249.58067663030442,200.2417691450164],[249.5877017085238,201.33624500092628],[250.3188877290031,202.38617334846367],[251.93125810250763,203.4512825550837],[253.92814674970646,204.84919151460053],[256.1573646351769,206.53192054550072],[258.6631790176077,208.8338036803816],[260.5723064903159,211.21133565093805],[261.9397068152184,213.61976578067242],[262.89862021824933,216.1173477296261],[262.93442953438625,218.41333535572358],[262.147722023112,220.33481639801903],[260.79266282845697,221.7653773917973],[258.7018707536306,222.76865069811447],[256.0384345196378,223.4011301710807],[252.9966311789076,223.48582088860076],[249.62805325619365,222.81743646421182],[246.1436457459588,221.55825801419724],[243.16471868710937,219.55471773904628],[240.72762713587053,217.34651813267374],[238.9182240135217,215.30389314654803],[237.67665323034134,213.45473674811092],[236.83616348649457,211.70325416805554],[236.59105858497264,210.27018170077918],[237.20109361257528,209.07679116086365],[238.44405265699902,208.23692119782845],[240.42238456774317,207.3806517592593],[242.93733507957313,206.47994488699896],[246.19814135098704,205.48644301196146],[250.16646687275124,204.7140316132709],[255.08717034644496,203.8670772531559],[260.4572753294242,202.8944418535366],[266.1195053352783,202.1766410687669],[271.6412270226606,201.3269350051969],[276.726360314849,200.7030789180326],[281.4963040134933,200.26471123997908],[285.973613519139,199.64451363184253],[289.62570919265227,199.15668653786543]],strokeWidth:2},{id:"NicwR",type:"freehand",shape:"feltTipPen",points:[[342.01009336531547,146.35574326360893],[342.01009336531547,145.65399656252248],[342.01009336531547,144.8934740953964],[342.01009336531547,144.0775657119675],[342.01009336531547,144.41155598738715],[342.01009336531547,145.73307910776293],[341.66807622233637,148.37242924565817],[341.0859877072487,152.55639928089658],[339.98185339807173,158.4461032419722],[338.46454493618194,165.95401097693048],[336.34585554829846,174.63198105936408],[334.42287007583946,182.6932632759399],[332.29504882543915,190.20648056754817],[330.63104357555653,196.8598463814169],[329.07316436873043,202.48321008783387],[327.8980925404353,207.20483149622396],[327.08638402232964,210.8244265314197]],strokeWidth:2},{id:"sRRNe",type:"freehand",shape:"feltTipPen",points:[[325.94490523323634,229.1532513289394],[325.94490523323634,229.1532513289394],[324.3864443272455,230.1922252662671],[323.15511529456035,231.59301219439112]],strokeWidth:2},{id:"fDPmi",type:"freehand",shape:"feltTipPen",points:[[374.1194388638175,314.3101386264214],[374.1194388638175,312.90885394396474],[374.1194388638175,312.97706458911836],[373.68949949337656,313.44495624835037],[373.41768138077686,314.4947913296067],[372.55584973202275,315.89797343314586],[371.60093397098916,318.51904651078513],[370.2979754680743,322.01260799246376],[368.25803353264854,326.76344141777537],[365.65514993901587,332.8658419135343],[363.0286503468671,339.0943755060028],[360.41589638485283,345.10017410159327],[357.7660572894553,350.60803775120013],[355.4783138672312,355.3928104359887],[353.73843928786,359.24461585987393],[352.145855053867,362.38485242157304]],strokeWidth:2},{id:"PFTyp",type:"freehand",shape:"feltTipPen",points:[[344.2248463021271,379.692944476946],[343.5242524666848,378.9923506415037],[343.2941655804586,378.7622637552775]],strokeWidth:2},{id:"EeWSd",type:"freehand",shape:"feltTipPen",points:[[75.57564342783854,644.5415974683578],[75.57564342783854,643.8385579392179],[75.57564342783854,643.0796575063282],[75.57564342783854,642.2677210400775],[75.57564342783854,641.4019218420626],[75.92187667473496,640.7739867948403],[76.16339270042232,640.4548279256232],[76.33722823708473,640.5516967715471],[76.48720382086464,641.1756645455907],[76.60183769043493,642.3574088920172],[76.68840733065946,644.6293706552124],[76.766042817646,648.165255983994],[76.48957632156095,653.1765765295272],[75.9012288867703,660.2662940903779],[75.12093540804568,668.6402020184591],[74.20349433032817,677.5470422456829],[73.50007616539352,686.1183469659713],[72.97053661515503,693.9103119511383],[72.56140253640598,701.1168091231693],[72.24827008271842,707.1174623470365],[72.0410612067165,711.8584176597974],[72.23942893241093,715.5925951784202],[72.44120753341241,717.90124325235],[72.30939807170836,719.0310647714455],[72.19444383556475,719.0083390676632],[71.78945398767411,718.1506887918395],[71.46365766852142,716.3521167298923],[71.22265759186513,713.9049694119617],[71.0432829003974,711.0279308067707],[71.19726333307113,707.7876489654013],[71.3311867843816,703.9432269024292],[71.78736079772085,699.7587142406205],[72.79812225504458,695.3069314006079],[73.95450257060162,690.3670344007573],[75.48078749024995,685.3830771352232],[77.30436958766069,680.7187710430962],[79.36020088762149,676.2825370064916],[81.56615586488243,672.6448661018771],[83.89141064196298,669.7372465962353],[86.33203490054308,667.6169228234412],[88.40979459794318,666.2005641581095],[90.6710824253808,665.6091077763322],[92.61731004875134,665.6707495795363],[94.37219744736382,666.4917002862089],[95.93641683306015,668.2250799204767],[97.07897963098691,670.9282819438145],[98.17249855409005,674.3511361857209],[98.95099797590052,678.2994353770432],[99.49355174953467,682.6081693638394],[99.51166443935796,687.2097681583327],[98.82464199803604,691.9825938529038],[97.59319390291972,696.8526046861857],[95.94344326661104,701.795611232038],[94.02128205500986,706.4127425773727],[91.52891831023527,711.0984064742734],[88.62897918819255,715.2030995703008],[85.76861230191258,718.4784638926353],[82.93096546138514,720.8615223716733],[80.22692780560038,722.4751272502353],[77.89256512259777,723.5655931920651],[75.77664198546137,723.9401303227578],[74.26976340281664,723.7562186077826],[73.30918441983619,723.145838922595]],strokeWidth:2},{id:"Zhdzy",type:"freehand",shape:"feltTipPen",points:[[100.29131747719094,695.2087292695301],[100.29131747719094,694.5055751793593],[100.76966360387274,694.2453382857807],[101.44995130332501,694.5516872371127],[101.88006659063313,695.1294102296083],[102.48049533703085,696.5371374217834],[102.90193726861031,698.1937387632697],[103.19557285768593,700.3340639329072],[103.52708017741867,703.4869171366563],[103.75641186405397,706.9112632097472],[103.56373869815167,710.2191386566988],[103.03962837531691,712.9735101830584],[102.30819490270375,715.3400081560421],[101.65347929452747,716.5028074684824],[101.22139409427956,716.1848621701693],[101.20565884396257,714.8319811703609],[101.85324497798439,712.3179577173973],[103.0235506191487,709.2942712077629],[104.62955050710258,705.5929151359351],[106.9193778730417,701.6009741078246],[108.96267065634021,698.3970410314837]],strokeWidth:2},{id:"eiKfZ",type:"freehand",shape:"feltTipPen",points:[[123.7712078240757,706.3307825917386],[123.7712078240757,706.3307825917386],[123.7712078240757,705.2761926782796],[123.7712078240757,704.3145223805373],[123.7712078240757,703.361119801777],[123.7712078240757,702.3922299898618],[123.7712078240757,701.4002262617037],[123.7712078240757,700.3740223295949],[123.45256473406636,699.3645323308979],[122.87729243630889,698.7251925043042],[122.08142705286224,698.6052768440809],[121.18200880254454,698.9003467090674],[120.14043722958701,699.8221815883121],[119.02228785489962,700.9032457092344],[117.77059684842021,702.4695240391661],[116.87486624587615,703.9928042188853],[115.87562064722471,705.8621946948738],[115.17665876841585,707.8834494653688],[114.6905124299729,710.0338522647708],[114.35198111899768,712.3167261862536],[114.13209368364124,714.319799078909],[114.31833288032959,716.2337395784234],[114.8441827110376,717.5772521582967],[115.56389468362732,718.5009060395896],[116.51417361303749,718.825561403723],[117.85101736632947,718.3212065714847],[119.22681798206014,717.193379976316],[120.62346613025335,715.5916787188812],[122.02726211111218,713.6467621375518],[123.37268928277064,711.8002811976144],[124.42097911640127,709.6694634373398],[125.44228335184181,707.7763729324697],[126.20990054952819,706.0325815234605],[126.6777732997769,704.8590743700711],[126.68107075519134,704.0126922013733],[126.62382346323199,703.6891669665497],[126.56920378082356,703.9004700285918],[126.49179692669992,704.7609961278854],[126.42626489748619,706.1716801772659],[126.34705521319535,707.9482609896295],[126.28780600179522,709.9991347104256],[126.24277522901076,711.9867825757856],[126.24277522901076,713.749379837252],[126.55861886728991,715.1886852703674],[127.13054080643411,716.0617838414232],[128.23942704652205,716.0533200671603],[129.41415150286986,715.2888733173613],[130.96459251497714,713.6448630245213],[132.48552656240287,711.3250076702561],[134.38553768932167,708.4179884935511],[136.09588482548207,705.2591490379841],[137.70733913403757,702.4781889135452],[139.20678791887764,700.0808673095498],[140.38844815103613,698.4736917075488],[141.12685659108575,698.4806535436633],[141.61822218414665,699.2734454319093],[141.964634872114,700.9859742054023],[141.83606540321108,703.4316994171609],[141.68160482542618,706.0440142346438],[141.5248487535676,708.8581312435103],[141.3803651589638,711.2272921503754],[141.5713918019713,713.2027507927687],[142.06337546734704,714.3485894414634],[142.77393478656046,715.1845347937187],[143.69072449068204,715.10178087023],[144.7124835254918,714.5525525267899],[145.83016490294705,713.4074158119874],[147.3946291202613,711.7530728256056],[148.87311307890246,709.8298922747331],[150.32152114158504,708.297920693788],[151.68515346665305,707.1903964815419],[153.01652545307394,706.3640384710961],[154.08314721596145,706.4080548049992],[154.76694404962592,707.5081769011699],[155.25250359013245,709.0986836759794],[155.56409486911917,710.7432590701142],[155.74990229361634,712.7183970414626],[156.1770496959296,714.3318000114018],[156.8124886974611,715.2214242140808],[157.58198231593957,715.1341022023071],[158.82137270226605,714.0070550872638],[160.4359008269842,711.7139538964789],[162.3249274886462,708.8869239636847],[164.48413593667334,705.6287517110131],[166.4510487282194,702.4219371951322],[168.22662032946693,699.670893638618]],strokeWidth:2},{id:"cNdFJ",type:"freehand",shape:"feltTipPen",points:[[175.67412332771556,698.9160803769328],[175.67412332771556,698.2124853192436],[175.67412332771556,697.45203132511],[175.67412332771556,697.0864144078773],[175.67412332771556,697.2784546087973],[175.67412332771556,697.7723820321603],[175.67412332771556,698.4536754865471],[175.67412332771556,699.602972334973],[175.67412332771556,701.1357568406443],[175.67412332771556,703.0019128042481],[175.67412332771556,705.1179848171382],[175.34696232119455,707.105690608535],[175.07753086065082,709.2010686957301],[174.89158432702044,710.3622730380744],[174.7456465345793,710.5808576651134],[174.95867806103826,709.9992394342198],[175.13781713213558,709.1340835505812],[175.59582547094766,707.7372604208927],[176.28543820854298,706.2659507757471],[177.17850474939388,704.4651633095427],[178.18207167431416,702.705312341066],[179.3116231948041,701.3328972824474],[180.49591090668906,700.0747106136655],[181.67539354011234,699.191145705408],[182.861229449811,698.5925689170481],[184.07120417375592,698.2003113688393],[185.30882081421447,697.9321223728275],[186.5709324861744,697.796244635043],[187.60812035820192,698.0403123877936],[188.22663587018957,698.5724507716759],[188.64661417248823,699.6723755708531],[188.93302768940504,700.8492772485415],[189.1169743771489,702.4170480730345],[189.22245781712655,703.9406610800229],[189.2677440548594,705.8640488128972],[188.93956387798477,707.6280214296535],[188.68686388226303,708.8495533540672]],strokeWidth:2},{id:"hmmjc",type:"freehand",shape:"feltTipPen",points:[[200.38979737706796,697.6802966744654],[200.38979737706796,697.6802966744654],[200.38979737706796,698.2127217049133],[200.38979737706796,698.9191749464858],[200.38979737706796,700.126494837863],[200.38979737706796,701.2530669607504],[200.38979737706796,702.7082833439104],[200.38979737706796,704.7287249537499],[200.0611720047212,706.7655088549905],[199.7908527592445,708.9542978686154],[199.60495599109464,710.8302703945869],[199.46160557782497,711.9174850129948]],strokeWidth:2},{id:"DwBED",type:"freehand",shape:"feltTipPen",points:[[200.38979737706796,687.7940270547242],[200.38979737706796,687.7940270547242],[200.38979737706796,687.7940270547242]],strokeWidth:2},{id:"fESHQ",type:"freehand",shape:"feltTipPen",points:[[211.51185069927652,696.4445129719975],[211.51185069927652,695.7408492696472],[211.51185069927652,696.0430111300902],[211.94356769423808,696.631248017894],[212.59242452326345,697.3596160980187],[213.36955171369783,698.186128465637],[214.25164589492357,699.4427407832541],[215.19098614128785,700.6536521457447],[216.31312322507375,702.3124849862361],[217.51837500538323,703.9751224459233],[218.73086971323875,705.4870107873367],[219.97377706426988,707.2898758447864],[221.2361662320414,708.6833743007328],[222.4411979102013,709.6237118211743],[223.4345273460263,710.6394762180062],[224.02886743579262,710.9955408421006]],strokeWidth:2},{id:"NRyaM",type:"freehand",shape:"feltTipPen",points:[[225.10547142642037,695.2087292695301],[225.10547142642037,695.2087292695301],[224.57601989136793,695.2087292695301],[224.31960697719302,695.2087292695301],[223.77109816870126,695.2087292695301],[223.04278886415506,695.569422926334],[222.23224821092032,696.1614573792913],[221.32022611042754,697.2461158440669],[219.8956423877542,698.7672849938258],[218.47528716045014,700.5826083915404],[216.7761435770022,702.6313082677298],[215.1119546892881,704.8885346502848],[213.59173390328357,706.8939530772636],[212.13929261359345,708.7119430607377],[210.9525657393845,709.8861957043268]],strokeWidth:2},{id:"rExRd",type:"freehand",shape:"feltTipPen",points:[[233.75595734369364,711.2739174016092],[233.75595734369364,711.2739174016092]],strokeWidth:2},{id:"DkEDR",type:"freehand",shape:"feltTipPen",points:[[257.2358476905784,697.6802966744654],[257.2358476905784,696.9765692186488],[256.75181966316296,696.7196201950646],[256.4585099754036,696.2196345087668],[255.9580752004436,695.8734114456884],[255.3013204417967,695.6930926266905],[254.50570153748714,695.5646101490129],[253.60874299833432,695.4718188617626],[252.68670632137292,695.632365188028],[251.77532857777584,696.4514989393547],[250.77362453005145,697.7670939463092],[250.0300584423092,699.4752293716929],[249.1851690853162,701.4397319006457],[248.56305062982784,703.9122799425118],[248.10589353799202,706.5542782011194],[247.8133385114341,708.8282604387946],[248.22020914220462,710.6476112964392],[249.24745261635968,711.818773306853],[250.7665336376336,712.0245498827912],[252.88876486685314,711.0907082736644],[255.22413632198396,709.2895446194834],[257.9829703285532,707.1268850078486],[260.84875463165855,704.3683989684359],[263.2457364083787,701.973143937762],[265.11582754869943,699.7068603754838],[266.75836385329154,697.9521498657923],[267.62928373671986,697.0733963084485],[267.7666450311934,697.2282207827843],[267.16919894094195,698.1055403973269],[266.27296963279883,699.1785208012161],[265.14566085794655,700.8033174222292],[263.89597102610725,702.7927137523502],[262.8834622051125,704.748618602518],[262.16337466714987,706.453081513147],[261.9507255131235,708.1133896960473],[262.19072681814197,709.2759461532896],[263.09730044858253,710.3682679183585],[264.16817689879286,711.164317884557],[265.6881335797182,711.3945772234038],[267.5077078606267,711.1445370371953],[269.3128781726501,710.26103554677],[270.9874167183621,708.8797952501845],[272.5528789303708,707.4365481864288],[273.7433710608514,705.6502709152605],[274.517100190574,703.9787557954728],[274.7663367732969,702.3110958285952],[274.5312129826521,700.8110321573786],[273.6073319203272,699.6629161389606],[272.5499333524711,698.9061048116141],[271.0208945519476,698.3819383748905],[269.4511841788238,698.3530943371661],[267.90241153525886,698.425392058592],[266.7007660302514,698.8367032310325],[266.17286141487403,699.2278455650203],[266.21969376101043,699.501302464203],[266.6440558461441,699.7166495277602],[267.655805806131,699.8951017809977],[268.8913360686109,699.7135757645292],[270.55652301070046,699.5169653679104],[272.1769512292106,699.3653866410045],[273.7424130686164,698.8940396084972],[275.1965881429542,698.5150460502296],[276.5369897715644,698.2511837773582],[277.6807403458045,697.7111667430195],[278.7084177008831,697.2665550776564],[279.69573658754604,697.0160268534032],[280.7795642277677,697.107634521517],[281.5979574314097,697.5251634013739],[282.13408413205894,698.5114150478958],[282.5489242517745,699.9535098080969],[282.84098599868395,701.7743724611605],[283.02843058220066,703.824551042736],[282.81477093169957,706.1243719532199],[282.5932251731436,708.5354121674004],[282.40443780365973,709.9057029739824],[282.57959049244283,710.3036280965493],[283.0561392050798,709.8255664165581],[284.08719079904273,708.3820517353352],[285.2144216770599,706.538897036512],[286.74667183779053,704.370445668344],[288.5995133568345,702.3415936070719],[290.6747708704809,700.4052369256219],[292.60660986895465,698.9584806416424],[294.33204007114097,697.9635298042067],[295.7275892125079,697.8674370064332],[296.59204402039296,698.6214451825181],[297.22621987416784,700.2698855649223],[297.30632265946275,702.2917701375259],[297.2821331071837,704.5431543082382],[296.86734136627894,706.6349140197981],[296.48247909275693,708.6250717523121],[296.19332364402413,709.661928773693],[295.9687135065938,710.0674402872232],[296.43070848674466,709.6661556728818],[297.14617165450073,708.5721617999639],[298.3907899502945,706.9800446569302],[300.0154056144643,705.027825143301],[301.9425628813079,702.8602329312348],[304.07903225726096,700.8345918122459],[306.07538837299836,699.2960896957225],[308.2106723128043,698.2045825756773],[310.09784657780943,697.4534789743966],[311.89374000200274,697.2655471634303],[313.15064319795266,697.8736786678724],[314.32468855052895,699.0788096540709],[315.16125243832954,700.7403544566105],[316.02807712281884,702.700337825207],[316.6688935414484,704.8533911973636],[317.0877937625526,707.1699493962483],[317.3669109899077,709.2712320131618],[317.54367468099264,711.1655915202477]],strokeWidth:2}];function X5(e,t,n){if(e&&e.length){const[r,o]=t,i=Math.PI/180*n,a=Math.cos(i),s=Math.sin(i);for(const t of e){const[e,n]=t;t[0]=(e-r)*a-(n-o)*s+r,t[1]=(e-r)*s+(n-o)*a+o}}}function pb(e,t,n){const r=[];e.forEach(e=>r.push(...e)),X5(r,t,n)}function mb(e,t){return e[0]===t[0]&&e[1]===t[1]}function vb(e,t,n,r=1){const o=n,i=Math.max(t,.1),a=e[0]&&e[0][0]&&"number"==typeof e[0][0]?[e]:e,s=[0,0];if(o)for(const e of a)X5(e,s,o);const l=yb(a,i,r);if(o){for(const e of a)X5(e,s,-o);pb(l,s,-o)}return l}function yb(e,t,n){const r=[];for(const t of e){const e=[...t];mb(e[0],e[e.length-1])||e.push([e[0][0],e[0][1]]),e.length>2&&r.push(e)}const o=[];t=Math.max(t,.1);const i=[];for(const e of r)for(let t=0;t<e.length-1;t++){const n=e[t],r=e[t+1];if(n[1]!==r[1]){const e=Math.min(n[1],r[1]);i.push({ymin:e,ymax:Math.max(n[1],r[1]),x:e===n[1]?n[0]:r[0],islope:(r[0]-n[0])/(r[1]-n[1])})}}if(i.sort((e,t)=>e.ymin<t.ymin?-1:e.ymin>t.ymin?1:e.x<t.x?-1:e.x>t.x?1:e.ymax===t.ymax?0:(e.ymax-t.ymax)/Math.abs(e.ymax-t.ymax)),!i.length)return o;let a=[],s=i[0].ymin,l=0;for(;a.length||i.length;){if(i.length){let e=-1;for(let t=0;t<i.length&&!(i[t].ymin>s);t++)e=t;i.splice(0,e+1).forEach(e=>{a.push({s:s,edge:e})})}if(a=a.filter(e=>!(e.edge.ymax<=s)),a.sort((e,t)=>e.edge.x===t.edge.x?0:(e.edge.x-t.edge.x)/Math.abs(e.edge.x-t.edge.x)),(1!==n||l%t===0)&&a.length>1)for(let e=0;e<a.length;e+=2){const t=e+1;if(t>=a.length)break;const n=a[e].edge,r=a[t].edge;o.push([[Math.round(n.x),s],[Math.round(r.x),s]])}s+=n,a.forEach(e=>{e.edge.x=e.edge.x+n*e.edge.islope}),l++}return o}function pp(e,t){var n;const r=t.hachureAngle+90;let o=t.hachureGap;o<0&&(o=4*t.strokeWidth),o=Math.round(Math.max(o,.1));let i=1;return t.roughness>=1&&((null===(n=t.randomizer)||void 0===n?void 0:n.next())||Math.random())>.7&&(i=o),vb(e,o,r,i||1)}class w4{constructor(e){this.helper=e}fillPolygons(e,t){return this._fillPolygons(e,t)}_fillPolygons(e,t){const n=pp(e,t);return{type:"fillSketch",ops:this.renderLines(n,t)}}renderLines(e,t){const n=[];for(const r of e)n.push(...this.helper.doubleLineOps(r[0][0],r[0][1],r[1][0],r[1][1],t));return n}}function V3(e){const t=e[0],n=e[1];return Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}class wb extends w4{fillPolygons(e,t){let n=t.hachureGap;n<0&&(n=4*t.strokeWidth),n=Math.max(n,.1);const r=pp(e,Object.assign({},t,{hachureGap:n})),o=Math.PI/180*t.hachureAngle,i=[],a=.5*n*Math.cos(o),s=.5*n*Math.sin(o);for(const[e,t]of r)V3([e,t])&&i.push([[e[0]-a,e[1]+s],[...t]],[[e[0]+a,e[1]-s],[...t]]);return{type:"fillSketch",ops:this.renderLines(i,t)}}}class Cb extends w4{fillPolygons(e,t){const n=this._fillPolygons(e,t),r=Object.assign({},t,{hachureAngle:t.hachureAngle+90}),o=this._fillPolygons(e,r);return n.ops=n.ops.concat(o.ops),n}}class xb{constructor(e){this.helper=e}fillPolygons(e,t){const n=pp(e,t=Object.assign({},t,{hachureAngle:0}));return this.dotsOnLines(n,t)}dotsOnLines(e,t){const n=[];let r=t.hachureGap;r<0&&(r=4*t.strokeWidth),r=Math.max(r,.1);let o=t.fillWeight;o<0&&(o=t.strokeWidth/2);const i=r/4;for(const a of e){const e=V3(a),s=e/r,l=Math.ceil(s)-1,u=e-l*r,c=(a[0][0]+a[1][0])/2-r/4,d=Math.min(a[0][1],a[1][1]);for(let e=0;e<l;e++){const a=d+u+e*r,s=c-i+2*Math.random()*i,l=a-i+2*Math.random()*i,h=this.helper.ellipse(s,l,o,o,t);n.push(...h.ops)}}return{type:"fillSketch",ops:n}}}class Eb{constructor(e){this.helper=e}fillPolygons(e,t){const n=pp(e,t);return{type:"fillSketch",ops:this.dashedLine(n,t)}}dashedLine(e,t){const n=t.dashOffset<0?t.hachureGap<0?4*t.strokeWidth:t.hachureGap:t.dashOffset,r=t.dashGap<0?t.hachureGap<0?4*t.strokeWidth:t.hachureGap:t.dashGap,o=[];return e.forEach(e=>{const i=V3(e),a=Math.floor(i/(n+r)),s=(i+r-a*(n+r))/2;let l=e[0],u=e[1];l[0]>u[0]&&(l=e[1],u=e[0]);const c=Math.atan((u[1]-l[1])/(u[0]-l[0]));for(let e=0;e<a;e++){const i=e*(n+r),a=i+n,u=[l[0]+i*Math.cos(c)+s*Math.cos(c),l[1]+i*Math.sin(c)+s*Math.sin(c)],d=[l[0]+a*Math.cos(c)+s*Math.cos(c),l[1]+a*Math.sin(c)+s*Math.sin(c)];o.push(...this.helper.doubleLineOps(u[0],u[1],d[0],d[1],t))}}),o}}class Pb{constructor(e){this.helper=e}fillPolygons(e,t){const n=t.hachureGap<0?4*t.strokeWidth:t.hachureGap,r=t.zigzagOffset<0?n:t.zigzagOffset,o=pp(e,t=Object.assign({},t,{hachureGap:n+r}));return{type:"fillSketch",ops:this.zigzagLines(o,r,t)}}zigzagLines(e,t,n){const r=[];return e.forEach(e=>{const o=V3(e),i=Math.round(o/(2*t));let a=e[0],s=e[1];a[0]>s[0]&&(a=e[1],s=e[0]);const l=Math.atan((s[1]-a[1])/(s[0]-a[0]));for(let e=0;e<i;e++){const o=2*e*t,i=2*(e+1)*t,s=Math.sqrt(2*Math.pow(t,2)),u=[a[0]+o*Math.cos(l),a[1]+o*Math.sin(l)],c=[a[0]+i*Math.cos(l),a[1]+i*Math.sin(l)],d=[u[0]+s*Math.cos(l+Math.PI/4),u[1]+s*Math.sin(l+Math.PI/4)];r.push(...this.helper.doubleLineOps(u[0],u[1],d[0],d[1],n),...this.helper.doubleLineOps(d[0],d[1],c[0],c[1],n))}}),r}}const co={};function Sb(e,t){let n=e.fillStyle||"hachure";if(!co[n])switch(n){case"zigzag":co[n]||(co[n]=new wb(t));break;case"cross-hatch":co[n]||(co[n]=new Cb(t));break;case"dots":co[n]||(co[n]=new xb(t));break;case"dashed":co[n]||(co[n]=new Eb(t));break;case"zigzag-line":co[n]||(co[n]=new Pb(t));break;default:n="hachure",co[n]||(co[n]=new w4(t))}return co[n]}function Tb(){return Math.floor(Math.random()*2**31)}class Db{constructor(e){this.seed=e}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const Ab=0,K5=1,PE=2,tm={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function Bb(e){const t=new Array;for(;""!==e;)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]={type:0,text:RegExp.$1},e=e.substr(RegExp.$1.length);else{if(!e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];t[t.length]={type:1,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length)}return t[t.length]={type:2,text:""},t}function H7(e,t){return e.type===t}function C4(e){const t=[],n=Bb(e);let r="BOD",o=0,i=n[o];for(;!H7(i,2);){let a=0;const s=[];if("BOD"===r){if("M"!==i.text&&"m"!==i.text)return C4("M0,0"+e);o++,a=tm[i.text],r=i.text}else H7(i,1)?a=tm[r]:(o++,a=tm[i.text],r=i.text);if(!(o+a<n.length))throw new Error("Path data ended short");for(let e=o;e<o+a;e++){const t=n[e];if(!H7(t,1))throw new Error("Param not a number: "+r+","+t.text);s[s.length]=+t.text}if("number"!=typeof tm[r])throw new Error("Bad segment: "+r);{const e={key:r,data:s};t.push(e),o+=a,i=n[o],"M"===r&&(r="L"),"m"===r&&(r="l")}}return t}function SE(e){let t=0,n=0,r=0,o=0;const i=[];for(const{key:a,data:s}of e)switch(a){case"M":i.push({key:"M",data:[...s]}),[t,n]=s,[r,o]=s;break;case"m":t+=s[0],n+=s[1],i.push({key:"M",data:[t,n]}),r=t,o=n;break;case"L":i.push({key:"L",data:[...s]}),[t,n]=s;break;case"l":t+=s[0],n+=s[1],i.push({key:"L",data:[t,n]});break;case"C":i.push({key:"C",data:[...s]}),t=s[4],n=s[5];break;case"c":{const e=s.map((e,r)=>r%2?e+n:e+t);i.push({key:"C",data:e}),t=e[4],n=e[5];break}case"Q":i.push({key:"Q",data:[...s]}),t=s[2],n=s[3];break;case"q":{const e=s.map((e,r)=>r%2?e+n:e+t);i.push({key:"Q",data:e}),t=e[2],n=e[3];break}case"A":i.push({key:"A",data:[...s]}),t=s[5],n=s[6];break;case"a":t+=s[5],n+=s[6],i.push({key:"A",data:[s[0],s[1],s[2],s[3],s[4],t,n]});break;case"H":i.push({key:"H",data:[...s]}),t=s[0];break;case"h":t+=s[0],i.push({key:"H",data:[t]});break;case"V":i.push({key:"V",data:[...s]}),n=s[0];break;case"v":n+=s[0],i.push({key:"V",data:[n]});break;case"S":i.push({key:"S",data:[...s]}),t=s[2],n=s[3];break;case"s":{const e=s.map((e,r)=>r%2?e+n:e+t);i.push({key:"S",data:e}),t=e[2],n=e[3];break}case"T":i.push({key:"T",data:[...s]}),t=s[0],n=s[1];break;case"t":t+=s[0],n+=s[1],i.push({key:"T",data:[t,n]});break;case"Z":case"z":i.push({key:"Z",data:[]}),t=r,n=o}return i}function TE(e){const t=[];let n="",r=0,o=0,i=0,a=0,s=0,l=0;for(const{key:u,data:c}of e){switch(u){case"M":t.push({key:"M",data:[...c]}),[r,o]=c,[i,a]=c;break;case"C":t.push({key:"C",data:[...c]}),r=c[4],o=c[5],s=c[2],l=c[3];break;case"L":t.push({key:"L",data:[...c]}),[r,o]=c;break;case"H":r=c[0],t.push({key:"L",data:[r,o]});break;case"V":o=c[0],t.push({key:"L",data:[r,o]});break;case"S":{let e=0,i=0;"C"===n||"S"===n?(e=r+(r-s),i=o+(o-l)):(e=r,i=o),t.push({key:"C",data:[e,i,...c]}),s=c[0],l=c[1],r=c[2],o=c[3];break}case"T":{const[e,i]=c;let a=0,u=0;"Q"===n||"T"===n?(a=r+(r-s),u=o+(o-l)):(a=r,u=o);const d=r+2*(a-r)/3,h=o+2*(u-o)/3,f=e+2*(a-e)/3,p=i+2*(u-i)/3;t.push({key:"C",data:[d,h,f,p,e,i]}),s=a,l=u,r=e,o=i;break}case"Q":{const[e,n,i,a]=c,u=r+2*(e-r)/3,d=o+2*(n-o)/3,h=i+2*(e-i)/3,f=a+2*(n-a)/3;t.push({key:"C",data:[u,d,h,f,i,a]}),s=e,l=n,r=i,o=a;break}case"A":{const e=Math.abs(c[0]),n=Math.abs(c[1]),i=c[2],a=c[3],s=c[4],l=c[5],u=c[6];0===e||0===n?(t.push({key:"C",data:[r,o,l,u,l,u]}),r=l,o=u):(r!==l||o!==u)&&(DE(r,o,l,u,e,n,i,a,s).forEach(function(e){t.push({key:"C",data:e})}),r=l,o=u);break}case"Z":t.push({key:"Z",data:[]}),r=i,o=a}n=u}return t}function Rb(e){return Math.PI*e/180}function ug(e,t,n){return[e*Math.cos(n)-t*Math.sin(n),e*Math.sin(n)+t*Math.cos(n)]}function DE(e,t,n,r,o,i,a,s,l,u){const c=Rb(a);let d=[],h=0,f=0,p=0,g=0;if(u)[h,f,p,g]=u;else{[e,t]=ug(e,t,-c),[n,r]=ug(n,r,-c);const a=(e-n)/2,u=(t-r)/2;let d=a*a/(o*o)+u*u/(i*i);d>1&&(d=Math.sqrt(d),o*=d,i*=d);const m=o*o,v=i*i,y=m*v-m*u*u-v*a*a,b=m*u*u+v*a*a,w=(s===l?-1:1)*Math.sqrt(Math.abs(y/b));p=w*o*u/i+(e+n)/2,g=w*-i*a/o+(t+r)/2,h=Math.asin(parseFloat(((t-g)/i).toFixed(9))),f=Math.asin(parseFloat(((r-g)/i).toFixed(9))),e<p&&(h=Math.PI-h),n<p&&(f=Math.PI-f),h<0&&(h=2*Math.PI+h),f<0&&(f=2*Math.PI+f),l&&h>f&&(h-=2*Math.PI),!l&&f>h&&(f-=2*Math.PI)}let m=f-h;if(Math.abs(m)>120*Math.PI/180){const e=f,t=n,s=r;f=l&&f>h?h+120*Math.PI/180*1:h+120*Math.PI/180*-1,d=DE(n=p+o*Math.cos(f),r=g+i*Math.sin(f),t,s,o,i,a,0,l,[f,e,p,g])}m=f-h;const v=Math.cos(h),y=Math.sin(h),b=Math.cos(f),w=Math.sin(f),x=Math.tan(m/4),C=4/3*o*x,E=4/3*i*x,D=[e,t],S=[e+C*y,t-E*v],P=[n+C*w,r-E*b],T=[n,r];if(S[0]=2*D[0]-S[0],S[1]=2*D[1]-S[1],u)return[S,P,T].concat(d);{d=[S,P,T].concat(d);const e=[];for(let t=0;t<d.length;t+=3){const n=ug(d[t][0],d[t][1],c),r=ug(d[t+1][0],d[t+1][1],c),o=ug(d[t+2][0],d[t+2][1],c);e.push([n[0],n[1],r[0],r[1],o[0],o[1]])}return e}}const Mb={randOffset:Fb,randOffsetWithRange:Lb,ellipse:Ob,doubleLineOps:_b};function AE(e,t,n,r,o){return{type:"path",ops:uc(e,t,n,r,o)}}function bm(e,t,n){const r=(e||[]).length;if(r>2){const o=[];for(let t=0;t<r-1;t++)o.push(...uc(e[t][0],e[t][1],e[t+1][0],e[t+1][1],n));return t&&o.push(...uc(e[r-1][0],e[r-1][1],e[0][0],e[0][1],n)),{type:"path",ops:o}}return 2===r?AE(e[0][0],e[0][1],e[1][0],e[1][1],n):{type:"path",ops:[]}}function bb(e,t){return bm(e,!0,t)}function kb(e,t,n,r,o){return bb([[e,t],[e+n,t],[e+n,t+r],[e,t+r]],o)}function qy(e,t){if(e.length){const n="number"==typeof e[0][0]?[e]:e,r=nm(n[0],1*(1+.2*t.roughness),t),o=t.disableMultiStroke?[]:nm(n[0],1.5*(1+.22*t.roughness),Jy(t));for(let e=1;e<n.length;e++){const i=n[e];if(i.length){const e=nm(i,1*(1+.2*t.roughness),t),n=t.disableMultiStroke?[]:nm(i,1.5*(1+.22*t.roughness),Jy(t));for(const t of e)"move"!==t.op&&r.push(t);for(const e of n)"move"!==e.op&&o.push(e)}}return{type:"path",ops:r.concat(o)}}return{type:"path",ops:[]}}function Ob(e,t,n,r,o){return Y5(e,t,o,BE(n,r,o)).opset}function BE(e,t,n){const r=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),o=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*r)),i=2*Math.PI/o;let a=Math.abs(e/2),s=Math.abs(t/2);const l=1-n.curveFitting;return a+=It(a*l,n),s+=It(s*l,n),{increment:i,rx:a,ry:s}}function Y5(e,t,n,r){const[o,i]=e9(r.increment,e,t,r.rx,r.ry,1,r.increment*Ym(.1,Ym(.4,1,n),n),n);let a=qm(o,null,n);if(!n.disableMultiStroke&&0!==n.roughness){const[o]=e9(r.increment,e,t,r.rx,r.ry,1.5,0,n),i=qm(o,null,n);a=a.concat(i)}return{estimatedPoints:i,opset:{type:"path",ops:a}}}function Zy(e,t,n,r,o,i,a,s,l){const u=e,c=t;let d=Math.abs(n/2),h=Math.abs(r/2);d+=It(.01*d,l),h+=It(.01*h,l);let f=o,p=i;for(;f<0;)f+=2*Math.PI,p+=2*Math.PI;p-f>2*Math.PI&&(f=0,p=2*Math.PI);const g=2*Math.PI/l.curveStepCount,m=Math.min(g/2,(p-f)/2),v=t9(m,u,c,d,h,f,p,1,l);if(!l.disableMultiStroke){const e=t9(m,u,c,d,h,f,p,1.5,l);v.push(...e)}return a&&(s?v.push(...uc(u,c,u+d*Math.cos(f),c+h*Math.sin(f),l),...uc(u,c,u+d*Math.cos(p),c+h*Math.sin(p),l)):v.push({op:"lineTo",data:[u,c]},{op:"lineTo",data:[u+d*Math.cos(f),c+h*Math.sin(f)]})),{type:"path",ops:v}}function Qy(e,t){const n=TE(SE(C4(e))),r=[];let o=[0,0],i=[0,0];for(const{key:e,data:a}of n)switch(e){case"M":i=[a[0],a[1]],o=[a[0],a[1]];break;case"L":r.push(...uc(i[0],i[1],a[0],a[1],t)),i=[a[0],a[1]];break;case"C":{const[e,n,o,s,l,u]=a;r.push(...Nb(e,n,o,s,l,u,i,t)),i=[l,u];break}case"Z":r.push(...uc(i[0],i[1],o[0],o[1],t)),i=[o[0],o[1]]}return{type:"path",ops:r}}function G7(e,t){const n=[];for(const r of e)if(r.length){const e=t.maxRandomnessOffset||0,o=r.length;if(o>2){n.push({op:"move",data:[r[0][0]+It(e,t),r[0][1]+It(e,t)]});for(let i=1;i<o;i++)n.push({op:"lineTo",data:[r[i][0]+It(e,t),r[i][1]+It(e,t)]})}}return{type:"fillPath",ops:n}}function Xd(e,t){return Sb(t,Mb).fillPolygons(e,t)}function Ib(e,t,n,r,o,i,a){const s=e,l=t;let u=Math.abs(n/2),c=Math.abs(r/2);u+=It(.01*u,a),c+=It(.01*c,a);let d=o,h=i;for(;d<0;)d+=2*Math.PI,h+=2*Math.PI;h-d>2*Math.PI&&(d=0,h=2*Math.PI);const f=(h-d)/a.curveStepCount,p=[];for(let e=d;e<=h;e+=f)p.push([s+u*Math.cos(e),l+c*Math.sin(e)]);return p.push([s+u*Math.cos(h),l+c*Math.sin(h)]),p.push([s,l]),Xd([p],a)}function Fb(e,t){return It(e,t)}function Lb(e,t,n){return Ym(e,t,n)}function _b(e,t,n,r,o){return uc(e,t,n,r,o,!0)}function Jy(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function RE(e){return e.randomizer||(e.randomizer=new Db(e.seed||0)),e.randomizer.next()}function Ym(e,t,n,r=1){return n.roughness*r*(RE(n)*(t-e)+e)}function It(e,t,n=1){return Ym(-e,e,t,n)}function uc(e,t,n,r,o,i=!1){const a=i?o.disableMultiStrokeFill:o.disableMultiStroke,s=q5(e,t,n,r,o,!0,!1);if(a)return s;const l=q5(e,t,n,r,o,!0,!0);return s.concat(l)}function q5(e,t,n,r,o,i,a){const s=Math.pow(e-n,2)+Math.pow(t-r,2),l=Math.sqrt(s);let u=1;u=l<200?1:l>500?.4:-.0016668*l+1.233334;let c=o.maxRandomnessOffset||0;c*c*100>s&&(c=l/10);const d=c/2,h=.2+.2*RE(o);let f=o.bowing*o.maxRandomnessOffset*(r-t)/200,p=o.bowing*o.maxRandomnessOffset*(e-n)/200;f=It(f,o,u),p=It(p,o,u);const g=[],m=()=>It(d,o,u),v=()=>It(c,o,u),y=o.preserveVertices;return a?g.push({op:"move",data:[e+(y?0:m()),t+(y?0:m())]}):g.push({op:"move",data:[e+(y?0:It(c,o,u)),t+(y?0:It(c,o,u))]}),a?g.push({op:"bcurveTo",data:[f+e+(n-e)*h+m(),p+t+(r-t)*h+m(),f+e+2*(n-e)*h+m(),p+t+2*(r-t)*h+m(),n+(y?0:m()),r+(y?0:m())]}):g.push({op:"bcurveTo",data:[f+e+(n-e)*h+v(),p+t+(r-t)*h+v(),f+e+2*(n-e)*h+v(),p+t+2*(r-t)*h+v(),n+(y?0:v()),r+(y?0:v())]}),g}function nm(e,t,n){if(!e.length)return[];const r=[];r.push([e[0][0]+It(t,n),e[0][1]+It(t,n)]),r.push([e[0][0]+It(t,n),e[0][1]+It(t,n)]);for(let o=1;o<e.length;o++)r.push([e[o][0]+It(t,n),e[o][1]+It(t,n)]),o===e.length-1&&r.push([e[o][0]+It(t,n),e[o][1]+It(t,n)]);return qm(r,null,n)}function qm(e,t,n){const r=e.length,o=[];if(r>3){const t=[],i=1-n.curveTightness;o.push({op:"move",data:[e[1][0],e[1][1]]});for(let n=1;n+2<r;n++){const r=e[n];t[0]=[r[0],r[1]],t[1]=[r[0]+(i*e[n+1][0]-i*e[n-1][0])/6,r[1]+(i*e[n+1][1]-i*e[n-1][1])/6],t[2]=[e[n+1][0]+(i*e[n][0]-i*e[n+2][0])/6,e[n+1][1]+(i*e[n][1]-i*e[n+2][1])/6],t[3]=[e[n+1][0],e[n+1][1]],o.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[3][0],t[3][1]]})}}else 3===r?(o.push({op:"move",data:[e[1][0],e[1][1]]}),o.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):2===r&&o.push(...q5(e[0][0],e[0][1],e[1][0],e[1][1],n,!0,!0));return o}function e9(e,t,n,r,o,i,a,s){const l=[],u=[];if(0===s.roughness){e/=4,u.push([t+r*Math.cos(-e),n+o*Math.sin(-e)]);for(let i=0;i<=2*Math.PI;i+=e){const e=[t+r*Math.cos(i),n+o*Math.sin(i)];l.push(e),u.push(e)}u.push([t+r*Math.cos(0),n+o*Math.sin(0)]),u.push([t+r*Math.cos(e),n+o*Math.sin(e)])}else{const c=It(.5,s)-Math.PI/2;u.push([It(i,s)+t+.9*r*Math.cos(c-e),It(i,s)+n+.9*o*Math.sin(c-e)]);const d=2*Math.PI+c-.01;for(let a=c;a<d;a+=e){const e=[It(i,s)+t+r*Math.cos(a),It(i,s)+n+o*Math.sin(a)];l.push(e),u.push(e)}u.push([It(i,s)+t+r*Math.cos(c+2*Math.PI+.5*a),It(i,s)+n+o*Math.sin(c+2*Math.PI+.5*a)]),u.push([It(i,s)+t+.98*r*Math.cos(c+a),It(i,s)+n+.98*o*Math.sin(c+a)]),u.push([It(i,s)+t+.9*r*Math.cos(c+.5*a),It(i,s)+n+.9*o*Math.sin(c+.5*a)])}return[u,l]}function t9(e,t,n,r,o,i,a,s,l){const u=i+It(.1,l),c=[];c.push([It(s,l)+t+.9*r*Math.cos(u-e),It(s,l)+n+.9*o*Math.sin(u-e)]);for(let i=u;i<=a;i+=e)c.push([It(s,l)+t+r*Math.cos(i),It(s,l)+n+o*Math.sin(i)]);return c.push([t+r*Math.cos(a),n+o*Math.sin(a)]),c.push([t+r*Math.cos(a),n+o*Math.sin(a)]),qm(c,null,l)}function Nb(e,t,n,r,o,i,a,s){const l=[],u=[s.maxRandomnessOffset||1,(s.maxRandomnessOffset||1)+.3];let c=[0,0];const d=s.disableMultiStroke?1:2,h=s.preserveVertices;for(let f=0;f<d;f++)0===f?l.push({op:"move",data:[a[0],a[1]]}):l.push({op:"move",data:[a[0]+(h?0:It(u[0],s)),a[1]+(h?0:It(u[0],s))]}),c=h?[o,i]:[o+It(u[f],s),i+It(u[f],s)],l.push({op:"bcurveTo",data:[e+It(u[f],s),t+It(u[f],s),n+It(u[f],s),r+It(u[f],s),c[0],c[1]]});return l}function lg(e){return[...e]}function n9(e,t=0){const n=e.length;if(n<3)throw new Error("A curve must have at least three points.");const r=[];if(3===n)r.push(lg(e[0]),lg(e[1]),lg(e[2]),lg(e[2]));else{const n=[];n.push(e[0],e[0]);for(let t=1;t<e.length;t++)n.push(e[t]),t===e.length-1&&n.push(e[t]);const o=[],i=1-t;r.push(lg(n[0]));for(let e=1;e+2<n.length;e++){const t=n[e];o[0]=[t[0],t[1]],o[1]=[t[0]+(i*n[e+1][0]-i*n[e-1][0])/6,t[1]+(i*n[e+1][1]-i*n[e-1][1])/6],o[2]=[n[e+1][0]+(i*n[e][0]-i*n[e+2][0])/6,n[e+1][1]+(i*n[e][1]-i*n[e+2][1])/6],o[3]=[n[e+1][0],n[e+1][1]],r.push(o[1],o[2],o[3])}}return r}function Hb(e,t){return Math.sqrt(km(e,t))}function km(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function Gb(e,t,n){const r=km(t,n);if(0===r)return km(e,t);let o=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return o=Math.max(0,Math.min(1,o)),km(e,Bf(t,n,o))}function Bf(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function jb(e,t){const n=e[t+0],r=e[t+1],o=e[t+2],i=e[t+3];let a=3*r[0]-2*n[0]-i[0];a*=a;let s=3*r[1]-2*n[1]-i[1];s*=s;let l=3*o[0]-2*i[0]-n[0];l*=l;let u=3*o[1]-2*i[1]-n[1];return u*=u,a<l&&(a=l),s<u&&(s=u),a+s}function Z5(e,t,n,r){const o=r||[];if(jb(e,t)<n){const n=e[t+0];o.length?Hb(o[o.length-1],n)>1&&o.push(n):o.push(n),o.push(e[t+3])}else{const r=e[t+0],i=e[t+1],a=e[t+2],s=e[t+3],l=Bf(r,i,.5),u=Bf(i,a,.5),c=Bf(a,s,.5),d=Bf(l,u,.5),h=Bf(u,c,.5),f=Bf(d,h,.5);Z5([r,l,d,f],0,n,o),Z5([f,h,c,s],0,n,o)}return o}function Q5(e,t,n,r,o){const i=o||[],a=e[t],s=e[n-1];let l=0,u=1;for(let r=t+1;r<n-1;++r){const t=Gb(e[r],a,s);t>l&&(l=t,u=r)}return Math.sqrt(l)>r?(Q5(e,t,u+1,r,i),Q5(e,u,n,r,i)):(i.length||i.push(a),i.push(s)),i}function r9(e,t=.15,n){const r=[],o=(e.length-1)/3;for(let n=0;n<o;n++){Z5(e,3*n,t,r)}return n&&n>0?Q5(r,0,r.length,n):r}function $b(e,t){return Math.sqrt(Om(e,t))}function Om(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function Wb(e,t,n){const r=Om(t,n);if(0===r)return Om(e,t);let o=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return o=Math.max(0,Math.min(1,o)),Om(e,Rf(t,n,o))}function Rf(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function zb(e,t){const n=e[t+0],r=e[t+1],o=e[t+2],i=e[t+3];let a=3*r[0]-2*n[0]-i[0];a*=a;let s=3*r[1]-2*n[1]-i[1];s*=s;let l=3*o[0]-2*i[0]-n[0];l*=l;let u=3*o[1]-2*i[1]-n[1];return u*=u,a<l&&(a=l),s<u&&(s=u),a+s}function J5(e,t,n,r){const o=r||[];if(zb(e,t)<n){const n=e[t+0];o.length?$b(o[o.length-1],n)>1&&o.push(n):o.push(n),o.push(e[t+3])}else{const r=e[t+0],i=e[t+1],a=e[t+2],s=e[t+3],l=Rf(r,i,.5),u=Rf(i,a,.5),c=Rf(a,s,.5),d=Rf(l,u,.5),h=Rf(u,c,.5),f=Rf(d,h,.5);J5([r,l,d,f],0,n,o),J5([f,h,c,s],0,n,o)}return o}function Vb(e,t){return e6(e,0,e.length,t)}function e6(e,t,n,r,o){const i=o||[],a=e[t],s=e[n-1];let l=0,u=1;for(let r=t+1;r<n-1;++r){const t=Wb(e[r],a,s);t>l&&(l=t,u=r)}return Math.sqrt(l)>r?(e6(e,t,u+1,r,i),e6(e,u,n,r,i)):(i.length||i.push(a),i.push(s)),i}function Ub(e,t=.15,n){const r=[],o=(e.length-1)/3;for(let n=0;n<o;n++){J5(e,3*n,t,r)}return r}function Xb(e,t,n){const r=TE(SE(C4(e))),o=[];let i=[],a=[0,0],s=[];const l=()=>{s.length>=4&&i.push(...Ub(s,t)),s=[]},u=()=>{l(),i.length&&(o.push(i),i=[])};for(const{key:e,data:t}of r)switch(e){case"M":u(),a=[t[0],t[1]],i.push(a);break;case"L":l(),i.push([t[0],t[1]]);break;case"C":if(!s.length){const e=i.length?i[i.length-1]:a;s.push([e[0],e[1]])}s.push([t[0],t[1]]),s.push([t[2],t[3]]),s.push([t[4],t[5]]);break;case"Z":l(),i.push([a[0],a[1]])}if(u(),!n)return o;const c=[];for(const e of o){const t=Vb(e,n);t.length&&c.push(t)}return c}const No="none";class Zm{constructor(e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=e||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Tb()}_o(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}_d(e,t,n){return{shape:e,sets:t||[],options:n||this.defaultOptions}}line(e,t,n,r,o){const i=this._o(o);return this._d("line",[AE(e,t,n,r,i)],i)}rectangle(e,t,n,r,o){const i=this._o(o),a=[],s=kb(e,t,n,r,i);if(i.fill){const o=[[e,t],[e+n,t],[e+n,t+r],[e,t+r]];"solid"===i.fillStyle?a.push(G7([o],i)):a.push(Xd([o],i))}return i.stroke!==No&&a.push(s),this._d("rectangle",a,i)}ellipse(e,t,n,r,o){const i=this._o(o),a=[],s=BE(n,r,i),l=Y5(e,t,i,s);if(i.fill)if("solid"===i.fillStyle){const n=Y5(e,t,i,s).opset;n.type="fillPath",a.push(n)}else a.push(Xd([l.estimatedPoints],i));return i.stroke!==No&&a.push(l.opset),this._d("ellipse",a,i)}circle(e,t,n,r){const o=this.ellipse(e,t,n,n,r);return o.shape="circle",o}linearPath(e,t){const n=this._o(t);return this._d("linearPath",[bm(e,!1,n)],n)}arc(e,t,n,r,o,i,a=!1,s){const l=this._o(s),u=[],c=Zy(e,t,n,r,o,i,a,!0,l);if(a&&l.fill)if("solid"===l.fillStyle){const a=Object.assign({},l);a.disableMultiStroke=!0;const s=Zy(e,t,n,r,o,i,!0,!1,a);s.type="fillPath",u.push(s)}else u.push(Ib(e,t,n,r,o,i,l));return l.stroke!==No&&u.push(c),this._d("arc",u,l)}curve(e,t){const n=this._o(t),r=[],o=qy(e,n);if(n.fill&&n.fill!==No)if("solid"===n.fillStyle){const t=qy(e,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));r.push({type:"fillPath",ops:this._mergedShape(t.ops)})}else{const t=[],o=e;if(o.length){const e="number"==typeof o[0][0]?[o]:o;for(const r of e)r.length<3?t.push(...r):3===r.length?t.push(...r9(n9([r[0],r[0],r[1],r[2]]),10,(1+n.roughness)/2)):t.push(...r9(n9(r),10,(1+n.roughness)/2))}t.length&&r.push(Xd([t],n))}return n.stroke!==No&&r.push(o),this._d("curve",r,n)}polygon(e,t){const n=this._o(t),r=[],o=bm(e,!0,n);return n.fill&&("solid"===n.fillStyle?r.push(G7([e],n)):r.push(Xd([e],n))),n.stroke!==No&&r.push(o),this._d("polygon",r,n)}path(e,t){const n=this._o(t),r=[];if(!e)return this._d("path",r,n);e=(e||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const o=n.fill&&"transparent"!==n.fill&&n.fill!==No,i=n.stroke!==No,a=!!(n.simplification&&n.simplification<1),s=Xb(e,1,a?4-4*(n.simplification||1):(1+n.roughness)/2),l=Qy(e,n);if(o)if("solid"===n.fillStyle)if(1===s.length){const t=Qy(e,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));r.push({type:"fillPath",ops:this._mergedShape(t.ops)})}else r.push(G7(s,n));else r.push(Xd(s,n));return i&&(a?s.forEach(e=>{r.push(bm(e,!1,n))}):r.push(l)),this._d("path",r,n)}opsToPath(e,t){let n="";for(const r of e.ops){const e="number"==typeof t&&t>=0?r.data.map(e=>+e.toFixed(t)):r.data;switch(r.op){case"move":n+=`M${e[0]} ${e[1]} `;break;case"bcurveTo":n+=`C${e[0]} ${e[1]}, ${e[2]} ${e[3]}, ${e[4]} ${e[5]} `;break;case"lineTo":n+=`L${e[0]} ${e[1]} `}}return n.trim()}toPaths(e){const t=e.sets||[],n=e.options||this.defaultOptions,r=[];for(const e of t){let t=null;switch(e.type){case"path":t={d:this.opsToPath(e),stroke:n.stroke,strokeWidth:n.strokeWidth,fill:No};break;case"fillPath":t={d:this.opsToPath(e),stroke:No,strokeWidth:0,fill:n.fill||No};break;case"fillSketch":t=this.fillSketch(e,n)}t&&r.push(t)}return r}fillSketch(e,t){let n=t.fillWeight;return n<0&&(n=t.strokeWidth/2),{d:this.opsToPath(e),stroke:t.fill||No,strokeWidth:n,fill:No}}_mergedShape(e){return e.filter((e,t)=>0===t||"move"!==e.op)}}class Kb{constructor(e,t){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.gen=new Zm(t)}draw(e){const t=e.sets||[],n=e.options||this.getDefaultOptions(),r=this.ctx,o=e.options.fixedDecimalPlaceDigits;for(const i of t)switch(i.type){case"path":r.save(),r.strokeStyle="none"===n.stroke?"transparent":n.stroke,r.lineWidth=n.strokeWidth,n.strokeLineDash&&r.setLineDash(n.strokeLineDash),n.strokeLineDashOffset&&(r.lineDashOffset=n.strokeLineDashOffset),this._drawToContext(r,i,o),r.restore();break;case"fillPath":{r.save(),r.fillStyle=n.fill||"";const t="curve"===e.shape||"polygon"===e.shape||"path"===e.shape?"evenodd":"nonzero";this._drawToContext(r,i,o,t),r.restore();break}case"fillSketch":this.fillSketch(r,i,n)}}fillSketch(e,t,n){let r=n.fillWeight;r<0&&(r=n.strokeWidth/2),e.save(),n.fillLineDash&&e.setLineDash(n.fillLineDash),n.fillLineDashOffset&&(e.lineDashOffset=n.fillLineDashOffset),e.strokeStyle=n.fill||"",e.lineWidth=r,this._drawToContext(e,t,n.fixedDecimalPlaceDigits),e.restore()}_drawToContext(e,t,n,r="nonzero"){e.beginPath();for(const r of t.ops){const t="number"==typeof n&&n>=0?r.data.map(e=>+e.toFixed(n)):r.data;switch(r.op){case"move":e.moveTo(t[0],t[1]);break;case"bcurveTo":e.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5]);break;case"lineTo":e.lineTo(t[0],t[1])}}"fillPath"===t.type?e.fill(r):e.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(e,t,n,r,o){const i=this.gen.line(e,t,n,r,o);return this.draw(i),i}rectangle(e,t,n,r,o){const i=this.gen.rectangle(e,t,n,r,o);return this.draw(i),i}ellipse(e,t,n,r,o){const i=this.gen.ellipse(e,t,n,r,o);return this.draw(i),i}circle(e,t,n,r){const o=this.gen.circle(e,t,n,r);return this.draw(o),o}linearPath(e,t){const n=this.gen.linearPath(e,t);return this.draw(n),n}polygon(e,t){const n=this.gen.polygon(e,t);return this.draw(n),n}arc(e,t,n,r,o,i,a=!1,s){const l=this.gen.arc(e,t,n,r,o,i,a,s);return this.draw(l),l}curve(e,t){const n=this.gen.curve(e,t);return this.draw(n),n}path(e,t){const n=this.gen.path(e,t);return this.draw(n),n}}const rm="http://www.w3.org/2000/svg";class Yb{constructor(e,t){this.svg=e,this.gen=new Zm(t)}draw(e){const t=e.sets||[],n=e.options||this.getDefaultOptions(),r=this.svg.ownerDocument||window.document,o=r.createElementNS(rm,"g"),i=e.options.fixedDecimalPlaceDigits;for(const a of t){let t=null;switch(a.type){case"path":t=r.createElementNS(rm,"path"),t.setAttribute("d",this.opsToPath(a,i)),t.setAttribute("stroke",n.stroke),t.setAttribute("stroke-width",n.strokeWidth+""),t.setAttribute("fill","none"),n.strokeLineDash&&t.setAttribute("stroke-dasharray",n.strokeLineDash.join(" ").trim()),n.strokeLineDashOffset&&t.setAttribute("stroke-dashoffset",`${n.strokeLineDashOffset}`);break;case"fillPath":t=r.createElementNS(rm,"path"),t.setAttribute("d",this.opsToPath(a,i)),t.setAttribute("stroke","none"),t.setAttribute("stroke-width","0"),t.setAttribute("fill",n.fill||""),("curve"===e.shape||"polygon"===e.shape)&&t.setAttribute("fill-rule","evenodd");break;case"fillSketch":t=this.fillSketch(r,a,n)}t&&o.appendChild(t)}return o}fillSketch(e,t,n){let r=n.fillWeight;r<0&&(r=n.strokeWidth/2);const o=e.createElementNS(rm,"path");return o.setAttribute("d",this.opsToPath(t,n.fixedDecimalPlaceDigits)),o.setAttribute("stroke",n.fill||""),o.setAttribute("stroke-width",r+""),o.setAttribute("fill","none"),n.fillLineDash&&o.setAttribute("stroke-dasharray",n.fillLineDash.join(" ").trim()),n.fillLineDashOffset&&o.setAttribute("stroke-dashoffset",`${n.fillLineDashOffset}`),o}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(e,t){return this.gen.opsToPath(e,t)}line(e,t,n,r,o){const i=this.gen.line(e,t,n,r,o);return this.draw(i)}rectangle(e,t,n,r,o){const i=this.gen.rectangle(e,t,n,r,o);return this.draw(i)}ellipse(e,t,n,r,o){const i=this.gen.ellipse(e,t,n,r,o);return this.draw(i)}circle(e,t,n,r){const o=this.gen.circle(e,t,n,r);return this.draw(o)}linearPath(e,t){const n=this.gen.linearPath(e,t);return this.draw(n)}polygon(e,t){const n=this.gen.polygon(e,t);return this.draw(n)}arc(e,t,n,r,o,i,a=!1,s){const l=this.gen.arc(e,t,n,r,o,i,a,s);return this.draw(l)}curve(e,t){const n=this.gen.curve(e,t);return this.draw(n)}path(e,t){const n=this.gen.path(e,t);return this.draw(n)}}const qb={canvas:(e,t)=>new Kb(e,t),svg:(e,t)=>new Yb(e,t),generator:e=>new Zm(e),newSeed:()=>Zm.newSeed()};var ME=Symbol.for("immer-nothing"),i9=Symbol.for("immer-draftable"),Vo=Symbol.for("immer-state");function ta(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var d0=Object.getPrototypeOf;function Wu(e){return!!e&&!!e[Vo]}function Vf(e){var t;return!!e&&(bE(e)||Array.isArray(e)||!!e[i9]||!(null==(t=e.constructor)||!t[i9])||X3(e)||K3(e))}var Zb=Object.prototype.constructor.toString();function bE(e){if(!e||"object"!=typeof e)return!1;const t=d0(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Zb}function Qm(e,t){0===U3(e)?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function U3(e){const t=e[Vo];return t?t.type_:Array.isArray(e)?1:X3(e)?2:K3(e)?3:0}function t6(e,t){return 2===U3(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function kE(e,t,n){const r=U3(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function Qb(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function X3(e){return e instanceof Map}function K3(e){return e instanceof Set}function Mf(e){return e.copy_||e.base_}function n6(e,t){if(X3(e))return new Map(e);if(K3(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=bE(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[Vo];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const o=n[r],i=t[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[o]})}return Object.create(d0(e),t)}{const t=d0(e);if(null!==t&&n)return{...e};const r=Object.create(t);return Object.assign(r,e)}}function x4(e,t=!1){return Y3(e)||Wu(e)||!Vf(e)||(U3(e)>1&&(e.set=e.add=e.clear=e.delete=Jb),Object.freeze(e),t&&Object.entries(e).forEach(([e,t])=>x4(t,!0))),e}function Jb(){ta(2)}function Y3(e){return Object.isFrozen(e)}var Lg,ek={};function Uf(e){const t=ek[e];return t||ta(0,e),t}function OE(){return Lg}function tk(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function o9(e,t){t&&(Uf("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function r6(e){i6(e),e.drafts_.forEach(nk),e.drafts_=null}function i6(e){e===Lg&&(Lg=e.parent_)}function s9(e){return Lg=tk(Lg,e)}function nk(e){const t=e[Vo];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function a9(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[Vo].modified_&&(r6(t),ta(4)),Vf(e)&&(e=Jm(t,e),t.parent_||e3(t,e)),t.patches_&&Uf("Patches").generateReplacementPatches_(n[Vo].base_,e,t.patches_,t.inversePatches_)):e=Jm(t,n,[]),r6(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==ME?e:void 0}function Jm(e,t,n){if(Y3(t))return t;const r=t[Vo];if(!r)return Qm(t,(o,i)=>u9(e,r,t,o,i,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return e3(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let o=t,i=!1;3===r.type_&&(o=new Set(t),t.clear(),i=!0),Qm(o,(o,a)=>u9(e,r,t,o,a,n,i)),e3(e,t,!1),n&&e.patches_&&Uf("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function u9(e,t,n,r,o,i,a){if(Wu(o)){const a=Jm(e,o,i&&t&&3!==t.type_&&!t6(t.assigned_,r)?i.concat(r):void 0);if(kE(n,r,a),!Wu(a))return;e.canAutoFreeze_=!1}else a&&n.add(o);if(Vf(o)&&!Y3(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Jm(e,o),(!t||!t.scope_.parent_)&&"symbol"!=typeof r&&Object.prototype.propertyIsEnumerable.call(n,r)&&e3(e,o)}}function e3(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&x4(t,n)}function rk(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:OE(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,i=E4;n&&(o=[r],i=_g);const{revoke:a,proxy:s}=Proxy.revocable(o,i);return r.draft_=s,r.revoke_=a,s}var E4={get(e,t){if(t===Vo)return e;const n=Mf(e);if(!t6(n,t))return ik(e,n,t);const r=n[t];return e.finalized_||!Vf(r)?r:r===j7(e.base_,t)?($7(e),e.copy_[t]=s6(r,e)):r},has:(e,t)=>t in Mf(e),ownKeys:e=>Reflect.ownKeys(Mf(e)),set(e,t,n){const r=IE(Mf(e),t);if(null!=r&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=j7(Mf(e),t),o=null==r?void 0:r[Vo];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Qb(n,r)&&(void 0!==n||t6(e.base_,t)))return!0;$7(e),o6(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==j7(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,$7(e),o6(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=Mf(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}},defineProperty(){ta(11)},getPrototypeOf:e=>d0(e.base_),setPrototypeOf(){ta(12)}},_g={};function j7(e,t){const n=e[Vo];return(n?Mf(n):e)[t]}function ik(e,t,n){var r;const o=IE(t,n);return o?"value"in o?o.value:null==(r=o.get)?void 0:r.call(e.draft_):void 0}function IE(e,t){if(!(t in e))return;let n=d0(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=d0(n)}}function o6(e){e.modified_||(e.modified_=!0,e.parent_&&o6(e.parent_))}function $7(e){e.copy_||(e.copy_=n6(e.base_,e.scope_.immer_.useStrictShallowCopy_))}Qm(E4,(e,t)=>{_g[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),_g.deleteProperty=function(e,t){return _g.set.call(this,e,t,void 0)},_g.set=function(e,t,n){return E4.set.call(this,e[0],t,n,e[0])};var ok=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"==typeof e&&"function"!=typeof t){const n=t;t=e;const r=this;return function(e=n,...o){return r.produce(e,e=>t.call(this,e,...o))}}let r;if("function"!=typeof t&&ta(6),void 0!==n&&"function"!=typeof n&&ta(7),Vf(e)){const o=s9(this),i=s6(e,void 0);let a=!0;try{r=t(i),a=!1}finally{a?r6(o):i6(o)}return o9(o,n),a9(r,o)}if(!e||"object"!=typeof e){if(r=t(e),void 0===r&&(r=e),r===ME&&(r=void 0),this.autoFreeze_&&x4(r,!0),n){const t=[],o=[];Uf("Patches").generateReplacementPatches_(e,r,t,o),n(t,o)}return r}ta(1,e)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...n)=>this.produceWithPatches(t,t=>e(t,...n));let n,r;return[this.produce(e,t,(e,t)=>{n=e,r=t}),n,r]},"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof(null==e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Vf(e)||ta(8),Wu(e)&&(e=sk(e));const t=s9(this),n=s6(e,void 0);return n[Vo].isManual_=!0,i6(t),n}finishDraft(e,t){const n=e&&e[Vo];(!n||!n.isManual_)&&ta(9);const{scope_:r}=n;return o9(r,t),a9(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=Uf("Patches").applyPatches_;return Wu(e)?r(e,t):this.produce(e,e=>r(e,t))}};function s6(e,t){const n=X3(e)?Uf("MapSet").proxyMap_(e,t):K3(e)?Uf("MapSet").proxySet_(e,t):rk(e,t);return(t?t.scope_:OE()).drafts_.push(n),n}function sk(e){return Wu(e)||ta(10,e),FE(e)}function FE(e){if(!Vf(e)||Y3(e))return e;const t=e[Vo];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=n6(e,t.scope_.immer_.useStrictShallowCopy_)}else n=n6(e,!0);return Qm(n,(e,t)=>{kE(n,e,FE(t))}),t&&(t.finalized_=!1),n}var Uo=new ok,ak=Uo.produce;Uo.produceWithPatches.bind(Uo),Uo.setAutoFreeze.bind(Uo),Uo.setUseStrictShallowCopy.bind(Uo),Uo.applyPatches.bind(Uo);var l9,im=Uo.createDraft.bind(Uo),om=Uo.finishDraft.bind(Uo),Qs={};function uk(){if(l9)return Qs;l9=1,Object.defineProperty(Qs,"__esModule",{value:!0});for(var e=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),t={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},n={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:e?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},r={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},o=1;o<20;o++)r["f"+o]=111+o;function i(e,t,n){t&&!("byKey"in t)&&(n=t,t=null),Array.isArray(e)||(e=[e]);var r=e.map(function(e){return a(e,t)}),o=function(e){return r.some(function(t){return s(t,e)})};return null==n?o:o(n)}function a(e,o){var i=o&&o.byKey,a={},s=(e=e.replace("++","+add")).split("+"),c=s.length;for(var d in t)a[t[d]]=!1;var h=!0,f=!1,p=void 0;try{for(var g,m=s[Symbol.iterator]();!(h=(g=m.next()).done);h=!0){var v=g.value,y=v.endsWith("?")&&v.length>1;y&&(v=v.slice(0,-1));var b=u(v),w=t[b];if(v.length>1&&!w&&!n[v]&&!r[b])throw new TypeError('Unknown modifier: "'+v+'"');(1===c||!w)&&(i?a.key=b:a.which=l(v)),w&&(a[w]=!y||null)}}catch(e){f=!0,p=e}finally{try{!h&&m.return&&m.return()}finally{if(f)throw p}}return a}function s(e,t){for(var n in e){var r=e[n],o=void 0;if(null!=r&&((null!=(o="key"===n&&null!=t.key?t.key.toLowerCase():"which"===n?91===r&&93===t.which?91:t.which:t[n])||!1!==r)&&o!==r))return!1}return!0}function l(e){return e=u(e),r[e]||e.toUpperCase().charCodeAt(0)}function u(e){return e=e.toLowerCase(),e=n[e]||e}return Qs.default=i,Qs.isHotkey=i,Qs.isCodeHotkey=function(e,t){return i(e,t)},Qs.isKeyHotkey=function(e,t){return i(e,{byKey:!0},t)},Qs.parseHotkey=a,Qs.compareHotkey=s,Qs.toKeyCode=l,Qs.toKeyName=u,Qs}var nn=uk(),a6=function(e,t){return(a6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function yc(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}a6(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function lk(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(a,s)}l((r=r.apply(e,t||[])).next())})}function LE(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}function g0(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function p0(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function Ng(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)(r||!(o in t))&&(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function r0(e){return this instanceof r0?(this.v=e,this):new r0(e)}function ck(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(e){return function(t){return Promise.resolve(t).then(e,u)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(e,t){o[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||s(e,t)})},t&&(r[e]=t(r[e])))}function s(e,t){try{!function(e){e.value instanceof r0?Promise.resolve(e.value.v).then(l,u):c(i[0][2],e)}(o[e](t))}catch(e){c(i[0][3],e)}}function l(e){s("next",e)}function u(e){s("throw",e)}function c(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function fk(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof g0?g0(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,o){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,o,(t=e[n](t)).done,t.value)})}}}function nr(e){return"function"==typeof e}function _E(e){var t=e(function(e){Error.call(e),e.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var W7=_E(function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}});function t3(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var mp=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,n,r,o;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var a=g0(i),s=a.next();!s.done;s=a.next()){s.value.remove(this)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else i.remove(this);var l=this.initialTeardown;if(nr(l))try{l()}catch(e){o=e instanceof W7?e.errors:[e]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var c=g0(u),d=c.next();!d.done;d=c.next()){var h=d.value;try{c9(h)}catch(e){o=o??[],e instanceof W7?o=Ng(Ng([],p0(o)),p0(e.errors)):o.push(e)}}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}if(o)throw new W7(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)c9(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&t3(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&t3(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e;var t}(),NE=mp.EMPTY;function HE(e){return e instanceof mp||e&&"closed"in e&&nr(e.remove)&&nr(e.add)&&nr(e.unsubscribe)}function c9(e){nr(e)?e():e.unsubscribe()}var hk={Promise:void 0},dk={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,Ng([e,t],p0(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function GE(e){dk.setTimeout(function(){throw e})}function f9(){}function Im(e){e()}var P4=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,HE(t)&&t.add(n)):n.destination=mk,n}return yc(t,e),t.create=function(e,t,n){return new u6(e,t,n)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(mp),gk=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){sm(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){sm(e)}else sm(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){sm(e)}},e}(),u6=function(e){function t(t,n,r){var o,i=e.call(this)||this;return o=nr(t)||!t?{next:t??void 0,error:n??void 0,complete:r??void 0}:t,i.destination=new gk(o),i}return yc(t,e),t}(P4);function sm(e){GE(e)}function pk(e){throw e}var mk={closed:!0,next:f9,error:pk,complete:f9},S4="function"==typeof Symbol&&Symbol.observable||"@@observable";function vk(e){return e}function yk(e){return 0===e.length?vk:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}}var za=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this,o=Ck(e)?e:new u6(e,t,n);return Im(function(){var e=r,t=e.operator,n=e.source;o.add(t?t.call(o,n):n?r._subscribe(o):r._trySubscribe(o))}),o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=h9(t))(function(t,r){var o=new u6({next:function(t){try{e(t)}catch(e){r(e),o.unsubscribe()}},error:r,complete:t});n.subscribe(o)})},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[S4]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return yk(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=h9(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function h9(e){var t;return null!==(t=e??hk.Promise)&&void 0!==t?t:Promise}function wk(e){return e&&nr(e.next)&&nr(e.error)&&nr(e.complete)}function Ck(e){return e&&e instanceof P4||wk(e)&&HE(e)}function xk(e){return nr(null==e?void 0:e.lift)}function jE(e){return function(t){if(xk(t))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw new TypeError("Unable to lift unknown Observable type")}}function l6(e,t,n,r,o){return new Ek(e,t,n,r,o)}var Ek=function(e){function t(t,n,r,o,i,a){var s=e.call(this,t)||this;return s.onFinalize=i,s.shouldUnsubscribe=a,s._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=o?function(e){try{o(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return yc(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(P4),Pk=_E(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),$E=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return yc(t,e),t.prototype.lift=function(e){var t=new d9(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new Pk},t.prototype.next=function(e){var t=this;Im(function(){var n,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=g0(t.currentObservers),i=o.next();!i.done;i=o.next()){i.value.next(e)}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}})},t.prototype.error=function(e){var t=this;Im(function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}})},t.prototype.complete=function(){var e=this;Im(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,r=n.hasError,o=n.isStopped,i=n.observers;return r||o?NE:(this.currentObservers=null,i.push(e),new mp(function(){t.currentObservers=null,t3(i,e)}))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,o=t.isStopped;n?e.error(r):o&&e.complete()},t.prototype.asObservable=function(){var e=new za;return e.source=this,e},t.create=function(e,t){return new d9(e,t)},t}(za),d9=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return yc(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:NE},t}($E),Sk={now:function(){return Date.now()}},Tk=function(e){function t(t,n){return e.call(this)||this}return yc(t,e),t.prototype.schedule=function(e,t){return this},t}(mp),g9={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,Ng([e,t],p0(n)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},Dk=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return yc(t,e),t.prototype.schedule=function(e,t){var n;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(o,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),g9.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&g9.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(e){r=!0,n=e||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,t3(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(Tk),p9=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=Sk.now,e}(),Ak=function(e){function t(t,n){void 0===n&&(n=p9.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return yc(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(p9),Bk=new Ak(Dk),Rk=Bk,WE=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Mk(e){return nr(null==e?void 0:e.then)}function bk(e){return nr(e[S4])}function kk(e){return Symbol.asyncIterator&&nr(null==e?void 0:e[Symbol.asyncIterator])}function Ok(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Ik(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var Fk=Ik();function Lk(e){return nr(null==e?void 0:e[Fk])}function _k(e){return ck(this,arguments,function(){var t,n,r;return LE(this,function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,r0(t.read())];case 3:return n=o.sent(),r=n.value,n.done?[4,r0(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,r0(r)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function Nk(e){return nr(null==e?void 0:e.getReader)}function T4(e){if(e instanceof za)return e;if(null!=e){if(bk(e))return Hk(e);if(WE(e))return Gk(e);if(Mk(e))return jk(e);if(kk(e))return zE(e);if(Lk(e))return $k(e);if(Nk(e))return Wk(e)}throw Ok(e)}function Hk(e){return new za(function(t){var n=e[S4]();if(nr(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Gk(e){return new za(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function jk(e){return new za(function(t){e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,GE)})}function $k(e){return new za(function(t){var n,r;try{for(var o=g0(e),i=o.next();!i.done;i=o.next()){var a=i.value;if(t.next(a),t.closed)return}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}t.complete()})}function zE(e){return new za(function(t){zk(e,t).catch(function(e){return t.error(e)})})}function Wk(e){return zE(_k(e))}function zk(e,t){var n,r,o,i;return lk(this,void 0,void 0,function(){var a,s;return LE(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=fk(e),l.label=1;case 1:return[4,n.next()];case 2:if((r=l.sent()).done)return[3,4];if(a=r.value,t.next(a),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=l.sent(),o={error:s},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(i=n.return)?[4,i.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function Vk(e){return e instanceof Date&&!isNaN(e)}function VE(e,t){return jE(function(n,r){var o=0;n.subscribe(l6(r,function(n){r.next(e.call(t,n,o++))}))})}var Uk=Array.isArray;function Xk(e,t){return Uk(t)?e.apply(void 0,Ng([],p0(t))):e(t)}function Kk(e){return VE(function(t){return Xk(e,t)})}function Yk(e,t,n,r,o,i,a,s){var l=[],u=0,c=0,d=!1,h=function(){d&&!l.length&&!u&&t.complete()},f=function(e){u++;var o=!1;T4(n(e,c++)).subscribe(l6(t,function(e){t.next(e)},function(){o=!0},void 0,function(){if(o)try{u--;for(var e=function(){var e=l.shift();a||f(e)};l.length&&u<r;)e();h()}catch(e){t.error(e)}}))};return e.subscribe(l6(t,function(e){return u<r?f(e):l.push(e)},function(){d=!0,h()})),function(){}}function UE(e,t,n){return void 0===n&&(n=1/0),nr(t)?UE(function(n,r){return VE(function(e,o){return t(n,e,r,o)})(T4(e(n,r)))},n):("number"==typeof t&&(n=t),jE(function(t,r){return Yk(t,r,e,n)}))}var ra,Eg,qk=["addListener","removeListener"],Zk=["addEventListener","removeEventListener"],Qk=["on","off"];function n3(e,t,n,r){if(nr(n)&&(r=n,n=void 0),r)return n3(e,t,n).pipe(Kk(r));var o=p0(tO(e)?Zk.map(function(r){return function(o){return e[r](t,o,n)}}):Jk(e)?qk.map(m9(e,t)):eO(e)?Qk.map(m9(e,t)):[],2),i=o[0],a=o[1];if(!i&&WE(e))return UE(function(e){return n3(e,t,n)})(T4(e));if(!i)throw new TypeError("Invalid event target");return new za(function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return i(t),function(){return a(t)}})}function m9(e,t){return function(n){return function(r){return e[n](t,r)}}}function Jk(e){return nr(e.addListener)&&nr(e.removeListener)}function eO(e){return nr(e.on)&&nr(e.off)}function tO(e){return nr(e.addEventListener)&&nr(e.removeEventListener)}function nO(e,t,n){return void 0===n&&(n=Rk),new za(function(t){var r=Vk(e)?0-n.now():e;r<0&&(r=0);var o=0;return n.schedule(function(){t.closed||(t.next(o++),t.complete())},r)})}!function(e){e.ew="ew-resize",e.ns="ns-resize",e.nesw="nesw-resize",e.nwse="nwse-resize"}(ra||(ra={})),(Eg||(Eg={})).crosshair="crosshair";const z7=[ra.ns,ra.nesw,ra.ew,ra.nwse],il="plait-board-attached",dr=1,c6=2,vp="selection-rectangle",rO="selection-rectangle-bounding",iO=.1,XE=.1,KE=4,oO="plait-board-container",YE="active-with-moving",v9="rotate-handle",sO="resize-handle",aO=20,qE={MAIN:0,WHEEL:1},D4=3,ZE=10,A4=5;function uO(e){return!!e.beforeContextChange}function lO(e){return!!e.onContextChanged}const y9=new WeakMap,Fm=new WeakMap,i0=new WeakMap,Nf=new WeakMap,f6=new WeakMap,mg=new WeakMap,vg=new WeakMap,h6=new WeakMap,r3=new WeakMap,i3=new WeakMap,d6=new WeakMap,g6=new WeakMap,p6=new WeakMap,m6=new WeakMap,Lu=new WeakMap,QE=new WeakMap,v6=new WeakMap,JE=new WeakMap,B4=new WeakMap,R4=new WeakMap,q3=new WeakMap,Z3=new WeakMap,w9=new WeakMap,yg=new WeakMap;function Xo(e){return null==e}const Hg=(e,t)=>e+Math.floor(255*t).toString(16);function cO(e){return 2===e.button}function M4(e){const t=new Map;return e.forEach(e=>{t.has(e.id)||t.set(e.id,e)}),Array.from(t.values())}const fO=(e,t,n=e.length-1)=>{n<0&&(n=e.length+n);let r=(n=Math.min(e.length-1,Math.max(n,0)))+1;for(;--r>-1;)if(t(e[r],r,e))return r;return-1},hO=(e,t,n=0)=>{n<0&&(n=e.length+n);let r=(n=Math.min(e.length,Math.max(n,0)))-1;for(;++r<e.length;)if(t(e[r],r,e))return r;return-1},dO=e=>{e.sort((e,t)=>e-t);for(let t=1;t<e.length;t++)if(e[t]!==e[t-1]+1)return!1;return!0},gO={isViewport:e=>!Xo(e.zoom)&&!Xo(e.viewBackgroundColor)},wt={ancestors(e,t={}){const{reverse:n=!1}=t;let r=wt.levels(e,t);return r=n?r.slice(1):r.slice(0,-1),r},levels(e,t={}){const{reverse:n=!1}=t,r=[];for(let t=0;t<=e.length;t++)r.push(e.slice(0,t));return n&&r.reverse(),r},parent(e){if(0===e.length)throw new Error(`Cannot get the parent path of the root path [${e}].`);return e.slice(0,-1)},next(e){if(0===e.length)throw new Error(`Cannot get the next path of a root path [${e}], because it has no next index.`);const t=e[e.length-1];return e.slice(0,-1).concat(t+1)},hasPrevious:e=>e[e.length-1]>0,previous(e){if(0===e.length)throw new Error(`Cannot get the previous path of a root path [${e}], because it has no previous index.`);const t=e[e.length-1];if(t<=0)throw new Error(`Cannot get the previous path of a first child path [${e}] because it would result in a negative index.`);return e.slice(0,-1).concat(t-1)},isAncestor:(e,t)=>e.length<t.length&&0===wt.compare(e,t),compare(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return 0},equals:(e,t)=>e.length===t.length&&e.every((e,n)=>e===t[n]),endsBefore(e,t){const n=e.length-1,r=e.slice(0,n),o=t.slice(0,n),i=e[n],a=t[n];return wt.equals(r,o)&&i<a},isSibling(e,t){if(e.length!==t.length)return!1;const n=e.slice(0,-1),r=t.slice(0,-1);return e[e.length-1]!==t[t.length-1]&&wt.equals(n,r)},transform(e,t){if(!e)return null;const n=[...e];if(0===e.length)return n;switch(t.type){case"insert_node":{const{path:e}=t;(wt.equals(e,n)||wt.endsBefore(e,n)||wt.isAncestor(e,n))&&(n[e.length-1]+=1);break}case"remove_node":{const{path:e}=t;if(wt.equals(e,n)||wt.isAncestor(e,n))return null;wt.endsBefore(e,n)&&(n[e.length-1]-=1);break}case"move_node":{const{path:e,newPath:r}=t;if(wt.equals(e,r))return n;if(wt.isAncestor(e,n)||wt.equals(e,n)){const t=r.slice();return wt.endsBefore(e,r)&&e.length<r.length&&(t[e.length-1]-=1),t.concat(n.slice(e.length))}wt.isSibling(e,r)&&(wt.isAncestor(r,n)||wt.equals(r,n))?wt.endsBefore(e,n)?n[e.length-1]-=1:n[e.length-1]+=1:wt.endsBefore(r,n)||wt.equals(r,n)||wt.isAncestor(r,n)?(wt.endsBefore(e,n)&&(n[e.length-1]-=1),n[r.length-1]+=1):wt.endsBefore(e,n)&&(wt.equals(r,n)&&(n[r.length-1]+=1),n[e.length-1]-=1);break}}return n}},Xt={parent:(e,t)=>{const n=wt.parent(t);return Xt.get(e,n)},*parents(e,t,n={}){for(const r of wt.ancestors(t,n))yield Xt.get(e,r)},get(e,t){let n=e;for(let e=0;e<t.length;e++){const r=t[e];if(!n||!n.children||!n.children[r])throw new Error(`Cannot find a descendant at path [${t}]`);n=n.children[r]}return n},last(e,t){let n=Xt.get(e,t);for(;n&&n.children&&n.children.length>0;){const e=n.children.length-1;n=n.children[e]}return n},first(e,t){const n=t.slice();let r=Xt.get(e,n);if(!r.children||!e.isExpanded(r))return r;for(;r&&r.children&&r.children.length>0&&e.isExpanded(r)&&0!==r.children.length;)r=r.children[0],n.push(0);return r}},pO=(e,t,n,r,o)=>{var i,a;switch(o.type){case"insert_node":{const{path:t,node:n}=o,r=Xt.parent(e,t),i=t[t.length-1];if(!r.children||i>r.children.length)throw new Error(`Cannot apply an "insert_node" operation at path [${t}] because the destination is past the end of the node.`);r.children.splice(i,0,n);break}case"remove_node":{const{path:t}=o,n=Xt.parent(e,t),r=t[t.length-1];if(!n.children||r>n.children.length)throw new Error(`Cannot apply an "insert_node" operation at path [${t}] because the destination is past the end of the node.`);n.children.splice(r,1);break}case"move_node":{const{path:t,newPath:n}=o;if(wt.isAncestor(t,n))throw new Error(`Cannot move a path [${t}] to new path [${n}] because the destination is inside itself.`);const r=Xt.get(e,t),s=Xt.parent(e,t),l=t[t.length-1];null==(i=s.children)||i.splice(l,1);const u=wt.transform(t,o),c=Xt.get(e,wt.parent(u)),d=u[u.length-1];null==(a=c.children)||a.splice(d,0,r);break}case"set_node":{const{path:t,properties:n,newProperties:r}=o;if(0===t.length)throw new Error("Cannot set properties on the root node!");const i=Xt.get(e,t);for(const e in r){const t=r[e];null==t?delete i[e]:i[e]=t}for(const e in n)r.hasOwnProperty(e)||delete i[e];break}case"set_viewport":{const{newProperties:e}=o;if(null==e)n=e;else{if(null==n){if(!gO.isViewport(e))throw new Error(`Cannot apply an incomplete "set_viewport" operation properties ${JSON.stringify(e)} when there is no current viewport.`);n={...e}}for(const t in e){const r=e[t];null==r?delete n[t]:n[t]=r}}break}case"set_selection":{const{newProperties:e}=o;t=null==e?e:null===t?o.newProperties:e;break}case"set_theme":{const{newProperties:e}=o;r=e;break}}return{selection:t,viewport:n,theme:r}},mO={transform(e,t){e.children=im(e.children);let n=e.viewport&&im(e.viewport),r=e.selection&&im(e.selection),o=e.theme&&im(e.theme);try{const i=pO(e,r,n,o,t);n=i.viewport,r=i.selection,o=i.theme}finally{e.children=om(e.children),e.selection=r?Wu(r)?om(r):r:null,e.viewport=Wu(n)?om(n):n,e.theme=Wu(o)?om(o):o}}},M={isHit:(e,t)=>M.isHitX(e,t)&&M.isHitY(e,t),isHitX:(e,t)=>{const n=e.x<t.x?e.x:t.x,r=e.x+e.width>t.x+t.width?e.x+e.width:t.x+t.width;return Math.floor(r-n-e.width-t.width)<=0},isHitY:(e,t)=>{const n=e.y<t.y?e.y:t.y,r=e.y+e.height>t.y+t.height?e.y+e.height:t.y+t.height;return Math.floor(r-n-e.height-t.height)<=0},getPoints:e=>[[e.x,e.y],[e.x+e.width,e.y+e.height]],getRectangleByCenterPoint:(e,t,n)=>M.getRectangleByPoint([e[0]-t/2,e[1]-n/2],t,n),getRectangleByPoint:(e,t,n)=>({x:e[0],y:e[1],width:t,height:n}),getRectangleByPoints(e){vO(e)&&(e=[e]);let t=1/0,n=1/0,r=-1/0,o=-1/0;for(const i of e){const e=i.map(e=>e[0]),a=i.map(e=>e[1]);t=Math.min(t,...e),n=Math.min(n,...a),r=Math.max(r,...e),n=Math.min(n,...a),o=Math.max(o,...a)}return{x:t,y:n,width:r-t,height:o-n}},getCornerPointsByPoints(e){const t=e.map(e=>e[0]),n=e.map(e=>e[1]),r=Math.min(...t),o=Math.max(...t),i=Math.min(...n),a=Math.max(...n);return[[r,i],[o,i],[o,a],[r,a]]},getOutlineRectangle:(e,t)=>({x:e.x+t,y:e.y+t,width:e.width-2*t,height:e.height-2*t}),inflate:(e,t)=>{const n=t/2;return{x:e.x-n,y:e.y-n,width:e.width+2*n,height:e.height+2*n}},isEqual:(e,t)=>e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height,getCornerPoints:e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],getCenterPoint:e=>[e.x+e.width/2,e.y+e.height/2],getCenterPointByPoints:e=>M.getCenterPoint(M.getRectangleByPoints(e)),getEdgeCenterPoints:e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]],getConnectionPoint:(e,t)=>[e.x+e.width*t[0],e.y+e.height*t[1]],expand:(e,t,n=t,r=t,o=n)=>({x:e.x-t,y:e.y-n,width:e.width+t+r,height:e.height+n+o}),getGapCenter(e,t,n){const r=n?"x":"y",o=n?"width":"height",i=[e[r],e[r]+e[o],t[r],t[r]+t[o]].sort((e,t)=>e-t);return(i[1]+i[2])/2},isPointInRectangle(e,t){const n=t[0],r=t[1];return n>e.x&&n<e.x+e.width&&r>e.y&&r<e.y+e.height},getBoundingRectangle(e){if(0===e.length)throw new Error("rectangles can not be empty array");let t=Number.MAX_VALUE,n=Number.MAX_VALUE,r=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;return e.forEach(e=>{t=Math.min(t,e.x),n=Math.min(n,e.y),r=Math.max(r,e.x+e.width),o=Math.max(o,e.y+e.height)}),{x:t,y:n,width:r-t,height:o-n}}};function vO(e){return Array.isArray(e)&&e.every(e=>Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1])}function eP(e,t,n,r,o,i){const a=o-n,s=i-r,l=a*a+s*s;let u,c,d=-1;0!==l&&(d=((e-n)*a+(t-r)*s)/l),d<0?(u=n,c=r):d>1?(u=o,c=i):(u=n+d*a,c=r+d*s);const h=e-u,f=t-c;return Math.hypot(h,f)}function Q3(e,t){const n=e[0],r=e[1],o=t[0][0],i=t[0][1],a=t[1][0],s=t[1][1],l=a-o,u=s-i,c=l*l+u*u;let d,h,f=-1;return 0!==c&&(f=((n-o)*l+(r-i)*u)/c),f<0?(d=o,h=i):f>1?(d=a,h=s):(d=o+f*l,h=i+f*u),[d,h]}function tP(e,t){const n=t.length;let r=1/0;if(1===t.length)return Tt(...t[0],...e);for(let o=0;o<n-1;o++){const n=t[o],i=t[o+1],a=eP(e[0],e[1],n[0],n[1],i[0],i[1]);a<r&&(r=a)}return r}function Ln(e,t,n=!0){const r=t.length;let o=1/0,i=e;for(let a=0;a<r;a++){const s=t[a];if(a===r-1&&!n)continue;const l=a===r-1?t[0]:t[a+1],u=eP(e[0],e[1],s[0],s[1],l[0],l[1]);u<o&&(o=u,i=Q3(e,[s,l]))}return i}function b4(e,t){let n=1/0,r=e;for(const o of t){const t=Q3(e,o),i=Tt(e[0],e[1],t[0],t[1]);i<n&&(n=i,r=t)}return r}function Ai(e,t,n,r){const o={x:t[0]-n,y:t[1]-r,height:2*r,width:2*n},i=Math.abs(e[0]-o.x-o.width/2),a=Math.abs(e[1]-o.y-o.height/2);let s=.707,l=.707;const u=Math.abs(o.width)/2,c=Math.abs(o.height)/2;[0,1,2,3].forEach(e=>{const t=(u*u-c*c)*s**3/u,n=(c*c-u*u)*l**3/c,r=u*s-t,o=c*l-n,d=i-t,h=a-n,f=Math.hypot(o,r),p=Math.hypot(h,d);s=Math.min(1,Math.max(0,(d*f/p+t)/u)),l=Math.min(1,Math.max(0,(h*f/p+n)/c));const g=Math.hypot(l,s);s/=g,l/=g});const d=e[0]>t[0]?1:-1,h=e[1]>t[1]?1:-1;return[t[0]+u*s*d,t[1]+c*l*h]}function m0(e,t,n,r,o){return[(e-n)*Math.cos(o)-(t-r)*Math.sin(o)+n,(e-n)*Math.sin(o)+(t-r)*Math.cos(o)+r]}function Tt(e,t,n,r){const o=e-n,i=t-r;return Math.hypot(o,i)}function yp(e,t,n){var r=Math.max(n.x-e,0,e-(n.x+n.width)),o=Math.max(n.y-t,0,t-(n.y+n.height));return Math.sqrt(r*r+o*o)}const am=(e,t,n,r)=>{if(mt.isEquals(e,t)&&mt.isEquals(n,r)&&!mt.isEquals(e,n))return!1;const o=(e,t)=>e[0]*t[1]-e[1]*t[0],i=[t[0]-e[0],t[1]-e[1]],a=[n[0]-e[0],n[1]-e[1]],s=[r[0]-e[0],r[1]-e[1]],l=[e[0]-n[0],e[1]-n[1]],u=[t[0]-n[0],t[1]-n[1]],c=[r[0]-n[0],r[1]-n[1]];return o(i,a)*o(i,s)<=0&&o(c,l)*o(c,u)<=0},o3=(e,t)=>{if(1===e.length)return M.isPointInRectangle(t,e[0]);const n=M.getCornerPoints(t),r=e.length;for(let o=0;o<r;o++){const i=e[o],a=e[(o+1)%r];if((o!==r-1||!mt.isEquals(i,a))&&(yO(i,a,t)||lc(i,n)||lc(a,n)))return!0}return!1},yO=(e,t,n)=>{const r=M.getCornerPoints(n);return am(e,t,r[0],r[1])||am(e,t,r[1],r[2])||am(e,t,r[2],r[3])||am(e,t,r[3],r[0])},lc=(e,t)=>{const n=e[0],r=e[1];let o=!1;for(var i=0,a=t.length-1;i<t.length;a=i++){let e=t[i][0],s=t[i][1],l=t[a][0],u=t[a][1];s>r!=u>r&&n<(l-e)*(r-s)/(u-s)+e&&(o=!o)}return o},Uu=(e,t,n,r,o=0)=>{const i=Math.cos(o),a=Math.sin(o),s=(e[0]-t[0])*i+(e[1]-t[1])*a,l=(e[1]-t[1])*i-(e[0]-t[0])*a;return s*s/(n*n)+l*l/(r*r)<=1},k4=(e,t,n,r=0)=>{const{x:o,y:i,width:a,height:s}=t,l=e[0]>=o&&e[0]<=o+a&&e[1]>=i&&e[1]<=i+s,u=e[0]>=o&&e[0]<=o+n&&e[1]>=i&&e[1]<=i+n&&Math.hypot(e[0]-(o+n),e[1]-(i+n))>n,c=e[0]>=o&&e[0]<=o+n&&e[1]>=i+s&&e[1]<=i+s-n&&Math.hypot(e[0]-(o+n),e[1]-(i+s-n))>n,d=e[0]>=o+a-n&&e[0]<=o+a&&e[1]>=i&&e[1]<=i+n&&Math.hypot(e[0]-(o+a-n),e[1]-(i+n))>n,h=e[0]>=o+a-n&&e[0]<=o+a&&e[1]>=i+s-n&&e[1]<=i+s&&Math.hypot(e[0]-(o+a-n),e[1]-(i+s-n))>n;return l&&!(u||c||d||h)},wp=function(e){let t,n,r,o,i,a,s,l,u,c,d,h,f;var p,g,m,v,y,b;const w=[];w.push([Math.round(e[0][0]),Math.round(e[0][1])]);for(var x=e.length,C=0;C<x-1;C++)t=0==C?e[0]:e[C-1],n=e[C],r=e[C+1],o=C+2<x?e[C+2]:r,s=Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2)),l=Math.sqrt(Math.pow(n[0]-r[0],2)+Math.pow(n[1]-r[1],2)),u=Math.sqrt(Math.pow(r[0]-o[0],2)+Math.pow(r[1]-o[1],2)),p=Math.pow(u,.5),m=Math.pow(u,1),g=Math.pow(l,.5),v=Math.pow(l,1),b=Math.pow(s,.5),c=2*(y=Math.pow(s,1))+3*b*g+v,d=2*m+3*p*g+v,h=3*b*(b+g),h>0&&(h=1/h),f=3*p*(p+g),f>0&&(f=1/f),i=[(-v*t[0]+c*n[0]+y*r[0])*h,(-v*t[1]+c*n[1]+y*r[1])*h],a=[(m*n[0]+d*r[0]-v*o[0])*f,(m*n[1]+d*r[1]-v*o[1])*f],0==i[0]&&0==i[1]&&(i=n),0==a[0]&&0==a[1]&&(a=r),w.push(i,a,r);return w};function qa(e,t,n,r){return 0===Math.abs(t)?e>0?-1/0:1/0:-r*r*e/(n*n*t)}function Za(e,t,n){if(n===1/0)return[0,-1];if(n===-1/0)return[0,1];let r=[1,-n];return t<0&&(r=[-r[0],-r[1]]),r}function wO(e){return+e.toFixed(2)}function O4(e,t){const n=Math.pow(10,t);return Math.ceil(e*n)/n}function y6(e,t,n=1e-6){return Math.abs(e-t)<=n}function C9(e,t,n,r,o,i,a=!0){if(0===o||0===i||e[0]===t[0]&&e[1]===t[1])return[];o=o<0?o:-o,i=i<0?i:-i,e[0]-=n,e[1]-=r,t[0]-=n,t[1]-=r;var s=(t[0]-e[0])*(t[0]-e[0])/o/o+(t[1]-e[1])*(t[1]-e[1])/i/i,l=2*e[0]*(t[0]-e[0])/o/o+2*e[1]*(t[1]-e[1])/i/i,u=[],c=l*l-4*s*(e[0]*e[0]/o/o+e[1]*e[1]/i/i-1);return 0===c?u.push(-l/2/s):c>0&&(u.push((-l+Math.sqrt(c))/2/s),u.push((-l-Math.sqrt(c))/2/s)),u.filter(e=>!a||e>=0&&e<=1).map(o=>[e[0]+(t[0]-e[0])*o+n,e[1]+(t[1]-e[1])*o+r])}function x9(e,t,n,r,o=.5){return[e+(n-e)*o,t+(r-t)*o]}function nP(e,t){const n=(t.endX-e[0])/2,r=(t.endY-e[1])/2,o=Math.cos(t.xAxisRotation),i=Math.sin(t.xAxisRotation),a=o*n+i*r,s=-i*n+o*r,l=Math.abs(t.rx),u=Math.abs(t.ry),c=a*a/(l*l)+s*s/(u*u),d=c>1?Math.sqrt(c):1,h=l*d,f=u*d,p=(h*h*f*f-h*h*s*s-f*f*a*a)/(h*h*s*s+f*f*a*a),g=(t.largeArcFlag===t.sweepFlag?-1:1)*Math.sqrt(Math.max(0,p)),m=g*(h*s/f),v=g*(-f*a/h);return{center:[o*m-i*v+(e[0]+t.endX)/2,i*m+o*v+(e[1]+t.endY)/2],rx:h,ry:f}}function J3(e,t,n){const{center:r,rx:o,ry:i}=nP(t,n),a=Ai(e,r,o,i),s=Math.atan2(t[1]-r[1],t[0]-r[0]),l=Math.atan2(n.endY-r[1],n.endX-r[0]);if(CO(Math.atan2(a[1]-r[1],a[0]-r[0]),s,l,1===n.sweepFlag))return a;return Tt(e[0],e[1],t[0],t[1])<Tt(e[0],e[1],n.endX,n.endY)?t:[n.endX,n.endY]}function CO(e,t,n,r){const o=e=>(e%(2*Math.PI)+2*Math.PI)%(2*Math.PI),i=o(e),a=o(t),s=o(n);return r?a<=s?i>=a&&i<=s:i>=a||i<=s:a>=s?i<=a&&i>=s:i<=a||i>=s}function xO(e,t,n){return 0===yp(t,n,I.getBoardContainer(e).getBoundingClientRect())}function I4(e){const{hideScrollbar:t}=e.options;let n=0;if(!t){const t=I.getViewportContainer(e);n=t.offsetWidth-t.clientWidth}return n}const D0="http://www.w3.org/2000/svg";function Lt(){return document.createElementNS(D0,"g")}function F4(){return document.createElementNS(D0,"path")}function V7(e,t){const n=document.createElementNS(D0,"rect");n.setAttribute("x",`${e.x}`),n.setAttribute("y",`${e.y}`),n.setAttribute("width",`${e.width}`),n.setAttribute("height",`${e.height}`);for(let e in t){const r=e;n.setAttribute(e,`${t[r]}`)}return n}const Wt=(e,t)=>{e.setAttribute("stroke-linecap",t)},EO=(e,t)=>{e.querySelectorAll("path").forEach(e=>{e.setAttribute("stroke-linecap",t)})};function PO(){return document.createElementNS(D0,"mask")}function SO(e,t,n,r){var o=document.createElementNS(D0,"text");return o.setAttribute("x",`${e}`),o.setAttribute("y",`${t}`),o.setAttribute("fill",n),o.textContent=r,o}const TO=e=>DO(e)&&1===e.nodeType,DO=e=>e instanceof window.Node,AO=e=>!(!TO(e)||"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName),Va=e=>e.button===qE.MAIN,BO=e=>e.button===qE.WHEEL;function L4(e,t,n,r){var o=document.createElementNS(D0,"foreignObject");return o.setAttribute("x",`${e}`),o.setAttribute("y",`${t}`),o.setAttribute("width",`${O4(n,0)}`),o.setAttribute("height",`${r}`),o}function Pg(e,t,n,r,o){const i=e instanceof SVGForeignObjectElement?e:e.querySelector("foreignObject");i&&(i.setAttribute("width",`${O4(t,0)}`),i.setAttribute("height",`${n}`),i.setAttribute("x",`${r}`),i.setAttribute("y",`${o}`))}function RO(e,t){const n=e instanceof SVGForeignObjectElement?e:e.querySelector("foreignObject");n&&n.setAttribute("width",`${O4(t,0)}`)}const MO=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),bO=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,s3=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),kO=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),OO=typeof navigator<"u"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),IO=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),FO=(e,t)=>"set_viewport"===e.type&&e.type===(null==t?void 0:t.type),LO=(e,t)=>!("set_selection"===e.type||"set_viewport"===e.type),_O=e=>"set_selection"!==e.type,vs={isSaving:e=>U7.get(e),isMerging:e=>br.get(e),isSplittingOnce:e=>lm.get(e),setSplittingOnce(e,t){lm.set(e,t)},withMerging(e,t){const n=vs.isMerging(e);br.set(e,!0),t(),br.set(e,n)},withNewBatch(e,t){const n=vs.isMerging(e);br.set(e,!0),lm.set(e,!0),t(),br.set(e,n),lm.delete(e)},withoutMerging(e,t){const n=vs.isMerging(e);br.set(e,!1),t(),br.set(e,n)},withoutSaving(e,t){const n=vs.isSaving(e);U7.set(e,!1),t(),U7.set(e,n)}},NO={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],arrow:["down","left","right","up"],extendArrow:["shift+down","shift+left","shift+right","shift+up"],moveBackward:"left",moveForward:"right",moveUp:"up",moveDown:"down",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",extendUp:"shift+up",extendDown:"shift+down",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z",shift:"shift"},HO={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},GO={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},Rn=e=>{const t=NO[e],n=HO[e],r=GO[e],o=t&&nn.isKeyHotkey(t),i=n&&nn.isKeyHotkey(n),a=r&&nn.isKeyHotkey(r);return e=>!!(o&&o(e)||s3&&i&&i(e)||!s3&&a&&a(e))},Ti={isBold:Rn("bold"),isCompose:Rn("compose"),isArrow:Rn("arrow"),isMoveBackward:Rn("moveBackward"),isMoveForward:Rn("moveForward"),isMoveUp:Rn("moveUp"),isMoveDown:Rn("moveDown"),isDeleteBackward:Rn("deleteBackward"),isDeleteForward:Rn("deleteForward"),isDeleteLineBackward:Rn("deleteLineBackward"),isDeleteLineForward:Rn("deleteLineForward"),isDeleteWordBackward:Rn("deleteWordBackward"),isDeleteWordForward:Rn("deleteWordForward"),isExtendBackward:Rn("extendBackward"),isExtendForward:Rn("extendForward"),isExtendUp:Rn("extendUp"),isExtendDown:Rn("extendDown"),isExtendArrow:Rn("extendArrow"),isExtendLineBackward:Rn("extendLineBackward"),isExtendLineForward:Rn("extendLineForward"),isItalic:Rn("italic"),isMoveLineBackward:Rn("moveLineBackward"),isMoveLineForward:Rn("moveLineForward"),isMoveWordBackward:Rn("moveWordBackward"),isMoveWordForward:Rn("moveWordForward"),isRedo:Rn("redo"),isSplitBlock:Rn("splitBlock"),isTransposeCharacter:Rn("transposeCharacter"),isUndo:Rn("undo"),isShift:Rn("shift")};function En(e=5){const t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz";let n="";for(let r=0;r<e;r++)n+=t.charAt(Math.floor(41*Math.random()));return n}function di(e,t,n,r){if(e.children&&(!n||n(e))){let o=[...e.children];o=r?o.reverse():o,o.forEach(e=>{di(e,t,n)})}t(e)}const nh=e=>t=>!(!I.isBoard(t)&&!e.isRecursion(t)),yo="#6698FF",_4="#6698FF25",v0={isCollapsed:e=>e.anchor[0]==e.focus[0]&&e.anchor[1]===e.focus[1]},yn={isRootElement(e){const t=Nf.get(e);return!(!t||!I.isBoard(t))},getElementRef:e=>yg.get(e),getElementG(e){const t=mg.get(e);if(!t)throw new Error(`can not resolve element g: ${JSON.stringify(e)}`);return t},hasMounted:e=>!!yn.getContainerG(e,{suppressThrow:!0}),getContainerG(e,t){const n=vg.get(e)||null;if(!n){if(t.suppressThrow)return null;throw new Error("can not resolve container g")}return n}},ev=(e,t,n=!0)=>[...t].sort((t,r)=>{const o=I.findPath(e,t),i=I.findPath(e,r);return n?o[0]-i[0]:i[0]-o[0]}),rP=new Map,cg=e=>rP.get(e)||[],fg=(e,t)=>{rP.set(e,t)};class jO{constructor(e){this.debugKey=e}isDebug(){return Jl(this.debugKey)}clear(){if(!this.isDebug())return;const e=cg(this.debugKey);fg(this.debugKey,[]),e.forEach(e=>e.remove())}drawPolygon(e,t,n){if(!Jl(this.debugKey))return;const r=I.getRoughSVG(e).polygon(t,n||{stroke:"red"});r.classList.add(this.debugKey),I.getElementTopHost(e).append(r);const o=cg(this.debugKey);return o.push(r),fg(this.debugKey,o),r}drawLine(e,t,n){if(!Jl(this.debugKey))return;const r=I.getRoughSVG(e).linearPath(t,n||{stroke:"red"});r.classList.add(this.debugKey),I.getElementTopHost(e).append(r);const o=cg(this.debugKey);return o.push(r),fg(this.debugKey,o),r}drawRectangle(e,t,n){if(!Jl(this.debugKey))return;let r;r=t instanceof Array?M.getRectangleByPoints(t):t;const o=I.getRoughSVG(e).rectangle(r.x,r.y,r.width,r.height,n||{stroke:"red"});o.classList.add(this.debugKey),I.getElementTopHost(e).append(o);const i=cg(this.debugKey);return i.push(o),fg(this.debugKey,i),o}drawCircles(e,t,n=0,r=!1,o){if(!Jl(this.debugKey))return;const i=[];return t.forEach((t,a)=>{const s=I.getRoughSVG(e).circle(t[0],t[1],r?n*(a+1):n,Object.assign({},{stroke:"red",fill:"red",fillStyle:"solid"},o||{}));s.classList.add(this.debugKey),I.getElementTopHost(e).append(s);const l=cg(this.debugKey);l.push(s),i.push(s),fg(this.debugKey,l)}),i}}const A0=e=>new jO(e),Jl=e=>"true"===localStorage.getItem(e||"debug:plait");var Ga;!function(e){e.withSelection="withSelection",e.withHand="withHand"}(Ga||(Ga={}));const iP=(e,t,n=()=>!0)=>{const r=t||e.selection,o=[];if(!r)return[];if(v0.isCollapsed(r)){const t=oP(e,r.anchor,n);return null!=t&&t.length?t:[]}return di(e,t=>{if(!I.isBoard(t)&&n(t)){let n=!1;try{n=e.isRectangleHit(t,r)}catch(e){Jl()&&console.error("isRectangleHit",e,"node",t)}n&&o.push(t)}},nh(e),!0),o},oP=(e,t,n=()=>!0,r=!0)=>{let o=[];return di(e,i=>{if(I.isBoard(i)||!n(i)||!yn.hasMounted(i))return;let a=!1;try{a=e.isHit(i,t,r)}catch(e){Jl()&&console.error("isHit",e,"node",i)}a&&o.push(i)},nh(e),!0),o},Qa=(e,t,n=()=>!0,r=!0)=>{const o=oP(e,t,n,r);return e.getOneHitElement(o)},$O=(e,t)=>{const n=Qe(e),r=n.length>0&&on(e,n,!1);return r&&M.isPointInRectangle(r,t)?n:[]},Na=(e,t)=>{const n=ev(e,t);QE.set(e,n)},Qe=e=>QE.get(e)||[],rh=(e,t)=>{let n=[];Array.isArray(t)?n.push(...t):n.push(t);const r=Qe(e);Na(e,[...r,...n])},tv=(e,t,n=!1)=>{const r=Qe(e);if(r.includes(t)){const o=[];e.isRecursion(t)&&n?di(t,e=>{o.push(e)},t=>e.isRecursion(t)):o.push(t);const i=r.filter(e=>!o.includes(e));Na(e,i)}},WO=(e,t,n)=>{const r=Qe(e);r.splice(r.indexOf(t),1,n)},B0=e=>{Na(e,[])},Hf=(e,t)=>!!Qe(e).find(e=>e===t),w6=e=>{const t=e.getPluginOptions(Ga.withSelection);e.setPluginOptions(Ga.withSelection,{isDisabledSelection:!0}),setTimeout(()=>{e.setPluginOptions(Ga.withSelection,{...t})},0)},zO=(e,t)=>$O(e,t).length>0,sP=(e,t)=>!!Qa(e,t)||zO(e,t);function R0(e,t,n,r,o,i,a=!1,s){let l=s||0;const u=[t+l,n],c=[r-l,n],d=[r,n+l],h=[r,o-l],f=[r-l,o],p=[t+l,o],g=[t,o-l],m=[t,n+l],v=e.path(`M${c[0]} ${c[1]} A ${l} ${l}, 0, 0, 1, ${d[0]} ${d[1]} L ${h[0]} ${h[1]} A ${l} ${l}, 0, 0, 1, ${f[0]} ${f[1]} L ${p[0]} ${p[1]} A ${l} ${l}, 0, 0, 1, ${g[0]} ${g[1]} L ${m[0]} ${m[1]} A ${l} ${l}, 0, 0, 1, ${u[0]} ${u[1]} Z`,i);return Wt(v,"round"),v}const ua=(e,t,n)=>{const r=I.getRoughSVG(e).rectangle(t.x,t.y,t.width,t.height,n);return Wt(r,"round"),r};function M0(e,t,n=40){const r=Math.abs(e[0]-t[0]),o=Math.abs(e[1]-t[1]);let i=Math.hypot(r,o);const a=i/2,s=a/i*r,l=a/i*o,u=[t[0]>e[0]?t[0]-s:t[0]+s,t[1]>e[1]?t[1]-l:t[1]+l],c=m0(u[0],u[1],t[0],t[1],n*Math.PI/180);return{pointLeft:m0(u[0],u[1],t[0],t[1],-n*Math.PI/180),pointRight:c}}function ih(e,t,n,r){return e.circle(t[0],t[1],n,r)}function um(e,t,n,r){return e.linearPath([t,n],r)}function Ds(e,t,n){const r=Lt(),o=F4();let i="";return e.forEach((e,t)=>{i+=0===t?`M ${e[0]} ${e[1]} `:`L ${e[0]} ${e[1]} `}),n&&(i+="Z"),o.setAttribute("d",i),o.setAttribute("stroke",`${null==t?void 0:t.stroke}`),o.setAttribute("stroke-width",`${null==t?void 0:t.strokeWidth}`),o.setAttribute("fill",`${(null==t?void 0:t.fill)||"none"}`),null!=t&&t.strokeLineDash&&o.setAttribute("stroke-dasharray",`${t.strokeLineDash}`),r.appendChild(o),r}function VO(e,t){const n=Lt(),r=F4();let o="";for(let t=0;t<e.length-3;t+=3)o+=0===t?`M ${e[0][0]} ${e[0][1]} `:`C ${e[t+1][0]} ${e[t+1][1]}, ${e[t+2][0]} ${e[t+2][1]}, ${e[t+3][0]} ${e[t+3][1]}`;return r.setAttribute("d",o),r.setAttribute("stroke",`${null==t?void 0:t.stroke}`),r.setAttribute("stroke-width",`${null==t?void 0:t.strokeWidth}`),r.setAttribute("fill","none"),n.appendChild(r),n}function N4(e,t){const n={type:"set_viewport",properties:e.viewport,newProperties:t};e.apply(n)}const UO={setViewport:N4};function XO(e,t){const n={type:"set_theme",properties:e.theme,newProperties:t};e.apply(n)}function nv(e,t,n){n=n??e.viewport.zoom,N4(e,{...e.viewport,zoom:n,origination:t}),mP(e)}function KO(e,t,n){t=rI(t);const r=I.getBoardContainer(e).getBoundingClientRect(),o=I.getBoardContainer(e).getBoundingClientRect();let i=[o.width/2,o.height/2];n&&0===yp(n[0],n[1],r)&&(i=[n[0]-r.x,n[1]-r.y]);const a=e.viewport.zoom,s=b0(e),l=s[0]+i[0]/a,u=s[1]+i[1]/a;nv(e,[l-i[0]/t,u-i[1]/t],t)}function YO(e){let t=I4(e);const n=I.getBoardContainer(e).getBoundingClientRect(),r=on(e,e.children,!0),o=e.viewport.zoom,i=n.width-32,a=n.height-32;let s=o;s=i<r.width||a<r.height?Math.min(i/r.width,a/r.height):1;const l=hP(e);nv(e,[l[0]-n.width/2/s+t/2/o,l[1]-n.height/2/s+t/2/o],s)}function qO(e,t){let n=I4(e);const r=I.getBoardContainer(e),o=r.getBoundingClientRect();let i=0;i=t.maxWidth?t.maxWidth:o.width;const a=on(e,e.children,!0),s=i-2*t.autoFitPadding;let l=0;l=s<a.width?Math.min(s/a.width):1;let u=a.height*l+2*t.autoFitPadding;if(u>t.limitHeight){r.closest(`.${t.containerClass}`).style.height=`${u}px`,G4(e)}else u=t.limitHeight;nv(e,[a.x+a.width/2-i/2/l+n/2/l,a.y+a.height/2-u/2/l+n/2/l],l)}function ZO(e,t){t=t??e.theme.themeColorMode,XO(e,{themeColorMode:t}),di(e,t=>{e.applyTheme(t)})}const QO=(e,t)=>{e.pointer!==t&&(e.pointer=t)};function JO(e,t){var n;if(null==(n=Qe(e))?void 0:n[0]){const n=I.getBoardContainer(e).getBoundingClientRect(),r=I4(e),o=hP(e),i=t[0]-o[0],a=t[1]-o[1],s=e.viewport.zoom,l=[i-n.width/2/s+r/2/s,a-n.height/2/s+r/2/s];N4(e,{...e.viewport,origination:l}),mP(e)}}const vn={updatePointerType:QO,updateViewport:nv,fitViewport:YO,updateZoom:KO,updateThemeColor:ZO,fitViewportWidth:qO,moveToCenter:JO},H4=e=>I.getHost(e).viewBox.baseVal;function Ot(e,t,n){const r=I.getHost(e).getBoundingClientRect();return[t-r.x,n-r.y]}function Di(e,t){const n=[t.x,t.y],r=[t.x+t.width,t.y+t.height],o=Gg(e,n),i=Gg(e,r);return M.getRectangleByPoints([o,i])}function Gg(e,t){const n=C6(e,a3(e,t));return Xf(e,n[0],n[1])}function Xf(e,t,n){const r=I.getBoardContainer(e).getBoundingClientRect();return[t-r.x,n-r.y]}function eI(e,t){const n=I.getBoardContainer(e).getBoundingClientRect();return[n.x+t[0],n.y+t[1]]}function At(e,t){const n=H4(e),{zoom:r}=e.viewport;return[t[0]/r+n.x,t[1]/r+n.y]}function C6(e,t){const n=I.getHost(e).getBoundingClientRect();return[t[0]+n.x,t[1]+n.y]}function a3(e,t){const{zoom:n}=e.viewport,r=H4(e);return[(t[0]-r.x)*n,(t[1]-r.y)*n]}const aP=.75,uP=new WeakMap,lP=new WeakMap;function tI(e){const{hideScrollbar:t}=e.options,n=t?20:0,r=I.getBoardContainer(e).getBoundingClientRect();return{width:r.width+n,height:r.height+n}}function nI(e,t){const n=on(e,e.children,!0);let r,o,i,a;return r=n.x,o=n.x+n.width,i=n.y,a=n.y+n.height,{left:r,right:o,top:i,bottom:a}}function rI(e,t=XE,n=4){return e<t?t:e>n?n:e}function cP(e,t){const n=I.getBoardContainer(e).getBoundingClientRect(),r=nI(e),o=n.width,i=n.height;let a=r.right-r.left,s=r.bottom-r.top;const l=o/2,u=i/2;if(a<l/t){const e=r.left+a/2;r.left=e-l/2/t,r.right=e+l/2/t,a=l/t}if(s<u/t){const e=r.top+s/2;r.top=e-u/2/t,r.bottom=e+u/2/t,s=u/t}return{elementHostBBox:r,containerWidth:o,containerHeight:i,width:a,height:s}}function x6(e,t,n,r,o,i,a=aP){const s=t*a/i,l=n*a/i;return[e.left-s,e.top-l,r+2*s,o+2*l]}function fP(e,t){const{elementHostBBox:n,containerWidth:r,containerHeight:o,width:i,height:a}=cP(e,t);return x6(n,r,o,i,a,t)}function hP(e){const t=on(e,e.children,!0);return[t.x+t.width/2,t.y+t.height/2]}function dP(e,t){const n=e.viewport.zoom,r=I.getHost(e);r.style.display="block",r.style.width=t[2]*n+"px",r.style.height=t[3]*n+"px",t&&t[2]>0&&t[3]>0&&r.setAttribute("viewBox",t.join(" "))}function u3(e){const t=b0(e);if(!t)return;const[n,r]=a3(e,t);gP(e,n,r)}function gP(e,t,n,r=!0){const o=I.getViewportContainer(e),i=o.scrollLeft,a=o.scrollTop;if(!y6(o.scrollLeft,t,1)||!y6(o.scrollTop,n,1)){o.scrollLeft=t,o.scrollTop=n;const s=o.offsetWidth,l=o.offsetHeight;if(i===o.scrollLeft&&a===o.scrollTop)pP(e,i,a);else{const i=t>0&&n>0&&t<o.scrollWidth-s&&n<o.scrollHeight-l;r&&i&&yP(e,!0)}}}function pP(e,t,n){const r=At(e,[t,n]);mt.isEquals(r,b0(e))||(vn.updateViewport(e,r),vP(e,!0))}function G4(e){const{width:t,height:n}=tI(e),r=I.getViewportContainer(e);r.style.width=`${t}px`,r.style.height=`${n}px`}function j4(e){dP(e,fP(e,e.viewport.zoom))}function iI(e){const t=e.viewport.zoom,{elementHostBBox:n,containerWidth:r,containerHeight:o,width:i,height:a}=cP(e,t),s=x6(n,r,o,i,a,t,.5),l=H4(e);if(s[0]<l.x||s[1]<l.y||s[0]+s[2]>l.x+l.width||s[1]+s[3]>l.y+l.height){dP(e,x6(n,r,o,i,a,t,aP))}}function oI(e){var t;if(null==(t=e.viewport)||!t.origination){const t=e.viewport.zoom,n=I.getBoardContainer(e).getBoundingClientRect(),r=fP(e,t),o=r[0]+r[2]/2,i=r[1]+r[3]/2,a=[o-n.width/2/t,i-n.height/2/t];return sI(e,a),void u3(e)}u3(e)}const sI=(e,t)=>{B4.set(e,t)},mP=e=>{B4.delete(e)},b0=e=>B4.get(e)||e.viewport.origination,aI=e=>!!uP.get(e),vP=(e,t)=>{uP.set(e,t)},uI=e=>!!lP.get(e),yP=(e,t)=>{lP.set(e,t)};function lI(e,t,n){const r={type:"insert_node",node:t,path:n};e.apply(r)}function cI(e,t,n){const r={},o={},i=Xt.get(e,n);for(const e in t)i[e]!==t[e]&&(i.hasOwnProperty(e)&&(r[e]=i[e]),null!=t[e]&&(o[e]=t[e]));const a={type:"set_node",properties:r,newProperties:o,path:n};e.apply(a)}function wP(e,t){const n={type:"remove_node",path:t,node:Xt.get(e,t)};e.apply(n)}function fI(e,t,n){const r={type:"move_node",path:t,newPath:n};e.apply(r)}const Gf={insertNode:lI,setNode:cI,removeNode:wP,moveNode:fI},Lm=new WeakMap,hI=(e,t)=>CP(e)[t]||null,CP=e=>Lm.get(e)||{},Ua=(e,t,n)=>{let r=hI(e,t);null!==r&&cancelAnimationFrame(r),(()=>{let r=requestAnimationFrame(()=>{const r=Lm.get(e)||{};r[t]=null,Lm.set(e,r),I.isAlive(e)&&n()});const o=CP(e);o[t]=r,Lm.set(e,o)})()},rv=(e,t)=>(ev(e,t),t.map(t=>e.children.map(e=>e.id).indexOf(t.id)).filter(e=>e>=0)),dI=(e,t)=>{const n=rv(e,t);return n[n.length-1]},Cp=(e,t)=>{t.map(t=>{const n=I.findPath(e,t.element),r=e.pathRef(n);return()=>{r.current&&Gf.moveNode(e,r.current,t.newPath),r.unref()}}).forEach(e=>{e()})},xP=new WeakMap,cc=e=>!!xP.get(e),ol=(e,t)=>{xP.set(e,t)},gI=e=>Z3.get(e)||[],fc=e=>(Z3.get(e)||[]).length>0,pI=e=>{Z3.delete(e),ol(e,!1)},E9=(e,t)=>{Z3.set(e,t),ol(e,!0)},E6="foreignObject[class^='foreign-object']";function P9(e){return e.nodeType===Node.ELEMENT_NODE}function mI(e){return new Promise((t,n)=>{const r=new Image;r.crossOrigin="Anonymous",r.onload=()=>t(r),r.onerror=()=>n(new Error("Failed to load image")),r.src=e})}function vI(e,t,n="transparent"){const r=document.createElement("canvas"),o=r.getContext("2d");return r.width=e,r.height=t,r.style.width=`${e}px`,r.style.height=`${t}px`,o.strokeStyle="#ffffff",o.fillStyle=n,o.fillRect(0,0,e,t),{canvas:r,ctx:o}}async function yI(e){const t=await(await fetch(e)).blob();return new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>e(r.result),r.onerror=n,r.readAsDataURL(t)})}function wI(e,t){const n=null==t?void 0:t.style;if(!n)return;const r=window.getComputedStyle(e);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):Array.from(r).forEach(e=>{let t=r.getPropertyValue(e);n.setProperty(e,t,r.getPropertyPriority(e))})}function CI(e,t,n){if(n){const r=n+`, ${E6}`,o=Array.from(e.querySelectorAll(r)),i=Array.from(t.querySelectorAll(r));o.forEach((e,t)=>{const n=Array.from(e.querySelectorAll("*")).filter(P9),r=Array.from(i[t].querySelectorAll("*")).filter(P9);o.push(...n),i.push(...r)}),o.map((e,t)=>{wI(e,i[t])})}}async function xI(e,t){const n=Array.from(e.querySelectorAll(`${E6}`)),r=Array.from(t.querySelectorAll(`${E6}`));await Promise.all(n.map((e,t)=>new Promise(e=>{const n=r[t].querySelector("img"),o=null==n?void 0:n.getAttribute("src");if(!o)return e(!0);yI(o).then(t=>{null==n||n.setAttribute("src",t),e(!0)})})))}async function EI(e,t,n,r){const{width:o,height:i,x:a,y:s}=n,{padding:l=4,inlineStyleClassNames:u}=r,c=I.getHost(e),d=t.map(e=>yn.getElementG(e)),h=c.cloneNode(),f=I.getElementHost(e).cloneNode();h.style.width=`${o}px`,h.style.height=`${i}px`,h.style.backgroundColor="",h.setAttribute("width",`${o}`),h.setAttribute("height",`${i}`),h.setAttribute("viewBox",[a-l,s-l,o+2*l,i+2*l].join(","));const p=new Array(d.length);return await Promise.all(d.map(async(e,t)=>{const n=e.cloneNode(!0);CI(e,n,u),await xI(e,n),p[t]=n})),f.append(...p),h.appendChild(f),h}async function PI(e,t){if(!e)return;const n=t.elements||k0(e,{match:()=>!0,recursion:()=>!0,isReverse:!1}),r=on(e,n,!1),{ratio:o=2,fillStyle:i="transparent"}=t,{width:a,height:s}=r,l=a*o,u=s*o,c=await EI(e,n,r,t),{canvas:d,ctx:h}=vI(l,u,i),f=(new XMLSerializer).serializeToString(c),p=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(f)}`;try{const e=await mI(p);return h.drawImage(e,0,0,l,u),d.toDataURL("image/png")}catch(e){return void console.error("Error converting SVG to image:",e)}}var Xu,aa;!function(e){e.medias="medias",e.elements="elements"}(Xu||(Xu={})),function(e){e.copy="copy",e.cut="cut",e.duplicate="duplicate",e.paste="paste"}(aa||(aa={}));const $4=(e,t)=>`<plait>${AI(JSON.stringify({type:e,data:t}))}</plait>`,W4=e=>{var t;let n=null==(t=null==e?void 0:e.match(/<plait[^>]*>(.*)<\/plait>/))?void 0:t[1];if(n){n=BI(n);try{const e=JSON.parse(n);if(e){if(e.type===Xu.elements)return{elements:e.data};if(e.type===Xu.medias)return{medias:e.data}}}catch(e){return console.error(e),null}}return null},S9=e=>{const t=document.implementation.createHTMLDocument("");return t.documentElement.innerHTML=e.trim(),t.body.textContent||t.body.innerText||""},EP=()=>"clipboard"in navigator&&"write"in navigator.clipboard,SI=()=>"clipboard"in navigator&&"writeText"in navigator.clipboard,PP=()=>"clipboard"in navigator&&"read"in navigator.clipboard,TI=(e,t,n)=>({type:e,elements:t,text:n}),DI=(e,t)=>{const{type:n,elements:r,text:o}=e;return n===t.type?{type:n,elements:r.concat(t.elements),text:o+" "+t.text}:e},iv=(e,t)=>e?DI(e,t):t,AI=e=>e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),BI=e=>e.replace(/&lt;/g,"<").replace(/&gt;/g,">"),RI=(e,t,n)=>{null==e||e.setData("text/html",$4(t,n))},MI=(e,t)=>{null==e||e.setData("text/plain",t)},bI=e=>{const t=null==e?void 0:e.getData("text/html");if(t){const e=W4(t);if(e)return e}return{}},kI=e=>{if(!e)return{};const t=null==e?void 0:e.getData("text/plain");if(t){const e=W4(t);if(e)return e}return{text:t}},OI=async(e,t,n="")=>{let r=n;EP()&&await navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([$4(e,t)],{type:"text/html"}),"text/plain":new Blob([r??JSON.stringify(t)],{type:"text/plain"})})])},II=async()=>{if(!PP())return{};const e=await navigator.clipboard.read();let t={};if(Array.isArray(e)&&e[0]instanceof ClipboardItem)for(const n of e){if(FI(n)){const e=n.types.filter(e=>e.match(/^image\//)),t=(await Promise.all(e.map(e=>n.getType(e)))).filter(Boolean).map(e=>URL.createObjectURL(e));return{files:await Promise.all(t.map(async e=>{const t=await(await fetch(e)).blob();return new File([t],"plait-file",{type:t.type})}))}}if(n.types.includes("text/html")){const e=await T9(await n.getType("text/html")),r=W4(e);if(r)return r;e&&e.trim()&&(t={text:S9(e)})}if(n.types.includes("text/plain")){const e=await T9(await n.getType("text/plain"));t={text:S9(e)}}}return t},FI=e=>e.types.find(e=>e.match(/^image\//)),T9=e=>new Promise((t,n)=>{const r=new FileReader;r.addEventListener("loadend",()=>{const e=r.result;t(e)}),r.addEventListener("error",()=>{n(r.error)}),r.readAsText(e)}),LI=async e=>{let t={};return e?e.files.length?{files:Array.from(e.files)}:(t=bI(e),0===Object.keys(t).length&&(t=kI(e)),t):PP()?await II():t},_I=async(e,t)=>{if(!t)return;const{type:n,elements:r,text:o}=t;return EP()?await OI(n,r,o):e?(RI(e,n,r),void MI(e,o)):SI()?await navigator.clipboard.writeText($4(n,r)):void 0};function gi(e){return!!R4.get(e)}function NI(e){I.getBoardContainer(e).classList.add("selection-moving"),R4.set(e,!0),ol(e,!0)}function HI(e){I.getBoardContainer(e).classList.remove("selection-moving"),R4.delete(e),ol(e,!1)}function D9(e){const t=_m(e);return e.pointer!==Zt.hand&&!t.isDisabledSelection&&!I.isReadonly(e)}function A9(e){return!!e.operations.find(e=>ql.isSetSelectionOperation(e))}function GI(e){const t=q3.get(e);if(t)return t.elements}function jI(e){return q3.get(e)}function $I(e){q3.delete(e)}function WI(e){const t=Qe(e),n=Di(e,on(e,t,!1));if(n.width>0&&n.height>0&&t.length>1){const r=ua(e,M.inflate(n,1),{stroke:yo,strokeWidth:1,fillStyle:"solid"});r.classList.add(vp,rO);const o=po(t);return o&&Ps(r,M.getCenterPoint(n),o),r}return null}function zI(e,t,n){if(!e.selection)return;const r=Qe(e);if(!v0.isCollapsed(e.selection)){let n=[...r];return t.forEach(t=>{t.groupId?n.push(...V4(e,t)):n.push(t)}),void Na(e,M4(n))}if(v0.isCollapsed(e.selection)){const o=t[0],i=wc(e,o,!0);if(i.length>0){const o=Bs(e,i[i.length-1],!0)||[],a=r.some(e=>o.map(e=>e.id).includes(e.id));n?VI(e,t,a,o):UI(e,t,a,i)}}}function VI(e,t,n,r){const o=Qe(e);let i=[...o];const a=t[0];let s=[];if(n){const e=o.some(e=>e.id===a.id),n=r.filter(e=>o.includes(e));e?s=n.filter(e=>e.id!==a.id):s.push(...n,...t)}else s=r;r.forEach(e=>{i.includes(e)&&i.splice(i.indexOf(e),1)}),s.length&&i.push(...s),Na(e,M4(i))}function UI(e,t,n,r){let o=[...t];const i=SP(e,r);if(i.length>0)if(i.length>1)o=l3(e,i[i.length-2],!0);else{const n=e.getOneHitElement(t);n&&(o=[n])}else{const i=l3(e,r[r.length-1],!0);if(n){const n=e.getOneHitElement(t);n&&(o=[n])}else o=i}Na(e,M4(o))}const _m=e=>e.getPluginOptions(Ga.withSelection),P6=(e,t)=>{e.setPluginOptions(Ga.withSelection,t)},Bs=(e,t,n,r)=>{let o=[];const i=e.children.filter(e=>e.groupId===t.id);return n?i.forEach(t=>{wo.isGroup(t)?(r&&o.push(t),o.push(...Bs(e,t,n,r))):o.push(t)}):o=r?i:i.filter(e=>!wo.isGroup(e)),o},l3=(e,t,n,r)=>{const o=Bs(e,t,n,r),i=[];return o.forEach(e=>{di(e,e=>{i.push(e)},()=>!0)}),i},z4=(e,t,n)=>on(e,l3(e,t,n),!1),wc=(e,t,n,r)=>{const o=(r||e.children).find(e=>e.id===(null==t?void 0:t.groupId));if(!o)return[];{const t=[o],i=wc(e,o,n,r);return i.length&&t.push(...i),t}},S6=(e,t)=>{const n=wc(e,t,!0);return n.length?n[n.length-1]:null},V4=(e,t)=>{const n=S6(e,t);return n?l3(e,n,!0):[t]},T6=(e,t,n)=>{const r=null!=n&&n.length?n:Qe(e);return wo.isGroup(t)?c3(e,t,n):r.map(e=>e.id).includes(t.id)},c3=(e,t,n)=>{const r=null!=n&&n.length?n:Qe(e);return Bs(e,t,!0).every(e=>r.map(e=>e.id).includes(e.id))},SP=(e,t,n)=>{const r=[];return t.forEach(t=>{T6(e,t,n)&&r.push(t)}),r},XI=(e,t,n)=>{const r=Cc(e,t,n),o=[];return r.forEach(t=>{o.push(t);const n=Bs(e,t,!0,!0);o.push(...n.filter(e=>wo.isGroup(e)))}),o},TP=(e,t,n,r)=>{const o=wc(e,t,!0,r),i=SP(e,o,n);return i.length?i[i.length-1]:null},Cc=(e,t,n)=>{let r=[];return(null!=t&&t.length?t:Qe(e)).forEach(o=>{if(o.groupId){const i=TP(e,o,t,n);i&&!r.includes(i)&&r.push(i)}}),r},U4=(e,t)=>{let n=[];return(null!=t&&t.length?t:Qe(e)).filter(e=>!wo.isGroup(e)).forEach(r=>{r.groupId&&TP(e,r,t)||n.push(r)}),n},X4=(e,t)=>U4(e,t).filter(t=>e.canAddToGroup(t)),KI=(e,t)=>[...Cc(e,t),...U4(e,t)],YI=(e,t)=>{const n=Qe(e).map(e=>e.id);let r=null;const o=gi(e);return t.forEach(t=>{const i=!n.includes(t.id)&&!o||o;if(t.groupId&&i){r||(r=Lt());const n=V4(e,t),o=on(e,n,!1),i=ua(e,o,{stroke:yo,strokeWidth:1,strokeLineDash:[5]}),a=po(n);a&&Ps(i,M.getCenterPoint(o),a),r.append(i)}}),r},qI=e=>({id:En(),type:"group"}),ZI=e=>e.every(e=>!e.groupId),DP=e=>e.every(t=>t.groupId&&t.groupId===e[0].groupId),QI=(e,t)=>{const n=KI(e,t).filter(t=>e.canAddToGroup(t));return n.length>1&&(ZI(n)||DP(n))},JI=(e,t,n)=>{const r=Cc(e,t,n);return Qe(e).length>0&&r.length>0},AP=(e,t)=>{const n=wc(e,t,!0);let r=null;if(null!=n&&n.length)for(let t=0;t<(null==n?void 0:n.length);t++)if(!c3(e,n[t])){r=n[t];break}return r},eF=(e,t,n)=>{const r=[...t];ev(e,r),r.pop(),Cp(e,r.map(e=>({element:e,newPath:n})))},K4=e=>{const t=e.getDeletedFragment([]);e.deleteFragment(t)},B9=(e,t,n)=>{const r=on(e,Qe(e),!1),o=e.buildFragment(null,r,t);o&&_I(n,o)},Y4=(e,t,n)=>{const r=null!=t&&t.length?t:Qe(e),o=on(e,r,!1),i=e.buildFragment(null,o,aa.duplicate,r),a=i&&JSON.stringify(i),s=a&&JSON.parse(a);s&&e.insertFragment({...s,text:void 0},n||[o.x+o.width/2,o.y+o.height/2],aa.duplicate)},zu=2,tF=24;function BP(e,t){return k0(e,{match:n=>e.isAlign(n)&&!t.some(e=>e.id===n.id),recursion:()=>!0,isReverse:!1}).map(t=>{const n=e.getRectangle(t);return xp(n,t.angle||0)})}function nF(e,t){return t?[[e[0],e[1]-4],[e[0],e[1]+4]]:[[e[0]-4,e[1]],[e[0]+4,e[1]]]}function Sg(e,t,n){let r=2;return e.forEach(e=>{const o=rF(t,e,n);Math.abs(o)<Math.abs(r)&&(r=o)}),r}const rF=(e,t,n)=>{const r=Kf(t,n).map(t=>t-e),o=r.map(e=>Math.abs(e));return r[o.indexOf(Math.min(...o))]},Kf=(e,t)=>{const n=t?"x":"y",r=t?"width":"height";return[e[n],e[n]+e[r]/2,e[n]+e[r]]};function Hd(e,t){let n=1/0,r=e[0];return e.forEach(e=>{const o=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));o<n&&(n=o,r=e)}),r}const Gd=(e,t,n)=>Kf(t,n).includes(e);function RP(e,t,n,r=!0,o=!0,i=!1){let a=[];const s=Kf(t,!0),l=Kf(t,!1),u=[{axis:s[0],isHorizontal:!0,pointRectangles:[]},{axis:s[1],isHorizontal:!0,pointRectangles:[]},{axis:s[2],isHorizontal:!0,pointRectangles:[]},{axis:l[0],isHorizontal:!1,pointRectangles:[]},{axis:l[1],isHorizontal:!1,pointRectangles:[]},{axis:l[2],isHorizontal:!1,pointRectangles:[]}];for(let e=0;e<n.length;e++){const t=n[e];Gd(u[0].axis,t,u[0].isHorizontal)&&u[0].pointRectangles.push(t),Gd(u[1].axis,t,u[1].isHorizontal)&&u[1].pointRectangles.push(t),Gd(u[2].axis,t,u[2].isHorizontal)&&u[2].pointRectangles.push(t),Gd(u[3].axis,t,u[3].isHorizontal)&&u[3].pointRectangles.push(t),Gd(u[4].axis,t,u[4].isHorizontal)&&u[4].pointRectangles.push(t),Gd(u[5].axis,t,u[5].isHorizontal)&&u[5].pointRectangles.push(t)}const c=(e,n,r)=>{const o=M.inflate(M.getBoundingRectangle([t,n]),24);if(r){const t=[e,o.y],n=[e,o.y+o.height];a.push([t,n])}else{const t=[o.x,e],n=[o.x+o.width,e];a.push([t,n])}};if(r&&u[0].pointRectangles.length){const e=1===u[0].pointRectangles.length?u[0].pointRectangles[0]:Hd(u[0].pointRectangles,t);c(u[0].axis,e,u[0].isHorizontal)}if(r&&i&&u[1].pointRectangles.length){const e=1===u[1].pointRectangles.length?u[1].pointRectangles[0]:Hd(u[1].pointRectangles,t);c(u[1].axis,e,u[1].isHorizontal)}if(r&&u[2].pointRectangles.length){const e=1===u[2].pointRectangles.length?u[2].pointRectangles[0]:Hd(u[2].pointRectangles,t);c(u[2].axis,e,u[2].isHorizontal)}if(o&&u[3].pointRectangles.length){const e=1===u[3].pointRectangles.length?u[3].pointRectangles[0]:Hd(u[3].pointRectangles,t);c(u[3].axis,e,u[3].isHorizontal)}if(o&&i&&u[4].pointRectangles.length){const e=1===u[4].pointRectangles.length?u[4].pointRectangles[0]:Hd(u[4].pointRectangles,t);c(u[4].axis,e,u[4].isHorizontal)}if(o&&u[5].pointRectangles.length){const e=1===u[5].pointRectangles.length?u[5].pointRectangles[0]:Hd(u[5].pointRectangles,t);c(u[5].axis,e,u[5].isHorizontal)}return iF(e,a)}function iF(e,t){const n=Lt();return t.forEach(t=>{if(!t.length)return;const r=I.getRoughSVG(e).line(t[0][0],t[0][1],t[1][0],t[1][1],{stroke:yo,strokeWidth:1,strokeLineDash:[4,4]});n.appendChild(r)}),n}function MP(e,t){const n=Lt();return t.forEach(t=>{if(!t.length)return;let r=t[0][1]===t[1][1];const o=I.getRoughSVG(e).line(t[0][0],t[0][1],t[1][0],t[1][1],{stroke:yo,strokeWidth:1});n.appendChild(o),t.forEach(t=>{const o=nF(t,r),i=I.getRoughSVG(e).line(o[0][0],o[0][1],o[1][0],o[1][1],{stroke:yo,strokeWidth:1});n.appendChild(i)})}),n}const bP=(e,t)=>{const n=rv(e,Qe(e));let r=OP(e,n);"up"===t&&(r=r.reverse());let o=[];return r.forEach((n,r)=>{const i=n[0],a=n[n.length-1],s="down"===t?i:a,l=oF(e,s,t);-1===l||s===l||("down"===t&&(n=n.reverse()),o.push(...n.map(t=>({element:e.children[t],newPath:[l]}))))}),o},kP=(e,t)=>{const n=rv(e,Qe(e));let r=OP(e,n),o=[];return"down"===t&&(r=r.reverse()),r.forEach(n=>{const r=n[0],i=n[n.length-1],a="down"===t?r:i,s=e.children[a],l=AP(e,s);let u="down"===t?0:e.children.length-1;if(l){const n=ev(e,Bs(e,l,!0,!0));u="down"===t?e.children.indexOf(n[0]):e.children.indexOf(n[n.length-1])}"down"===t&&(n=n.reverse()),o.push(...n.map(t=>({element:e.children[t],newPath:[u]})))}),o},OP=(e,t)=>{let n=0;return t.reduce((r,o,i)=>{if(i>0){const r=e.children[o],a=e.children[t[i-1]],s=o-1===t[i-1]||e.children.every((e,n)=>!(n>t[i-1]&&n<=o-1)||wo.isGroup(e));let l=!1;if(null!=a&&a.groupId||null!=r&&r.groupId&&(null==a?void 0:a.groupId)!==(null==r?void 0:r.groupId)){let t=!1,n=!1;if(a.groupId){const n=S6(e,a);t=!c3(e,n)}if(r.groupId){const t=S6(e,r);n=!c3(e,t)}l=t||n}(!s||l)&&(n=++n)}return(r[n]||(r[n]=[])).push(o),r},[])},oF=(e,t,n)=>{if(0===t&&"down"===n||t===e.children.length-1&&"up"===n)return-1;const r=e=>!(e.isDeleted||wo.isGroup(e)),o="down"===n?fO(e.children,e=>r(e),Math.max(0,t-1)):hO(e.children,e=>r(e),t+1),i=e.children[o];if(!i)return-1;const a=[...e.children],s=a[t],l=AP(e,s),u=wc(e,i,!0)||[];if(l&&(null==s?void 0:s.groupId)!==(null==i?void 0:i.groupId)&&!u.find(e=>e.id===l.id))return-1;if(!i.groupId)return o;let c;if(c=l?u[u.indexOf(l)-1]:u[u.length-1],c){let t=Bs(e,c,!0,!1);if(t.length)return t.sort((t,n)=>e.children.findIndex(e=>e.id===t.id)-e.children.findIndex(e=>e.id===n.id)),"down"===n?a.indexOf(t[0]):a.indexOf(t[t.length-1])}return o},IP=e=>D6(e)||sF(e),D6=e=>"pen"===e.pointerType,sF=e=>"touch"===e.pointerType,aF=(e,t)=>{const n=Cc(e,t),r=X4(e),o=[...n,...r],i=qI();if(QI(e)){o.forEach(t=>{const n=I.findPath(e,t);Gf.setNode(e,{groupId:i.id},n)});const t=Qe(e),n=dI(e,t),a=rv(e,o);if(dO(a)||eF(e,t,[n-1]),DP(o)){const t=r[0].groupId;Gf.insertNode(e,{...i,groupId:t},[e.children.length])}else Gf.insertNode(e,i,[e.children.length])}},uF=(e,t)=>{const n=Cc(e,t);JI(e)&&(n.forEach(t=>{k0(e,{match:e=>e.groupId===t.id,recursion:()=>!1}).forEach(n=>{const r=I.findPath(e,n);Gf.setNode(e,{groupId:t.groupId||void 0},r)})}),n.map(t=>{const n=I.findPath(e,t),r=e.pathRef(n);return()=>{r.current&&Gf.removeNode(e,r.current),r.unref()}}).forEach(e=>{e()}))},lF={addGroup:aF,removeGroup:uF};function FP(e,t){const n={type:"set_selection",properties:e.selection,newProperties:t};e.apply(n)}const cF={setSelection:FP,addSelectionWithTemporaryElements:LP};function LP(e,t){const n=setTimeout(()=>{FP(e,{anchor:[0,0],focus:[0,0]})},0);let r=jI(e);if(r){clearTimeout(r.timeoutId);const e=r.elements;r.elements.push(...t.filter(t=>!e.includes(t))),r.timeoutId=n}else q3.set(e,{timeoutId:n,elements:t})}const fF=e=>{const t=kP(e,"up");Cp(e,t)},hF=e=>{const t=kP(e,"down");Cp(e,t)},dF=e=>{const t=bP(e,"up");Cp(e,t)},gF=e=>{const t=bP(e,"down");Cp(e,t)},pF={moveUp:dF,moveDown:gF,moveToTop:fF,moveToBottom:hF},mF=(e,t)=>{t.map(t=>{const n=I.findPath(e,t),r=e.pathRef(n);return()=>{r.current&&wP(e,r.current),r.unref(),tv(e,t,!0)}}).forEach(e=>{e()})},_P={removeElements:mF},Xe={...mO,...UO,...cF,...Gf,...lF,...pF},kr=(e,t,n)=>(n||(n=0),Array.isArray(e)&&"number"==typeof e[0]?m0(e[0],e[1],t[0],t[1],n):e.map(e=>m0(e[0],e[1],t[0],t[1],n||0))),po=e=>{var t;let n=(null==(t=e[0])?void 0:t.angle)||0;return e.forEach(e=>{e.angle!==n&&!y6((e.angle||0)%(Math.PI/2)-n%(Math.PI/2),0)&&(n=0)}),n},vF=e=>{if(!e.length)return!1;const t=e[0].angle;return void 0!==t&&!e.some(e=>e.angle!==t)},yF=(e,t)=>{let n=[];for(let r=0;r<e.length;r++){const o=e[r],i=kr(o,[0,0],-t);n.push(M.getRectangleByPoints(i))}const r=M.getBoundingRectangle(n),o=M.getCornerPoints(r),i=kr(o,[0,0],t),a=M.getCenterPoint(M.getRectangleByPoints(i));return M.getRectangleByPoints(kr(i,a,-t))},wF=(e,t,n)=>{const r=M.getCenterPoint(e),[o]=kr([r],t,n);return{offsetX:o[0]-r[0],offsetY:o[1]-r[1]}},A6=(e,t,n)=>{const{offsetX:r,offsetY:o}=wF(M.getRectangleByPoints(e),t,n);return e.map(e=>[e[0]+r,e[1]+o])},Xa=e=>NP(e.angle),NP=e=>e&&0!==e,Ka=(e,t)=>{if(Xa(t)){let n=M.getRectangleByPoints(t.points);const r=M.getCenterPoint(n);return kr(e,r,t.angle)}return null},CF=(e,t)=>{if(NP(t)){let n=M.getRectangleByPoints(e);const r=M.getCenterPoint(n);return kr(e,r,t)}return null},hc=(e,t,n,r=!1)=>{if(Xa(n)){let o=M.getRectangleByPoints(n.points);const i=r?Di(e,o):o,a=M.getCenterPoint(i);return kr(t,a,n.angle?-n.angle:0)}return null},xp=(e,t)=>{if(t){const n=M.getCornerPoints(e),r=M.getCenterPoint(e);return M.getRectangleByPoints(kr(n,r,t))}return e},xF=e=>{const t=Math.abs(e)%Math.PI;return t>=1/4*Math.PI&&t<=3/4*Math.PI};function B6(e){return e/180*Math.PI}function EF(e,t,n){const r=on(e,t,!1),o=M.getCenterPoint(r);t.forEach(t=>{const r=t.angle,i=A6(t.points,o,jg(n)),a=I.findPath(e,t);Xe.setNode(e,{points:i,angle:jg((r||0)+n)},a)})}const jg=e=>e<0?e+2*Math.PI:e>=2*Math.PI?e-2*Math.PI:e,PF=(e,t,n)=>{const r=5*Math.PI/2+Math.atan2(e[1]-n[1],e[0]-n[0]),o=5*Math.PI/2+Math.atan2(t[1]-n[1],t[0]-n[0]);return jg(o-r)},SF=e=>null==e?void 0:e.angle,Ps=(e,t,n)=>{if(0===n)return void e.removeAttribute("transform");var r=t[0],o=t[1];let i=Math.cos(n),a=Math.sin(n),s="matrix("+[i,a,-a,i,r*(1-i)+o*a,o*(1-i)-r*a].join(",")+")";e.setAttribute("transform",`${s}`)};function on(e,t,n){const r=[],o=t=>{const n=e.getRectangle(t);if(n){const e=M.getCornerPoints(n),o=Ka(e,t)||e;r.push(o)}else console.error("can not get rectangle of element:",t)};if(t.forEach(t=>{n?di(t,e=>o(e),t=>e.isRecursion(t)):o(t)}),r.length>0){if(vF(t)){const e=po(t);return yF(r,e)}{const e=r.reduce((e,t)=>e.concat(t),[]);return M.getRectangleByPoints(e)}}return{x:0,y:0,width:0,height:0}}function xs(e,t,n){return!n&&Nm(e).get(t)||(n||(n=k0(e,{match:e=>!0,recursion:e=>!0})),n.find(e=>e.id===t))}function Nm(e){const t=f6.get(e);if(!t)throw new Error("can not resolve element map");return t}function k0(e,t){let n=[];const r=t.isReverse??!0;return di(e,e=>{!I.isBoard(e)&&t.match(e)&&n.push(e)},n=>!!I.isBoard(n)||nh(e)(n)&&t.recursion(n),r),n}var fr;!function(e){e.default="default",e.colorful="colorful",e.soft="soft",e.retro="retro",e.dark="dark",e.starry="starry"}(fr||(fr={}));const qr="#333333",HP={mode:fr.default,boardBackground:"#ffffff",textColor:qr},GP={mode:fr.colorful,boardBackground:"#ffffff",textColor:qr},jP={mode:fr.soft,boardBackground:"#f5f5f5",textColor:qr},$P={mode:fr.retro,boardBackground:"#f9f8ed",textColor:qr},WP={mode:fr.dark,boardBackground:"#141414",textColor:"#FFFFFF"},zP={mode:fr.starry,boardBackground:"#0d2537",textColor:"#FFFFFF"},TF=[HP,GP,jP,$P,WP,zP],I={isBoard(e){const t=y9.get(e);if(void 0!==t)return t;const n="function"==typeof e.onChange&&"function"==typeof e.apply;return y9.set(e,n),n},isAlive:e=>!!m6.get(e),findPath(e,t){const n=[];let r=t;for(;;){const e=Nf.get(r);if(null==e){if(I.isBoard(r))return n;break}const t=i0.get(r);if(null==t)break;n.unshift(t),r=e}throw new Error(`Unable to find the path for Plait node: ${JSON.stringify(t)}`)},getHost:e=>g6.get(e),getElementLowerHost(e){var t;return null==(t=Lu.get(e))?void 0:t.lowerHost},getElementHost(e){var t;return null==(t=Lu.get(e))?void 0:t.host},getElementUpperHost(e){var t;return null==(t=Lu.get(e))?void 0:t.upperHost},getElementTopHost(e){var t;return null==(t=Lu.get(e))?void 0:t.topHost},getActiveHost(e){var t;return null==(t=Lu.get(e))?void 0:t.activeHost},getRoughSVG:e=>d6.get(e),getBoardContainer(e){var t;return null==(t=Lu.get(e))?void 0:t.container},getBoardContext:e=>p6.get(e),getRectangle:e=>on(e,e.children,!0),getViewportContainer(e){var t;return null==(t=Lu.get(e))?void 0:t.viewportContainer},isFocus:e=>!!e.selection,isReadonly:e=>e.options.readonly,hasBeenTextEditing:e=>!!h6.get(e),getPointer:e=>e.pointer,isPointer:(e,t)=>e.pointer===t,isInPointer(e,t){const n=e.pointer;return t.includes(n)},getMovingPointInBoard:e=>v6.get(e),isMovingPointInBoard(e){const t=JE.get(e),n=I.getBoardContainer(e).getBoundingClientRect();return!(!t||0!==yp(t[0],t[1],n))},getThemeColors:e=>e.options.themeColors||TF};var Zt;!function(e){e.hand="hand",e.selection="selection"}(Zt||(Zt={}));const DF=e=>"set_viewport"===e.type,AF=e=>"set_selection"===e.type,BF=e=>"set_theme"===e.type,RF=e=>{switch(e.type){case"insert_node":return{...e,type:"remove_node"};case"remove_node":return{...e,type:"insert_node"};case"move_node":{const{newPath:t,path:n}=e;if(wt.equals(t,n))return e;const r=wt.transform(n,e),o=wt.transform(wt.next(n),e);return{...e,path:r,newPath:o}}case"set_node":{const{properties:t,newProperties:n}=e;return{...e,properties:n,newProperties:t}}case"set_selection":{const{properties:t,newProperties:n}=e;return null==t?{...e,properties:n,newProperties:null}:null==n?{...e,properties:null,newProperties:t}:{...e,properties:n,newProperties:t}}case"set_viewport":{const{properties:t,newProperties:n}=e;return null==t?{...e,properties:n,newProperties:n}:null==n?{...e,properties:t,newProperties:t}:{...e,properties:n,newProperties:t}}case"set_theme":{const{properties:t,newProperties:n}=e;return{...e,properties:n,newProperties:t}}}},ql={isSetViewportOperation:DF,isSetSelectionOperation:AF,isSetThemeOperation:BF,inverse:RF},mt={isEquals:(e,t)=>e&&t&&e[0]===t[0]&&e[1]===t[1],isHorizontal:(e,t,n=0)=>e&&t&&mt.isOverHorizontal([e,t],n),isOverHorizontal:(e,t=0)=>e.every(n=>Math.abs(n[1]-e[0][1])<=t),isVertical:(e,t,n=0)=>e&&t&&mt.isOverVertical([e,t],n),isOverVertical:(e,t=0)=>e.every(n=>Math.abs(n[0]-e[0][0])<=t),isAlign:(e,t=0)=>mt.isOverHorizontal(e,t)||mt.isOverVertical(e,t),getOffsetX:(e,t)=>t[0]-e[0],getOffsetY:(e,t)=>t[1]-e[1]},U7=new WeakMap,br=new WeakMap,lm=new WeakMap;var kt;!function(e){e.left="left",e.top="top",e.right="right",e.bottom="bottom"}(kt||(kt={}));const MF=e=>e===kt.left||e===kt.right,wo={isGroup:e=>"group"===e.type};
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */function bF(e){return!!kF(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function kF(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function OF(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Symbol.iterator]();let r;for(;!(r=n.next()).done;)t(r.value)}}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */const IF=(e,t)=>t;class FF{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||IF}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,o=null;for(;t||n;){const i=!n||t&&t.currentIndex<M9(n,r,o)?t:n,a=M9(i,r,o),s=i.currentIndex;if(i===n)r--,n=n._nextRemoved;else if(t=t._next,null==i.previousIndex)r++;else{o||(o=[]);const e=a-r,t=s-r;if(e!=t){for(let n=0;n<e;n++){const r=n<o.length?o[n]:o[n]=0,i=r+n;t<=i&&i<e&&(o[n]=r+1)}o[i.previousIndex]=t-e}}a!==s&&e(i,a,s)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!bF(e))throw new Error("Exception: Error trying to diff. Only arrays and iterables are allowed");return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,o=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==o&&Object.is(o.trackById,r)?(i&&(o=this._verifyReinsertion(o,n,r,t)),Object.is(o.item,n)||this._addIdentityChange(o,n)):(o=this._mismatch(o,n,r,t),i=!0),o=o._next}else t=0,OF(e,e=>{r=this._trackByFn(t,e),null!==o&&Object.is(o.trackById,r)?(i&&(o=this._verifyReinsertion(o,e,r,t)),Object.is(o.item,e)||this._addIdentityChange(o,e)):(o=this._mismatch(o,e,r,t),i=!0),o=o._next,t++}),this.length=t;return this._truncate(o),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new LF(t,n),o,r),e}_verifyReinsertion(e,t,n,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==o?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,o=e._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),null===this._additionsTail?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new R9),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(null===this._movesTail?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new R9),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,null===this._identityChangesTail?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}}class LF{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class _F{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class R9{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new _F,this.map.set(t,n)),n.add(e)}get(e,t){const n=e,r=this.map.get(n);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function M9(e,t,n){const r=e.previousIndex;if(null===r)return r;let o=0;return n&&r<n.length&&(o=n[r]),r+t+o}class VP{constructor(e){this.board=e,this.children=[],this.instances=[],this.contexts=[],this.differ=null,this.initialized=!1}initialize(e,t){this.initialized=!0,this.children=e,e.forEach((e,n)=>{i0.set(e,n),Nf.set(e,t.parent);const r=X7(this.board,e,n,t.parent),o=k9(this.board,r),i=b9(this.board,o,r,t);this.instances.push(i),this.contexts.push(r)}),this.differ=new FF(NF),this.differ.diff(e)}update(e,t){if(!this.initialized)return void this.initialize(e,t);if(!this.differ)throw new Error("Exception: Can not find differ ");const{board:n,parent:r}=t,o=this.differ.diff(e);if(o){const i=[],a=[];let s=null;o.forEachItem(e=>{var o;i0.set(e.item,e.currentIndex),Nf.set(e.item,t.parent);const l=null===e.previousIndex?void 0:this.contexts[e.previousIndex],u=X7(n,e.item,e.currentIndex,r,l);if(null===e.previousIndex){const e=k9(n,u),r=b9(n,e,u,t);i.push(u),a.push(r)}else{const t=this.instances[e.previousIndex];t.context=u,a.push(t),i.push(u)}(e.item===this.children[0]||e.item.id===(null==(o=this.children[0])?void 0:o.id))&&(s=e.currentIndex)}),o.forEachOperation(e=>{if(null===e.currentIndex){const t=this.instances[e.previousIndex];null==t||t.destroy()}null!==e.previousIndex&&null!==e.currentIndex&&XP(e.item,e.currentIndex,t,s)}),this.instances=a,this.contexts=i,this.children=e}else{const e=[];this.children.forEach((o,i)=>{i0.set(o,i),Nf.set(o,t.parent);const a=this.contexts[i],s=this.instances[i],l=X7(n,o,i,r,a);s.context=l,e.push(l)}),this.contexts=e}}destroy(){this.children.forEach((e,t)=>{this.instances[t]&&this.instances[t].destroy()}),this.instances=[],this.children=[],this.contexts=[],this.initialized=!1,this.differ=null}}const NF=(e,t)=>t.id,b9=(e,t,n,r)=>{const o=new t;o.context=n,e.normalizeElement(n);try{o.initialize()}catch(e){Jl()&&console.error("list-render-initialize",e,"context",n)}const i=o.getContainerG();return UP(n.index,i,r),o.initializeListRender(),o},k9=(e,t)=>e.drawElement(t),X7=(e,t,n,r,o)=>{var i;let a=Hf(e,t);const s=o&&o.element;return s&&s!==t&&Hf(e,s)&&(a=!0,WO(e,s,t)),{element:t,parent:r,board:e,selected:a,index:n,hasThemeChanged:!(null==(i=e.operations)||!i.find(e=>"set_theme"===e.type))}},UP=(e,t,n,r=null)=>{const{parent:o,parentG:i}=n;if(I.isBoard(o))if(e>0){const n=o.children[e-1];yn.getContainerG(n,{suppressThrow:!1}).insertAdjacentElement("afterend",t)}else if(null!==r){const e=o.children[r],n=e&&yn.getContainerG(e,{suppressThrow:!0});if(!e||!n)throw new Error("fail to mount container on moving");i.insertBefore(t,n)}else i.append(t);else if(e>0){const n=o.children[e-1];yn.getElementG(n).insertAdjacentElement("afterend",t)}else if(r){const e=o.children[r],a=e&&I.findPath(n.board,e),s=a&&Xt.first(n.board,a),l=s&&yn.getContainerG(s,{suppressThrow:!1});if(!l)throw new Error("fail to mount container on moving");i.insertBefore(t,l)}else{let e=yn.getElementG(o);i.insertBefore(t,e)}},XP=(e,t,n,r)=>{const o=yn.getContainerG(e,{suppressThrow:!1});UP(t,o,n,r),e.children&&!yn.isRootElement(e)&&n.board.isExpanded(e)&&e.children.forEach((t,r)=>{XP(t,r,{...n,parent:e},null)})};class HF{get hasChildren(){return!!this.element.children}set context(e){uO(this)&&this.beforeContextChange(e);const t=this._context;if(this._context=e,this.initialized){const n=this.getElementG(),r=this.getContainerG();mg.set(this.element,n),vg.set(this.element,r),Nm(this.board).set(this.element.id,this.element),yg.set(this.element,this.ref),this.updateListRender(),lO(this)&&this.onContextChanged(e,t)}else yn.isRootElement(this.element)&&this.hasChildren?(this._g=Lt(),this._containerG=Lt(),this._containerG.append(this._g)):(this._g=Lt(),this._containerG=this._g),mg.set(this.element,this._g),vg.set(this.element,this._containerG),yg.set(this.element,this.ref),Nm(this.board).set(this.element.id,this.element)}get context(){return this._context}get element(){return this.context&&this.context.element}get board(){return this.context&&this.context.board}get selected(){return this.context&&this.context.selected}getContainerG(){return this._containerG}getElementG(){return this._g}constructor(e){this.ref=e,this.initialized=!1}initialize(){if(this.element.type&&this.getContainerG().setAttribute(`plait-${this.element.type}`,"true"),this.hasChildren)if(yn.isRootElement(this.element))this._rootContainerG=this._containerG;else{const e=I.findPath(this.board,this.element),t=Xt.get(this.board,e.slice(0,1));this._rootContainerG=yn.getContainerG(t,{suppressThrow:!1})}this.getContainerG().setAttribute("plait-data-id",this.element.id),this.initialized=!0}initializeListRender(){this.hasChildren&&(this.listRender=new VP(this.board),this.board.isExpanded(this.element)&&this.listRender.initialize(this.element.children,this.initializeChildrenContext()))}getRef(){return this.ref}updateListRender(){if(this.hasChildren){if(!this.listRender)throw new Error("incorrectly initialize list render");this.board.isExpanded(this.element)?this.listRender.update(this.element.children,this.initializeChildrenContext()):this.listRender.initialized&&this.listRender.destroy()}}initializeChildrenContext(){if(!this._rootContainerG)throw new Error("can not resolve root container g");return{board:this.board,parent:this.element,parentG:this._rootContainerG}}destroy(){var e;mg.get(this.element)===this._g&&mg.delete(this.element),Nm(this.board).delete(this.element.id),vg.get(this.element)===this._containerG&&vg.delete(this.element),yg.get(this.element)===this.ref&&yg.set(this.element,this.ref),tv(this.board,this.element),this.getContainerG().remove(),null==(e=this.listRender)||e.destroy()}}class GF{constructor(){this._stable=new $E,this.uploadingFiles=[]}getUploadingFile(e){return this.uploadingFiles.find(t=>t.url===e)}setUploadingFile(e){return this.uploadingFiles.push(e)}removeUploadingFile(e){this.uploadingFiles=this.uploadingFiles.filter(t=>t.url!==e.url)}onStable(){return this._stable.asObservable()}nextStable(){this._stable.next("")}}const jF={transform(e,t){const{current:n}=e;if(null==n)return;const r=wt.transform(n,t);e.current=r,null==r&&e.unref()}};function $F(e,t){const n={viewport:{zoom:1},children:e,theme:{themeColorMode:fr.default},operations:[],history:{redos:[],undos:[]},selection:null,options:t||{readonly:!1,hideScrollbar:!1,disabledScrollOnNonFocus:!1},pointer:null!=t&&t.readonly?Zt.hand:Zt.selection,undo:()=>{},redo:()=>{},apply:e=>{for(const t of n.pathRefs())jF.transform(t,e);n.operations.push(e),Xe.transform(n,e),Fm.get(n)||(Fm.set(n,!0),Promise.resolve().then(()=>{Fm.set(n,!1),n.onChange(),n.afterChange(),n.operations=[]}))},pathRef:(e,t)=>{const r={current:e,affinity:(null==t?void 0:t.affinity)||"forward",unref(){const{current:e}=r;return n.pathRefs().delete(r),r.current=null,e}};return n.pathRefs().add(r),r},pathRefs:()=>{let e=w9.get(n);return e||(e=new Set,w9.set(n,e)),e},onChange:()=>{},afterChange:()=>{},drawSelectionRectangle:()=>WI(n),mousedown:e=>{},mousemove:e=>{},mouseleave:e=>{},globalMousemove:e=>{},mouseup:e=>{},globalMouseup:e=>{},keyDown:e=>{},globalKeyDown:e=>{},keyUp:e=>{},dblClick:e=>{},buildFragment:(e,t,n,r)=>e,insertFragment:(e,t,n)=>{},deleteFragment:e=>{_P.removeElements(n,e)},getDeletedFragment:e=>e,getRelatedFragment:(e,t)=>e,normalizeElement:e=>{},drawElement:e=>{throw new Error(`can not resolve plugin element component type: ${e.element.type}`)},isWithinSelection:e=>!1,isRectangleHit:e=>!1,isHit:e=>!1,isInsidePoint:e=>!1,getOneHitElement:e=>e[0],isRecursion:e=>!0,isMovable:e=>!1,getRectangle:e=>null,applyTheme:e=>{},isAlign:e=>!1,pointerDown:e=>{},pointerMove:e=>{},pointerUp:e=>{},pointerCancel:e=>{},pointerOut:e=>{},pointerLeave:e=>{},globalPointerMove:e=>{},globalPointerUp:e=>{},drop:e=>!1,isImageBindingAllowed:e=>!1,canAddToGroup:e=>!0,canSetZIndex:e=>!0,isExpanded:e=>!0};return n}function WF(e){const{onChange:t,afterChange:n}=e;return e.onChange=()=>{const n=r3.get(e);n&&n(),t()},e.afterChange=()=>{const t=i3.get(e);t&&t(),n()},e}const O9=(e,t)=>I.isPointer(e,Zt.selection)&&IP(t),I9="Space";function zF(e){const{pointerDown:t,pointerMove:n,globalPointerUp:r,keyDown:o,keyUp:i,pointerUp:a}=e;let s=!1,l=null,u=null,c=!1,d=!1;return e.pointerDown=n=>{const r=e.getPluginOptions(Ga.withHand),o=At(e,Ot(e,n.x,n.y)),i=sP(e,o);((null==r?void 0:r.isHandMode(e,n))||I.isPointer(e,Zt.hand)||O9(e,n)&&!i||d)&&Va(n)?(l={x:n.x,y:n.y},I.isPointer(e,Zt.hand)||I.getBoardContainer(e).classList.add("viewport-moving")):BO(n)&&(c=!0,n.preventDefault(),l={x:n.x,y:n.y},s=!0,I.getBoardContainer(e).classList.add("viewport-moving")),u=n,t(n)},e.pointerMove=t=>{const r=e.getPluginOptions(Ga.withHand);if(l&&!s&&!gi(e)&&u&&Tt(u.x,u.y,t.x,t.y)>14&&!fc(e)&&(s=!0,I.getBoardContainer(e).classList.add("viewport-moving")),((null==r?void 0:r.isHandMode(e,t))||I.isPointer(e,Zt.hand)||O9(e,t)||c||d)&&s&&l&&!gi(e)&&!fc(e)){const n=I.getViewportContainer(e),r=n.scrollLeft-(t.x-l.x),o=n.scrollTop-(t.y-l.y);gP(e,r,o,!1),l.x=t.x,l.y=t.y}n(t)},e.pointerUp=e=>{s||a(e)},e.globalPointerUp=t=>{l&&(l=null),s=!1,I.getBoardContainer(e).classList.remove("viewport-moving"),c=!1,r(t)},e.keyDown=t=>{t.code===I9&&(!e.options.readonly&&!I.isPointer(e,Zt.hand)&&(d=!0,P6(e,{isDisabledSelection:!0}),I.getBoardContainer(e).classList.add("viewport-moving")),t.preventDefault()),o(t)},e.keyUp=t=>{!e.options.readonly&&t.code===I9&&(d=!1,P6(e,{isDisabledSelection:!1}),I.getBoardContainer(e).classList.remove("viewport-moving")),i(t)},e}function VF(e){const{apply:t,keyDown:n}=e;return e.history={undos:[],redos:[]},e.redo=()=>{const{history:t}=e,{redos:n}=t;if(n.length>0){const r=n[n.length-1];vs.withoutSaving(e,()=>{for(const t of r)e.apply(t)}),t.redos.pop(),t.undos.push(r)}},e.undo=()=>{const{history:t}=e,{undos:n}=t;if(n.length>0){const r=n[n.length-1];vs.withoutSaving(e,()=>{const t=r.map(ql.inverse).reverse();for(const n of t)e.apply(n)}),t.redos.push(r),t.undos.pop()}},e.apply=n=>{const{operations:r,history:o}=e,{undos:i}=o,a=i[i.length-1],s=a&&a[a.length-1];let l=vs.isSaving(e),u=vs.isMerging(e);if(null==l&&(l=LO(n)),l){if(u||(u=null!=a&&(0!==r.length||FO(n,s))),vs.isSplittingOnce(e)&&(u=!1,vs.setSplittingOnce(e,void 0)),a&&u)a.push(n);else{const e=[n];i.push(e)}for(;i.length>100;)i.shift();_O(n)&&(o.redos=[])}t(n)},e.keyDown=t=>{nn.isHotkey("mod+z",t)?e.undo():nn.isHotkey("mod+shift+z",t)?e.redo():n(t)},e}const UF=e=>{const{keyDown:t,keyUp:n,globalKeyDown:r}=e;return e.keyDown=n=>{const r=e.getPluginOptions(Ga.withSelection);if(!I.isReadonly(e)&&r.isMultipleSelection&&nn.isHotkey("mod+a",n)){n.preventDefault();let t=[];return di(e,e=>{I.isBoard(e)||t.push(e)},t=>!(!I.isBoard(t)&&!e.isRecursion(t)),!0),void Xe.addSelectionWithTemporaryElements(e,t)}if(!I.isReadonly(e)){if(nn.isKeyHotkey("mod+]",n))return n.preventDefault(),void Xe.moveUp(e);if(nn.isKeyHotkey("mod+[",n))return n.preventDefault(),void Xe.moveDown(e);if(nn.isKeyHotkey("mod+option+",n))return n.preventDefault(),void Xe.moveToTop(e);if(nn.isKeyHotkey("mod+option+",n))return n.preventDefault(),void Xe.moveToBottom(e)}const o=Qe(e);if(!I.isReadonly(e)&&o.length>0&&nn.isKeyHotkey("mod+d",n))return n.preventDefault(),void Y4(e);!I.isReadonly(e)&&o.length>0&&(Ti.isDeleteBackward(n)||Ti.isDeleteForward(n))&&(n.preventDefault(),K4(e)),t(n)},e.keyUp=e=>{n(e)},e.globalKeyDown=t=>{if(I.getMovingPointInBoard(e)||I.isMovingPointInBoard(e)){if(nn.isHotkey(["mod+=","mod++"],{byKey:!0})(t))return t.preventDefault(),void vn.updateZoom(e,e.viewport.zoom+.1);if(nn.isHotkey(["mod+shift+=","mod+shift++"],{byKey:!0})(t))return t.preventDefault(),void vn.fitViewport(e);if(nn.isHotkey(["mod+-","mod+shift+-"])(t))return t.preventDefault(),void vn.updateZoom(e,e.viewport.zoom-.1);if(nn.isHotkey(["mod+0","mod+shift+0"],{byKey:!0})(t))return t.preventDefault(),void vn.updateZoom(e,1)}r(t)},e};function XF(e,t,n){const r=BP(e,n),o=Lt();let i=YF(t,r);const a=ZF(e,i,t,r);o.append(a);const s=QF(e,i,t,r);return i=s.snapDelta,o.append(s.snapG),{...i,snapG:o}}function KF(e,t,n){const r=Kf(e,n);return[Sg(t,r[0],n),Sg(t,r[1],n),Sg(t,r[2],n)]}function YF(e,t){let n={deltaX:0,deltaY:0};function r(n){let r=0;const o=KF(e,t,n);for(let e=0;e<o.length;e++)if(Math.abs(o[e])<2){r=o[e];break}return r}return n.deltaX=r(!0),n.deltaY=r(!1),n}function qF(e,t){const{deltaX:n,deltaY:r}=e,{x:o,y:i,width:a,height:s}=t;return{x:o+n,y:i+r,width:a,height:s}}function ZF(e,t,n,r){return RP(e,qF(t,n),r,!0,!0,!0)}function QF(e,t,n,r){let o=t.deltaX,i=t.deltaY;const a=F9(n,r,!0),s=F9(n,r,!1),l=[...a.lines,...s.lines];return a.delta&&(o=a.delta),s.delta&&(i=s.delta),{snapDelta:{deltaX:o,deltaY:i},snapG:MP(e,l)}}function F9(e,t,n){var r,o;let i=[],a=0,s=[];const l=n?"x":"y",u=n?"width":"height",c=e[l]+e[u]/2;t.forEach(t=>{(n?JF(t,e):eL(t,e))&&!M.isHit(t,e)&&s.push(t)}),s=[...s,e].sort((e,t)=>e[l]-t[l]);const d=[];let h,f,p=0;for(let t=0;t<s.length;t++)for(let n=t+1;n<s.length;n++){const i=s[t],g=s[n],m=g[l]-(i[l]+i[u]);let v=1/0;null!=(r=d[t])&&r.after?d[t].after.push({distance:m,index:n}):d[t]={...d[t],after:[{distance:m,index:n}]},null!=(o=d[n])&&o.before?d[n].before.push({distance:m,index:t}):d[n]={...d[n],before:[{distance:m,index:t}]};let y=(i[l]+i[u]+g[l])/2;v=Math.abs(y-c),v<2&&(p=(g[l]-(i[l]+i[u])-e[u])/2,a=y-c,h=t,f=n);const b=g[l]-(i[l]+i[u]);y=g[l]+g[u]+b+e[u]/2,v=Math.abs(y-c),(!p||p!==b)&&v<2&&(p=b,h=n,a=y-c);const w=g[l]-(i[l]+i[u]);y=i[l]-w-e[u]/2,v=Math.abs(y-c),!p&&v<2&&(p=w,f=t,a=y-c)}const g=s.indexOf(e);let m=[],v=[];if(void 0!==h&&(m.push(h),y(p,d[h],"before",m)),void 0!==f&&(v.push(f),y(p,d[f],"after",v)),m.length||v.length){const t=[...m.reverse(),g,...v];e[l]+=a;for(let e=1;e<t.length;e++)i.push(b(s[t[e-1]],s[t[e]]))}function y(e,t,n,r){const o=t[n],i=d.indexOf(t);if(!(0===i&&"before"===n||i===d.length-1&&"after"===n))for(let t=0;t<o.length;t++)if(Math.abs(o[t].distance-e)<.1)return r.push(o[t].index),void y(e,d[o[t].index],n,r)}function b(e,t){const r="x"===l?"y":"x",o="width"===u?"height":"width",i=[e[r],e[r]+e[o],t[r],t[r]+t[o]].sort((e,t)=>e-t),a=(i[1]+i[2])/2;return n?[[e.x+e.width+3,a],[t.x-3,a]]:[[a,e.y+e.height+3],[a,t.y-3]]}return{delta:a,lines:i}}function JF(e,t){return!(e.y+e.height<t.y||e.y>t.y+t.height)}function eL(e,t){return!(e.x+e.width<t.x||e.x>t.x+t.width)}function tL(e){const{pointerDown:t,pointerMove:n,globalPointerUp:r,globalPointerMove:o,globalKeyDown:i,keyUp:a}=e;let s,l,u,c=0,d=0,h=!1,f=[],p=null,g=null,m=null,v=null;function y(e){null==p||p.remove(),null==v||v.remove(),s=null,g=null,c=0,d=0,f=[],fc(e)&&pI(e),br.set(e,!1),I.getBoardContainer(e).classList.remove("element-moving")}return e.globalKeyDown=t=>{I.isReadonly(e)||nn.isKeyHotkey("option",t)&&(t.preventDefault(),s&&f.length&&!I.hasBeenTextEditing(e)&&(v=L9(e,f,c,d),v&&I.getElementTopHost(e).append(v))),i(t)},e.keyUp=t=>{if(!I.isReadonly(e)&&v&&s&&f.length&&!I.hasBeenTextEditing(e)){t.preventDefault();const n=R6(e,f,c,d);I.getBoardContainer(e).classList.add("element-moving"),E9(e,n)}null==v||v.remove(),a(t)},e.pointerDown=n=>{if(I.isReadonly(e)||!I.isPointer(e,Zt.selection)||!Va(n))return void t(n);const r=At(e,Ot(e,n.x,n.y));if(l=Qa(e,r,t=>e.isMovable(t)),m=KP(e),u=l&&m.includes(l),l&&u)s=r,f=m,g=on(e,f,!0);else if(l){s=r;const t=e.getRelatedFragment([],[l]);f=[...V4(e,l),...t],g=on(e,f,!0)}else{const t=m.length>0&&on(e,m,!1);t&&M.isPointInRectangle(t,r)&&(s=r,f=m,g=t)}t(n)},e.pointerMove=t=>{if(s&&f.length&&!I.hasBeenTextEditing(e)){h||(h=!0),null==p||p.remove(),null==v||v.remove();const n=At(e,Ot(e,t.x,t.y));c=n[0]-s[0],d=n[1]-s[1],(Tt(...n,...s)>3||gI(e).length>0)&&(l&&!u&&m&&m.length>0&&(LP(e,[]),l=void 0,m=null,u=void 0),Ua(e,"with-moving",()=>{if(!g)return;const n={...g,x:g.x+c,y:g.y+d},r=xp(n,po(f)),o=XF(e,r,f);if(c+=o.deltaX,d+=o.deltaY,p=o.snapG,p.classList.add(YE),I.getElementTopHost(e).append(p),t.altKey)v=L9(e,f,c,d),v&&I.getElementTopHost(e).append(v);else{const t=R6(e,f,c,d);I.getBoardContainer(e).classList.add("element-moving"),E9(e,t)}}))}h&&t.preventDefault(),n(t)},e.globalPointerMove=t=>{s&&(xO(e,t.x,t.y)||y(e)),o(t)},e.globalPointerUp=t=>{if(t.altKey&&f.length){const t=q4(e,f),n=on(e,t,!1);Y4(e,t,[n.x+c,n.y+d])}h=!1,l=void 0,m=null,u=void 0,s&&y(e),r(t)},nL(e)}function nL(e){const{keyDown:t,keyUp:n}=e;return e.keyDown=n=>{const r=Qe(e);if(!I.isReadonly(e)&&r.length>0&&(Ti.isArrow(n)||Ti.isExtendArrow(n))){n.preventDefault();const t=!!n.shiftKey,r=[0,0],o=t?10:1;switch(!0){case Ti.isMoveUp(n)||Ti.isExtendUp(n):r[1]=-o;break;case Ti.isMoveDown(n)||Ti.isExtendDown(n):r[1]=o;break;case Ti.isMoveBackward(n)||Ti.isExtendBackward(n):r[0]=-o;break;case Ti.isMoveForward(n)||Ti.isExtendForward(n):r[0]=o}const i=KP(e);Ua(e,"with-arrow-moving",()=>{R6(e,i,r[0],r[1])})}t(n)},e.keyUp=t=>{br.set(e,!1),n(t)},e}function KP(e){const t=Qe(e),n=e.children.filter(t=>e.isMovable(t)),r=t.filter(e=>n.includes(e)),o=e.getRelatedFragment([]);return r.push(...o),r}function q4(e,t){return[...t].filter(e=>!wo.isGroup(e)&&yn.isRootElement(e))}function R6(e,t,n,r){return q4(e,t).map(t=>{const o=(t.points||[]).map(e=>[e[0]+n,e[1]+r]),i=i0.get(t);return Xe.setNode(e,{points:o},[i]),br.set(e,!0),Xt.get(e,[i])})}function L9(e,t,n,r){let o=null;const i=[];return q4(e,t).forEach(e=>{di(e,e=>{i.push(e)},()=>!0)}),i.forEach(t=>{let i=e.getRectangle(t);if(i){i={x:i.x+n,y:i.y+r,width:i.width,height:i.height};const a=ua(e,i,{stroke:yo,strokeWidth:1,fill:_4,fillStyle:"solid"});o||(o=Lt(),o.classList.add(YE));const s=SF(t);s&&Ps(a,M.getCenterPoint(i),s),o.append(a)}}),o}const rL=e=>{const t=new Map,n=e;return n.getPluginOptions=e=>t.get(e),n.setPluginOptions=(e,r)=>{const o=n.getPluginOptions(e)||{};t.set(e,{...o,...r})},n};function iL(e){const{buildFragment:t}=e;return e.buildFragment=(n,r,o,i)=>{let a=e.getRelatedFragment(i||[]);if(a&&(null!=i&&i.length&&(a=a.filter(e=>!i.map(e=>e.id).includes(e.id))),a.length)){const e={text:"",type:Xu.elements,elements:a};n=iv(n,e)}return t(n,r,o,i)},e}function oL(e){const{pointerDown:t,pointerUp:n,pointerMove:r,globalPointerUp:o,onChange:i,afterChange:a,drawSelectionRectangle:s}=e;let l,u,c=null,d=null,h=!1,f=null,p=null;return e.pointerDown=n=>{!h&&n.shiftKey&&(h=!0),h&&!n.shiftKey&&(h=!1);const r=At(e,Ot(e,n.x,n.y)),o=sP(e,r),i=_m(e);I.isPointer(e,Zt.selection)&&Va(n)&&!o&&i.isMultipleSelection&&!i.isDisabledSelection&&(IP(n)?f=setTimeout(()=>{c=[n.x,n.y],f=null},120):c=[n.x,n.y]),p=n,t(n)},e.pointerMove=t=>{if(f&&p&&Tt(p.x,p.y,t.x,t.y)>10&&(clearTimeout(f),f=null),I.isPointer(e,Zt.selection)&&c){t.preventDefault(),d=[t.x,t.y];const n=M.getRectangleByPoints([Xf(e,...c),Xf(e,...d)]);null==l||l.remove(),Ua(e,"with-selection",()=>{c&&d&&Xe.setSelection(e,{anchor:At(e,Ot(e,c[0],c[1])),focus:At(e,Ot(e,d[0],d[1]))})}),NI(e),l=ua(e,n,{stroke:yo,strokeWidth:1,fill:_4,fillStyle:"solid"}),I.getActiveHost(e).append(l)}r(t)},e.pointerUp=t=>{const r=I.isPointer(e,Zt.selection)||I.isPointer(e,Zt.hand);if(!Va(t)||cc(e)||!r)return void n(t);const o=At(e,Ot(e,t.x,t.y)),i={anchor:o,focus:o};Xe.setSelection(e,i),n(t)},e.globalPointerUp=t=>{c&&d&&(null==l||l.remove(),HI(e),Xe.setSelection(e,{anchor:At(e,Ot(e,c[0],c[1])),focus:At(e,Ot(e,d[0],d[1]))}));const n=_m(e);if(I.isFocus(e)&&!n.isPreventClearSelection){const n=t.target instanceof Node&&I.getBoardContainer(e).contains(t.target),r=t.target instanceof Node&&document.contains(t.target),o=t.target instanceof Element&&t.target.closest(`.${il}`);!n&&!c&&!o&&r&&Xe.setSelection(e,null)}c=null,d=null,f&&(clearTimeout(f),f=null),p=null,o(t)},e.onChange=()=>{const t=_m(e);if(t.isDisabledSelection&&B0(e),e.operations.forEach(t=>{"remove_node"===t.type&&tv(e,t.node,!0)}),D9(e)&&A9(e))try{h||null==u||u.remove();const n=GI(e);if(n)Na(e,[...n]);else{let n=iP(e);!t.isMultipleSelection&&n.length>1&&(n=[n[0]]);const r=n.some(e=>e.groupId),o=Qe(e);if(r)zI(e,n,h);else{if(e.selection&&v0.isCollapsed(e.selection)){const t=e.getOneHitElement(n);t&&(n=[t])}if(h){const t=[...o];e.selection&&v0.isCollapsed(e.selection)?(n.forEach(e=>{t.includes(e)?t.splice(t.indexOf(e),1):t.push(e)}),Na(e,t)):(n.forEach(e=>{t.includes(e)||t.push(e)}),Na(e,[...t]))}else Na(e,[...n])}}const r=Qe(e);$I(e),gi(e)||(null==u||u.remove(),r.length>1&&(u=e.drawSelectionRectangle(),I.getActiveHost(e).append(u)))}catch(e){console.error(e)}i()},e.afterChange=()=>{if(D9(e)&&!A9(e))try{const t=Qe(e);t.length&&t.length>1?(null==u||u.remove(),u=e.drawSelectionRectangle(),I.getActiveHost(e).append(u)):null==u||u.remove()}catch(e){console.error(e)}a()},P6(e,{isMultipleSelection:!0,isDisabledSelection:!1,isPreventClearSelection:!1}),e}const sL=e=>{const t=e;return t.getI18nValue=e=>(console.warn(`I18n key "${e}" is not found.`),null),t},ov=(e,t,n="")=>e.getI18nValue(t)||n;var _9,K7={exports:{}};
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/function aL(){return _9||(_9=1,e=K7,function(){var t={}.hasOwnProperty;function n(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,r(n)))}return e}function r(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return n.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var r="";for(var i in e)t.call(e,i)&&e[i]&&(r=o(r,i));return r}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(n.default=n,e.exports=n):window.classNames=n}()),K7.exports;var e}var uL=aL();const Dn=vc(uL);var lL=function(e){return"function"==typeof e};function N9(e,t){if(e===t)return!0;for(var n=0;n<e.length;n++)if(!Object.is(e[n],t[n]))return!1;return!0}function YP(e){var t=j.useRef(e);return t.current=e,t}var Y7,H9,q7,G9,Z7,j9,Q7,$9,J7,W9,e5,z9,t5,V9,n5,U9,r5,X9,i5,K9,o5,Y9,s5,q9,a5,Z9,u5,Q9,cL=function(e){var t=YP(e);j.useEffect(function(){return function(){t.current()}},[])};function Z4(){if(H9)return Y7;return H9=1,Y7=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}}function fL(){if(G9)return q7;G9=1;var e="object"==typeof Cs&&Cs&&Cs.Object===Object&&Cs;return q7=e}function qP(){if(j9)return Z7;j9=1;var e=fL(),t="object"==typeof self&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return Z7=n}function hL(){if($9)return Q7;$9=1;var e=qP();return Q7=function(){return e.Date.now()}}function dL(){if(W9)return J7;W9=1;var e=/\s/;return J7=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}}function gL(){if(z9)return e5;z9=1;var e=dL(),t=/^\s+/;return e5=function(n){return n&&n.slice(0,e(n)+1).replace(t,"")}}function ZP(){if(V9)return t5;V9=1;var e=qP().Symbol;return t5=e}function pL(){if(U9)return n5;U9=1;var e=ZP(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,o=e?e.toStringTag:void 0;return n5=function(e){var t=n.call(e,o),i=e[o];try{e[o]=void 0;var a=!0}catch{}var s=r.call(e);return a&&(t?e[o]=i:delete e[o]),s}}function mL(){if(X9)return r5;X9=1;var e=Object.prototype.toString;return r5=function(t){return e.call(t)}}function vL(){if(K9)return i5;K9=1;var e=ZP(),t=pL(),n=mL(),r=e?e.toStringTag:void 0;return i5=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":r&&r in Object(e)?t(e):n(e)}}function yL(){if(Y9)return o5;return Y9=1,o5=function(e){return null!=e&&"object"==typeof e}}function wL(){if(q9)return s5;q9=1;var e=vL(),t=yL();return s5=function(n){return"symbol"==typeof n||t(n)&&"[object Symbol]"==e(n)}}function CL(){if(Z9)return a5;Z9=1;var e=gL(),t=Z4(),n=wL(),r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,i=/^0o[0-7]+$/i,a=parseInt;return a5=function(s){if("number"==typeof s)return s;if(n(s))return NaN;if(t(s)){var l="function"==typeof s.valueOf?s.valueOf():s;s=t(l)?l+"":l}if("string"!=typeof s)return 0===s?s:+s;s=e(s);var u=o.test(s);return u||i.test(s)?a(s.slice(2),u?2:8):r.test(s)?NaN:+s}}function QP(){if(Q9)return u5;Q9=1;var e=Z4(),t=hL(),n=CL(),r=Math.max,o=Math.min;return u5=function(i,a,s){var l,u,c,d,h,f,p=0,g=!1,m=!1,v=!0;if("function"!=typeof i)throw new TypeError("Expected a function");function y(e){var t=l,n=u;return l=u=void 0,p=e,d=i.apply(n,t)}function b(e){var t=e-f;return void 0===f||t>=a||t<0||m&&e-p>=c}function w(){var e=t();if(b(e))return x(e);h=setTimeout(w,function(e){var t=a-(e-f);return m?o(t,c-(e-p)):t}(e))}function x(e){return h=void 0,v&&l?y(e):(l=u=void 0,d)}function C(){var e=t(),n=b(e);if(l=arguments,u=this,f=e,n){if(void 0===h)return function(e){return p=e,h=setTimeout(w,a),g?y(e):d}(f);if(m)return clearTimeout(h),h=setTimeout(w,a),y(f)}return void 0===h&&(h=setTimeout(w,a)),d}return a=n(a)||0,e(s)&&(g=!!s.leading,c=(m="maxWait"in s)?r(n(s.maxWait)||0,a):c,v="trailing"in s?!!s.trailing:v),C.cancel=function(){void 0!==h&&clearTimeout(h),p=0,l=f=u=h=void 0},C.flush=function(){return void 0===h?d:x(t())},C},u5}var xL=QP();const EL=vc(xL);var l5,J9,PL=!!(typeof window<"u"&&window.document&&window.document.createElement);function SL(){if(J9)return l5;J9=1;var e=QP(),t=Z4();return l5=function(n,r,o){var i=!0,a=!0;if("function"!=typeof n)throw new TypeError("Expected a function");return t(o)&&(i="leading"in o?!!o.leading:i,a="trailing"in o?!!o.trailing:a),e(n,r,{leading:i,maxWait:r,trailing:a})}}var TL=SL();const DL=vc(TL);function JP(e,t){if(PL)return e?lL(e)?e():"current"in e?e.current:e:t}var AL=function(e){return function(t,n,r){var o=j.useRef(!1),i=j.useRef([]),a=j.useRef([]),s=j.useRef();e(function(){var e,l=(Array.isArray(r)?r:[r]).map(function(e){return JP(e)});if(!o.current)return o.current=!0,i.current=l,a.current=n,void(s.current=t());(l.length!==i.current.length||!N9(i.current,l)||!N9(a.current,n))&&(null===(e=s.current)||void 0===e||e.call(s),i.current=l,a.current=n,s.current=t())}),cL(function(){var e;null===(e=s.current)||void 0===e||e.call(s),o.current=!1})}},BL=AL(j.useEffect);function ai(e,t,n){void 0===n&&(n={});var r=n.enable,o=void 0===r||r,i=YP(t);BL(function(){if(o){var t=JP(n.target,window);if(null!=t&&t.addEventListener){var r=function(e){return i.current(e)},a=Array.isArray(e)?e:[e];return a.forEach(function(e){t.addEventListener(e,r,{capture:n.capture,once:n.once,passive:n.passive})}),function(){a.forEach(function(e){t.removeEventListener(e,r,{capture:n.capture})})}}}},[e,n.capture,n.once,n.passive,o],n.target)}const RL=(e,t,n)=>{ai("pointerdown",t=>{e.pointerDown(t)},{target:n}),ai("pointermove",t=>{v6.set(e,[t.x,t.y]),e.pointerMove(t)},{target:t}),ai("pointerleave",t=>{v6.delete(e),e.pointerLeave(t)},{target:t}),ai("pointerup",t=>{e.pointerUp(t)},{target:t}),ai("dblclick",t=>{I.isFocus(e)&&!I.hasBeenTextEditing(e)&&e.dblClick(t)},{target:n}),ai("pointermove",t=>{JE.set(e,[t.x,t.y]),e.globalPointerMove(t)}),ai("pointerup",t=>{e.globalPointerUp(t)}),ai("keydown",t=>{e.globalKeyDown(t),I.isFocus(e)&&!I.hasBeenTextEditing(e)&&!AO(t.target)&&e.keyDown(t)}),ai("keyup",t=>{I.isFocus(e)&&!I.hasBeenTextEditing(e)&&(null==e||e.keyUp(t))}),ai("copy",t=>{I.isFocus(e)&&!I.hasBeenTextEditing(e)&&(t.preventDefault(),B9(e,aa.copy,t.clipboardData))}),ai("paste",async t=>{if(I.isFocus(e)&&!I.isReadonly(e)&&!I.hasBeenTextEditing(e)){const n=I.getMovingPointInBoard(e);if(n){const r=At(e,Ot(e,n[0],n[1])),o=await LI(t.clipboardData);e.insertFragment(o,r,aa.paste)}}}),ai("cut",t=>{I.isFocus(e)&&!I.isReadonly(e)&&!I.hasBeenTextEditing(e)&&(t.preventDefault(),B9(e,aa.cut,t.clipboardData),K4(e))}),ai("drop",t=>{I.isReadonly(e)||(t.preventDefault(),e.drop(t))},{target:t}),ai("dragover",e=>{e.preventDefault()},{target:t})},ML=(e,t)=>{ai("scroll",t=>{if(uI(e))yP(e,!1);else{const{scrollLeft:n,scrollTop:r}=t.target;pP(e,n,r)}},{target:t}),ai("touchstart",e=>{e.preventDefault()},{target:t,passive:!1}),ai("wheel",t=>{if(t.metaKey||t.ctrlKey){t.preventDefault();const{deltaX:n,deltaY:r}=t,o=e.viewport.zoom,i=Math.sign(r),a=10,s=Math.abs(r);let l=r;s>a&&(l=a*i);let u=o-l/100;u+=Math.log10(Math.max(1,o))*-i*Math.min(1,s/20),vn.updateZoom(e,u,I.getMovingPointInBoard(e))}},{target:t,passive:!1});const n=j.useRef(!1);j.useEffect(()=>{const t=new ResizeObserver(()=>{n.current?(G4(e),j4(e),u3(e)):n.current=!0});return t.observe(I.getBoardContainer(e)),()=>{t&&t.disconnect()}},[])},Q4=j.createContext(null),Zr=()=>{const e=j.useContext(Q4);if(!e)throw new Error("The `useBoard` hook must be used inside the <Plait> component's context.");const{board:t}=e;return t},eS=()=>{const e=j.useContext(Q4);if(!e)throw new Error("The `useBoard` hook must be used inside the <Plait> component's context.");const{listRender:t}=e;return t},tS=({style:e,className:t,children:n,afterInit:r})=>{var o,i;const a=j.useRef(null),s=j.useRef(null),l=j.useRef(null),u=j.useRef(null),c=j.useRef(null),d=j.useRef(null),h=j.useRef(null),f=j.useRef(null),p=Zr(),g=eS();return j.useEffect(()=>{const e=qb.svg(a.current,{options:{roughness:0,strokeWidth:1}});d6.set(p,e),g6.set(p,a.current),m6.set(p,!0),Lu.set(p,{lowerHost:s.current,host:l.current,upperHost:u.current,topHost:c.current,activeHost:d.current,container:f.current,viewportContainer:h.current});const t=new GF;return p6.set(p,t),f6.set(p,new Map),g.initialized||(g.initialize(p.children,{board:p,parent:p,parentG:I.getElementHost(p)}),r&&r(p)),G4(p),j4(p),oI(p),()=>{p6.delete(p),i3.delete(p),r3.delete(p),Lu.delete(p),m6.delete(p),g6.delete(p),d6.delete(p),f6.delete(p)}},[]),RL(p,h,a),ML(p,h),b.jsx("div",{className:Dn(t,oO,`${bL()}`,`theme-${null==(o=p.theme)?void 0:o.themeColorMode}`,`pointer-${p.pointer}`,{focused:I.isFocus(p),readonly:I.isReadonly(p),"disabled-scroll":(null==(i=p.options)?void 0:i.disabledScrollOnNonFocus)&&!I.isFocus(p)}),ref:f,style:e,children:b.jsxs("div",{className:"viewport-container",ref:h,style:{width:"100%",height:"100%",overflow:"auto"},children:[b.jsxs("svg",{ref:a,width:"100%",height:"100%",style:{position:"relative"},className:"board-host-svg",children:[b.jsx("g",{className:"element-lower-host",ref:s}),b.jsx("g",{className:"element-host",ref:l}),b.jsx("g",{className:"element-upper-host",ref:u}),b.jsx("g",{className:"element-top-host",ref:c})]}),b.jsx("svg",{width:"100%",height:"100%",className:"board-active-svg",children:b.jsx("g",{className:"active-host-g",ref:d})}),n]})})},bL=()=>OO?"safari":IO?"chrome":kO?"firefox":"";var kL={transform(e,t){var{current:n,affinity:r}=e;if(null!=n){var o=K.transform(n,t,{affinity:r});e.current=o,null==o&&e.unref()}}},OL={transform(e,t){var{current:n,affinity:r}=e;if(null!=n){var o=pn.transform(n,t,{affinity:r});e.current=o,null==o&&e.unref()}}},IL={transform(e,t){var{current:n,affinity:r}=e;if(null!=n){var o=Ee.transform(n,t,{affinity:r});e.current=o,null==o&&e.unref()}}},f3=new WeakMap,h3=new WeakMap,Tg=new WeakMap,nS=new WeakMap,ew=new WeakMap,tw=new WeakMap,nw=new WeakMap,K={ancestors(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:n=!1}=t,r=K.levels(e,t);return r=n?r.slice(1):r.slice(0,-1)},common(e,t){for(var n=[],r=0;r<e.length&&r<t.length;r++){var o=e[r];if(o!==t[r])break;n.push(o)}return n},compare(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return 0},endsAfter(e,t){var n=e.length-1,r=e.slice(0,n),o=t.slice(0,n),i=e[n],a=t[n];return K.equals(r,o)&&i>a},endsAt(e,t){var n=e.length,r=e.slice(0,n),o=t.slice(0,n);return K.equals(r,o)},endsBefore(e,t){var n=e.length-1,r=e.slice(0,n),o=t.slice(0,n),i=e[n],a=t[n];return K.equals(r,o)&&i<a},equals:(e,t)=>e.length===t.length&&e.every((e,n)=>e===t[n]),hasPrevious:e=>e[e.length-1]>0,isAfter:(e,t)=>1===K.compare(e,t),isAncestor:(e,t)=>e.length<t.length&&0===K.compare(e,t),isBefore:(e,t)=>-1===K.compare(e,t),isChild:(e,t)=>e.length===t.length+1&&0===K.compare(e,t),isCommon:(e,t)=>e.length<=t.length&&0===K.compare(e,t),isDescendant:(e,t)=>e.length>t.length&&0===K.compare(e,t),isParent:(e,t)=>e.length+1===t.length&&0===K.compare(e,t),isPath:e=>Array.isArray(e)&&(0===e.length||"number"==typeof e[0]),isSibling(e,t){if(e.length!==t.length)return!1;var n=e.slice(0,-1),r=t.slice(0,-1);return e[e.length-1]!==t[t.length-1]&&K.equals(n,r)},levels(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:n=!1}=t,r=[],o=0;o<=e.length;o++)r.push(e.slice(0,o));return n&&r.reverse(),r},next(e){if(0===e.length)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var t=e[e.length-1];return e.slice(0,-1).concat(t+1)},operationCanTransformPath(e){switch(e.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(e){if(0===e.length)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous(e){if(0===e.length)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var t=e[e.length-1];if(t<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(t-1)},relative(e,t){if(!K.isAncestor(t,e)&&!K.equals(e,t))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(t,"], because it is not above or equal to the path."));return e.slice(t.length)},transform(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return null;var r=[...e],{affinity:o="forward"}=n;if(0===e.length)return r;switch(t.type){case"insert_node":var{path:i}=t;(K.equals(i,r)||K.endsBefore(i,r)||K.isAncestor(i,r))&&(r[i.length-1]+=1);break;case"remove_node":var{path:a}=t;if(K.equals(a,r)||K.isAncestor(a,r))return null;K.endsBefore(a,r)&&(r[a.length-1]-=1);break;case"merge_node":var{path:s,position:l}=t;K.equals(s,r)||K.endsBefore(s,r)?r[s.length-1]-=1:K.isAncestor(s,r)&&(r[s.length-1]-=1,r[s.length]+=l);break;case"split_node":var{path:u,position:c}=t;if(K.equals(u,r)){if("forward"===o)r[r.length-1]+=1;else if("backward"!==o)return null}else K.endsBefore(u,r)?r[u.length-1]+=1:K.isAncestor(u,r)&&e[u.length]>=c&&(r[u.length-1]+=1,r[u.length]-=c);break;case"move_node":var{path:d,newPath:h}=t;if(K.equals(d,h))return r;if(K.isAncestor(d,r)||K.equals(d,r)){var f=h.slice();return K.endsBefore(d,h)&&d.length<h.length&&(f[d.length-1]-=1),f.concat(r.slice(d.length))}K.isSibling(d,h)&&(K.isAncestor(h,r)||K.equals(h,r))?K.endsBefore(d,r)?r[d.length-1]-=1:r[d.length-1]+=1:K.endsBefore(h,r)||K.equals(h,r)||K.isAncestor(h,r)?(K.endsBefore(d,r)&&(r[d.length-1]-=1),r[h.length-1]+=1):K.endsBefore(d,r)&&(K.equals(h,r)&&(r[h.length-1]+=1),r[d.length-1]-=1)}return r}};function $g(e){return($g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FL(e,t){if("object"!==$g(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!==$g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function LL(e){var t=FL(e,"string");return"symbol"===$g(t)?t:String(t)}function Wi(e,t,n){return(t=LL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rw(Object(n),!0).forEach(function(t){Wi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var iw=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return[...e.slice(0,t),...r,...e.slice(t)]},Wg=function(e,t,n){for(var r=arguments.length,o=new Array(r>3?r-3:0),i=3;i<r;i++)o[i-3]=arguments[i];return[...e.slice(0,t),...o,...e.slice(t+n)]},ow=Wg,J4=(e,t,n)=>{if(0===t.length)throw new Error("Cannot modify the editor");for(var r=Ke.get(e,t),o=t.slice(),i=n(r);o.length>1;){var a=o.pop(),s=Ke.get(e,o);i=Xn(Xn({},s),{},{children:Wg(s.children,a,1,i)})}var l=o.pop();e.children=Wg(e.children,l,1,i)},jd=(e,t,n)=>{0===t.length?e.children=n(e.children):J4(e,t,e=>{if(ot.isText(e))throw new Error("Cannot get the element at path [".concat(t,"] because it refers to a leaf node: ").concat(Pr.stringify(e)));return Xn(Xn({},e),{},{children:n(e.children)})})},sw=(e,t,n)=>J4(e,t,e=>{if(!ot.isText(e))throw new Error("Cannot get the leaf node at path [".concat(t,"] because it refers to a non-leaf node: ").concat(Pr.stringify(e)));return n(e)}),_L={transform(e,t){var n=!1;switch(t.type){case"insert_node":var{path:r,node:o}=t;jd(e,K.parent(r),e=>{var t=r[r.length-1];if(t>e.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(r,"] because the destination is past the end of the node."));return iw(e,t,o)}),n=!0;break;case"insert_text":var{path:i,offset:a,text:s}=t;if(0===s.length)break;sw(e,i,e=>{var t=e.text.slice(0,a),n=e.text.slice(a);return Xn(Xn({},e),{},{text:t+s+n})}),n=!0;break;case"merge_node":var{path:l}=t,u=l[l.length-1],c=K.previous(l),d=c[c.length-1];jd(e,K.parent(l),e=>{var t,n=e[u],r=e[d];if(ot.isText(n)&&ot.isText(r))t=Xn(Xn({},r),{},{text:r.text+n.text});else{if(ot.isText(n)||ot.isText(r))throw new Error('Cannot apply a "merge_node" operation at path ['.concat(l,"] to nodes of different interfaces: ").concat(Pr.stringify(n)," ").concat(Pr.stringify(r)));t=Xn(Xn({},r),{},{children:r.children.concat(n.children)})}return Wg(e,d,2,t)}),n=!0;break;case"move_node":var{path:h,newPath:f}=t,p=h[h.length-1];if(K.isAncestor(h,f))throw new Error("Cannot move a path [".concat(h,"] to new path [").concat(f,"] because the destination is inside itself."));var g=Ke.get(e,h);jd(e,K.parent(h),e=>ow(e,p,1));var m=K.transform(h,t),v=m[m.length-1];jd(e,K.parent(m),e=>iw(e,v,g)),n=!0;break;case"remove_node":var{path:y}=t,b=y[y.length-1];if(jd(e,K.parent(y),e=>ow(e,b,1)),e.selection){var w=Xn({},e.selection);for(var[x,C]of Ee.points(w)){var E=pn.transform(x,t);if(null!=w&&null!=E)w[C]=E;else{var D=void 0,S=void 0;for(var[P,T]of Ke.texts(e)){if(-1!==K.compare(T,y)){S=[P,T];break}D=[P,T]}var A=!1;D&&S&&(A=K.equals(S[1],y)?!K.hasPrevious(S[1]):K.common(D[1],y).length<K.common(S[1],y).length),D&&!A?w[C]={path:D[1],offset:D[0].text.length}:S?w[C]={path:S[1],offset:0}:w=null}}e.selection=w}break;case"remove_text":var{path:M,offset:k,text:B}=t;if(0===B.length)break;sw(e,M,e=>{var t=e.text.slice(0,k),n=e.text.slice(k+B.length);return Xn(Xn({},e),{},{text:t+n})}),n=!0;break;case"set_node":var{path:F,properties:I,newProperties:R}=t;if(0===F.length)throw new Error("Cannot set properties on the root node!");J4(e,F,e=>{var t=Xn({},e);for(var n in R){if("children"===n||"text"===n)throw new Error('Cannot set the "'.concat(n,'" property of nodes!'));var r=R[n];null==r?delete t[n]:t[n]=r}for(var o in I)R.hasOwnProperty(o)||delete t[o];return t});break;case"set_selection":var{newProperties:_}=t;if(null==_){e.selection=null;break}if(null==e.selection){if(!Ee.isRange(_))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(Pr.stringify(_)," when there is no current selection."));e.selection=Xn({},_);break}var O=Xn({},e.selection);for(var L in _){var j=_[L];if(null==j){if("anchor"===L||"focus"===L)throw new Error('Cannot remove the "'.concat(L,'" selection property'));delete O[L]}else O[L]=j}e.selection=O;break;case"split_node":var{path:N,position:G,properties:H}=t,z=N[N.length-1];if(0===N.length)throw new Error('Cannot apply a "split_node" operation at path ['.concat(N,"] because the root node cannot be split."));jd(e,K.parent(N),e=>{var t,n,r=e[z];if(ot.isText(r)){var o=r.text.slice(0,G),i=r.text.slice(G);t=Xn(Xn({},r),{},{text:o}),n=Xn(Xn({},H),{},{text:i})}else{var a=r.children.slice(0,G),s=r.children.slice(G);t=Xn(Xn({},r),{},{children:a}),n=Xn(Xn({},H),{},{children:s})}return Wg(e,z,1,t,n)}),n=!0}if(n&&e.selection){var W=Xn({},e.selection);for(var[V,$]of Ee.points(W))W[$]=pn.transform(V,t);e.selection=W}}},NL={insertNodes(e,t,n){e.insertNodes(t,n)},liftNodes(e,t){e.liftNodes(t)},mergeNodes(e,t){e.mergeNodes(t)},moveNodes(e,t){e.moveNodes(t)},removeNodes(e,t){e.removeNodes(t)},setNodes(e,t,n){e.setNodes(t,n)},splitNodes(e,t){e.splitNodes(t)},unsetNodes(e,t,n){e.unsetNodes(t,n)},unwrapNodes(e,t){e.unwrapNodes(t)},wrapNodes(e,t,n){e.wrapNodes(t,n)}},HL={collapse(e,t){e.collapse(t)},deselect(e){e.deselect()},move(e,t){e.move(t)},select(e,t){e.select(t)},setPoint(e,t,n){e.setPoint(t,n)},setSelection(e,t){e.setSelection(t)}},ui=e=>"object"==typeof e&&null!==e,rS=(e,t)=>{for(var n in e){var r=e[n],o=t[n];if(Array.isArray(r)&&Array.isArray(o)){if(r.length!==o.length)return!1;for(var i=0;i<r.length;i++)if(r[i]!==o[i])return!1}else if(ui(r)&&ui(o)){if(!rS(r,o))return!1}else if(r!==o)return!1}for(var a in t)if(void 0===e[a]&&void 0!==t[a])return!1;return!0};function GL(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&(o[n]=e[n]);return o}function Ku(e,t){if(null==e)return{};var n,r,o=GL(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var jL=["anchor","focus"];function aw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aw(Object(n),!0).forEach(function(t){Wi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ee={edges(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:n=!1}=t,{anchor:r,focus:o}=e;return Ee.isBackward(e)===n?[r,o]:[o,r]},end(e){var[,t]=Ee.edges(e);return t},equals:(e,t)=>pn.equals(e.anchor,t.anchor)&&pn.equals(e.focus,t.focus),surrounds(e,t){var n=Ee.intersection(e,t);return!!n&&Ee.equals(n,t)},includes(e,t){if(Ee.isRange(t)){if(Ee.includes(e,t.anchor)||Ee.includes(e,t.focus))return!0;var[n,r]=Ee.edges(e),[o,i]=Ee.edges(t);return pn.isBefore(n,o)&&pn.isAfter(r,i)}var[a,s]=Ee.edges(e),l=!1,u=!1;return pn.isPoint(t)?(l=pn.compare(t,a)>=0,u=pn.compare(t,s)<=0):(l=K.compare(t,a.path)>=0,u=K.compare(t,s.path)<=0),l&&u},intersection(e,t){var n=Ku(e,jL),[r,o]=Ee.edges(e),[i,a]=Ee.edges(t),s=pn.isBefore(r,i)?i:r,l=pn.isBefore(o,a)?o:a;return pn.isBefore(l,s)?null:$L({anchor:s,focus:l},n)},isBackward(e){var{anchor:t,focus:n}=e;return pn.isAfter(t,n)},isCollapsed(e){var{anchor:t,focus:n}=e;return pn.equals(t,n)},isExpanded:e=>!Ee.isCollapsed(e),isForward:e=>!Ee.isBackward(e),isRange:e=>ui(e)&&pn.isPoint(e.anchor)&&pn.isPoint(e.focus),*points(e){yield[e.anchor,"anchor"],yield[e.focus,"focus"]},start(e){var[t]=Ee.edges(e);return t},transform(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null===e)return null;var r,o,{affinity:i="inward"}=n;if("inward"===i){var a=Ee.isCollapsed(e);Ee.isForward(e)?(r="forward",o=a?r:"backward"):(r="backward",o=a?r:"forward")}else"outward"===i?Ee.isForward(e)?(r="backward",o="forward"):(r="forward",o="backward"):(r=i,o=i);var s=pn.transform(e.anchor,t,{affinity:r}),l=pn.transform(e.focus,t,{affinity:o});return s&&l?{anchor:s,focus:l}:null}},uw=function(e){var{deep:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!!ui(e)&&("function"!=typeof e.apply&&(t?Ke.isNodeList(e.children):Array.isArray(e.children)))},ut={isAncestor(e){var{deep:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ui(e)&&Ke.isNodeList(e.children,{deep:t})},isElement:uw,isElementList(e){var{deep:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Array.isArray(e)&&e.every(e=>ut.isElement(e,{deep:t}))},isElementProps:e=>void 0!==e.children,isElementType:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"type";return uw(e)&&e[n]===t},matches(e,t){for(var n in t)if("children"!==n&&e[n]!==t[n])return!1;return!0}},WL=["children"],zL=["text"],Ke={ancestor(e,t){var n=Ke.get(e,t);if(ot.isText(n))throw new Error("Cannot get the ancestor node at path [".concat(t,"] because it refers to a text node instead: ").concat(Pr.stringify(n)));return n},ancestors(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){for(var r of K.ancestors(t,n)){var o=[Ke.ancestor(e,r),r];yield o}}()},child(e,t){if(ot.isText(e))throw new Error("Cannot get the child of a text node: ".concat(Pr.stringify(e)));var n=e.children[t];if(null==n)throw new Error("Cannot get child at index `".concat(t,"` in node: ").concat(Pr.stringify(e)));return n},children(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){for(var{reverse:r=!1}=n,o=Ke.ancestor(e,t),{children:i}=o,a=r?i.length-1:0;r?a>=0:a<i.length;){var s=Ke.child(o,a),l=t.concat(a);yield[s,l],a=r?a-1:a+1}}()},common(e,t,n){var r=K.common(t,n);return[Ke.get(e,r),r]},descendant(e,t){var n=Ke.get(e,t);if(F.isEditor(n))throw new Error("Cannot get the descendant node at path [".concat(t,"] because it refers to the root editor node instead: ").concat(Pr.stringify(n)));return n},descendants(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){for(var[n,r]of Ke.nodes(e,t))0!==r.length&&(yield[n,r])}()},elements(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){for(var[n,r]of Ke.nodes(e,t))ut.isElement(n)&&(yield[n,r])}()},extractProps:e=>ut.isAncestor(e)?Ku(e,WL):Ku(e,zL),first(e,t){for(var n=t.slice(),r=Ke.get(e,n);r&&!ot.isText(r)&&0!==r.children.length;)r=r.children[0],n.push(0);return[r,n]},fragment(e,t){if(ot.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(Pr.stringify(e)));return ak({children:e.children},e=>{var[n,r]=Ee.edges(t),o=Ke.nodes(e,{reverse:!0,pass:e=>{var[,n]=e;return!Ee.includes(t,n)}});for(var[,i]of o){if(!Ee.includes(t,i)){var a=Ke.parent(e,i),s=i[i.length-1];a.children.splice(s,1)}if(K.equals(i,r.path)){var l=Ke.leaf(e,i);l.text=l.text.slice(0,r.offset)}if(K.equals(i,n.path)){var u=Ke.leaf(e,i);u.text=u.text.slice(n.offset)}}F.isEditor(e)&&(e.selection=null)}).children},get(e,t){var n=Ke.getIf(e,t);if(void 0===n)throw new Error("Cannot find a descendant at path [".concat(t,"] in node: ").concat(Pr.stringify(e)));return n},getIf(e,t){for(var n=e,r=0;r<t.length;r++){var o=t[r];if(ot.isText(n)||!n.children[o])return;n=n.children[o]}return n},has(e,t){for(var n=e,r=0;r<t.length;r++){var o=t[r];if(ot.isText(n)||!n.children[o])return!1;n=n.children[o]}return!0},isNode(e){var{deep:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ot.isText(e)||ut.isElement(e,{deep:t})||F.isEditor(e,{deep:t})},isNodeList(e){var{deep:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Array.isArray(e)&&e.every(e=>Ke.isNode(e,{deep:t}))},last(e,t){for(var n=t.slice(),r=Ke.get(e,n);r&&!ot.isText(r)&&0!==r.children.length;){var o=r.children.length-1;r=r.children[o],n.push(o)}return[r,n]},leaf(e,t){var n=Ke.get(e,t);if(!ot.isText(n))throw new Error("Cannot get the leaf node at path [".concat(t,"] because it refers to a non-leaf node: ").concat(Pr.stringify(n)));return n},levels(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){for(var r of K.levels(t,n)){var o=Ke.get(e,r);yield[o,r]}}()},matches:(e,t)=>ut.isElement(e)&&ut.isElementProps(t)&&ut.matches(e,t)||ot.isText(e)&&ot.isTextProps(t)&&ot.matches(e,t),nodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){for(var{pass:n,reverse:r=!1}=t,{from:o=[],to:i}=t,a=new Set,s=[],l=e;!i||!(r?K.isBefore(s,i):K.isAfter(s,i));)if(a.has(l)||(yield[l,s]),a.has(l)||ot.isText(l)||0===l.children.length||null!=n&&!1!==n([l,s])){if(0===s.length)break;if(!r){var u=K.next(s);if(Ke.has(e,u)){s=u,l=Ke.get(e,s);continue}}if(r&&0!==s[s.length-1])s=K.previous(s),l=Ke.get(e,s);else s=K.parent(s),l=Ke.get(e,s),a.add(l)}else{a.add(l);var c=r?l.children.length-1:0;K.isAncestor(s,o)&&(c=o[s.length]),s=s.concat(c),l=Ke.get(e,s)}}()},parent(e,t){var n=K.parent(t),r=Ke.get(e,n);if(ot.isText(r))throw new Error("Cannot get the parent of path [".concat(t,"] because it does not exist in the root."));return r},string:e=>ot.isText(e)?e.text:e.children.map(Ke.string).join(""),texts(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){for(var[n,r]of Ke.nodes(e,t))ot.isText(n)&&(yield[n,r])}()}};function lw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lw(Object(n),!0).forEach(function(t){Wi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Nu={isNodeOperation:e=>Nu.isOperation(e)&&e.type.endsWith("_node"),isOperation(e){if(!ui(e))return!1;switch(e.type){case"insert_node":case"remove_node":return K.isPath(e.path)&&Ke.isNode(e.node);case"insert_text":case"remove_text":return"number"==typeof e.offset&&"string"==typeof e.text&&K.isPath(e.path);case"merge_node":return"number"==typeof e.position&&K.isPath(e.path)&&ui(e.properties);case"move_node":return K.isPath(e.path)&&K.isPath(e.newPath);case"set_node":return K.isPath(e.path)&&ui(e.properties)&&ui(e.newProperties);case"set_selection":return null===e.properties&&Ee.isRange(e.newProperties)||null===e.newProperties&&Ee.isRange(e.properties)||ui(e.properties)&&ui(e.newProperties);case"split_node":return K.isPath(e.path)&&"number"==typeof e.position&&ui(e.properties);default:return!1}},isOperationList:e=>Array.isArray(e)&&e.every(e=>Nu.isOperation(e)),isSelectionOperation:e=>Nu.isOperation(e)&&e.type.endsWith("_selection"),isTextOperation:e=>Nu.isOperation(e)&&e.type.endsWith("_text"),inverse(e){switch(e.type){case"insert_node":return Qn(Qn({},e),{},{type:"remove_node"});case"insert_text":return Qn(Qn({},e),{},{type:"remove_text"});case"merge_node":return Qn(Qn({},e),{},{type:"split_node",path:K.previous(e.path)});case"move_node":var{newPath:t,path:n}=e;if(K.equals(t,n))return e;if(K.isSibling(n,t))return Qn(Qn({},e),{},{path:t,newPath:n});var r=K.transform(n,e),o=K.transform(K.next(n),e);return Qn(Qn({},e),{},{path:r,newPath:o});case"remove_node":return Qn(Qn({},e),{},{type:"insert_node"});case"remove_text":return Qn(Qn({},e),{},{type:"insert_text"});case"set_node":var{properties:i,newProperties:a}=e;return Qn(Qn({},e),{},{properties:a,newProperties:i});case"set_selection":var{properties:s,newProperties:l}=e;return Qn(Qn({},e),{},null==s?{properties:l,newProperties:null}:null==l?{properties:null,newProperties:s}:{properties:l,newProperties:s});case"split_node":return Qn(Qn({},e),{},{type:"merge_node",path:K.next(e.path)})}}},VL=function(e){var{deep:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!!ui(e)&&("function"==typeof e.addMark&&"function"==typeof e.apply&&"function"==typeof e.deleteFragment&&"function"==typeof e.insertBreak&&"function"==typeof e.insertSoftBreak&&"function"==typeof e.insertFragment&&"function"==typeof e.insertNode&&"function"==typeof e.insertText&&"function"==typeof e.isElementReadOnly&&"function"==typeof e.isInline&&"function"==typeof e.isSelectable&&"function"==typeof e.isVoid&&"function"==typeof e.normalizeNode&&"function"==typeof e.onChange&&"function"==typeof e.removeMark&&"function"==typeof e.getDirtyPaths&&(null===e.marks||ui(e.marks))&&(null===e.selection||Ee.isRange(e.selection))&&(!t||Ke.isNodeList(e.children))&&Nu.isOperationList(e.operations))},F={above:(e,t)=>e.above(t),addMark(e,t,n){e.addMark(t,n)},after:(e,t,n)=>e.after(t,n),before:(e,t,n)=>e.before(t,n),deleteBackward(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{unit:n="character"}=t;e.deleteBackward(n)},deleteForward(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{unit:n="character"}=t;e.deleteForward(n)},deleteFragment(e,t){e.deleteFragment(t)},edges:(e,t)=>e.edges(t),elementReadOnly(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.elementReadOnly(t)},end:(e,t)=>e.end(t),first:(e,t)=>e.first(t),fragment:(e,t)=>e.fragment(t),hasBlocks:(e,t)=>e.hasBlocks(t),hasInlines:(e,t)=>e.hasInlines(t),hasPath:(e,t)=>e.hasPath(t),hasTexts:(e,t)=>e.hasTexts(t),insertBreak(e){e.insertBreak()},insertFragment(e,t,n){e.insertFragment(t,n)},insertNode(e,t){e.insertNode(t)},insertSoftBreak(e){e.insertSoftBreak()},insertText(e,t){e.insertText(t)},isBlock:(e,t)=>e.isBlock(t),isEdge:(e,t,n)=>e.isEdge(t,n),isEditor:e=>VL(e),isElementReadOnly:(e,t)=>e.isElementReadOnly(t),isEmpty:(e,t)=>e.isEmpty(t),isEnd:(e,t,n)=>e.isEnd(t,n),isInline:(e,t)=>e.isInline(t),isNormalizing:e=>e.isNormalizing(),isSelectable:(e,t)=>e.isSelectable(t),isStart:(e,t,n)=>e.isStart(t,n),isVoid:(e,t)=>e.isVoid(t),last:(e,t)=>e.last(t),leaf:(e,t,n)=>e.leaf(t,n),levels:(e,t)=>e.levels(t),marks:e=>e.getMarks(),next:(e,t)=>e.next(t),node:(e,t,n)=>e.node(t,n),nodes:(e,t)=>e.nodes(t),normalize(e,t){e.normalize(t)},parent:(e,t,n)=>e.parent(t,n),path:(e,t,n)=>e.path(t,n),pathRef:(e,t,n)=>e.pathRef(t,n),pathRefs:e=>e.pathRefs(),point:(e,t,n)=>e.point(t,n),pointRef:(e,t,n)=>e.pointRef(t,n),pointRefs:e=>e.pointRefs(),positions:(e,t)=>e.positions(t),previous:(e,t)=>e.previous(t),range:(e,t,n)=>e.range(t,n),rangeRef:(e,t,n)=>e.rangeRef(t,n),rangeRefs:e=>e.rangeRefs(),removeMark(e,t){e.removeMark(t)},setNormalizing(e,t){e.setNormalizing(t)},start:(e,t)=>e.start(t),string:(e,t,n)=>e.string(t,n),unhangRange:(e,t,n)=>e.unhangRange(t,n),void:(e,t)=>e.void(t),withoutNormalizing(e,t){e.withoutNormalizing(t)},shouldMergeNodesRemovePrevNode:(e,t,n)=>e.shouldMergeNodesRemovePrevNode(t,n)},UL={isSpan:e=>Array.isArray(e)&&2===e.length&&e.every(K.isPath)};function cw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function fw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cw(Object(n),!0).forEach(function(t){Wi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var pn={compare(e,t){var n=K.compare(e.path,t.path);return 0===n?e.offset<t.offset?-1:e.offset>t.offset?1:0:n},isAfter:(e,t)=>1===pn.compare(e,t),isBefore:(e,t)=>-1===pn.compare(e,t),equals:(e,t)=>e.offset===t.offset&&K.equals(e.path,t.path),isPoint:e=>ui(e)&&"number"==typeof e.offset&&K.isPath(e.path),transform(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null===e)return null;var{affinity:r="forward"}=n,{path:o,offset:i}=e;switch(t.type){case"insert_node":case"move_node":o=K.transform(o,t,n);break;case"insert_text":K.equals(t.path,o)&&(t.offset<i||t.offset===i&&"forward"===r)&&(i+=t.text.length);break;case"merge_node":K.equals(t.path,o)&&(i+=t.position),o=K.transform(o,t,n);break;case"remove_text":K.equals(t.path,o)&&t.offset<=i&&(i-=Math.min(i-t.offset,t.text.length));break;case"remove_node":if(K.equals(t.path,o)||K.isAncestor(t.path,o))return null;o=K.transform(o,t,n);break;case"split_node":if(K.equals(t.path,o)){if(t.position===i&&null==r)return null;(t.position<i||t.position===i&&"forward"===r)&&(i-=t.position,o=K.transform(o,t,fw(fw({},n),{},{affinity:"forward"})))}else o=K.transform(o,t,n);break;default:return e}return{path:o,offset:i}}},hw=void 0,Pr={setScrubber(e){hw=e},stringify:e=>JSON.stringify(e,hw)},XL=["text"],KL=["anchor","focus","merge"];function dw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Fu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dw(Object(n),!0).forEach(function(t){Wi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ht,ot={equals(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{loose:r=!1}=n;function o(e){return Ku(e,XL)}return rS(r?o(e):e,r?o(t):t)},isText:e=>ui(e)&&"string"==typeof e.text,isTextList:e=>Array.isArray(e)&&e.every(e=>ot.isText(e)),isTextProps:e=>void 0!==e.text,matches(e,t){for(var n in t)if("text"!==n&&(!e.hasOwnProperty(n)||e[n]!==t[n]))return!1;return!0},decorations(e,t){var n=[{leaf:Fu({},e)}];for(var r of t){var{anchor:o,focus:i,merge:a}=r,s=Ku(r,KL),[l,u]=Ee.edges(r),c=[],d=0,h=l.offset,f=u.offset,p=a??Object.assign;for(var{leaf:g}of n){var{length:m}=g.text,v=d;if(d+=m,h<=v&&d<=f)p(g,s),c.push({leaf:g});else if(h!==f&&(h===d||f===v)||h>d||f<v||f===v&&0!==v)c.push({leaf:g});else{var y=g,b=void 0,w=void 0;if(f<d){var x=f-v;w={leaf:Fu(Fu({},y),{},{text:y.text.slice(x)})},y=Fu(Fu({},y),{},{text:y.text.slice(0,x)})}if(h>v){var C=h-v;b={leaf:Fu(Fu({},y),{},{text:y.text.slice(0,C)})},y=Fu(Fu({},y),{},{text:y.text.slice(C)})}p(y,s),b&&c.push(b),c.push({leaf:y}),w&&c.push(w)}}n=c}if(n.length>1){var E=0;for(var[D,S]of n.entries()){var P=E,T=P+S.leaf.text.length,A={start:P,end:T};0===D&&(A.isFirst=!0),D===n.length-1&&(A.isLast=!0),S.position=A,E=T}}return n}},e8=e=>e.selection?e.selection:e.children.length>0?F.end(e,[]):[0],O0=(e,t)=>{var[n]=F.node(e,t);return e=>e===n},t8=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!t,r=t?e_(e):e,o=Ht.None,i=Ht.None,a=0,s=null;for(var l of r){var u=l.codePointAt(0);if(!u)break;var c=h_(l,u);if([o,i]=n?[i,c]:[c,o],qd(o,Ht.ZWJ)&&qd(i,Ht.ExtPict)&&!gw(n?e.substring(0,a):e.substring(0,e.length-a))||qd(o,Ht.RI)&&qd(i,Ht.RI)&&!(s=null!==s?!s:!!n||v_(e.substring(0,e.length-a)))||o!==Ht.None&&i!==Ht.None&&g_(o,i))break;a+=l.length}return a||1},YL=/\s/,qL=/[\u002B\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,ZL=/['\u2018\u2019]/,QL=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0,r=!1;e.length>0;){var o=t8(e,t),[i,a]=n8(e,o,t);if(JL(i,a,t))r=!0,n+=o;else{if(r)break;n+=o}e=a}return n},n8=(e,t,n)=>{if(n){var r=e.length-t;return[e.slice(r,e.length),e.slice(0,r)]}return[e.slice(0,t),e.slice(t)]},JL=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(YL.test(t))return!1;if(ZL.test(t)){var o=t8(n,r),[i,a]=n8(n,o,r);if(e(i,a,r))return!0}return!qL.test(t)},e_=function*(e){for(var t=e.length-1,n=0;n<e.length;n++){var r=e.charAt(t-n);if(n_(r.charCodeAt(0))){var o=e.charAt(t-n-1);if(t_(o.charCodeAt(0))){yield o+r,n++;continue}}yield r}},t_=e=>e>=55296&&e<=56319,n_=e=>e>=56320&&e<=57343;!function(e){e[e.None=0]="None",e[e.Extend=1]="Extend",e[e.ZWJ=2]="ZWJ",e[e.RI=4]="RI",e[e.Prepend=8]="Prepend",e[e.SpacingMark=16]="SpacingMark",e[e.L=32]="L",e[e.V=64]="V",e[e.T=128]="T",e[e.LV=256]="LV",e[e.LVT=512]="LVT",e[e.ExtPict=1024]="ExtPict",e[e.Any=2048]="Any"}(Ht||(Ht={}));var r_=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,i_=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,o_=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,s_=/^[\u1100-\u115F\uA960-\uA97C]$/,a_=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,u_=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,l_=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,c_=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,f_=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,h_=(e,t)=>{var n=Ht.Any;return-1!==e.search(r_)&&(n|=Ht.Extend),8205===t&&(n|=Ht.ZWJ),t>=127462&&t<=127487&&(n|=Ht.RI),-1!==e.search(i_)&&(n|=Ht.Prepend),-1!==e.search(o_)&&(n|=Ht.SpacingMark),-1!==e.search(s_)&&(n|=Ht.L),-1!==e.search(a_)&&(n|=Ht.V),-1!==e.search(u_)&&(n|=Ht.T),-1!==e.search(l_)&&(n|=Ht.LV),-1!==e.search(c_)&&(n|=Ht.LVT),-1!==e.search(f_)&&(n|=Ht.ExtPict),n};function qd(e,t){return 0!==(e&t)}var d_=[[Ht.L,Ht.L|Ht.V|Ht.LV|Ht.LVT],[Ht.LV|Ht.V,Ht.V|Ht.T],[Ht.LVT|Ht.T,Ht.T],[Ht.Any,Ht.Extend|Ht.ZWJ],[Ht.Any,Ht.SpacingMark],[Ht.Prepend,Ht.Any],[Ht.ZWJ,Ht.ExtPict],[Ht.RI,Ht.RI]];function g_(e,t){return-1===d_.findIndex(n=>qd(e,n[0])&&qd(t,n[1]))}var p_=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,gw=e=>-1!==e.search(p_),m_=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,v_=e=>{var t=e.match(m_);return null!==t&&t[0].length/2%2==1},y_={delete(e,t){e.delete(t)},insertFragment(e,t,n){e.insertFragment(t,n)},insertText(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};F.withoutNormalizing(e,()=>{var{voids:r=!1}=n,{at:o=e8(e)}=n;if(K.isPath(o)&&(o=F.range(e,o)),Ee.isRange(o))if(Ee.isCollapsed(o))o=o.anchor;else{var i=Ee.end(o);if(!r&&F.void(e,{at:i}))return;var a=Ee.start(o),s=F.pointRef(e,a),l=F.pointRef(e,i);Re.delete(e,{at:o,voids:r});var u=s.unref(),c=l.unref();o=u||c,Re.setSelection(e,{anchor:o,focus:o})}if(!(!r&&F.void(e,{at:o})||F.elementReadOnly(e,{at:o}))){var{path:d,offset:h}=o;t.length>0&&e.apply({type:"insert_text",path:d,offset:h,text:t})}})}};function pw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function cm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pw(Object(n),!0).forEach(function(t){Wi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Re=cm(cm(cm(cm({},_L),NL),HL),y_),Hm=new WeakMap,w_=e=>Hm.get(e)||!1,C_=(e,t,n)=>{var r=Hm.get(e)||!1;Hm.set(e,!0);try{t(),n()}finally{Hm.set(e,r)}};function iS(e,t,n){var r,o,i=f3.get(e)||[],a=h3.get(e)||new Set,s=e=>{if(e){var t=e.join(",");o.has(t)||(o.add(t),r.push(e))}};if(n)for(var l of(r=[],o=new Set,i)){s(n(l))}else r=i,o=a;for(var u of t)s(u);f3.set(e,r),h3.set(e,o)}var x_=(e,t)=>{for(var n of F.pathRefs(e))kL.transform(n,t);for(var r of F.pointRefs(e))OL.transform(r,t);for(var o of F.rangeRefs(e))IL.transform(o,t);if(!w_(e)){var i=K.operationCanTransformPath(t)?e=>K.transform(e,t):void 0;iS(e,e.getDirtyPaths(t),i)}Re.transform(e,t),e.operations.push(t),F.normalize(e,{operation:t}),"set_selection"===t.type&&(e.marks=null),Tg.get(e)||(Tg.set(e,!0),Promise.resolve().then(()=>{Tg.set(e,!1),e.onChange({operation:t}),e.operations=[]}))},E_=(e,t)=>{switch(t.type){case"insert_text":case"remove_text":case"set_node":var{path:n}=t;return K.levels(n);case"insert_node":var{node:r,path:o}=t;return[...K.levels(o),...ot.isText(r)?[]:Array.from(Ke.nodes(r),e=>{var[,t]=e;return o.concat(t)})];case"merge_node":var{path:i}=t;return[...K.ancestors(i),K.previous(i)];case"move_node":var{path:a,newPath:s}=t;if(K.equals(a,s))return[];var l=[],u=[];for(var c of K.ancestors(a)){var d=K.transform(c,t);l.push(d)}for(var h of K.ancestors(s)){var f=K.transform(h,t);u.push(f)}var p=u[u.length-1],g=s[s.length-1],m=p.concat(g);return[...l,...u,m];case"remove_node":var{path:v}=t;return[...K.ancestors(v)];case"split_node":var{path:y}=t;return[...K.levels(y),K.next(y)];default:return[]}},P_=e=>{var{selection:t}=e;return t?Ke.fragment(e,t):[]},S_=(e,t,n)=>{var[r,o]=t;if(!ot.isText(r)){if(ut.isElement(r)&&0===r.children.length){return void Re.insertNodes(e,{text:""},{at:o.concat(0),voids:!0})}for(var i=!F.isEditor(r)&&(ut.isElement(r)&&(e.isInline(r)||0===r.children.length||ot.isText(r.children[0])||e.isInline(r.children[0]))),a=0,s=0;s<r.children.length;s++,a++){var l=Ke.get(e,o);if(!ot.isText(l)){var u=l.children[a],c=l.children[a-1],d=s===r.children.length-1,h=ot.isText(u)||ut.isElement(u)&&e.isInline(u);if(h!==i)h?null!=n&&n.fallbackElement?Re.wrapNodes(e,n.fallbackElement(),{at:o.concat(a),voids:!0}):Re.removeNodes(e,{at:o.concat(a),voids:!0}):Re.unwrapNodes(e,{at:o.concat(a),voids:!0}),a--;else if(ut.isElement(u)){if(e.isInline(u))if(null!=c&&ot.isText(c)){if(d){Re.insertNodes(e,{text:""},{at:o.concat(a+1),voids:!0}),a++}}else{Re.insertNodes(e,{text:""},{at:o.concat(a),voids:!0}),a++}}else{if(!ot.isText(u)&&!("children"in u))u.children=[];null!=c&&ot.isText(c)&&(ot.equals(u,c,{loose:!0})?(Re.mergeNodes(e,{at:o.concat(a),voids:!0}),a--):""===c.text?(Re.removeNodes(e,{at:o.concat(a-1),voids:!0}),a--):""===u.text&&(Re.removeNodes(e,{at:o.concat(a),voids:!0}),a--))}}}}},T_=(e,t)=>{var{iteration:n,initialDirtyPathsLength:r}=t,o=42*r;if(n>o)throw new Error("Could not completely normalize the editor after ".concat(o," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},D_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{voids:n=!1,mode:r="lowest",at:o=e.selection,match:i}=t;if(o){var a=F.path(e,o);if(!Ee.isRange(o)||K.equals(o.focus.path,o.anchor.path)){if(0===a.length)return;a=K.parent(a)}var s="lowest"===r,[l]=F.levels(e,{at:a,voids:n,match:i,reverse:s});return l}};function mw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function vw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mw(Object(n),!0).forEach(function(t){Wi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var A_=(e,t,n)=>{var{selection:r}=e;if(r){var o=(t,n)=>{if(!ot.isText(t))return!1;var[r,o]=F.parent(e,n);return!e.isVoid(r)||e.markableVoid(r)},i=Ee.isExpanded(r),a=!1;if(!i){var[s,l]=F.node(e,r);if(s&&o(s,l)){var[u]=F.parent(e,l);a=u&&e.markableVoid(u)}}if(i||a)Re.setNodes(e,{[t]:n},{match:o,split:!0,voids:!0});else{var c=vw(vw({},F.marks(e)||{}),{},{[t]:n});e.marks=c,Tg.get(e)||e.onChange()}}};function yw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ww(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yw(Object(n),!0).forEach(function(t){Wi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var B_=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o={anchor:F.point(e,t,{edge:"end"}),focus:F.end(e,[])},{distance:i=1}=r,a=0;for(var s of F.positions(e,ww(ww({},r),{},{at:o}))){if(a>i)break;0!==a&&(n=s),a++}return n};function Cw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function xw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cw(Object(n),!0).forEach(function(t){Wi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var R_=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o={anchor:F.start(e,[]),focus:F.point(e,t,{edge:"start"})},{distance:i=1}=r,a=0;for(var s of F.positions(e,xw(xw({},r),{},{at:o,reverse:!0}))){if(a>i)break;0!==a&&(n=s),a++}return n},M_=(e,t)=>{var{selection:n}=e;n&&Ee.isCollapsed(n)&&Re.delete(e,{unit:t,reverse:!0})},b_=(e,t)=>{var{selection:n}=e;n&&Ee.isCollapsed(n)&&Re.delete(e,{unit:t})},k_=function(e){var{direction:t="forward"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{selection:n}=e;n&&Ee.isExpanded(n)&&Re.delete(e,{reverse:"backward"===t})},O_=(e,t)=>[F.start(e,t),F.end(e,t)];function Ew(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Pw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ew(Object(n),!0).forEach(function(t){Wi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ew(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var I_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return F.above(e,Pw(Pw({},t),{},{match:t=>ut.isElement(t)&&F.isElementReadOnly(e,t)}))},F_=(e,t)=>F.point(e,t,{edge:"end"}),L_=(e,t)=>{var n=F.path(e,t,{edge:"start"});return F.node(e,n)},__=(e,t)=>{var n=F.range(e,t);return Ke.fragment(e,n)};function Sw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Tw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sw(Object(n),!0).forEach(function(t){Wi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var N_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return F.above(e,Tw(Tw({},t),{},{match:t=>ut.isElement(t)&&F.isVoid(e,t)}))},H_=(e,t)=>t.children.some(t=>ut.isElement(t)&&F.isBlock(e,t)),G_=(e,t)=>t.children.some(t=>ot.isText(t)||F.isInline(e,t)),j_=(e,t)=>Ke.has(e,t),$_=(e,t)=>t.children.every(e=>ot.isText(e)),W_=e=>{Re.splitNodes(e,{always:!0})},z_=(e,t,n)=>{Re.insertNodes(e,t,n)},V_=e=>{Re.splitNodes(e,{always:!0})};function Dw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function U_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dw(Object(n),!0).forEach(function(t){Wi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var X_=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{selection:r,marks:o}=e;if(r){if(o){var i=U_({text:t},o);Re.insertNodes(e,i,{at:n.at,voids:n.voids})}else Re.insertText(e,t,n);e.marks=null}},K_=(e,t)=>!e.isInline(t),Y_=(e,t,n)=>F.isStart(e,t,n)||F.isEnd(e,t,n),q_=(e,t)=>{var{children:n}=t,[r]=n;return 0===n.length||1===n.length&&ot.isText(r)&&""===r.text&&!e.isVoid(t)},Z_=(e,t,n)=>{var r=F.end(e,n);return pn.equals(t,r)},Q_=e=>{var t=nS.get(e);return void 0===t||t},J_=(e,t,n)=>{if(0!==t.offset)return!1;var r=F.start(e,n);return pn.equals(t,r)},eN=(e,t)=>{var n=F.path(e,t,{edge:"end"});return F.node(e,n)},tN=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=F.path(e,t,n);return[Ke.leaf(e,r),r]};function nN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){var{at:n=e.selection,reverse:r=!1,voids:o=!1}=t,{match:i}=t;if(null==i&&(i=()=>!0),n){var a=[],s=F.path(e,n);for(var[l,u]of Ke.levels(e,s))if(i(l,u)&&(a.push([l,u]),!o&&ut.isElement(l)&&F.isVoid(e,l)))break;r&&a.reverse(),yield*a}}()}var rN=["text"],iN=["text"],oN=function(e){var{marks:t,selection:n}=e;if(!n)return null;var{anchor:r,focus:o}=n;if(t)return t;if(Ee.isExpanded(n)){if(Ee.isBackward(n)&&([o,r]=[r,o]),F.isEnd(e,r,r.path)){var i=F.after(e,r);i&&(r=i)}var[a]=F.nodes(e,{match:ot.isText,at:{anchor:r,focus:o}});if(a){var[s]=a;return Ku(s,rN)}return{}}var{path:l}=r,[u]=F.leaf(e,l);if(0===r.offset){var c=F.previous(e,{at:l,match:ot.isText});if(!F.above(e,{match:t=>ut.isElement(t)&&F.isVoid(e,t)&&e.markableVoid(t)})){var d=F.above(e,{match:t=>ut.isElement(t)&&F.isBlock(e,t)});if(c&&d){var[h,f]=c,[,p]=d;K.isAncestor(p,f)&&(u=h)}}}return Ku(u,iN)},sN=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{mode:n="lowest",voids:r=!1}=t,{match:o,at:i=e.selection}=t;if(i){var a=F.after(e,i,{voids:r});if(a){var[,s]=F.last(e,[]),l=[a.path,s];if(K.isPath(i)&&0===i.length)throw new Error("Cannot get the next node from the root node!");if(null==o)if(K.isPath(i)){var[u]=F.parent(e,i);o=e=>u.children.includes(e)}else o=()=>!0;var[c]=F.nodes(e,{at:l,match:o,mode:n,voids:r});return c}}},aN=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=F.path(e,t,n);return[Ke.get(e,r),r]};function uN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){var{at:n=e.selection,mode:r="all",universal:o=!1,reverse:i=!1,voids:a=!1,pass:s,ignoreNonSelectable:l=!1}=t,{match:u}=t;if(u||(u=()=>!0),n){var c,d;if(UL.isSpan(n))c=n[0],d=n[1];else{var h=F.path(e,n,{edge:"start"}),f=F.path(e,n,{edge:"end"});c=i?f:h,d=i?h:f}var p,g=Ke.nodes(e,{reverse:i,from:c,to:d,pass:t=>{var[n,r]=t;return!(!s||!s([n,r]))||!!ut.isElement(n)&&!!(!a&&(F.isVoid(e,n)||F.isElementReadOnly(e,n))||l&&!F.isSelectable(e,n))}}),m=[];for(var[v,y]of g)if(!l||!ut.isElement(v)||F.isSelectable(e,v)){var b=p&&0===K.compare(y,p[1]);if("highest"!==r||!b){if(!u(v,y)){if(o&&!b&&ot.isText(v))return;continue}if("lowest"===r&&b){p=[v,y];continue}var w="lowest"===r?p:[v,y];w&&(o?m.push(w):yield w),p=[v,y]}}"lowest"===r&&p&&(o?m.push(p):yield p),o&&(yield*m)}}()}var lN=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{force:n=!1,operation:r}=t,o=e=>f3.get(e)||[],i=e=>{var t=o(e).pop(),n=t.join(",");return(e=>h3.get(e)||new Set)(e).delete(n),t};if(F.isNormalizing(e)){if(n){var a=Array.from(Ke.nodes(e),e=>{var[,t]=e;return t}),s=new Set(a.map(e=>e.join(",")));f3.set(e,a),h3.set(e,s)}0!==o(e).length&&F.withoutNormalizing(e,()=>{for(var t of o(e))if(Ke.has(e,t)){var n=F.node(e,t),[a,s]=n;ut.isElement(a)&&0===a.children.length&&e.normalizeNode(n,{operation:r})}for(var l=o(e),u=l.length,c=0;0!==l.length;){if(!e.shouldNormalize({dirtyPaths:l,iteration:c,initialDirtyPathsLength:u,operation:r}))return;var d=i(e);if(Ke.has(e,d)){var h=F.node(e,d);e.normalizeNode(h,{operation:r})}c++,l=o(e)}})}},cN=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=F.path(e,t,n),o=K.parent(r);return F.node(e,o)},fN=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:r="forward"}=n,o={current:t,affinity:r,unref(){var{current:t}=o;return F.pathRefs(e).delete(o),o.current=null,t}};return F.pathRefs(e).add(o),o},hN=e=>{var t=ew.get(e);return t||(t=new Set,ew.set(e,t)),t},dN=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{depth:r,edge:o}=n;if(K.isPath(t))if("start"===o){var[,i]=Ke.first(e,t);t=i}else if("end"===o){var[,a]=Ke.last(e,t);t=a}return Ee.isRange(t)&&(t="start"===o?Ee.start(t):"end"===o?Ee.end(t):K.common(t.anchor.path,t.focus.path)),pn.isPoint(t)&&(t=t.path),null!=r&&(t=t.slice(0,r)),t},gN=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:r="forward"}=n,o={current:t,affinity:r,unref(){var{current:t}=o;return F.pointRefs(e).delete(o),o.current=null,t}};return F.pointRefs(e).add(o),o},pN=e=>{var t=tw.get(e);return t||(t=new Set,tw.set(e,t)),t},mN=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{edge:r="start"}=n;if(K.isPath(t)){var o;if("end"===r){var[,i]=Ke.last(e,t);o=i}else{var[,a]=Ke.first(e,t);o=a}var s=Ke.get(e,o);if(!ot.isText(s))throw new Error("Cannot get the ".concat(r," point in the node at path [").concat(t,"] because it has no ").concat(r," text node."));return{path:o,offset:"end"===r?s.text.length:0}}if(Ee.isRange(t)){var[l,u]=Ee.edges(t);return"start"===r?l:u}return t};function vN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){var{at:n=e.selection,unit:r="offset",reverse:o=!1,voids:i=!1,ignoreNonSelectable:a=!1}=t;if(n){var s=F.range(e,n),[l,u]=Ee.edges(s),c=o?u:l,d=!1,h="",f=0,p=0,g=0;for(var[m,v]of F.nodes(e,{at:n,reverse:o,voids:i,ignoreNonSelectable:a})){if(ut.isElement(m)){if(!i&&(e.isVoid(m)||e.isElementReadOnly(m))){yield F.start(e,v);continue}if(e.isInline(m))continue;if(F.hasInlines(e,m)){var y=K.isAncestor(v,u.path)?u:F.end(e,v),b=K.isAncestor(v,l.path)?l:F.start(e,v);h=F.string(e,{anchor:b,focus:y},{voids:i}),d=!0}}if(ot.isText(m)){var w=K.equals(v,c.path);for(w?(p=o?c.offset:m.text.length-c.offset,g=c.offset):(p=m.text.length,g=o?p:0),(w||d||"offset"===r)&&(yield{path:v,offset:g},d=!1);;){if(0===f){if(""===h)break;f=x(h,r,o),h=n8(h,f,o)[1]}if(g=o?g-f:g+f,(p-=f)<0){f=-p;break}f=0,yield{path:v,offset:g}}}}}function x(e,t,n){return"character"===t?t8(e,n):"word"===t?QL(e,n):"line"===t||"block"===t?e.length:1}}()}var yN=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{mode:n="lowest",voids:r=!1}=t,{match:o,at:i=e.selection}=t;if(i){var a=F.before(e,i,{voids:r});if(a){var[,s]=F.first(e,[]),l=[a.path,s];if(K.isPath(i)&&0===i.length)throw new Error("Cannot get the previous node from the root node!");if(null==o)if(K.isPath(i)){var[u]=F.parent(e,i);o=e=>u.children.includes(e)}else o=()=>!0;var[c]=F.nodes(e,{reverse:!0,at:l,match:o,mode:n,voids:r});return c}}},wN=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:r="forward"}=n,o={current:t,affinity:r,unref(){var{current:t}=o;return F.rangeRefs(e).delete(o),o.current=null,t}};return F.rangeRefs(e).add(o),o},CN=e=>{var t=nw.get(e);return t||(t=new Set,nw.set(e,t)),t},xN=(e,t,n)=>Ee.isRange(t)&&!n?t:{anchor:F.start(e,t),focus:F.end(e,n||t)};function Aw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function EN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Aw(Object(n),!0).forEach(function(t){Wi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Aw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var PN=(e,t)=>{var{selection:n}=e;if(n){var r=(t,n)=>{if(!ot.isText(t))return!1;var[r,o]=F.parent(e,n);return!e.isVoid(r)||e.markableVoid(r)},o=Ee.isExpanded(n),i=!1;if(!o){var[a,s]=F.node(e,n);if(a&&r(a,s)){var[l]=F.parent(e,s);i=l&&e.markableVoid(l)}}if(o||i)Re.unsetNodes(e,t,{match:r,split:!0,voids:!0});else{var u=EN({},F.marks(e)||{});delete u[t],e.marks=u,Tg.get(e)||e.onChange()}}},SN=(e,t)=>{nS.set(e,t)},TN=(e,t)=>F.point(e,t,{edge:"start"}),DN=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{voids:r=!1}=n,o=F.range(e,t),[i,a]=Ee.edges(o),s="";for(var[l,u]of F.nodes(e,{at:o,match:ot.isText,voids:r})){var c=l.text;K.equals(u,a.path)&&(c=c.slice(0,a.offset)),K.equals(u,i.path)&&(c=c.slice(i.offset)),s+=c}return s},AN=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{voids:r=!1}=n,[o,i]=Ee.edges(t);if(0!==o.offset||0!==i.offset||Ee.isCollapsed(t)||K.hasPrevious(i.path))return t;var a=F.above(e,{at:i,match:t=>ut.isElement(t)&&F.isBlock(e,t),voids:r}),s=a?a[1]:[],l={anchor:F.start(e,o),focus:i},u=!0;for(var[c,d]of F.nodes(e,{at:l,match:ot.isText,reverse:!0,voids:r}))if(u)u=!1;else if(""!==c.text||K.isBefore(d,s)){i={path:d,offset:c.text.length};break}return{anchor:o,focus:i}},BN=(e,t)=>{var n=F.isNormalizing(e);F.setNormalizing(e,!1);try{t()}finally{F.setNormalizing(e,n)}F.normalize(e)},RN=(e,t,n)=>{var[r,o]=t;return ut.isElement(r)&&F.isEmpty(e,r)||ot.isText(r)&&""===r.text&&0!==o[o.length-1]},MN=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};F.withoutNormalizing(e,()=>{var n,r,{reverse:o=!1,unit:i="character",distance:a=1,voids:s=!1}=t,{at:l=e.selection,hanging:u=!1}=t;if(l){var c=!1;if(Ee.isRange(l)&&Ee.isCollapsed(l)&&(c=!0,l=l.anchor),pn.isPoint(l)){var d=F.void(e,{at:l,mode:"highest"});if(!s&&d){var[,h]=d;l=h}else{var f={unit:i,distance:a};l={anchor:l,focus:o?F.before(e,l,f)||F.start(e,[]):F.after(e,l,f)||F.end(e,[])},u=!0}}if(K.isPath(l))return void Re.removeNodes(e,{at:l,voids:s});if(!Ee.isCollapsed(l)){if(!u){var[,p]=Ee.edges(l),g=F.end(e,[]);pn.equals(p,g)||(l=F.unhangRange(e,l,{voids:s}))}var[m,v]=Ee.edges(l),y=F.above(e,{match:t=>ut.isElement(t)&&F.isBlock(e,t),at:m,voids:s}),b=F.above(e,{match:t=>ut.isElement(t)&&F.isBlock(e,t),at:v,voids:s}),w=y&&b&&!K.equals(y[1],b[1]),x=K.equals(m.path,v.path),C=s?null:null!==(n=F.void(e,{at:m,mode:"highest"}))&&void 0!==n?n:F.elementReadOnly(e,{at:m,mode:"highest"}),E=s?null:null!==(r=F.void(e,{at:v,mode:"highest"}))&&void 0!==r?r:F.elementReadOnly(e,{at:v,mode:"highest"});if(C){var D=F.before(e,m);D&&y&&K.isAncestor(y[1],D.path)&&(m=D)}if(E){var S=F.after(e,v);S&&b&&K.isAncestor(b[1],S.path)&&(v=S)}var P,T=[];for(var A of F.nodes(e,{at:l,voids:s})){var[M,k]=A;P&&0===K.compare(k,P)||(!s&&ut.isElement(M)&&(F.isVoid(e,M)||F.isElementReadOnly(e,M))||!K.isCommon(k,m.path)&&!K.isCommon(k,v.path))&&(T.push(A),P=k)}var B=Array.from(T,t=>{var[,n]=t;return F.pathRef(e,n)}),I=F.pointRef(e,m),R=F.pointRef(e,v),_="";if(!x&&!C){var O=I.current,[L]=F.leaf(e,O),{path:j}=O,{offset:N}=m,G=L.text.slice(N);G.length>0&&(e.apply({type:"remove_text",path:j,offset:N,text:G}),_=G)}if(B.reverse().map(e=>e.unref()).filter(e=>null!==e).forEach(t=>Re.removeNodes(e,{at:t,voids:s})),!E){var H=R.current,[z]=F.leaf(e,H),{path:W}=H,V=x?m.offset:0,$=z.text.slice(V,v.offset);$.length>0&&(e.apply({type:"remove_text",path:W,offset:V,text:$}),_=$)}!x&&w&&R.current&&I.current&&Re.mergeNodes(e,{at:R.current,hanging:!0,voids:s}),c&&o&&"character"===i&&_.length>1&&_.match(/[\u0980-\u09FF\u0E00-\u0E7F]+/)&&Re.insertText(e,_.slice(0,_.length-a));var X=I.unref(),U=R.unref(),q=o?X||U:U||X;null==t.at&&q&&Re.select(e,q)}}})},bN=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};F.withoutNormalizing(e,()=>{var{hanging:r=!1,voids:o=!1}=n,{at:i=e8(e),batchDirty:a=!0}=n;if(t.length){if(Ee.isRange(i))if(r||(i=F.unhangRange(e,i,{voids:o})),Ee.isCollapsed(i))i=i.anchor;else{var[,s]=Ee.edges(i);if(!o&&F.void(e,{at:s}))return;var l=F.pointRef(e,s);Re.delete(e,{at:i}),i=l.unref()}else K.isPath(i)&&(i=F.start(e,i));if(o||!F.void(e,{at:i})){var u=F.above(e,{at:i,match:t=>ut.isElement(t)&&F.isInline(e,t),mode:"highest",voids:o});if(u){var[,c]=u;if(F.isEnd(e,i,c))i=F.after(e,c);else if(F.isStart(e,i,c)){i=F.before(e,c)}}var d=F.above(e,{match:t=>ut.isElement(t)&&F.isBlock(e,t),at:i,voids:o}),[,h]=d,f=F.isStart(e,i,h),p=F.isEnd(e,i,h),g=f&&p,[,m]=Ke.first({children:t},[]),[,v]=Ke.last({children:t},[]),y=t=>{var[n,r]=t;return!(0===r.length)&&(!!g||!(!f&&K.isAncestor(r,m)&&ut.isElement(n)&&!e.isVoid(n)&&!e.isInline(n)||!p&&K.isAncestor(r,v)&&ut.isElement(n)&&!e.isVoid(n)&&!e.isInline(n)))},b=!0,w=[],x=[],C=[];for(var E of Ke.nodes({children:t},{pass:y})){var[D,S]=E;b&&ut.isElement(D)&&!e.isInline(D)&&!K.isAncestor(S,m)&&(b=!1),y(E)&&(ut.isElement(D)&&!e.isInline(D)?(b=!1,x.push(D)):b?w.push(D):C.push(D))}var[P]=F.nodes(e,{at:i,match:t=>ot.isText(t)||F.isInline(e,t),mode:"highest",voids:o}),[,T]=P,A=F.isStart(e,i,T),M=F.isEnd(e,i,T),k=F.pathRef(e,p&&!C.length?K.next(h):h),B=F.pathRef(e,M?K.next(T):T),I=C.length>0;Re.splitNodes(e,{at:i,match:t=>I?ut.isElement(t)&&F.isBlock(e,t):ot.isText(t)||F.isInline(e,t),mode:I?"lowest":"highest",always:I&&(!f||w.length>0)&&(!p||C.length>0),voids:o});var R,_=F.pathRef(e,!A||A&&M?K.next(T):T);if(Re.insertNodes(e,w,{at:_.current,match:t=>ot.isText(t)||F.isInline(e,t),mode:"highest",voids:o,batchDirty:a}),g&&!w.length&&x.length&&!C.length&&Re.delete(e,{at:h,voids:o}),Re.insertNodes(e,x,{at:k.current,match:t=>ut.isElement(t)&&F.isBlock(e,t),mode:"lowest",voids:o,batchDirty:a}),Re.insertNodes(e,C,{at:B.current,match:t=>ot.isText(t)||F.isInline(e,t),mode:"highest",voids:o,batchDirty:a}),!n.at)if(C.length>0&&B.current?R=K.previous(B.current):x.length>0&&k.current?R=K.previous(k.current):_.current&&(R=K.previous(_.current)),R){var O=F.end(e,R);Re.select(e,O)}_.unref(),k.unref(),B.unref()}}})},kN=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{edge:n="anchor"}=t,{selection:r}=e;if(r)if("anchor"===n)Re.select(e,r.anchor);else if("focus"===n)Re.select(e,r.focus);else if("start"===n){var[o]=Ee.edges(r);Re.select(e,o)}else if("end"===n){var[,i]=Ee.edges(r);Re.select(e,i)}},ON=e=>{var{selection:t}=e;t&&e.apply({type:"set_selection",properties:t,newProperties:null})},IN=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{selection:n}=e,{distance:r=1,unit:o="character",reverse:i=!1}=t,{edge:a=null}=t;if(n){"start"===a&&(a=Ee.isBackward(n)?"focus":"anchor"),"end"===a&&(a=Ee.isBackward(n)?"anchor":"focus");var{anchor:s,focus:l}=n,u={distance:r,unit:o,ignoreNonSelectable:!0},c={};if(null==a||"anchor"===a){var d=i?F.before(e,s,u):F.after(e,s,u);d&&(c.anchor=d)}if(null==a||"focus"===a){var h=i?F.before(e,l,u):F.after(e,l,u);h&&(c.focus=h)}Re.setSelection(e,c)}},FN=(e,t)=>{var{selection:n}=e;if(t=F.range(e,t),n)Re.setSelection(e,t);else{if(!Ee.isRange(t))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(Pr.stringify(t)));e.apply({type:"set_selection",properties:n,newProperties:t})}};function Bw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Rw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bw(Object(n),!0).forEach(function(t){Wi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var LN=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{selection:r}=e,{edge:o="both"}=n;if(r){"start"===o&&(o=Ee.isBackward(r)?"focus":"anchor"),"end"===o&&(o=Ee.isBackward(r)?"anchor":"focus");var{anchor:i,focus:a}=r,s="anchor"===o?i:a;Re.setSelection(e,{["anchor"===o?"anchor":"focus"]:Rw(Rw({},s),t)})}},_N=(e,t)=>{var{selection:n}=e,r={},o={};if(n){for(var i in t)("anchor"===i&&null!=t.anchor&&!pn.equals(t.anchor,n.anchor)||"focus"===i&&null!=t.focus&&!pn.equals(t.focus,n.focus)||"anchor"!==i&&"focus"!==i&&t[i]!==n[i])&&(r[i]=n[i],o[i]=t[i]);Object.keys(r).length>0&&e.apply({type:"set_selection",properties:r,newProperties:o})}},NN=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};F.withoutNormalizing(e,()=>{var{hanging:r=!1,voids:o=!1,mode:i="lowest",batchDirty:a=!0}=n,{at:s,match:l,select:u}=n;if(Ke.isNode(t)&&(t=[t]),0!==t.length){var[c]=t;if(s||(s=e8(e),!1!==u&&(u=!0)),null==u&&(u=!1),Ee.isRange(s))if(r||(s=F.unhangRange(e,s,{voids:o})),Ee.isCollapsed(s))s=s.anchor;else{var[,d]=Ee.edges(s),h=F.pointRef(e,d);Re.delete(e,{at:s}),s=h.unref()}if(pn.isPoint(s)){null==l&&(l=ot.isText(c)?e=>ot.isText(e):e.isInline(c)?t=>ot.isText(t)||F.isInline(e,t):t=>ut.isElement(t)&&F.isBlock(e,t));var[f]=F.nodes(e,{at:s.path,match:l,mode:i,voids:o});if(!f)return;var[,p]=f,g=F.pathRef(e,p),m=F.isEnd(e,s,p);Re.splitNodes(e,{at:s,match:l,mode:i,voids:o});var v=g.unref();s=m?K.next(v):v}var y=K.parent(s),b=s[s.length-1];if(o||!F.void(e,{at:y})){if(a){var w=[],x=K.levels(y);C_(e,()=>{var n=function(){var t=y.concat(b);b++;var n={type:"insert_node",path:t,node:r};e.apply(n),s=K.next(s),w.push(n),ot.isText(r)?x.push(t):x.push(...Array.from(Ke.nodes(r),e=>{var[,n]=e;return t.concat(n)}))};for(var r of t)n()},()=>{iS(e,x,e=>{var t=e;for(var n of w)if(K.operationCanTransformPath(n)&&!(t=K.transform(t,n)))return null;return t})})}else for(var C of t){var E=y.concat(b);b++,e.apply({type:"insert_node",path:E,node:C}),s=K.next(s)}if(s=K.previous(s),u){var D=F.end(e,s);D&&Re.select(e,D)}}}})},HN=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};F.withoutNormalizing(e,()=>{var{at:n=e.selection,mode:r="lowest",voids:o=!1}=t,{match:i}=t;if(null==i&&(i=K.isPath(n)?O0(e,n):t=>ut.isElement(t)&&F.isBlock(e,t)),n){var a=F.nodes(e,{at:n,match:i,mode:r,voids:o}),s=Array.from(a,t=>{var[,n]=t;return F.pathRef(e,n)});for(var l of s){var u=l.unref();if(u.length<2)throw new Error("Cannot lift node at a path [".concat(u,"] because it has a depth of less than `2`."));var c=F.node(e,K.parent(u)),[d,h]=c,f=u[u.length-1],{length:p}=d.children;if(1===p){var g=K.next(h);Re.moveNodes(e,{at:u,to:g,voids:o}),Re.removeNodes(e,{at:h,voids:o})}else if(0===f)Re.moveNodes(e,{at:u,to:h,voids:o});else if(f===p-1){var m=K.next(h);Re.moveNodes(e,{at:u,to:m,voids:o})}else{var v=K.next(u),y=K.next(h);Re.splitNodes(e,{at:v,voids:o}),Re.moveNodes(e,{at:u,to:y,voids:o})}}}})},GN=["text"],jN=["children"],oS=(e,t)=>{if(ut.isElement(t)){var n=t;return!!F.isVoid(e,t)||1===n.children.length&&oS(e,n.children[0])}return!F.isEditor(t)},$N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};F.withoutNormalizing(e,()=>{var{match:n,at:r=e.selection}=t,{hanging:o=!1,voids:i=!1,mode:a="lowest"}=t;if(r){if(null==n)if(K.isPath(r)){var[s]=F.parent(e,r);n=e=>s.children.includes(e)}else n=t=>ut.isElement(t)&&F.isBlock(e,t);if(!o&&Ee.isRange(r)&&(r=F.unhangRange(e,r,{voids:i})),Ee.isRange(r))if(Ee.isCollapsed(r))r=r.anchor;else{var[,l]=Ee.edges(r),u=F.pointRef(e,l);Re.delete(e,{at:r}),r=u.unref(),null==t.at&&Re.select(e,r)}var[c]=F.nodes(e,{at:r,match:n,voids:i,mode:a}),d=F.previous(e,{at:r,match:n,voids:i,mode:a});if(c&&d){var[h,f]=c,[p,g]=d;if(0!==f.length&&0!==g.length){var m,v,y=K.next(g),b=K.common(f,g),w=K.isSibling(f,g),x=Array.from(F.levels(e,{at:f}),e=>{var[t]=e;return t}).slice(b.length).slice(0,-1),C=F.above(e,{at:f,mode:"highest",match:t=>x.includes(t)&&oS(e,t)}),E=C&&F.pathRef(e,C[1]);if(ot.isText(h)&&ot.isText(p)){var D=Ku(h,GN);v=p.text.length,m=D}else{if(!ut.isElement(h)||!ut.isElement(p))throw new Error("Cannot merge the node at path [".concat(f,"] with the previous sibling because it is not the same kind: ").concat(Pr.stringify(h)," ").concat(Pr.stringify(p)));D=Ku(h,jN);v=p.children.length,m=D}w||Re.moveNodes(e,{at:f,to:y,voids:i}),E&&Re.removeNodes(e,{at:E.current,voids:i}),F.shouldMergeNodesRemovePrevNode(e,d,c)?Re.removeNodes(e,{at:g,voids:i}):e.apply({type:"merge_node",path:y,position:v,properties:m}),E&&E.unref()}}}})},WN=(e,t)=>{F.withoutNormalizing(e,()=>{var{to:n,at:r=e.selection,mode:o="lowest",voids:i=!1}=t,{match:a}=t;if(r){null==a&&(a=K.isPath(r)?O0(e,r):t=>ut.isElement(t)&&F.isBlock(e,t));var s=F.pathRef(e,n),l=F.nodes(e,{at:r,match:a,mode:o,voids:i}),u=Array.from(l,t=>{var[,n]=t;return F.pathRef(e,n)});for(var c of u){var d=c.unref(),h=s.current;0!==d.length&&e.apply({type:"move_node",path:d,newPath:h}),s.current&&K.isSibling(h,d)&&K.isAfter(h,d)&&(s.current=K.next(s.current))}s.unref()}})},zN=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};F.withoutNormalizing(e,()=>{var{hanging:n=!1,voids:r=!1,mode:o="lowest"}=t,{at:i=e.selection,match:a}=t;if(i){null==a&&(a=K.isPath(i)?O0(e,i):t=>ut.isElement(t)&&F.isBlock(e,t)),!n&&Ee.isRange(i)&&(i=F.unhangRange(e,i,{voids:r}));var s=F.nodes(e,{at:i,match:a,mode:o,voids:r}),l=Array.from(s,t=>{var[,n]=t;return F.pathRef(e,n)});for(var u of l){var c=u.unref();if(c){var[d]=F.node(e,c);e.apply({type:"remove_node",path:c,node:d})}}}})},VN=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};F.withoutNormalizing(e,()=>{var{match:r,at:o=e.selection,compare:i,merge:a}=n,{hanging:s=!1,mode:l="lowest",split:u=!1,voids:c=!1}=n;if(o){if(null==r&&(r=K.isPath(o)?O0(e,o):t=>ut.isElement(t)&&F.isBlock(e,t)),!s&&Ee.isRange(o)&&(o=F.unhangRange(e,o,{voids:c})),u&&Ee.isRange(o)){if(Ee.isCollapsed(o)&&F.leaf(e,o.anchor)[0].text.length>0)return;var d=F.rangeRef(e,o,{affinity:"inward"}),[h,f]=Ee.edges(o),p="lowest"===l?"lowest":"highest",g=F.isEnd(e,f,f.path);Re.splitNodes(e,{at:f,match:r,mode:p,voids:c,always:!g});var m=F.isStart(e,h,h.path);Re.splitNodes(e,{at:h,match:r,mode:p,voids:c,always:!m}),o=d.unref(),null==n.at&&Re.select(e,o)}for(var[v,y]of(i||(i=(e,t)=>e!==t),F.nodes(e,{at:o,match:r,mode:l,voids:c}))){var b={},w={};if(0!==y.length){var x=!1;for(var C in t)"children"===C||"text"===C||i(t[C],v[C])&&(x=!0,v.hasOwnProperty(C)&&(b[C]=v[C]),a?null!=t[C]&&(w[C]=a(v[C],t[C])):null!=t[C]&&(w[C]=t[C]));x&&e.apply({type:"set_node",path:y,properties:b,newProperties:w})}}}})},UN=(e,t)=>{if(Ee.isCollapsed(t))return t.anchor;var[,n]=Ee.edges(t),r=F.pointRef(e,n);return Re.delete(e,{at:t}),r.unref()},XN=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};F.withoutNormalizing(e,()=>{var{mode:n="lowest",voids:r=!1}=t,{match:o,at:i=e.selection,height:a=0,always:s=!1}=t;if(null==o&&(o=t=>ut.isElement(t)&&F.isBlock(e,t)),Ee.isRange(i)&&(i=UN(e,i)),K.isPath(i)){var l=i,u=F.point(e,l),[c]=F.parent(e,l);o=e=>e===c,a=u.path.length-l.length+1,i=u,s=!0}if(i){var d,h=F.pointRef(e,i,{affinity:"backward"});try{var[f]=F.nodes(e,{at:i,match:o,mode:n,voids:r});if(!f)return;var p=F.void(e,{at:i,mode:"highest"});if(!r&&p){var[g,m]=p;if(ut.isElement(g)&&e.isInline(g)){var v=F.after(e,m);if(!v){var y=K.next(m);Re.insertNodes(e,{text:""},{at:y,voids:r}),v=F.point(e,y)}i=v,s=!0}a=i.path.length-m.length+1,s=!0}d=F.pointRef(e,i);var b=i.path.length-a,[,w]=f,x=i.path.slice(0,b),C=0===a?i.offset:i.path[b]+0;for(var[E,D]of F.levels(e,{at:x,reverse:!0,voids:r})){var S=!1;if(D.length<w.length||0===D.length||!r&&ut.isElement(E)&&F.isVoid(e,E))break;var P=h.current,T=F.isEnd(e,P,D);if(s||!h||!F.isEdge(e,P,D)){S=!0;var A=Ke.extractProps(E);e.apply({type:"split_node",path:D,position:C,properties:A})}C=D[D.length-1]+(S||T?1:0)}if(null==t.at){var M=d.current||F.end(e,[]);Re.select(e,M)}}finally{var k;h.unref(),null===(k=d)||void 0===k||k.unref()}}})},KN=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Array.isArray(t)||(t=[t]);var r={};for(var o of t)r[o]=null;Re.setNodes(e,r,n)},YN=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};F.withoutNormalizing(e,()=>{var{mode:n="lowest",split:r=!1,voids:o=!1}=t,{at:i=e.selection,match:a}=t;if(i){null==a&&(a=K.isPath(i)?O0(e,i):t=>ut.isElement(t)&&F.isBlock(e,t)),K.isPath(i)&&(i=F.range(e,i));var s=Ee.isRange(i)?F.rangeRef(e,i):null,l=F.nodes(e,{at:i,match:a,mode:n,voids:o}),u=Array.from(l,t=>{var[,n]=t;return F.pathRef(e,n)}).reverse(),c=function(){var t=d.unref(),[n]=F.node(e,t),i=F.range(e,t);r&&s&&(i=Ee.intersection(s.current,i)),Re.liftNodes(e,{at:i,match:e=>ut.isAncestor(n)&&n.children.includes(e),voids:o})};for(var d of u)c();s&&s.unref()}})};function Mw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function bw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mw(Object(n),!0).forEach(function(t){Wi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var c5,kw,qN=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};F.withoutNormalizing(e,()=>{var{mode:r="lowest",split:o=!1,voids:i=!1}=n,{match:a,at:s=e.selection}=n;if(s){if(null==a&&(a=K.isPath(s)?O0(e,s):e.isInline(t)?t=>ut.isElement(t)&&F.isInline(e,t)||ot.isText(t):t=>ut.isElement(t)&&F.isBlock(e,t)),o&&Ee.isRange(s)){var[l,u]=Ee.edges(s),c=F.rangeRef(e,s,{affinity:"inward"});Re.splitNodes(e,{at:u,match:a,voids:i}),Re.splitNodes(e,{at:l,match:a,voids:i}),s=c.unref(),null==n.at&&Re.select(e,s)}var d=Array.from(F.nodes(e,{at:s,match:e.isInline(t)?t=>ut.isElement(t)&&F.isBlock(e,t):e=>F.isEditor(e),mode:"lowest",voids:i})),h=function(){var n=Ee.isRange(s)?Ee.intersection(s,F.range(e,f)):s;if(!n)return 0;var o=Array.from(F.nodes(e,{at:n,match:a,mode:r,voids:i}));if(o.length>0){var[l]=o,u=o[o.length-1],[,c]=l,[,d]=u;if(0===c.length&&0===d.length)return 0;var h=K.equals(c,d)?K.parent(c):K.common(c,d),p=F.range(e,c,d),g=F.node(e,h),[m]=g,v=h.length+1,y=K.next(d.slice(0,v)),b=bw(bw({},t),{},{children:[]});Re.insertNodes(e,b,{at:y,voids:i}),Re.moveNodes(e,{at:p,match:e=>ut.isAncestor(m)&&m.children.includes(e),to:y.concat(0),voids:i})}};for(var[,f]of d)h()}})},ZN=()=>{var e={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return x_(e,...n)},addMark:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return A_(e,...n)},deleteBackward:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return M_(e,...n)},deleteForward:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return b_(e,...n)},deleteFragment:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return k_(e,...n)},getFragment:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return P_(e,...n)},insertBreak:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return W_(e,...n)},insertSoftBreak:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return V_(e,...n)},insertFragment:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return bN(e,...n)},insertNode:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return z_(e,...n)},insertText:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return X_(e,...n)},normalizeNode:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return S_(e,...n)},removeMark:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return PN(e,...n)},getDirtyPaths:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return E_(e,...n)},shouldNormalize:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return T_(e,...n)},above:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return D_(e,...n)},after:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return B_(e,...n)},before:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return R_(e,...n)},collapse:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return kN(e,...n)},delete:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return MN(e,...n)},deselect:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ON(e,...n)},edges:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return O_(e,...n)},elementReadOnly:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return I_(e,...n)},end:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return F_(e,...n)},first:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return L_(e,...n)},fragment:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return __(e,...n)},getMarks:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return oN(e,...n)},hasBlocks:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return H_(e,...n)},hasInlines:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return G_(e,...n)},hasPath:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return j_(e,...n)},hasTexts:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return $_(e,...n)},insertNodes:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return NN(e,...n)},isBlock:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return K_(e,...n)},isEdge:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Y_(e,...n)},isEmpty:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return q_(e,...n)},isEnd:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Z_(e,...n)},isNormalizing:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Q_(e,...n)},isStart:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return J_(e,...n)},last:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return eN(e,...n)},leaf:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return tN(e,...n)},levels:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return nN(e,...n)},liftNodes:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return HN(e,...n)},mergeNodes:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return $N(e,...n)},move:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return IN(e,...n)},moveNodes:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return WN(e,...n)},next:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return sN(e,...n)},node:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return aN(e,...n)},nodes:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return uN(e,...n)},normalize:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return lN(e,...n)},parent:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return cN(e,...n)},path:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return dN(e,...n)},pathRef:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return fN(e,...n)},pathRefs:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return hN(e,...n)},point:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return mN(e,...n)},pointRef:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return gN(e,...n)},pointRefs:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return pN(e,...n)},positions:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vN(e,...n)},previous:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return yN(e,...n)},range:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return xN(e,...n)},rangeRef:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return wN(e,...n)},rangeRefs:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return CN(e,...n)},removeNodes:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return zN(e,...n)},select:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return FN(e,...n)},setNodes:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return VN(e,...n)},setNormalizing:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return SN(e,...n)},setPoint:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return LN(e,...n)},setSelection:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _N(e,...n)},splitNodes:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return XN(e,...n)},start:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return TN(e,...n)},string:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return DN(e,...n)},unhangRange:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return AN(e,...n)},unsetNodes:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return KN(e,...n)},unwrapNodes:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return YN(e,...n)},void:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return N_(e,...n)},withoutNormalizing:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return BN(e,...n)},wrapNodes:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return qN(e,...n)},shouldMergeNodesRemovePrevNode:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return RN(e,...n)}};return e};function QN(){if(kw)return c5;kw=1,c5=function(e){return e=String(e||""),n.test(e)?"rtl":r.test(e)?"ltr":"neutral"};var e="---",t="A-Za-z--------",n=new RegExp("^[^"+t+"]*["+e+"]"),r=new RegExp("^[^"+e+"]*["+t+"]");return c5}var JN=QN();const sS=vc(JN),Ow=e=>"object"==typeof e&&null!=e&&1===e.nodeType,Iw=(e,t)=>(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e,fm=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const n=getComputedStyle(e,null);return Iw(n.overflowY,t)||Iw(n.overflowX,t)||(e=>{const t=(e=>{if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch{return null}})(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)})(e)}return!1},hm=(e,t,n,r,o,i,a,s)=>i<e&&a>t||i>e&&a<t?0:i<=e&&s<=n||a>=t&&s>=n?i-e-r:a>t&&s<n||i<e&&s>n?a-t+o:0,eH=e=>e.parentElement??(e.getRootNode().host||null),Fw=(e,t)=>{var n,r,o,i;if(typeof document>"u")return[];const{scrollMode:a,block:s,inline:l,boundary:u,skipOverflowHiddenElements:c}=t,d="function"==typeof u?u:e=>e!==u;if(!Ow(e))throw new TypeError("Invalid target");const h=document.scrollingElement||document.documentElement,f=[];let p=e;for(;Ow(p)&&d(p);){if(p=eH(p),p===h){f.push(p);break}null!=p&&p===document.body&&fm(p)&&!fm(document.documentElement)||null!=p&&fm(p,c)&&f.push(p)}const g=null!=(r=null==(n=window.visualViewport)?void 0:n.width)?r:innerWidth,m=null!=(i=null==(o=window.visualViewport)?void 0:o.height)?i:innerHeight,{scrollX:v,scrollY:y}=window,{height:b,width:w,top:x,right:C,bottom:E,left:D}=e.getBoundingClientRect(),{top:S,right:P,bottom:T,left:A}=(e=>{const t=window.getComputedStyle(e);return{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0}})(e);let M="start"===s||"nearest"===s?x-S:"end"===s?E+T:x+b/2-S+T,k="center"===l?D+w/2-A+P:"end"===l?C+P:D-A;const B=[];for(let e=0;e<f.length;e++){const t=f[e],{height:n,width:r,top:o,right:i,bottom:u,left:c}=t.getBoundingClientRect();if("if-needed"===a&&x>=0&&D>=0&&E<=m&&C<=g&&(t===h&&!fm(t)||x>=o&&E<=u&&D>=c&&C<=i))return B;const d=getComputedStyle(t),p=parseInt(d.borderLeftWidth,10),S=parseInt(d.borderTopWidth,10),P=parseInt(d.borderRightWidth,10),T=parseInt(d.borderBottomWidth,10);let A=0,F=0;const I="offsetWidth"in t?t.offsetWidth-t.clientWidth-p-P:0,R="offsetHeight"in t?t.offsetHeight-t.clientHeight-S-T:0,_="offsetWidth"in t?0===t.offsetWidth?0:r/t.offsetWidth:0,O="offsetHeight"in t?0===t.offsetHeight?0:n/t.offsetHeight:0;if(h===t)A="start"===s?M:"end"===s?M-m:"nearest"===s?hm(y,y+m,m,S,T,y+M,y+M+b,b):M-m/2,F="start"===l?k:"center"===l?k-g/2:"end"===l?k-g:hm(v,v+g,g,p,P,v+k,v+k+w,w),A=Math.max(0,A+y),F=Math.max(0,F+v);else{A="start"===s?M-o-S:"end"===s?M-u+T+R:"nearest"===s?hm(o,u,n,S,T+R,M,M+b,b):M-(o+n/2)+R/2,F="start"===l?k-c-p:"center"===l?k-(c+r/2)+I/2:"end"===l?k-i+P+I:hm(c,i,r,p,P+I,k,k+w,w);const{scrollLeft:e,scrollTop:a}=t;A=0===O?0:Math.max(0,Math.min(a+A/O,t.scrollHeight-n/O+R)),F=0===_?0:Math.max(0,Math.min(e+F/_,t.scrollWidth-r/_+I)),M+=a-A,k+=e-F}B.push({el:t,top:A,left:F})}return B},tH=e=>{return!1===e?{block:"end",inline:"nearest"}:(t=e)===Object(t)&&0!==Object.keys(t).length?e:{block:"start",inline:"nearest"};var t};function nH(e,t){if(!e.isConnected||!(e=>{let t=e;for(;t&&t.parentNode;){if(t.parentNode===document)return!0;t=t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}return!1})(e))return;const n=(e=>{const t=window.getComputedStyle(e);return{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0}})(e);if("object"==typeof(r=t)&&"function"==typeof r.behavior)return t.behavior(Fw(e,t));var r;const o="boolean"==typeof t||null==t?void 0:t.behavior;for(const{el:r,top:i,left:a}of Fw(e,tH(t))){const e=i-n.top+n.bottom,t=a-n.left+n.right;r.scroll({top:e,left:t,behavior:o})}}var f5,h5,aS=globalThis.Node,rH=globalThis.Text,r8=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,iH=e=>dc(e)&&8===e.nodeType,ws=e=>dc(e)&&1===e.nodeType,dc=e=>{var t=r8(e);return!!t&&e instanceof t.Node},M6=e=>{var t=e&&e.anchorNode&&r8(e.anchorNode);return!!t&&e instanceof t.Selection},uS=e=>dc(e)&&3===e.nodeType,oH=e=>e.clipboardData&&""!==e.clipboardData.getData("text/plain")&&1===e.clipboardData.types.length,sH=e=>{var[t,n]=e;if(ws(t)&&t.childNodes.length){var r=n===t.childNodes.length,o=r?n-1:n;for([t,o]=lS(t,o,r?"backward":"forward"),r=o<n;ws(t)&&t.childNodes.length;){var i=r?t.childNodes.length-1:0;t=uH(t,i,r?"backward":"forward")}n=r&&null!=t.textContent?t.textContent.length:0}return[t,n]},aH=e=>{for(var t=e&&e.parentNode;t;){if("[object ShadowRoot]"===t.toString())return!0;t=t.parentNode}return!1},lS=(e,t,n)=>{for(var{childNodes:r}=e,o=r[t],i=t,a=!1,s=!1;(iH(o)||ws(o)&&0===o.childNodes.length||ws(o)&&"false"===o.getAttribute("contenteditable"))&&(!a||!s);)i>=r.length?(a=!0,i=t-1,n="backward"):i<0?(s=!0,i=t+1,n="forward"):(o=r[i],t=i,i+="forward"===n?1:-1);return[o,t]},uH=(e,t,n)=>{var[r]=lS(e,t,n);return r},cS=e=>{var t="";if(uS(e)&&e.nodeValue)return e.nodeValue;if(ws(e)){for(var n of Array.from(e.childNodes))t+=cS(n);var r=getComputedStyle(e).getPropertyValue("display");("block"===r||"list"===r||"BR"===e.tagName)&&(t+="\n")}return t},lH=/data-slate-fragment="(.+?)"/m,cH=e=>{var t=e.getData("text/html"),[,n]=t.match(lH)||[];return n},Dg=e=>null!=e.getSelection?e.getSelection():document.getSelection(),i8=(e,t,n)=>{var{target:r}=t;if(ws(r)&&r.matches('[contentEditable="false"]'))return!1;var{document:o}=Gt.getWindow(e);if(o.contains(r))return Gt.hasDOMNode(e,r,{editable:!0});var i=n.find(e=>{var{addedNodes:t,removedNodes:n}=e;for(var o of t)if(o===r||o.contains(r))return!0;for(var i of n)if(i===r||i.contains(r))return!0});return!(!i||i===t)&&i8(e,i,n)},fH=()=>{for(var e=document.activeElement;null!==(t=e)&&void 0!==t&&t.shadowRoot&&null!==(n=e.shadowRoot)&&void 0!==n&&n.activeElement;){var t,n,r;e=null===(r=e)||void 0===r||null===(r=r.shadowRoot)||void 0===r?void 0:r.activeElement}return e},Lw=(e,t)=>!!(e.compareDocumentPosition(t)&aS.DOCUMENT_POSITION_PRECEDING),hH=(e,t)=>!!(e.compareDocumentPosition(t)&aS.DOCUMENT_POSITION_FOLLOWING),dH=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,_w=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),Hi=typeof navigator<"u"&&/Android/.test(navigator.userAgent),Zd=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),bf=typeof navigator<"u"&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),gH=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),fS=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),pH=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),mH=Hi&&typeof navigator<"u"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),vH=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),yH=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),wH=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),Gm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Version\/(\d+)/.test(navigator.userAgent)&&null!==(f5=navigator.userAgent.match(/Version\/(\d+)/))&&void 0!==f5&&f5[1]&&parseInt(null===(h5=navigator.userAgent.match(/Version\/(\d+)/))||void 0===h5?void 0:h5[1],10);var Kl=(!pH||!mH)&&!gH&&typeof globalThis<"u"&&globalThis.InputEvent&&"function"==typeof globalThis.InputEvent.prototype.getTargetRanges;function zg(e){return(zg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CH(e,t){if("object"!==zg(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!==zg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function xH(e){var t=CH(e,"string");return"symbol"===zg(t)?t:String(t)}function o8(e,t,n){return(t=xH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var EH=0;class hS{constructor(){o8(this,"id",void 0),this.id="".concat(EH++)}}var o0=new WeakMap,Qd=new WeakMap,Ag=new WeakMap,dS=new WeakMap,jm=new WeakMap,b6=new WeakMap,Vg=new WeakMap,jf=new WeakMap,d3=new WeakMap,sv=new WeakMap,k6=new WeakMap,tc=new WeakMap,Ff=new WeakMap,Bg=new WeakMap,O6=new WeakMap,s8=new WeakMap,ia=new WeakMap,Hu=new WeakMap,ho=new WeakMap,Zl=new WeakMap,Ql=new WeakMap,gS=new WeakMap,y0=Symbol("placeholder"),pS=Symbol("mark-placeholder"),Gt={androidPendingDiffs:e=>ho.get(e),androidScheduleFlush:e=>{var t;null===(t=s8.get(e))||void 0===t||t()},blur:e=>{var t=Gt.toDOMNode(e,e),n=Gt.findDocumentOrShadowRoot(e);tc.set(e,!1),n.activeElement===t&&t.blur()},deselect:e=>{var{selection:t}=e,n=Gt.findDocumentOrShadowRoot(e),r=Dg(n);r&&r.rangeCount>0&&r.removeAllRanges(),t&&Re.deselect(e)},findDocumentOrShadowRoot:e=>{var t=Gt.toDOMNode(e,e),n=t.getRootNode();return n instanceof Document||n instanceof ShadowRoot?n:t.ownerDocument},findEventRange:(e,t)=>{"nativeEvent"in t&&(t=t.nativeEvent);var{clientX:n,clientY:r,target:o}=t;if(null==n||null==r)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var i=Gt.toSlateNode(e,t.target),a=Gt.findPath(e,i);if(ut.isElement(i)&&F.isVoid(e,i)){var s=o.getBoundingClientRect(),l=e.isInline(i)?n-s.left<s.left+s.width-n:r-s.top<s.top+s.height-r,u=F.point(e,a,{edge:l?"start":"end"}),c=l?F.before(e,u):F.after(e,u);if(c)return F.range(e,c)}var d,{document:h}=Gt.getWindow(e);if(h.caretRangeFromPoint)d=h.caretRangeFromPoint(n,r);else{var f=h.caretPositionFromPoint(n,r);f&&((d=h.createRange()).setStart(f.offsetNode,f.offset),d.setEnd(f.offsetNode,f.offset))}if(!d)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));return Gt.toSlateRange(e,d,{exactMatch:!1,suppressThrow:!1})},findKey:(e,t)=>{var n=d3.get(t);return n||(n=new hS,d3.set(t,n)),n},findPath:(e,t)=>{for(var n=[],r=t;;){var o=Ag.get(r);if(null==o){if(F.isEditor(r))return n;break}var i=Qd.get(r);if(null==i)break;n.unshift(i),r=o}throw new Error("Unable to find the path for Slate node: ".concat(Pr.stringify(t)))},focus:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{retries:5};if(!tc.get(e)){if(t.retries<=0)throw new Error("Could not set focus, editor seems stuck with pending operations");if(e.operations.length>0)return void setTimeout(()=>{Gt.focus(e,{retries:t.retries-1})},10);var n=Gt.toDOMNode(e,e),r=Gt.findDocumentOrShadowRoot(e);if(r.activeElement!==n){if(e.selection&&r instanceof Document){var o=Dg(r),i=Gt.toDOMRange(e,e.selection);null==o||o.removeAllRanges(),null==o||o.addRange(i)}e.selection||Re.select(e,F.start(e,[])),tc.set(e,!0),n.focus({preventScroll:!0})}}},getWindow:e=>{var t=dS.get(e);if(!t)throw new Error("Unable to find a host window element for this editor");return t},hasDOMNode:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{editable:o=!1}=r,i=Gt.toDOMNode(e,e);try{n=ws(t)?t:t.parentElement}catch(e){if(e instanceof Error&&!e.message.includes('Permission denied to access property "nodeType"'))throw e}return!!n&&!(n.closest("[data-slate-editor]")!==i||o&&!n.isContentEditable&&("boolean"!=typeof n.isContentEditable||n.closest('[contenteditable="false"]')!==i)&&!n.getAttribute("data-slate-zero-width"))},hasEditableTarget:(e,t)=>dc(t)&&Gt.hasDOMNode(e,t,{editable:!0}),hasRange:(e,t)=>{var{anchor:n,focus:r}=t;return F.hasPath(e,n.path)&&F.hasPath(e,r.path)},hasSelectableTarget:(e,t)=>Gt.hasEditableTarget(e,t)||Gt.isTargetInsideNonReadonlyVoid(e,t),hasTarget:(e,t)=>dc(t)&&Gt.hasDOMNode(e,t),insertData:(e,t)=>{e.insertData(t)},insertFragmentData:(e,t)=>e.insertFragmentData(t),insertTextData:(e,t)=>e.insertTextData(t),isComposing:e=>!!Ff.get(e),isFocused:e=>!!tc.get(e),isReadOnly:e=>!!k6.get(e),isTargetInsideNonReadonlyVoid:(e,t)=>{if(k6.get(e))return!1;var n=Gt.hasTarget(e,t)&&Gt.toSlateNode(e,t);return ut.isElement(n)&&F.isVoid(e,n)},setFragmentData:(e,t,n)=>e.setFragmentData(t,n),toDOMNode:(e,t)=>{var n=sv.get(e),r=F.isEditor(t)?jm.get(e):null==n?void 0:n.get(Gt.findKey(e,t));if(!r)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(Pr.stringify(t)));return r},toDOMPoint:(e,t)=>{var n,[r]=F.node(e,t.path),o=Gt.toDOMNode(e,r);F.void(e,{at:t})&&(t={path:t.path,offset:0});for(var i=Array.from(o.querySelectorAll("[data-slate-string], [data-slate-zero-width]")),a=0,s=0;s<i.length;s++){var l=i[s],u=l.childNodes[0];if(null!=u&&null!=u.textContent){var{length:c}=u.textContent,d=l.getAttribute("data-slate-length"),h=a+(null==d?c:parseInt(d,10)),f=i[s+1];if(t.offset===h&&null!=f&&f.hasAttribute("data-slate-mark-placeholder")){var p,g=f.childNodes[0];n=[g instanceof rH?g:f,null!==(p=f.textContent)&&void 0!==p&&p.startsWith("\ufeff")?1:0];break}if(t.offset<=h){n=[u,Math.min(c,Math.max(0,t.offset-a))];break}a=h}}if(!n)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(Pr.stringify(t)));return n},toDOMRange:(e,t)=>{var{anchor:n,focus:r}=t,o=Ee.isBackward(t),i=Gt.toDOMPoint(e,n),a=Ee.isCollapsed(t)?i:Gt.toDOMPoint(e,r),s=Gt.getWindow(e).document.createRange(),[l,u]=o?a:i,[c,d]=o?i:a,h=!!(ws(l)?l:l.parentElement).getAttribute("data-slate-zero-width"),f=!!(ws(c)?c:c.parentElement).getAttribute("data-slate-zero-width");return s.setStart(l,h?1:u),s.setEnd(c,f?1:d),s},toSlateNode:(e,t)=>{var n=ws(t)?t:t.parentElement;n&&!n.hasAttribute("data-slate-node")&&(n=n.closest("[data-slate-node]"));var r=n?Vg.get(n):null;if(!r)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(n));return r},toSlatePoint:(e,t,n)=>{var{exactMatch:r,suppressThrow:o,searchDirection:i="backward"}=n,[a,s]=r?t:sH(t),l=a.parentNode,u=null,c=0;if(l){var d,h,f=Gt.toDOMNode(e,e),p=l.closest('[data-slate-void="true"]'),g=p&&f.contains(p)?p:null,m=l.closest('[contenteditable="false"]'),v=m&&f.contains(m)?m:null,y=l.closest("[data-slate-leaf]"),b=null;if(y){if(u=y.closest('[data-slate-node="text"]')){var w=Gt.getWindow(e).document.createRange();w.setStart(u,0),w.setEnd(a,s);var x=w.cloneContents();[...Array.prototype.slice.call(x.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(x.querySelectorAll("[contenteditable=false]"))].forEach(e=>{Hi&&!r&&e.hasAttribute("data-slate-zero-width")&&e.textContent.length>0&&"\ufeff"!==e.textContext?e.textContent.startsWith("\ufeff")&&(e.textContent=e.textContent.slice(1)):e.parentNode.removeChild(e)}),c=x.textContent.length,b=u}}else if(g){for(var C=g.querySelectorAll("[data-slate-leaf]"),E=0;E<C.length;E++){var D=C[E];if(Gt.hasDOMNode(e,D)){y=D;break}}y?(u=y.closest('[data-slate-node="text"]'),c=(b=y).textContent.length,b.querySelectorAll("[data-slate-zero-width]").forEach(e=>{c-=e.textContent.length})):c=1}else if(v){var S,P,T=e=>e?e.querySelectorAll("[data-slate-leaf]:not(:scope [data-slate-editor] [data-slate-leaf])"):[],A=v.closest('[data-slate-node="element"]');if("forward"===i)y=null!==(S=[...T(A),...T(null==A?void 0:A.nextElementSibling)].find(e=>hH(v,e)))&&void 0!==S?S:null;else y=null!==(P=[...T(null==A?void 0:A.previousElementSibling),...T(A)].findLast(e=>Lw(v,e)))&&void 0!==P?P:null;y&&(u=y.closest('[data-slate-node="text"]'),b=y,"forward"===i?c=0:(c=b.textContent.length,b.querySelectorAll("[data-slate-zero-width]").forEach(e=>{c-=e.textContent.length})))}b&&c===b.textContent.length&&Hi&&"z"===b.getAttribute("data-slate-zero-width")&&null!==(d=b.textContent)&&void 0!==d&&d.startsWith("\ufeff")&&(l.hasAttribute("data-slate-zero-width")||Zd&&null!==(h=b.textContent)&&void 0!==h&&h.endsWith("\n\n"))&&c--}if(Hi&&!u&&!r){var M=l.hasAttribute("data-slate-node")?l:l.closest("[data-slate-node]");if(M&&Gt.hasDOMNode(e,M,{editable:!0})){var k=Gt.toSlateNode(e,M),{path:B,offset:I}=F.start(e,Gt.findPath(e,k));return M.querySelector("[data-slate-leaf]")||(I=s),{path:B,offset:I}}}if(!u){if(o)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(t))}var R=Gt.toSlateNode(e,u);return{path:Gt.findPath(e,R),offset:c}},toSlateRange:(e,t,n)=>{var r,o,i,a,s,l,{exactMatch:u,suppressThrow:c}=n;if(M6(t)?t.anchorNode:t.startContainer)if(M6(t)){if(Zd&&t.rangeCount>1){a=t.focusNode;var d=t.getRangeAt(0),h=t.getRangeAt(t.rangeCount-1);if(a instanceof HTMLTableRowElement&&d.startContainer instanceof HTMLTableRowElement&&h.startContainer instanceof HTMLTableRowElement){let e=function(t){return t.childElementCount>0?e(t.children[0]):t};var f=d.startContainer,p=h.startContainer,g=e(f.children[d.startOffset]),m=e(p.children[h.startOffset]);s=0,o=m.childNodes.length>0?m.childNodes[0]:m,a=g.childNodes.length>0?g.childNodes[0]:g,i=m instanceof HTMLElement?m.innerHTML.length:0}else d.startContainer===a?(o=h.endContainer,i=h.endOffset,s=d.startOffset):(o=d.startContainer,i=d.endOffset,s=h.startOffset)}else o=t.anchorNode,i=t.anchorOffset,a=t.focusNode,s=t.focusOffset;l=fS&&aH(o)||Zd?t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:t.isCollapsed}else o=t.startContainer,i=t.startOffset,a=t.endContainer,s=t.endOffset,l=t.collapsed;if(null==o||null==a||null==i||null==s)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(t));Zd&&null!==(r=a.textContent)&&void 0!==r&&r.endsWith("\n\n")&&s===a.textContent.length&&s--;var v=Gt.toSlatePoint(e,[o,i],{exactMatch:u,suppressThrow:c});if(!v)return null;var y=Lw(o,a)||o===a&&s<i,b=l?v:Gt.toSlatePoint(e,[a,s],{exactMatch:u,suppressThrow:c,searchDirection:y?"forward":"backward"});if(!b)return null;var w={anchor:v,focus:b};return Ee.isExpanded(w)&&Ee.isForward(w)&&ws(a)&&F.void(e,{at:w.focus,mode:"highest"})&&(w=F.unhangRange(e,w,{voids:!0})),w}};function PH(e,t){var{path:n,diff:r}=t;if(!F.hasPath(e,n))return!1;var o=Ke.get(e,n);if(!ot.isText(o))return!1;if(r.start!==o.text.length||0===r.text.length)return o.text.slice(r.start,r.start+r.text.length)===r.text;var i=K.next(n);if(!F.hasPath(e,i))return!1;var a=Ke.get(e,i);return ot.isText(a)&&a.text.startsWith(r.text)}function mS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((e,t)=>e.slice(0,t.start)+t.text+e.slice(t.end),e)}function SH(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r))return r;return n}function TH(e,t,n){for(var r=Math.min(e.length,t.length,n),o=0;o<r;o++)if(e.charAt(e.length-o-1)!==t.charAt(t.length-o-1))return o;return r}function vS(e,t){var{start:n,end:r,text:o}=t,i=e.slice(n,r),a=SH(i,o),s=TH(i,o,Math.min(i.length-a,o.length-a)),l={start:n+a,end:r-s,text:o.slice(a,o.length-s)};return l.start===l.end&&0===l.text.length?null:l}function DH(e,t,n){var r=Math.min(t.start,n.start),o=Math.max(0,Math.min(t.start+t.text.length,n.end)-n.start),i=mS(e,t,n),a=Math.max(n.start+n.text.length,t.start+t.text.length+(t.start+t.text.length>n.start?n.text.length:0)-o),s=i.slice(r,a);return vS(e,{start:r,end:Math.max(t.end,n.end-t.text.length+(t.end-t.start)),text:s})}function AH(e){var{path:t,diff:n}=e;return{anchor:{path:t,offset:n.start},focus:{path:t,offset:n.end}}}function I6(e,t){var{path:n,offset:r}=t;if(!F.hasPath(e,n))return null;var o=Ke.get(e,n);if(!ot.isText(o))return null;var i=F.above(e,{match:t=>ut.isElement(t)&&F.isBlock(e,t),at:n});if(!i)return null;for(;r>o.text.length;){var a=F.next(e,{at:n,match:ot.isText});if(!a||!K.isDescendant(a[1],i[1]))return null;r-=o.text.length,o=a[0],n=a[1]}return{path:n,offset:r}}function Nw(e,t){var n=I6(e,t.anchor);if(!n)return null;if(Ee.isCollapsed(t))return{anchor:n,focus:n};var r=I6(e,t.focus);return r?{anchor:n,focus:r}:null}function F6(e,t,n){var r=ho.get(e),o=null==r?void 0:r.find(e=>{var{path:n}=e;return K.equals(n,t.path)});if(!o||t.offset<=o.diff.start)return pn.transform(t,n,{affinity:"backward"});var{diff:i}=o;if(t.offset<=i.start+i.text.length){var a={path:t.path,offset:i.start},s=pn.transform(a,n,{affinity:"backward"});return s?{path:s.path,offset:s.offset+t.offset-i.start}:null}var l={path:t.path,offset:t.offset-i.text.length+i.end-i.start},u=pn.transform(l,n,{affinity:"backward"});return u?"split_node"===n.type&&K.equals(n.path,t.path)&&l.offset<n.position&&i.start<n.position?u:{path:u.path,offset:u.offset+i.text.length-i.end+i.start}:null}function Hw(e,t,n){var r=F6(e,t.anchor,n);if(!r)return null;if(Ee.isCollapsed(t))return{anchor:r,focus:r};var o=F6(e,t.focus,n);return o?{anchor:r,focus:o}:null}function BH(e,t){var{path:n,diff:r,id:o}=e;switch(t.type){case"insert_text":return!K.equals(t.path,n)||t.offset>=r.end?e:t.offset<=r.start?{diff:{start:t.text.length+r.start,end:t.text.length+r.end,text:r.text},id:o,path:n}:{diff:{start:r.start,end:r.end+t.text.length,text:r.text},id:o,path:n};case"remove_text":return!K.equals(t.path,n)||t.offset>=r.end?e:t.offset+t.text.length<=r.start?{diff:{start:r.start-t.text.length,end:r.end-t.text.length,text:r.text},id:o,path:n}:{diff:{start:r.start,end:r.end-t.text.length,text:r.text},id:o,path:n};case"split_node":return!K.equals(t.path,n)||t.position>=r.end?{diff:r,id:o,path:K.transform(n,t,{affinity:"backward"})}:t.position>r.start?{diff:{start:r.start,end:Math.min(t.position,r.end),text:r.text},id:o,path:n}:{diff:{start:r.start-t.position,end:r.end-t.position,text:r.text},id:o,path:K.transform(n,t,{affinity:"forward"})};case"merge_node":return K.equals(t.path,n)?{diff:{start:r.start+t.position,end:r.end+t.position,text:r.text},id:o,path:K.transform(n,t)}:{diff:r,id:o,path:K.transform(n,t)}}var i=K.transform(n,t);return i?{diff:r,path:i,id:o}:null}var Gw=(e,t)=>{var n=(t.top+t.bottom)/2;return e.top<=n&&e.bottom>=n},jw=(e,t,n)=>{var r=Gt.toDOMRange(e,t).getBoundingClientRect(),o=Gt.toDOMRange(e,n).getBoundingClientRect();return Gw(r,o)&&Gw(o,r)},RH=(e,t)=>{var n=F.range(e,Ee.end(t)),r=Array.from(F.positions(e,{at:t})),o=0,i=r.length,a=Math.floor(i/2);if(jw(e,F.range(e,r[o]),n))return F.range(e,r[o],n);if(r.length<2)return F.range(e,r[r.length-1],n);for(;a!==r.length&&a!==o;)jw(e,F.range(e,r[a]),n)?i=a:o=a,a=Math.floor((o+i)/2);return F.range(e,r[o],n)};function $w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ww(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$w(Object(n),!0).forEach(function(t){o8(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var MH=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x-slate-fragment",n=e,{apply:r,onChange:o,deleteBackward:i,addMark:a,removeMark:s}=n;return sv.set(n,new WeakMap),n.addMark=(e,t)=>{var r,o;null===(r=s8.get(n))||void 0===r||r(),!ia.get(n)&&null!==(o=ho.get(n))&&void 0!==o&&o.length&&ia.set(n,null),Hu.delete(n),a(e,t)},n.removeMark=e=>{var t;!ia.get(n)&&null!==(t=ho.get(n))&&void 0!==t&&t.length&&ia.set(n,null),Hu.delete(n),s(e)},n.deleteBackward=e=>{if("line"!==e)return i(e);if(n.selection&&Ee.isCollapsed(n.selection)){var t=F.above(n,{match:e=>ut.isElement(e)&&F.isBlock(n,e),at:n.selection});if(t){var[,r]=t,o=F.range(n,r,n.selection.anchor),a=RH(n,o);Ee.isCollapsed(a)||Re.delete(n,{at:a})}}},n.apply=t=>{var o=[],i=[],a=ho.get(n);if(null!=a&&a.length){var s=a.map(e=>BH(e,t)).filter(Boolean);ho.set(n,s)}var l=Ql.get(n);l&&Ql.set(n,Hw(n,l,t));var u=Zl.get(n);if(null!=u&&u.at){var c=pn.isPoint(null==u?void 0:u.at)?F6(n,u.at,t):Hw(n,u.at,t);Zl.set(n,c?Ww(Ww({},u),{},{at:c}):null)}switch(t.type){case"insert_text":case"remove_text":case"set_node":case"split_node":o.push(...$d(n,t.path));break;case"set_selection":var d;null===(d=Bg.get(n))||void 0===d||d.unref(),Bg.delete(n);break;case"insert_node":case"remove_node":o.push(...$d(n,K.parent(t.path)));break;case"merge_node":var h=K.previous(t.path);o.push(...$d(n,h));break;case"move_node":var f,p=K.common(K.parent(t.path),K.parent(t.newPath));o.push(...$d(n,p)),K.isBefore(t.path,t.newPath)?(o.push(...$d(n,K.parent(t.path))),f=t.newPath):(o.push(...$d(n,K.parent(t.newPath))),f=t.path);var g=Ke.get(e,K.parent(f)),m=Gt.findKey(n,g),v=F.pathRef(n,K.parent(f));i.push([v,m])}switch(r(t),t.type){case"insert_node":case"remove_node":case"merge_node":case"move_node":case"split_node":case"insert_text":case"remove_text":case"set_selection":o0.set(n,!0)}for(var[y,b]of o){var[w]=F.node(n,y);d3.set(w,b)}for(var[x,C]of i){if(x.current){var[E]=F.node(n,x.current);d3.set(E,C)}x.unref()}},n.setFragmentData=e=>{var{selection:r}=n;if(r){var[o,i]=Ee.edges(r),a=F.void(n,{at:o.path}),s=F.void(n,{at:i.path});if(!Ee.isCollapsed(r)||a){var l=Gt.toDOMRange(n,r),u=l.cloneContents(),c=u.childNodes[0];if(u.childNodes.forEach(e=>{e.textContent&&""!==e.textContent.trim()&&(c=e)}),s){var[d]=s,h=l.cloneRange(),f=Gt.toDOMNode(n,d);h.setEndAfter(f),u=h.cloneContents()}if(a&&(c=u.querySelector("[data-slate-spacer]")),Array.from(u.querySelectorAll("[data-slate-zero-width]")).forEach(e=>{var t="n"===e.getAttribute("data-slate-zero-width");e.textContent=t?"\n":""}),uS(c)){var p=c.ownerDocument.createElement("span");p.style.whiteSpace="pre",p.appendChild(c),u.appendChild(p),c=p}var g=n.getFragment(),m=JSON.stringify(g),v=window.btoa(encodeURIComponent(m));c.setAttribute("data-slate-fragment",v),e.setData("application/".concat(t),v);var y=u.ownerDocument.createElement("div");return y.appendChild(u),y.setAttribute("hidden","true"),u.ownerDocument.body.appendChild(y),e.setData("text/html",y.innerHTML),e.setData("text/plain",cS(y)),u.ownerDocument.body.removeChild(y),e}}},n.insertData=e=>{n.insertFragmentData(e)||n.insertTextData(e)},n.insertFragmentData=e=>{var r=e.getData("application/".concat(t))||cH(e);if(r){var o=decodeURIComponent(window.atob(r)),i=JSON.parse(o);return n.insertFragment(i),!0}return!1},n.insertTextData=e=>{var t=e.getData("text/plain");if(t){var r=t.split(/\r\n|\r|\n/),o=!1;for(var i of r)o&&Re.splitNodes(n,{always:!0}),n.insertText(i),o=!0;return!0}return!1},n.onChange=e=>{var t=O6.get(n);t&&t(e),o(e)},n},$d=(e,t)=>{var n=[];for(var[r,o]of F.levels(e,{at:t})){var i=Gt.findKey(e,r);n.push([o,i])}return n},bH=3,kH={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},OH={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},IH={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},Jn=e=>{var t=kH[e],n=OH[e],r=IH[e],o=t&&nn.isHotkey(t),i=n&&nn.isHotkey(n),a=r&&nn.isHotkey(r);return e=>!!(o&&o(e)||_w&&i&&i(e)||!_w&&a&&a(e))},sr={isBold:Jn("bold"),isCompose:Jn("compose"),isMoveBackward:Jn("moveBackward"),isMoveForward:Jn("moveForward"),isDeleteBackward:Jn("deleteBackward"),isDeleteForward:Jn("deleteForward"),isDeleteLineBackward:Jn("deleteLineBackward"),isDeleteLineForward:Jn("deleteLineForward"),isDeleteWordBackward:Jn("deleteWordBackward"),isDeleteWordForward:Jn("deleteWordForward"),isExtendBackward:Jn("extendBackward"),isExtendForward:Jn("extendForward"),isExtendLineBackward:Jn("extendLineBackward"),isExtendLineForward:Jn("extendLineForward"),isItalic:Jn("italic"),isMoveLineBackward:Jn("moveLineBackward"),isMoveLineForward:Jn("moveLineForward"),isMoveWordBackward:Jn("moveWordBackward"),isMoveWordForward:Jn("moveWordForward"),isRedo:Jn("redo"),isSoftBreak:Jn("insertSoftBreak"),isSplitBlock:Jn("splitBlock"),isTransposeCharacter:Jn("transposeCharacter"),isUndo:Jn("undo")};function FH(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&(o[n]=e[n]);return o}function zw(e,t){if(null==e)return{};var n,r,o=FH(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var LH=["anchor","focus"],_H=["anchor","focus"];function Vw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Uw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vw(Object(n),!0).forEach(function(t){o8(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ug,NH=(e,t)=>Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every(n=>t.hasOwnProperty(n)&&e[n]===t[n]),yS=(e,t)=>{var n=zw(e,LH),r=zw(t,_H);return e[y0]===t[y0]&&NH(n,r)},a8=(e,t)=>{if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var r=e[n],o=t[n];if(!Ee.equals(r,o)||!yS(r,o))return!1}return!0},wS=(e,t)=>{if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var r=e[n],o=t[n];if(r.anchor.offset!==o.anchor.offset||r.focus.offset!==o.focus.offset||!yS(r,o))return!1}return!0},HH=(e,t,n)=>{var r=Array.from(t.children,()=>[]);if(0===n.length)return r;var o=Gt.findPath(e,t),i=o.length,a=F.range(e,o),s=new Array(t.children.length),l=t=>{var n=s[t];if(n)return n;var r=F.range(e,[...o,t]);return s[t]=r,r};for(var u of n){var c=Ee.intersection(a,u);if(c)for(var[d,h]=Ee.edges(c),f=d.path[i],p=h.path[i],g=f;g<=p;g++){var m=r[g];if(m){var v=l(g),y=Ee.intersection(v,u);y&&m.push(Uw(Uw({},u),y))}}}return r},$f=[],GH=function(){return $f.some(function(e){return e.activeTargets.length>0})},jH=function(){return $f.some(function(e){return e.skippedTargets.length>0})},Xw="ResizeObserver loop completed with undelivered notifications.",$H=function(){var e;"function"==typeof ErrorEvent?e=new ErrorEvent("error",{message:Xw}):((e=document.createEvent("Event")).initEvent("error",!1,!1),e.message=Xw),window.dispatchEvent(e)};!function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(Ug||(Ug={}));var d5,Wf=function(e){return Object.freeze(e)},WH=function(e,t){this.inlineSize=e,this.blockSize=t,Wf(this)},CS=function(){function e(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Wf(this)}return e.prototype.toJSON=function(){var e=this;return{x:e.x,y:e.y,top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),u8=function(e){return e instanceof SVGElement&&"getBBox"in e},xS=function(e){if(u8(e)){var t=e.getBBox(),n=t.width,r=t.height;return!n&&!r}var o=e,i=o.offsetWidth,a=o.offsetHeight;return!(i||a||e.getClientRects().length)},Kw=function(e){var t;if(e instanceof Element)return!0;var n=null===(t=null==e?void 0:e.ownerDocument)||void 0===t?void 0:t.defaultView;return!!(n&&e instanceof n.Element)},zH=function(e){switch(e.tagName){case"INPUT":if("image"!==e.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Rg=typeof window<"u"?window:{},dm=new WeakMap,Yw=/auto|scroll/,VH=/^tb|vertical/,UH=/msie|trident/i.test(Rg.navigator&&Rg.navigator.userAgent),Oa=function(e){return parseFloat(e||"0")},s0=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=!1),new WH((n?t:e)||0,(n?e:t)||0)},qw=Wf({devicePixelContentBoxSize:s0(),borderBoxSize:s0(),contentBoxSize:s0(),contentRect:new CS(0,0,0,0)}),ES=function(e,t){if(void 0===t&&(t=!1),dm.has(e)&&!t)return dm.get(e);if(xS(e))return dm.set(e,qw),qw;var n=getComputedStyle(e),r=u8(e)&&e.ownerSVGElement&&e.getBBox(),o=!UH&&"border-box"===n.boxSizing,i=VH.test(n.writingMode||""),a=!r&&Yw.test(n.overflowY||""),s=!r&&Yw.test(n.overflowX||""),l=r?0:Oa(n.paddingTop),u=r?0:Oa(n.paddingRight),c=r?0:Oa(n.paddingBottom),d=r?0:Oa(n.paddingLeft),h=r?0:Oa(n.borderTopWidth),f=r?0:Oa(n.borderRightWidth),p=r?0:Oa(n.borderBottomWidth),g=d+u,m=l+c,v=(r?0:Oa(n.borderLeftWidth))+f,y=h+p,b=s?e.offsetHeight-y-e.clientHeight:0,w=a?e.offsetWidth-v-e.clientWidth:0,x=o?g+v:0,C=o?m+y:0,E=r?r.width:Oa(n.width)-x-w,D=r?r.height:Oa(n.height)-C-b,S=E+g+w+v,P=D+m+b+y,T=Wf({devicePixelContentBoxSize:s0(Math.round(E*devicePixelRatio),Math.round(D*devicePixelRatio),i),borderBoxSize:s0(S,P,i),contentBoxSize:s0(E,D,i),contentRect:new CS(d,l,E,D)});return dm.set(e,T),T},PS=function(e,t,n){var r=ES(e,n),o=r.borderBoxSize,i=r.contentBoxSize,a=r.devicePixelContentBoxSize;switch(t){case Ug.DEVICE_PIXEL_CONTENT_BOX:return a;case Ug.BORDER_BOX:return o;default:return i}},XH=function(e){var t=ES(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=Wf([t.borderBoxSize]),this.contentBoxSize=Wf([t.contentBoxSize]),this.devicePixelContentBoxSize=Wf([t.devicePixelContentBoxSize])},SS=function(e){if(xS(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},KH=function(){var e=1/0,t=[];$f.forEach(function(n){if(0!==n.activeTargets.length){var r=[];n.activeTargets.forEach(function(t){var n=new XH(t.target),o=SS(t.target);r.push(n),t.lastReportedSize=PS(t.target,t.observedBox),o<e&&(e=o)}),t.push(function(){n.callback.call(n.observer,r,n.observer)}),n.activeTargets.splice(0,n.activeTargets.length)}});for(var n=0,r=t;n<r.length;n++){(0,r[n])()}return e},Zw=function(e){$f.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(n){n.isActive()&&(SS(n.target)>e?t.activeTargets.push(n):t.skippedTargets.push(n))})})},YH=function(){var e=0;for(Zw(e);GH();)e=KH(),Zw(e);return jH()&&$H(),e>0},TS=[],qH=function(){return TS.splice(0).forEach(function(e){return e()})},ZH=function(e){if(!d5){var t=0,n=document.createTextNode("");new MutationObserver(function(){return qH()}).observe(n,{characterData:!0}),d5=function(){n.textContent="".concat(t?t--:t++)}}TS.push(e),d5()},QH=function(e){ZH(function(){requestAnimationFrame(e)})},$m=0,JH=function(){return!!$m},eG=250,tG={attributes:!0,characterData:!0,childList:!0,subtree:!0},Qw=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Jw=function(e){return void 0===e&&(e=0),Date.now()+e},g5=!1,nG=function(){function e(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return e.prototype.run=function(e){var t=this;if(void 0===e&&(e=eG),!g5){g5=!0;var n=Jw(e);QH(function(){var r=!1;try{r=YH()}finally{if(g5=!1,e=n-Jw(),!JH())return;r?t.run(1e3):e>0?t.run(e):t.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,tG)};document.body?t():Rg.addEventListener("DOMContentLoaded",t)},e.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Qw.forEach(function(t){return Rg.addEventListener(t,e.listener,!0)}))},e.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),Qw.forEach(function(t){return Rg.removeEventListener(t,e.listener,!0)}),this.stopped=!0)},e}(),L6=new nG,eC=function(e){!$m&&e>0&&L6.start(),!($m+=e)&&L6.stop()},rG=function(e){return!u8(e)&&!zH(e)&&"inline"===getComputedStyle(e).display},iG=function(){function e(e,t){this.target=e,this.observedBox=t||Ug.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var e=PS(this.target,this.observedBox,!0);return rG(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},e}(),oG=function(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t},gm=new WeakMap,tC=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},pm=function(){function e(){}return e.connect=function(e,t){var n=new oG(e,t);gm.set(e,n)},e.observe=function(e,t,n){var r=gm.get(e),o=0===r.observationTargets.length;tC(r.observationTargets,t)<0&&(o&&$f.push(r),r.observationTargets.push(new iG(t,n&&n.box)),eC(1),L6.schedule())},e.unobserve=function(e,t){var n=gm.get(e),r=tC(n.observationTargets,t),o=1===n.observationTargets.length;r>=0&&(o&&$f.splice($f.indexOf(n),1),n.observationTargets.splice(r,1),eC(-1))},e.disconnect=function(e){var t=this,n=gm.get(e);n.observationTargets.slice().forEach(function(n){return t.unobserve(e,n.target)}),n.activeTargets.splice(0,n.activeTargets.length)},e}(),sG=function(){function e(e){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof e)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");pm.connect(this,e)}return e.prototype.observe=function(e,t){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Kw(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");pm.observe(this,e,t)},e.prototype.unobserve=function(e){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Kw(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");pm.unobserve(this,e)},e.prototype.disconnect=function(){pm.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}(),l8=EE();const aG=vc(l8);function uG(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&(o[n]=e[n]);return o}function g3(e,t){if(null==e)return{};var n,r,o=uG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Xg(e){return(Xg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lG(e,t){if("object"!==Xg(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!==Xg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function cG(e){var t=lG(e,"string");return"symbol"===Xg(t)?t:String(t)}function er(e,t,n){return(t=cG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c8=j.createContext(null),Ja=()=>{var e=j.useContext(c8);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},ze=Gt;function nC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function mm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nC(Object(n),!0).forEach(function(t){er(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var fG=25,hG=200,dG=function(){},gG=e=>"DataTransfer"===(null==e?void 0:e.constructor.name);function pG(e){var{editor:t,scheduleOnDOMSelectionChange:n,onDOMSelectionChange:r}=e,o=!1,i=null,a=null,s=null,l=0,u=!1,c=()=>{var e=Ql.get(t);if(Ql.delete(t),e){var{selection:n}=t,r=Nw(t,e);r&&(!n||!Ee.equals(r,n))&&Re.select(t,r)}},d=()=>{if(a&&(clearTimeout(a),a=null),s&&(clearTimeout(s),s=null),m()||g()){o||(o=!0,setTimeout(()=>o=!1)),g()&&(o="action");var e=t.selection&&F.rangeRef(t,t.selection,{affinity:"forward"});Hu.set(t,t.marks),dG("flush",Zl.get(t),ho.get(t));for(var i,l=m();i=null===(d=ho.get(t))||void 0===d?void 0:d[0];){var d,h,f=ia.get(t);void 0!==f&&(ia.delete(t),t.marks=f),f&&!1===u&&(u=null);var p=AH(i);(!t.selection||!Ee.equals(t.selection,p))&&Re.select(t,p),i.diff.text?F.insertText(t,i.diff.text):F.deleteFragment(t),ho.set(t,null===(h=ho.get(t))||void 0===h?void 0:h.filter(e=>{var{id:t}=e;return t!==i.id})),PH(t,i)||(l=!1,Zl.delete(t),Hu.delete(t),o="action",Ql.delete(t),n.cancel(),r.cancel(),null==e||e.unref())}var v=null==e?void 0:e.unref();if(v&&!Ql.get(t)&&(!t.selection||!Ee.equals(v,t.selection))&&Re.select(t,v),g())(()=>{var e=Zl.get(t);if(Zl.delete(t),e){if(e.at){var n=pn.isPoint(e.at)?I6(t,e.at):Nw(t,e.at);if(!n)return;var r=F.range(t,n);(!t.selection||!Ee.equals(t.selection,r))&&Re.select(t,n)}e.run()}})();else{l&&n(),n.flush(),r.flush(),c();var y=Hu.get(t);Hu.delete(t),void 0!==y&&(t.marks=y,t.onChange())}}else c()},h=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=b6.get(t);if(n){if(m()||e)return void(n.style.display="none");n.style.removeProperty("display")}},f=(e,n)=>{var r,o=null!==(r=ho.get(t))&&void 0!==r?r:[];ho.set(t,o);var i=Ke.leaf(t,e),a=o.findIndex(t=>K.equals(t.path,e));if(a<0)return vS(i.text,n)&&o.push({path:e,diff:n,id:l++}),void h();var s=DH(i.text,o[a].diff,n);if(!s)return o.splice(a,1),void h();o[a]=mm(mm({},o[a]),{},{diff:s})},p=function(e){var{at:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u=!1,Ql.delete(t),n.cancel(),r.cancel(),g()&&d(),Zl.set(t,{at:o,run:e}),s=setTimeout(d)},g=()=>!!Zl.get(t),m=()=>{var e;return!(null===(e=ho.get(t))||void 0===e||!e.length)},v=e=>{Ql.set(t,e),a&&(clearTimeout(a),a=null);var{selection:n}=t;if(e){var r=!n||!K.equals(n.anchor.path,e.anchor.path),o=!n||!K.equals(n.anchor.path.slice(0,-1),e.anchor.path.slice(0,-1));(r&&u||o)&&(u=!1),(r||m())&&(a=setTimeout(d,hG))}},y=()=>{g()||(s=setTimeout(d))};return{flush:d,scheduleFlush:y,hasPendingDiffs:m,hasPendingAction:g,hasPendingChanges:()=>g()||m(),isFlushing:()=>o,handleUserSelect:v,handleCompositionEnd:e=>{i&&clearTimeout(i),i=setTimeout(()=>{Ff.set(t,!1),d()},fG)},handleCompositionStart:e=>{Ff.set(t,!0),i&&(clearTimeout(i),i=null)},handleDOMBeforeInput:e=>{var n;if(a&&(clearTimeout(a),a=null),!o0.get(t)){var{inputType:r}=e,o=null,i=e.dataTransfer||e.data||void 0;!1!==u&&"insertText"!==r&&"insertCompositionText"!==r&&(u=!1);var[s]=e.getTargetRanges();s&&(o=ze.toSlateRange(t,s,{exactMatch:!1,suppressThrow:!0}));var l=ze.getWindow(t).getSelection();if(!o&&l&&(s=l,o=ze.toSlateRange(t,l,{exactMatch:!1,suppressThrow:!0})),o=null!==(n=o)&&void 0!==n?n:t.selection){var c=!0;if(r.startsWith("delete")){if(Ee.isExpanded(o)){var[d,h]=Ee.edges(o);if(Ke.leaf(t,d.path).text.length===d.offset&&0===h.offset){var g=F.next(t,{at:d.path,match:ot.isText});g&&K.equals(g[1],h.path)&&(o={anchor:h,focus:h})}}var m=r.endsWith("Backward")?"backward":"forward",[b,w]=Ee.edges(o),[x,C]=F.leaf(t,b.path),E={text:"",start:b.offset,end:w.offset},D=ho.get(t),S=null==D?void 0:D.find(e=>K.equals(e.path,C)),P=S?[S.diff,E]:[E];if(0===mS(x.text,...P).length&&(c=!1),Ee.isExpanded(o)){if(c&&K.equals(o.anchor.path,o.focus.path)){var T={path:o.anchor.path,offset:b.offset},A=F.range(t,T,T);return v(A),f(o.anchor.path,{text:"",end:w.offset,start:b.offset})}return p(()=>F.deleteFragment(t,{direction:m}),{at:o})}}switch(r){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return p(()=>F.deleteFragment(t),{at:o});case"deleteContent":case"deleteContentForward":var{anchor:M}=o;if(c&&Ee.isCollapsed(o)){var k=Ke.leaf(t,M.path);if(M.offset<k.text.length)return f(M.path,{text:"",start:M.offset,end:M.offset+1})}return p(()=>F.deleteForward(t),{at:o});case"deleteContentBackward":var B,{anchor:I}=o,R=M6(s)?s.isCollapsed:!(null===(B=s)||void 0===B||!B.collapsed);return c&&R&&Ee.isCollapsed(o)&&I.offset>0?f(I.path,{text:"",start:I.offset-1,end:I.offset}):p(()=>F.deleteBackward(t),{at:o});case"deleteEntireSoftLine":return p(()=>{F.deleteBackward(t,{unit:"line"}),F.deleteForward(t,{unit:"line"})},{at:o});case"deleteHardLineBackward":return p(()=>F.deleteBackward(t,{unit:"block"}),{at:o});case"deleteSoftLineBackward":return p(()=>F.deleteBackward(t,{unit:"line"}),{at:o});case"deleteHardLineForward":return p(()=>F.deleteForward(t,{unit:"block"}),{at:o});case"deleteSoftLineForward":return p(()=>F.deleteForward(t,{unit:"line"}),{at:o});case"deleteWordBackward":return p(()=>F.deleteBackward(t,{unit:"word"}),{at:o});case"deleteWordForward":return p(()=>F.deleteForward(t,{unit:"word"}),{at:o});case"insertLineBreak":return p(()=>F.insertSoftBreak(t),{at:o});case"insertParagraph":return p(()=>F.insertBreak(t),{at:o});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":if(gG(i))return p(()=>ze.insertData(t,i),{at:o});var _=i??"";if(ia.get(t)&&(_=_.replace("\ufeff","")),"insertText"===r&&/.*\n.*\n$/.test(_)&&(_=_.slice(0,-1)),_.includes("\n"))return p(()=>{var e=_.split("\n");e.forEach((n,r)=>{n&&F.insertText(t,n),r!==e.length-1&&F.insertSoftBreak(t)})},{at:o});if(K.equals(o.anchor.path,o.focus.path)){var[O,L]=Ee.edges(o),j={start:O.offset,end:L.offset,text:_};if(_&&u&&"insertCompositionText"===r){var N=u.start+u.text.search(/\S|$/);j.start+j.text.search(/\S|$/)===N+1&&j.end===u.start+u.text.length?(j.start-=1,u=null,y()):u=!1}else u="insertText"===r&&(null===u?j:!(!u||!Ee.isCollapsed(o)||u.end+u.text.length!==O.offset)&&mm(mm({},u),{},{text:u.text+_}));if(c)return void f(O.path,j)}return p(()=>F.insertText(t,_),{at:o})}}}},handleKeyDown:e=>{m()||(h(!0),setTimeout(h))},handleDomMutations:e=>{var n;m()||g()||!e.some(n=>i8(t,n,e))||(null===(n=gS.get(t))||void 0===n||n())},handleInput:()=>{(g()||!m())&&d()}}}function mG(){var e=j.useRef(!1);return j.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),e.current}var Yu=Gm?j.useLayoutEffect:j.useEffect;function vG(e,t,n){var[r]=j.useState(()=>new MutationObserver(t));Yu(()=>{r.takeRecords()}),j.useEffect(()=>{if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return r.observe(e.current,n),()=>r.disconnect()},[r,e,n])}var yG=["node"];function rC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function wG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rC(Object(n),!0).forEach(function(t){er(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var CG={subtree:!0,childList:!0,characterData:!0},xG=Hi?e=>{var{node:t}=e,n=g3(e,yG);if(!Hi)return null;var r=Ja(),o=mG(),[i]=j.useState(()=>pG(wG({editor:r},n)));return vG(t,i.handleDomMutations,CG),s8.set(r,i.scheduleFlush),o&&i.flush(),i}:()=>null;function iC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function EG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iC(Object(n),!0).forEach(function(t){er(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var PG=e=>{var{isLast:t,leaf:n,parent:r,text:o}=e,i=Ja(),a=ze.findPath(i,o),s=K.parent(a),l=!!n[pS];return i.isVoid(r)?xt.createElement(p5,{length:Ke.string(r).length}):""!==n.text||r.children[r.children.length-1]!==o||i.isInline(r)||""!==F.string(i,s)?""===n.text?xt.createElement(p5,{isMarkPlaceholder:l}):t&&"\n"===n.text.slice(-1)?xt.createElement(oC,{isTrailing:!0,text:n.text}):xt.createElement(oC,{text:n.text}):xt.createElement(p5,{isLineBreak:!0,isMarkPlaceholder:l})},oC=e=>{var{text:t,isTrailing:n=!1}=e,r=j.useRef(null),o=()=>"".concat(t??"").concat(n?"\n":""),[i]=j.useState(o);return Yu(()=>{var e=o();r.current&&r.current.textContent!==e&&(r.current.textContent=e)}),xt.createElement(SG,{ref:r},i)},SG=j.memo(j.forwardRef((e,t)=>xt.createElement("span",{"data-slate-string":!0,ref:t},e.children))),p5=e=>{var{length:t=0,isLineBreak:n=!1,isMarkPlaceholder:r=!1}=e,o={"data-slate-zero-width":n?"n":"z","data-slate-length":t};return r&&(o["data-slate-mark-placeholder"]=!0),xt.createElement("span",EG({},o),Hi&&n?null:"\ufeff",n?xt.createElement("br",null):null)};function sC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function DS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sC(Object(n),!0).forEach(function(t){er(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var TG=Hi?300:0;function DG(e,t){e.current&&(e.current.disconnect(),t&&(e.current=null))}function aC(e){e.current&&(clearTimeout(e.current),e.current=null)}var AG=e=>xt.createElement(MG,DS({},e)),BG=e=>{var{leaf:t,isLast:n,text:r,parent:o,renderPlaceholder:i,renderLeaf:a=AG,leafPosition:s}=e,l=Ja(),u=j.useRef(null),c=j.useRef(null),[d,h]=j.useState(!1),f=j.useRef(null),p=j.useCallback(e=>{if(DG(u,null==e),null==e){var n;b6.delete(l),null===(n=t.onPlaceholderResize)||void 0===n||n.call(t,null)}else{if(b6.set(l,e),!u.current){var r=window.ResizeObserver||sG;u.current=new r(()=>{var n;null===(n=t.onPlaceholderResize)||void 0===n||n.call(t,e)})}u.current.observe(e),c.current=e}},[c,t,l]),g=xt.createElement(PG,{isLast:n,leaf:t,parent:o,text:r}),m=!!t[y0];if(j.useEffect(()=>(m?f.current||(f.current=setTimeout(()=>{h(!0),f.current=null},TG)):(aC(f),h(!1)),()=>aC(f)),[m,h]),m&&d){var v={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:bf?"inherit":void 0},contentEditable:!1,ref:p}};g=xt.createElement(xt.Fragment,null,g,i(v))}return a({attributes:{"data-slate-leaf":!0},children:g,leaf:t,text:r,leafPosition:s})},RG=xt.memo(BG,(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&ot.equals(t.leaf,e.leaf)&&t.leaf[y0]===e.leaf[y0]),MG=e=>{var{attributes:t,children:n}=e;return xt.createElement("span",DS({},t),n)};function bG(e,t){var n,[,r]=j.useReducer(e=>e+1,0),o=j.useRef(),i=j.useRef(()=>null),a=j.useRef(null);try{if(e!==i.current||o.current){var s=e();n=t(a.current,s)?a.current:s}else n=a.current}catch(e){throw o.current&&kG(e)&&(e.message+="\nThe error may be correlated with this previous error:\n".concat(o.current.stack,"\n\n")),e}return i.current=e,a.current=n,o.current=void 0,[n,j.useCallback(()=>{try{var e=i.current();if(t(a.current,e))return;a.current=e}catch(e){e instanceof Error?o.current=e:o.current=new Error(String(e))}r()},[])]}function kG(e){return e instanceof Error}var AS=j.createContext({}),BS=(e,t)=>{var n=Ja(),{decorate:r,addEventListener:o}=j.useContext(AS),i=ot.isText(e)?wS:a8,[a,s]=bG(()=>{var t=ze.findPath(n,e);return r([e,t])},i);return Yu(()=>{var e=o(s);return s(),e},[o,s]),j.useMemo(()=>[...a,...t],[a,t])},OG=e=>{var t=j.useRef(new Set),n=j.useRef(e);Yu(()=>{n.current=e,t.current.forEach(e=>e())},[e]);var r=j.useCallback(e=>n.current(e),[]),o=j.useCallback(e=>(t.current.add(e),()=>{t.current.delete(e)}),[]);return j.useMemo(()=>({decorate:r,addEventListener:o}),[r,o])};function uC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function RS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uC(Object(n),!0).forEach(function(t){er(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var IG=e=>xt.createElement(LG,RS({},e)),FG=e=>{for(var{decorations:t,isLast:n,parent:r,renderPlaceholder:o,renderLeaf:i,renderText:a=IG,text:s}=e,l=Ja(),u=j.useRef(null),c=BS(s,t),d=ot.decorations(s,c),h=ze.findKey(l,s),f=[],p=0;p<d.length;p++){var{leaf:g,position:m}=d[p];f.push(xt.createElement(RG,{isLast:n&&p===d.length-1,key:"".concat(h.id,"-").concat(p),renderPlaceholder:o,leaf:g,leafPosition:m,text:s,parent:r,renderLeaf:i}))}var v=j.useCallback(e=>{var t=sv.get(l);e?(null==t||t.set(h,e),jf.set(s,e),Vg.set(e,s)):(null==t||t.delete(h),jf.delete(s),u.current&&Vg.delete(u.current)),u.current=e},[u,l,h,s]);return a({text:s,children:f,attributes:{"data-slate-node":"text",ref:v}})},MS=xt.memo(FG,(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderText===e.renderText&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&wS(t.decorations,e.decorations)),LG=e=>{var{attributes:t,children:n}=e;return xt.createElement("span",RS({},t),n)};function lC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lC(Object(n),!0).forEach(function(t){er(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var _G=e=>xt.createElement(GG,_6({},e)),NG=e=>{var{decorations:t,element:n,renderElement:r=_G,renderChunk:o,renderPlaceholder:i,renderLeaf:a,renderText:s}=e,l=Ja(),u=qG(),c=l.isInline(n),d=BS(n,t),h=ze.findKey(l,n),f=j.useCallback(e=>{var t=sv.get(l);e?(null==t||t.set(h,e),jf.set(n,e),Vg.set(e,n)):(null==t||t.delete(h),jf.delete(n))},[l,h,n]),p=OS({decorations:d,node:n,renderElement:r,renderChunk:o,renderPlaceholder:i,renderLeaf:a,renderText:s}),g={"data-slate-node":"element",ref:f};if(c&&(g["data-slate-inline"]=!0),!c&&F.hasInlines(l,n)){var m=Ke.string(n),v=sS(m);"rtl"===v&&(g.dir=v)}if(F.isVoid(l,n)){g["data-slate-void"]=!0,!u&&c&&(g.contentEditable=!1);var y=c?"span":"div",[[b]]=Ke.texts(n);p=xt.createElement(y,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},xt.createElement(MS,{renderPlaceholder:i,decorations:[],isLast:!1,parent:n,text:b})),Qd.set(b,0),Ag.set(b,n)}return r({attributes:g,children:p,element:n})},HG=xt.memo(NG,(e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderChunk===t.renderChunk&&e.renderText===t.renderText&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&a8(e.decorations,t.decorations)),GG=e=>{var{attributes:t,children:n,element:r}=e,o=Ja().isInline(r)?"span":"div";return xt.createElement(o,_6(_6({},t),{},{style:{position:"relative"}}),n)};class jG{constructor(e,t){var{chunkSize:n,debug:r}=t;er(this,"root",void 0),er(this,"chunkSize",void 0),er(this,"debug",void 0),er(this,"reachedEnd",void 0),er(this,"pointerChunk",void 0),er(this,"pointerIndex",void 0),er(this,"pointerIndexStack",void 0),er(this,"cachedPointerNode",void 0),this.root=e,this.chunkSize=n,this.debug=r??!1,this.pointerChunk=e,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.validateState()}readLeaf(){if(this.reachedEnd)return null;for(;;){if(this.pointerIndex+1<this.pointerSiblings.length){this.pointerIndex++,this.cachedPointerNode=void 0;break}if("root"===this.pointerChunk.type)return this.reachedEnd=!0,null;this.exitChunk()}return this.validateState(),this.enterChunkUntilLeaf(!1),this.pointerNode}returnToPreviousLeaf(){if(this.reachedEnd)return this.reachedEnd=!1,void this.enterChunkUntilLeaf(!0);for(;;){if(this.pointerIndex>=1){this.pointerIndex--,this.cachedPointerNode=void 0;break}if("root"===this.pointerChunk.type)return void(this.pointerIndex=-1);this.exitChunk()}this.validateState(),this.enterChunkUntilLeaf(!0)}insertBefore(e){this.returnToPreviousLeaf(),this.insertAfter(e),this.readLeaf()}insertAfter(e){if(0!==e.length){for(var t=0,n=0;"chunk"===this.pointerChunk.type&&this.pointerIndex===this.pointerSiblings.length-1;){var r=this.chunkSize-this.pointerSiblings.length,o=Math.min(r,e.length);if(o>0){var i=e.splice(0,o);this.rawInsertAfter(i,t)}this.exitChunk(),t++}if(0!==e.length){var a=this.savePointer(),s=null;if(this.readLeaf())for(;"chunk"===this.pointerChunk.type&&0===this.pointerIndex;){var l=this.chunkSize-this.pointerSiblings.length,u=Math.min(l,e.length);if(u>0){var c=e.splice(-u,u);this.pointerIndex=-1,this.cachedPointerNode=void 0,this.rawInsertAfter(c,n),s||(s=this.savePointer())}this.exitChunk(),n++}this.restorePointer(a);var d=Math.max(t,n);this.rawInsertAfter(e,d),s&&this.restorePointer(s),this.validateState()}}}remove(){this.pointerSiblings.splice(this.pointerIndex--,1),this.cachedPointerNode=void 0,0===this.pointerSiblings.length&&"chunk"===this.pointerChunk.type?(this.exitChunk(),this.remove()):this.invalidateChunk(),this.validateState()}invalidateChunk(){for(var e=this.pointerChunk;"chunk"===e.type;e=e.parent)this.root.modifiedChunks.add(e)}get atStart(){return"root"===this.pointerChunk.type&&-1===this.pointerIndex}get pointerSiblings(){return this.pointerChunk.children}getPointerNode(){return this.reachedEnd||-1===this.pointerIndex?null:this.pointerSiblings[this.pointerIndex]}get pointerNode(){if(void 0!==this.cachedPointerNode)return this.cachedPointerNode;var e=this.getPointerNode();return this.cachedPointerNode=e,e}getChunkPath(e){for(var t=[],n=e;"chunk"===n.type;n=n.parent){var r=n.parent.children.indexOf(n);if(-1===r)return null;t.unshift(r)}return t}savePointer(){if(this.atStart)return"start";if(!this.pointerNode)throw new Error("Cannot save pointer when pointerNode is null");return{chunk:this.pointerChunk,node:this.pointerNode}}restorePointer(e){if("start"===e)return this.pointerChunk=this.root,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,void(this.cachedPointerNode=void 0);var{chunk:t,node:n}=e,r=t.children.indexOf(n);if(-1===r)throw new Error("Cannot restore point because saved node is no longer in saved chunk");var o=this.getChunkPath(t);if(!o)throw new Error("Cannot restore point because saved chunk is no longer connected to root");this.pointerChunk=t,this.pointerIndex=r,this.pointerIndexStack=o,this.reachedEnd=!1,this.cachedPointerNode=n,this.validateState()}enterChunk(e){var t;if("chunk"!==(null===(t=this.pointerNode)||void 0===t?void 0:t.type))throw new Error("Cannot enter non-chunk");if(this.pointerIndexStack.push(this.pointerIndex),this.pointerChunk=this.pointerNode,this.pointerIndex=e?this.pointerSiblings.length-1:0,this.cachedPointerNode=void 0,this.validateState(),0===this.pointerChunk.children.length)throw new Error("Cannot enter empty chunk")}enterChunkUntilLeaf(e){for(;"chunk"===(null===(t=this.pointerNode)||void 0===t?void 0:t.type);){var t;this.enterChunk(e)}}exitChunk(){if("root"===this.pointerChunk.type)throw new Error("Cannot exit root");var e=this.pointerChunk;this.pointerChunk=e.parent,this.pointerIndex=this.pointerIndexStack.pop(),this.cachedPointerNode=void 0,this.validateState()}rawInsertAfter(e,t){if(0!==e.length){for(var n=(e,t,r)=>{if(1===r)return e;for(var o=[],i=0;i<this.chunkSize;i++){var a=e.slice(i*r,(i+1)*r);if(0===a.length)break;var s={type:"chunk",key:new hS,parent:t,children:[]};s.children=n(a,s,r/this.chunkSize),o.push(s)}return o},r=this.pointerSiblings.length+e.length,o=0,i=this.chunkSize;i<r;i*=this.chunkSize)o++;var a=Math.max(o,t),s=Math.pow(this.chunkSize,a),l=n(e,this.pointerChunk,s);this.pointerSiblings.splice(this.pointerIndex+1,0,...l),this.pointerIndex+=l.length,this.cachedPointerNode=void 0,this.invalidateChunk(),this.validateState()}}validateState(){if(this.debug){var e=t=>{if("chunk"===t.type){var{parent:n,children:r}=t;if(!n.children.includes(t))throw new Error("Debug: Chunk ".concat(t.key.id," has an incorrect parent property"));r.forEach(e)}};if(this.root.children.forEach(e),void 0!==this.cachedPointerNode&&this.cachedPointerNode!==this.getPointerNode())throw new Error("Debug: The cached pointer is incorrect and has not been invalidated");var t=this.getChunkPath(this.pointerChunk);if(!t)throw new Error("Debug: The pointer chunk is not connected to the root");if(!K.equals(this.pointerIndexStack,t))throw new Error("Debug: The cached index stack [".concat(this.pointerIndexStack.join(", "),"] does not match the path of the pointer chunk [").concat(t.join(", "),"]"))}}}class $G{constructor(e,t){er(this,"editor",void 0),er(this,"children",void 0),er(this,"cachedKeys",void 0),er(this,"pointerIndex",void 0),this.editor=e,this.children=t,this.cachedKeys=new Array(t.length),this.pointerIndex=0}read(e){if(1===e)return[this.children[this.pointerIndex++]];var t=this.remaining(e);return this.pointerIndex+=e,t}remaining(e){return void 0===e?this.children.slice(this.pointerIndex):this.children.slice(this.pointerIndex,this.pointerIndex+e)}get reachedEnd(){return this.pointerIndex>=this.children.length}lookAhead(e,t){var n=this.children.indexOf(e,this.pointerIndex);if(n>-1)return n-this.pointerIndex;for(var r=this.pointerIndex;r<this.children.length;r++){var o=this.children[r];if(this.findKey(o,r)===t)return r-this.pointerIndex}return-1}toChunkLeaves(e,t){return e.map((e,n)=>({type:"leaf",node:e,key:this.findKey(e,t+n),index:t+n}))}findKey(e,t){var n=this.cachedKeys[t];if(n)return n;var r=ze.findKey(this.editor,e);return this.cachedKeys[t]=r,r}}var WG=(e,t)=>{var{chunkTree:n,children:r,chunkSize:o,rerenderChildren:i=[],onInsert:a,onUpdate:s,onIndexChange:l,debug:u}=t;n.modifiedChunks.clear();for(var c,d=new jG(n,{chunkSize:o,debug:u}),h=new $G(e,r),f=function(){var e=h.lookAhead(c.node,c.key),t=e>0&&n.movedNodeKeys.has(c.key);if(-1===e||t)return d.remove(),1;var r=h.pointerIndex,o=h.read(e+1),u=o.pop();if(o.length){var f=h.toChunkLeaves(o,r);d.insertBefore(f),o.forEach((e,t)=>{null==a||a(e,r+t)})}var p=h.pointerIndex-1;c.node!==u&&(c.node=u,d.invalidateChunk(),null==s||s(u,p)),c.index!==p&&(c.index=p,null==l||l(u,p)),i.includes(p)&&d.invalidateChunk()};c=d.readLeaf();)f();if(!h.reachedEnd){var p=h.remaining(),g=h.toChunkLeaves(p,h.pointerIndex);d.returnToPreviousLeaf(),d.insertAfter(g),p.forEach((e,t)=>{null==a||a(e,h.pointerIndex+t)})}n.movedNodeKeys.clear()};function cC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function zG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cC(Object(n),!0).forEach(function(t){er(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var fC=new WeakMap,bS=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=ze.findKey(e,t),o=fC.get(r);return o||(o={type:"root",movedNodeKeys:new Set,modifiedChunks:new Set,children:[]},fC.set(r,o)),n.reconcile&&WG(e,zG({chunkTree:o,children:t.children},n.reconcile)),o},VG=e=>{var{children:t}=e;return t},kS=e=>{var{root:t,ancestor:n,renderElement:r,renderChunk:o=VG}=e;return n.children.map(e=>{if("chunk"===e.type){var i=e.key.id,a=o({highest:n===t,lowest:e.children.some(e=>"leaf"===e.type),attributes:{"data-slate-chunk":!0},children:xt.createElement(XG,{root:t,ancestor:e,renderElement:r,renderChunk:o})});return xt.createElement(j.Fragment,{key:i},a)}var s=e.node;return r(s,e.index,e.key)})},UG=kS,XG=xt.memo(kS,(e,t)=>e.root===t.root&&e.renderElement===t.renderElement&&e.renderChunk===t.renderChunk&&!t.root.modifiedChunks.has(t.ancestor)),KG=j.createContext(null),OS=e=>{var{decorations:t,node:n,renderElement:r,renderChunk:o,renderPlaceholder:i,renderText:a,renderLeaf:s}=e,l=Ja();o0.set(l,!1);var u=!F.isEditor(n)&&ut.isElement(n)&&!l.isInline(n)&&F.hasInlines(l,n)?null:l.getChunkSize(n),c=!!u,{decorationsByChild:d,childrenToRedecorate:h}=YG(l,n,t);c||n.children.forEach((e,t)=>{Qd.set(e,t),Ag.set(e,n)});var f=j.useCallback((e,t,n)=>{var u=n??ze.findKey(l,e);return xt.createElement(KG.Provider,{key:"provider-".concat(u.id),value:e},xt.createElement(HG,{decorations:d[t],element:e,key:u.id,renderElement:r,renderChunk:o,renderPlaceholder:i,renderLeaf:s,renderText:a}))},[l,d,r,o,i,s,a]);if(!c)return n.children.map((e,t)=>ot.isText(e)?((e,t)=>{var r=ze.findKey(l,e);return xt.createElement(MS,{decorations:d[t],key:r.id,isLast:t===n.children.length-1,parent:n,renderPlaceholder:i,renderLeaf:s,renderText:a,text:e})})(e,t):f(e,t));var p=bS(l,n,{reconcile:{chunkSize:u,rerenderChildren:h,onInsert:(e,t)=>{Qd.set(e,t),Ag.set(e,n)},onUpdate:(e,t)=>{Qd.set(e,t),Ag.set(e,n)},onIndexChange:(e,t)=>{Qd.set(e,t)}}});return xt.createElement(UG,{root:p,ancestor:p,renderElement:f,renderChunk:o})},YG=(e,t,n)=>{var r=HH(e,t,n),o=j.useRef(r).current,i=[];o.length=r.length;for(var a=0;a<r.length;a++){var s,l=r[a],u=null!==(s=o[a])&&void 0!==s?s:null;a8(u,l)||(o[a]=l,i.push(a))}return{decorationsByChild:o,childrenToRedecorate:i}},IS=j.createContext(!1),qG=()=>j.useContext(IS),f8=j.createContext({});function ZG(){var e=j.useRef(new Set),t=j.useRef(new Set),n=j.useCallback(()=>{e.current.forEach(e=>e())},[]),r=j.useCallback(()=>{t.current.forEach(e=>e()),t.current.clear()},[]),o=j.useCallback(function(n){var{deferred:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r?()=>t.current.add(n):n;return e.current.add(o),()=>{e.current.delete(o)}},[]);return{selectorContext:j.useMemo(()=>({addEventListener:o,flushDeferred:r}),[o,r]),onChange:n}}function QG(){var{flushDeferred:e}=j.useContext(f8);Yu(e)}var JG=()=>{var{addEventListener:e}=j.useContext(f8),[,t]=j.useReducer(e=>e+1,0);if(!e)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");return Yu(()=>e(t),[e]),Ja()};function ej(){var e=Ja(),t=j.useRef(!1),n=j.useRef(0),r=j.useCallback(()=>{if(!t.current){t.current=!0;var r=ze.getWindow(e);r.cancelAnimationFrame(n.current),n.current=r.requestAnimationFrame(()=>{t.current=!1})}},[e]);return j.useEffect(()=>()=>cancelAnimationFrame(n.current),[]),{receivedUserInput:t,onUserInput:r}}var tj=(e,t)=>{var n=[],r=()=>{n=[]};return{registerMutations:r=>{if(t.current){var o=r.filter(t=>i8(e,t,r));n.push(...o)}},restoreDOM:function(){n.length>0&&(n.reverse().forEach(e=>{"characterData"!==e.type&&(e.removedNodes.forEach(t=>{e.target.insertBefore(t,e.nextSibling)}),e.addedNodes.forEach(t=>{e.target.removeChild(t)}))}),r())},clear:r}},nj={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class FS extends j.Component{constructor(){super(...arguments),er(this,"context",null),er(this,"manager",null),er(this,"mutationObserver",null)}observe(){var e,{node:t}=this.props;if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");null===(e=this.mutationObserver)||void 0===e||e.observe(t.current,nj)}componentDidMount(){var{receivedUserInput:e}=this.props,t=this.context;this.manager=tj(t,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,t,n,r,o=null===(e=this.mutationObserver)||void 0===e?void 0:e.takeRecords();null!=o&&o.length&&(null===(r=this.manager)||void 0===r||r.registerMutations(o));return null===(t=this.mutationObserver)||void 0===t||t.disconnect(),null===(n=this.manager)||void 0===n||n.restoreDOM(),null}componentDidUpdate(){var e;null===(e=this.manager)||void 0===e||e.clear(),this.observe()}componentWillUnmount(){var e;null===(e=this.mutationObserver)||void 0===e||e.disconnect()}render(){return this.props.children}}er(FS,"contextType",c8);var rj=Hi?FS:e=>{var{children:t}=e;return xt.createElement(xt.Fragment,null,t)},ij=j.createContext(!1),oj=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderChunk","renderLeaf","renderText","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],sj=["text"];function hC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function La(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hC(Object(n),!0).forEach(function(t){er(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var aj=e=>xt.createElement(xt.Fragment,null,OS(e)),uj=j.forwardRef((e,t)=>{var n=j.useCallback(e=>xt.createElement(lj,La({},e)),[]),{autoFocus:r,decorate:o=cj,onDOMBeforeInput:i,placeholder:a,readOnly:s=!1,renderElement:l,renderChunk:u,renderLeaf:c,renderText:d,renderPlaceholder:h=n,scrollSelectionIntoView:f=fj,style:p={},as:g="div",disableDefaultStyles:m=!1}=e,v=g3(e,oj),y=JG(),[b,w]=j.useState(!1),x=j.useRef(null),C=j.useRef([]),[E,D]=j.useState(),S=j.useRef(!1),{onUserInput:P,receivedUserInput:T}=ej(),[,A]=j.useReducer(e=>e+1,0);gS.set(y,A),k6.set(y,s);var M=j.useMemo(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);j.useEffect(()=>{x.current&&r&&x.current.focus()},[r]);var k=j.useRef(),B=j.useMemo(()=>DL(()=>{if(o0.get(y))B();else{var e=ze.toDOMNode(y,y).getRootNode();if(!S.current&&bf&&e instanceof ShadowRoot)return S.current=!0,fH()?document.execCommand("indent"):Re.deselect(y),void(S.current=!1);var t=k.current;if((Hi||!ze.isComposing(y))&&(!M.isUpdatingSelection||null!=t&&t.isFlushing())&&!M.isDraggingInternally){var n=ze.findDocumentOrShadowRoot(y),{activeElement:r}=n,o=ze.toDOMNode(y,y),i=Dg(n);if(r===o?(M.latestElement=r,tc.set(y,!0)):tc.delete(y),!i)return Re.deselect(y);var{anchorNode:a,focusNode:l}=i,u=ze.hasEditableTarget(y,a)||ze.isTargetInsideNonReadonlyVoid(y,a),c=ze.hasTarget(y,l);if(u&&c){var d=ze.toSlateRange(y,i,{exactMatch:!1,suppressThrow:!0});d&&(ze.isComposing(y)||null!=t&&t.hasPendingChanges()||null!=t&&t.isFlushing()?null==t||t.handleUserSelect(d):Re.select(y,d))}s&&(!u||!c)&&Re.deselect(y)}}},100),[y,s,M]),I=j.useMemo(()=>EL(B,0),[B]);k.current=xG({node:x,onDOMSelectionChange:B,scheduleOnDOMSelectionChange:I}),Yu(()=>{var e,t,n;x.current&&(n=r8(x.current))?(dS.set(y,n),jm.set(y,x.current),jf.set(y,x.current),Vg.set(x.current,y)):jf.delete(y);var{selection:r}=y,o=ze.findDocumentOrShadowRoot(y),i=Dg(o);if(i&&ze.isFocused(y)&&(null===(e=k.current)||void 0===e||!e.hasPendingAction())){var a=e=>{var t="None"!==i.type;if(r||t){var n,o=i.focusNode;if(Zd&&i.rangeCount>1){var a=i.getRangeAt(0),s=i.getRangeAt(i.rangeCount-1);n=a.startContainer===o?s.endContainer:a.startContainer}else n=i.anchorNode;var l=jm.get(y),u=!1;if(l.contains(n)&&l.contains(o)&&(u=!0),t&&u&&r&&!e){var c,d=ze.toSlateRange(y,i,{exactMatch:!0,suppressThrow:!0});if(d&&Ee.equals(d,r))if(!M.hasMarkPlaceholder||null!==(c=n)&&void 0!==c&&null!==(c=c.parentElement)&&void 0!==c&&c.hasAttribute("data-slate-mark-placeholder"))return}if(r&&!ze.hasRange(y,r))return void(y.selection=ze.toSlateRange(y,i,{exactMatch:!1,suppressThrow:!0}));M.isUpdatingSelection=!0;var h=null;try{h=r&&ze.toDOMRange(y,r)}catch{}return h?(ze.isComposing(y)&&!Hi?i.collapseToEnd():Ee.isBackward(r)?i.setBaseAndExtent(h.endContainer,h.endOffset,h.startContainer,h.startOffset):i.setBaseAndExtent(h.startContainer,h.startOffset,h.endContainer,h.endOffset),f(y,h)):i.removeAllRanges(),h}};i.rangeCount<=1&&a();var s="action"===(null===(t=k.current)||void 0===t?void 0:t.isFlushing());if(!Hi||!s)return void setTimeout(()=>{M.isUpdatingSelection=!1});var l=null,u=requestAnimationFrame(()=>{if(s){var e=e=>{try{ze.toDOMNode(y,y).focus(),a(e)}catch{}};e(),l=setTimeout(()=>{e(!0),M.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(u),l&&clearTimeout(l)}}});var R=j.useCallback(e=>{gC(y,e);var t=ze.toDOMNode(y,y).getRootNode();if(null!=S&&S.current&&bf&&t instanceof ShadowRoot){var n=e.getTargetRanges()[0],r=new window.Range;r.setStart(n.startContainer,n.startOffset),r.setEnd(n.endContainer,n.endOffset);var o=ze.toSlateRange(y,r,{exactMatch:!1,suppressThrow:!1});return Re.select(y,o),e.preventDefault(),void e.stopImmediatePropagation()}if(P(),!s&&ze.hasEditableTarget(y,e.target)&&!hj(e,i)){var a;if(k.current)return k.current.handleDOMBeforeInput(e);I.flush(),B.flush();var{selection:l}=y,{inputType:u}=e,c=e.dataTransfer||e.data||void 0,d="insertCompositionText"===u||"deleteCompositionText"===u;if(d&&ze.isComposing(y))return;var h=!1;if("insertText"===u&&l&&Ee.isCollapsed(l)&&e.data&&1===e.data.length&&/[a-z ]/i.test(e.data)&&0!==l.anchor.offset&&(h=!0,y.marks&&(h=!1),!o0.get(y))){var f,p,{anchor:g}=l,[m,v]=ze.toDOMPoint(y,g),b=null===(f=m.parentElement)||void 0===f?void 0:f.closest("a"),x=ze.getWindow(y);if(h&&b&&ze.hasDOMNode(y,b)){var E,D=null==x?void 0:x.document.createTreeWalker(b,NodeFilter.SHOW_TEXT).lastChild();D===m&&(null===(E=D.textContent)||void 0===E?void 0:E.length)===v&&(h=!1)}if(h&&m.parentElement&&"pre"===(null==x||null===(p=x.getComputedStyle(m.parentElement))||void 0===p?void 0:p.whiteSpace)){var T=F.above(y,{at:g.path,match:e=>ut.isElement(e)&&F.isBlock(y,e)});T&&Ke.string(T[0]).includes("\t")&&(h=!1)}}if((!u.startsWith("delete")||u.startsWith("deleteBy"))&&!o0.get(y)){var[A]=e.getTargetRanges();if(A){var M=ze.toSlateRange(y,A,{exactMatch:!1,suppressThrow:!1});if(!l||!Ee.equals(l,M)){h=!1;var R=!d&&y.selection&&F.rangeRef(y,y.selection);Re.select(y,M),R&&Bg.set(y,R)}}}if(d)return;if(h||e.preventDefault(),l&&Ee.isExpanded(l)&&u.startsWith("delete")){var _=u.endsWith("Backward")?"backward":"forward";return void F.deleteFragment(y,{direction:_})}switch(u){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":F.deleteFragment(y);break;case"deleteContent":case"deleteContentForward":F.deleteForward(y);break;case"deleteContentBackward":F.deleteBackward(y);break;case"deleteEntireSoftLine":F.deleteBackward(y,{unit:"line"}),F.deleteForward(y,{unit:"line"});break;case"deleteHardLineBackward":F.deleteBackward(y,{unit:"block"});break;case"deleteSoftLineBackward":F.deleteBackward(y,{unit:"line"});break;case"deleteHardLineForward":F.deleteForward(y,{unit:"block"});break;case"deleteSoftLineForward":F.deleteForward(y,{unit:"line"});break;case"deleteWordBackward":F.deleteBackward(y,{unit:"word"});break;case"deleteWordForward":F.deleteForward(y,{unit:"word"});break;case"insertLineBreak":F.insertSoftBreak(y);break;case"insertParagraph":F.insertBreak(y);break;case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":"insertFromComposition"===u&&ze.isComposing(y)&&(w(!1),Ff.set(y,!1)),"DataTransfer"===(null==c?void 0:c.constructor.name)?ze.insertData(y,c):"string"==typeof c&&(h?C.current.push(()=>F.insertText(y,c)):F.insertText(y,c))}var O=null===(a=Bg.get(y))||void 0===a?void 0:a.unref();Bg.delete(y),O&&(!y.selection||!Ee.equals(y.selection,O))&&Re.select(y,O)}},[y,B,P,i,s,I]),_=j.useCallback(e=>{null==e?(B.cancel(),I.cancel(),jm.delete(y),jf.delete(y),x.current&&Kl&&x.current.removeEventListener("beforeinput",R)):Kl&&e.addEventListener("beforeinput",R),x.current=e,"function"==typeof t?t(e):t&&(t.current=e)},[B,I,y,R,t]);Yu(()=>{var e=ze.getWindow(y),t=e=>{var{target:t}=e,n=t instanceof HTMLElement?t:null,r=null==n?void 0:n.tagName;"INPUT"===r||"TEXTAREA"===r||I()};e.document.addEventListener("selectionchange",t);var n=()=>{M.isDraggingInternally=!1};return e.document.addEventListener("dragend",n),e.document.addEventListener("drop",n),()=>{e.document.removeEventListener("selectionchange",t),e.document.removeEventListener("dragend",n),e.document.removeEventListener("drop",n)}},[I,M]);var O=o([y,[]]),L=OG(o),N=a&&1===y.children.length&&1===Array.from(Ke.texts(y)).length&&""===Ke.string(y)&&!b,G=j.useCallback(e=>{var t;e&&N?D(null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.height):D(void 0)},[N]);if(N){var H=F.start(y,[]);O.push({[y0]:!0,placeholder:a,onPlaceholderResize:G,anchor:H,focus:H})}var{marks:z}=y;if(M.hasMarkPlaceholder=!1,y.selection&&Ee.isCollapsed(y.selection)&&z){var{anchor:W}=y.selection,V=Ke.leaf(y,W.path),$=g3(V,sj);if(!ot.equals(V,z,{loose:!0})){M.hasMarkPlaceholder=!0;var X=Object.fromEntries(Object.keys($).map(e=>[e,null]));O.push(La(La(La({[pS]:!0},X),z),{},{anchor:W,focus:W}))}}return j.useEffect(()=>{setTimeout(()=>{var{selection:e}=y;if(e){var{anchor:t}=e,n=Ke.leaf(y,t.path);if(z&&!ot.equals(n,z,{loose:!0}))return void ia.set(y,z)}ia.delete(y)})}),QG(),xt.createElement(IS.Provider,{value:s},xt.createElement(ij.Provider,{value:b},xt.createElement(AS.Provider,{value:L},xt.createElement(rj,{node:x,receivedUserInput:T},xt.createElement(g,La(La({role:s?void 0:"textbox","aria-multiline":!s||void 0},v),{},{spellCheck:!(!Kl&&Gm)&&v.spellCheck,autoCorrect:Kl||!Gm?v.autoCorrect:"false",autoCapitalize:Kl||!Gm?v.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!s,zindex:-1,suppressContentEditableWarning:!0,ref:_,style:La(La({},m?{}:La({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},E?{minHeight:E}:{})),p),onBeforeInput:j.useCallback(e=>{if(!Kl&&!s&&!Ni(e,v.onBeforeInput)&&ze.hasSelectableTarget(y,e.target)&&(e.preventDefault(),!ze.isComposing(y))){var t=e.data;F.insertText(y,t)}},[v.onBeforeInput,y,s]),onInput:j.useCallback(e=>{if(!Ni(e,v.onInput)){if(k.current)return void k.current.handleInput();for(var t of C.current)t();C.current=[],ze.isFocused(y)||gC(y,e.nativeEvent)}},[v.onInput,y]),onBlur:j.useCallback(e=>{if(!s&&!M.isUpdatingSelection&&ze.hasSelectableTarget(y,e.target)&&!Ni(e,v.onBlur)){var t=ze.findDocumentOrShadowRoot(y);if(M.latestElement!==t.activeElement){var{relatedTarget:n}=e;if(!(n===ze.toDOMNode(y,y)||ws(n)&&n.hasAttribute("data-slate-spacer"))){if(null!=n&&dc(n)&&ze.hasDOMNode(y,n)){var r=ze.toSlateNode(y,n);if(ut.isElement(r)&&!y.isVoid(r))return}if(bf){var o=Dg(t);null==o||o.removeAllRanges()}tc.delete(y)}}}},[s,M.isUpdatingSelection,M.latestElement,y,v.onBlur]),onClick:j.useCallback(e=>{if(ze.hasTarget(y,e.target)&&!Ni(e,v.onClick)&&dc(e.target)){var t=ze.toSlateNode(y,e.target),n=ze.findPath(y,t);if(!F.hasPath(y,n)||Ke.get(y,n)!==t)return;if(e.detail===bH&&n.length>=1){var r=n;if(!ut.isElement(t)||!F.isBlock(y,t)){var o,i=F.above(y,{match:e=>ut.isElement(e)&&F.isBlock(y,e),at:n});r=null!==(o=null==i?void 0:i[1])&&void 0!==o?o:n.slice(0,1)}var a=F.range(y,r);return void Re.select(y,a)}if(s)return;var l=F.start(y,n),u=F.end(y,n),c=F.void(y,{at:l}),d=F.void(y,{at:u});if(c&&d&&K.equals(c[1],d[1])){var h=F.range(y,l);Re.select(y,h)}}},[y,v.onClick,s]),onCompositionEnd:j.useCallback(e=>{if(ze.hasSelectableTarget(y,e.target)){var t;if(ze.isComposing(y)&&Promise.resolve().then(()=>{w(!1),Ff.set(y,!1)}),null===(t=k.current)||void 0===t||t.handleCompositionEnd(e),Ni(e,v.onCompositionEnd)||Hi)return;if(!bf&&!vH&&!dH&&!wH&&!yH&&e.data){var n=ia.get(y);ia.delete(y),void 0!==n&&(Hu.set(y,y.marks),y.marks=n),F.insertText(y,e.data);var r=Hu.get(y);Hu.delete(y),void 0!==r&&(y.marks=r)}}},[v.onCompositionEnd,y]),onCompositionUpdate:j.useCallback(e=>{ze.hasSelectableTarget(y,e.target)&&!Ni(e,v.onCompositionUpdate)&&(ze.isComposing(y)||(w(!0),Ff.set(y,!0)))},[v.onCompositionUpdate,y]),onCompositionStart:j.useCallback(e=>{if(ze.hasSelectableTarget(y,e.target)){var t;if(null===(t=k.current)||void 0===t||t.handleCompositionStart(e),Ni(e,v.onCompositionStart)||Hi)return;w(!0);var{selection:n}=y;if(n&&Ee.isExpanded(n))return void F.deleteFragment(y)}},[v.onCompositionStart,y]),onCopy:j.useCallback(e=>{ze.hasSelectableTarget(y,e.target)&&!Ni(e,v.onCopy)&&!dC(e)&&(e.preventDefault(),ze.setFragmentData(y,e.clipboardData,"copy"))},[v.onCopy,y]),onCut:j.useCallback(e=>{if(!s&&ze.hasSelectableTarget(y,e.target)&&!Ni(e,v.onCut)&&!dC(e)){e.preventDefault(),ze.setFragmentData(y,e.clipboardData,"cut");var{selection:t}=y;if(t)if(Ee.isExpanded(t))F.deleteFragment(y);else{var n=Ke.parent(y,t.anchor.path);F.isVoid(y,n)&&Re.delete(y)}}},[s,y,v.onCut]),onDragOver:j.useCallback(e=>{if(ze.hasTarget(y,e.target)&&!Ni(e,v.onDragOver)){var t=ze.toSlateNode(y,e.target);ut.isElement(t)&&F.isVoid(y,t)&&e.preventDefault()}},[v.onDragOver,y]),onDragStart:j.useCallback(e=>{if(!s&&ze.hasTarget(y,e.target)&&!Ni(e,v.onDragStart)){var t=ze.toSlateNode(y,e.target),n=ze.findPath(y,t);if(ut.isElement(t)&&F.isVoid(y,t)||F.void(y,{at:n,voids:!0})){var r=F.range(y,n);Re.select(y,r)}M.isDraggingInternally=!0,ze.setFragmentData(y,e.dataTransfer,"drag")}},[s,y,v.onDragStart,M]),onDrop:j.useCallback(e=>{if(!s&&ze.hasTarget(y,e.target)&&!Ni(e,v.onDrop)){e.preventDefault();var t=y.selection,n=ze.findEventRange(y,e),r=e.dataTransfer;Re.select(y,n),M.isDraggingInternally&&t&&!Ee.equals(t,n)&&!F.void(y,{at:n,voids:!0})&&Re.delete(y,{at:t}),ze.insertData(y,r),ze.isFocused(y)||ze.focus(y)}},[s,y,v.onDrop,M]),onDragEnd:j.useCallback(e=>{!s&&M.isDraggingInternally&&v.onDragEnd&&ze.hasTarget(y,e.target)&&v.onDragEnd(e)},[s,M,v,y]),onFocus:j.useCallback(e=>{if(!s&&!M.isUpdatingSelection&&ze.hasEditableTarget(y,e.target)&&!Ni(e,v.onFocus)){var t=ze.toDOMNode(y,y),n=ze.findDocumentOrShadowRoot(y);if(M.latestElement=n.activeElement,Zd&&e.target!==t)return void t.focus();tc.set(y,!0)}},[s,M,y,v.onFocus]),onKeyDown:j.useCallback(e=>{if(!s&&ze.hasEditableTarget(y,e.target)){var t;null===(t=k.current)||void 0===t||t.handleKeyDown(e);var{nativeEvent:n}=e;if(ze.isComposing(y)&&!1===n.isComposing&&(Ff.set(y,!1),w(!1)),Ni(e,v.onKeyDown)||ze.isComposing(y))return;var{selection:r}=y,o=y.children[null!==r?r.focus.path[0]:0],i="rtl"===sS(Ke.string(o));if(sr.isRedo(n)){e.preventDefault();var a=y;return void("function"==typeof a.redo&&a.redo())}if(sr.isUndo(n)){e.preventDefault();var l=y;return void("function"==typeof l.undo&&l.undo())}if(sr.isMoveLineBackward(n))return e.preventDefault(),void Re.move(y,{unit:"line",reverse:!0});if(sr.isMoveLineForward(n))return e.preventDefault(),void Re.move(y,{unit:"line"});if(sr.isExtendLineBackward(n))return e.preventDefault(),void Re.move(y,{unit:"line",edge:"focus",reverse:!0});if(sr.isExtendLineForward(n))return e.preventDefault(),void Re.move(y,{unit:"line",edge:"focus"});if(sr.isMoveBackward(n))return e.preventDefault(),void(r&&Ee.isCollapsed(r)?Re.move(y,{reverse:!i}):Re.collapse(y,{edge:i?"end":"start"}));if(sr.isMoveForward(n))return e.preventDefault(),void(r&&Ee.isCollapsed(r)?Re.move(y,{reverse:i}):Re.collapse(y,{edge:i?"start":"end"}));if(sr.isMoveWordBackward(n))return e.preventDefault(),r&&Ee.isExpanded(r)&&Re.collapse(y,{edge:"focus"}),void Re.move(y,{unit:"word",reverse:!i});if(sr.isMoveWordForward(n))return e.preventDefault(),r&&Ee.isExpanded(r)&&Re.collapse(y,{edge:"focus"}),void Re.move(y,{unit:"word",reverse:i});if(Kl){if((fS||bf)&&r&&(sr.isDeleteBackward(n)||sr.isDeleteForward(n))&&Ee.isCollapsed(r)){var u=Ke.parent(y,r.anchor.path);if(ut.isElement(u)&&F.isVoid(y,u)&&(F.isInline(y,u)||F.isBlock(y,u)))return e.preventDefault(),void F.deleteBackward(y,{unit:"block"})}}else{if(sr.isBold(n)||sr.isItalic(n)||sr.isTransposeCharacter(n))return void e.preventDefault();if(sr.isSoftBreak(n))return e.preventDefault(),void F.insertSoftBreak(y);if(sr.isSplitBlock(n))return e.preventDefault(),void F.insertBreak(y);if(sr.isDeleteBackward(n))return e.preventDefault(),void(r&&Ee.isExpanded(r)?F.deleteFragment(y,{direction:"backward"}):F.deleteBackward(y));if(sr.isDeleteForward(n))return e.preventDefault(),void(r&&Ee.isExpanded(r)?F.deleteFragment(y,{direction:"forward"}):F.deleteForward(y));if(sr.isDeleteLineBackward(n))return e.preventDefault(),void(r&&Ee.isExpanded(r)?F.deleteFragment(y,{direction:"backward"}):F.deleteBackward(y,{unit:"line"}));if(sr.isDeleteLineForward(n))return e.preventDefault(),void(r&&Ee.isExpanded(r)?F.deleteFragment(y,{direction:"forward"}):F.deleteForward(y,{unit:"line"}));if(sr.isDeleteWordBackward(n))return e.preventDefault(),void(r&&Ee.isExpanded(r)?F.deleteFragment(y,{direction:"backward"}):F.deleteBackward(y,{unit:"word"}));if(sr.isDeleteWordForward(n))return e.preventDefault(),void(r&&Ee.isExpanded(r)?F.deleteFragment(y,{direction:"forward"}):F.deleteForward(y,{unit:"word"}))}}},[s,y,v.onKeyDown]),onPaste:j.useCallback(e=>{!s&&ze.hasEditableTarget(y,e.target)&&!Ni(e,v.onPaste)&&(!Kl||oH(e.nativeEvent)||bf)&&(e.preventDefault(),ze.insertData(y,e.clipboardData))},[s,y,v.onPaste])}),xt.createElement(aj,{decorations:O,node:y,renderElement:l,renderChunk:u,renderPlaceholder:h,renderLeaf:c,renderText:d}))))))}),lj=e=>{var{attributes:t,children:n}=e;return xt.createElement("span",La({},t),n,Hi&&xt.createElement("br",null))},cj=()=>[],fj=(e,t)=>{if(t.getBoundingClientRect&&(!e.selection||e.selection&&Ee.isCollapsed(e.selection))){var n=t.startContainer.parentElement;n.getBoundingClientRect=t.getBoundingClientRect.bind(t),nH(n,{scrollMode:"if-needed"}),delete n.getBoundingClientRect}},Ni=(e,t)=>!!t&&(t(e)??(e.isDefaultPrevented()||e.isPropagationStopped())),dC=e=>dc(e.target)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement),hj=(e,t)=>!!t&&(t(e)??e.defaultPrevented),gC=(e,t)=>{var n=e;"historyUndo"!==t.inputType||"function"!=typeof n.undo?"historyRedo"!==t.inputType||"function"!=typeof n.redo||n.redo():n.undo()},dj=j.createContext(!1),LS=parseInt(xt.version.split(".")[0],10),gj=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],pj=e=>{var{editor:t,children:n,onChange:r,onSelectionChange:o,onValueChange:i,initialValue:a}=e,s=g3(e,gj);xt.useState(()=>{if(!Ke.isNodeList(a))throw new Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(Pr.stringify(a)));if(!F.isEditor(t))throw new Error("[Slate] editor is invalid! You passed: ".concat(Pr.stringify(t)));t.children=a,Object.assign(t,s)});var{selectorContext:l,onChange:u}=ZG(),c=j.useCallback(e=>{var n;if("set_selection"===(r&&r(t.children),null==e||null===(n=e.operation)||void 0===n?void 0:n.type))null==o||o(t.selection);else null==i||i(t.children);u()},[t,u,r,o,i]);j.useEffect(()=>(O6.set(t,c),()=>{O6.set(t,()=>{})}),[t,c]);var[d,h]=j.useState(ze.isFocused(t));return j.useEffect(()=>{h(ze.isFocused(t))},[t]),Yu(()=>{var e=()=>h(ze.isFocused(t));return LS>=17?(document.addEventListener("focusin",e),document.addEventListener("focusout",e),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",e)}):(document.addEventListener("focus",e,!0),document.addEventListener("blur",e,!0),()=>{document.removeEventListener("focus",e,!0),document.removeEventListener("blur",e,!0)})},[]),xt.createElement(f8.Provider,{value:l},xt.createElement(c8.Provider,{value:t},xt.createElement(dj.Provider,{value:d},n)))},mj=function(e){var t=e;t=MH(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x-slate-fragment");var{onChange:n,apply:r}=t;return t.getChunkSize=()=>null,t.onChange=e=>{(LS<18?aG.unstable_batchedUpdates:e=>e())(()=>{n(e)})},t.apply=e=>{if("move_node"===e.type){var n=Ke.parent(t,e.path);if(!!t.getChunkSize(n)){var o=Ke.get(t,e.path),i=bS(t,n),a=ze.findKey(t,o);i.movedNodeKeys.add(a)}}r(e)},t},vj={isHistory:e=>ui(e)&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(0===e.redos.length||Nu.isOperationList(e.redos[0].operations))&&(0===e.undos.length||Nu.isOperationList(e.undos[0].operations))},m5=new WeakMap,Tf=new WeakMap,vm=new WeakMap,_a={isHistoryEditor:e=>vj.isHistory(e.history)&&F.isEditor(e),isMerging:e=>Tf.get(e),isSplittingOnce:e=>vm.get(e),setSplittingOnce(e,t){vm.set(e,t)},isSaving:e=>m5.get(e),redo(e){e.redo()},undo(e){e.undo()},withMerging(e,t){var n=_a.isMerging(e);Tf.set(e,!0),t(),Tf.set(e,n)},withNewBatch(e,t){var n=_a.isMerging(e);Tf.set(e,!0),vm.set(e,!0),t(),Tf.set(e,n),vm.delete(e)},withoutMerging(e,t){var n=_a.isMerging(e);Tf.set(e,!1),t(),Tf.set(e,n)},withoutSaving(e,t){var n=_a.isSaving(e);m5.set(e,!1);try{t()}finally{m5.set(e,n)}}},yj=e=>{var t=e,{apply:n}=t;return t.history={undos:[],redos:[]},t.redo=()=>{var{history:e}=t,{redos:n}=e;if(n.length>0){var r=n[n.length-1];r.selectionBefore&&Re.setSelection(t,r.selectionBefore),_a.withoutSaving(t,()=>{F.withoutNormalizing(t,()=>{for(var e of r.operations)t.apply(e)})}),e.redos.pop(),t.writeHistory("undos",r)}},t.undo=()=>{var{history:e}=t,{undos:n}=e;if(n.length>0){var r=n[n.length-1];_a.withoutSaving(t,()=>{F.withoutNormalizing(t,()=>{var e=r.operations.map(Nu.inverse).reverse();for(var n of e)t.apply(n);r.selectionBefore&&Re.setSelection(t,r.selectionBefore)})}),t.writeHistory("redos",r),e.undos.pop()}},t.apply=e=>{var{operations:r,history:o}=t,{undos:i}=o,a=i[i.length-1],s=a&&a.operations[a.operations.length-1],l=_a.isSaving(t),u=_a.isMerging(t);if(null==l&&(l=Cj(e)),l){if(null==u&&(u=null!=a&&(!!r.includes(s)||wj(e,s))),_a.isSplittingOnce(t)&&(u=!1,_a.setSplittingOnce(t,void 0)),a&&u)a.operations.push(e);else{var c={operations:[e],selectionBefore:t.selection};t.writeHistory("undos",c)}for(;i.length>100;)i.shift();o.redos=[]}n(e)},t.writeHistory=(e,n)=>{t.history[e].push(n)},t},wj=(e,t)=>!!(t&&"insert_text"===e.type&&"insert_text"===t.type&&e.offset===t.offset+t.text.length&&K.equals(e.path,t.path)||t&&"remove_text"===e.type&&"remove_text"===t.type&&e.offset+e.text.length===t.offset&&K.equals(e.path,t.path)),Cj=(e,t)=>"set_selection"!==e.type;const xj=e=>{const t=e,{insertData:n}=t;return t.insertBreak=()=>{e.insertText("\n")},t.insertSoftBreak=()=>{e.insertText("\n")},t.insertData=e=>{let r=e.getData("text/plain");if(!e.getData("application/x-slate-fragment")&&r)return r.endsWith("\n")&&(r=r.substring(0,r.length-1)),r=r.trim().replace(/\t+/g," "),void t.insertText(r);n(e)},t},I0="#6698FF",oa=9,N6="plait-text-plugin-key",_S=30,H6="transparent",p3=20,Mg=18,a0="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'PingFang SC', 'Noto Sans', 'Noto Sans CJK SC', 'Microsoft Yahei', 'Hiragino Sans GB', Arial, sans-serif",NS="none";var pC;(pC||(pC={})).image="image";const HS=["png","jpeg","gif","bmp"];var G6,Ss;!function(e){e.nw="0",e.n="4",e.ne="1",e.e="5",e.se="2",e.s="6",e.sw="3",e.w="7"}(G6||(G6={})),function(e){e.solid="solid",e.dashed="dashed",e.dotted="dotted"}(Ss||(Ss={}));class Yo{constructor(e,t){this.board=e,this.options=t}processDrawing(e,t,n){var r,o;if(this.canDraw&&this.canDraw(e,n)){const i=this.draw(e,n);if(i){this.g&&t.contains(this.g)?this.g.replaceWith(i):(this.g&&this.g.remove(),null!=(r=this.options)&&r.prepend?t.prepend(i):t.appendChild(i)),this.g=i;const n=this.board.getRectangle(e);if(!n)return;let a,s=M.getCenterPoint(n);if(null!=(o=this.options)&&o.active){const e=Di(this.board,n);s=M.getCenterPoint(e)}a=wo.isGroup(e)?po(Bs(this.board,e,!0)):e.angle,a&&Ps(i,s,a)}else this.destroy();Ej(this)&&this.afterDraw(e)}else this.destroy()}destroy(){this.g&&(this.g.remove(),this.g=void 0)}}function Ej(e){return!!e.afterDraw}const GS=(e,t)=>{const n=ih(I.getRoughSVG(e),t,9,{stroke:"#99999995",strokeWidth:2,fill:"#FFF",fillStyle:"solid"});return n.classList.add(sO),n};function Pj(e,t){return ih(I.getRoughSVG(e),t,9,{stroke:"#FFFFFF",strokeWidth:1,fill:`${I0}`,fillStyle:"solid"})}function mC(e,t){return ih(I.getRoughSVG(e),t,9,{stroke:`${I0}`,strokeWidth:2,fill:"#FFFFFF",fillStyle:"solid"})}const Df=6,vC=(e,t)=>{const n={stroke:qr,strokeWidth:1,fillStyle:"solid"},r=[t.x-20-9,t.y+t.height+20+9],o=I.getRoughSVG(e),i=Lt(),a=o.path(`M ${r[0]+6} ${r[1]} A 6 6, 0, 1, 0, ${r[0]} ${r[1]+6}`,n),s=o.polygon([[r[0],r[1]+6-2],[r[0],r[1]+6+2],[r[0]+4.5,r[1]+6]],{...n,fill:qr});return Wt(s,"round"),i.append(a,s),i},Ep=(e,t)=>new m3(e,{...t,active:!0}),vy=class extends Yo{constructor(e,t){super(e,{...t,active:!0}),this.board=e,this.options=t,this.hasResizeHandle=!1}canDraw(e,t){return!!t.selected}draw(e,t){const n=Lt(),r=Di(this.board,this.options.getRectangle(e)),o=this.options.getStrokeWidth()*this.board.viewport.zoom,i=M.inflate(r,o),a=ua(this.board,i,{stroke:I0,strokeWidth:1});return n.append(a),a.classList.add(vp),a.style.opacity=`${this.options.getStrokeOpacity()}`,this.options.hasResizeHandle()?(this.hasResizeHandle=!0,M.getCornerPoints(i).forEach(e=>{const t=GS(this.board,e);n.append(t)})):this.hasResizeHandle=!1,n}};vy.key="active-generator";let m3=vy;const v3=e=>`${e}`,y3=e=>Number(e),Sj=(e,t)=>{let n=(j6(e,v3(t))?t-4:t)+2;return n>=4&&(n-=4),j6(e,v3(t))?n+4:n},yC=e=>{switch(e){case 0:case 2:return ra.nwse;case 1:case 3:return ra.nesw;case 4:case 6:return ra.ns;case 5:case 7:return ra.ew;default:return null}},Tj=(e,t)=>{const n=z7.indexOf(e);if(n>=0){const r=Math.round(t/(Math.PI/4));e=z7[(n+r)%z7.length]}return e},jS=(e,t)=>{const n=M.getCornerPoints(e),r=n.map((e,n)=>({rectangle:{x:e[0]-t/2,y:e[1]-t/2,width:t,height:t},handle:v3(n),cursorClass:yC(n)})),o=Dj(n,t/2);return r.push(...o.map((e,t)=>({rectangle:e,handle:v3(t+4),cursorClass:yC(t+4)}))),r},wC=(e,t)=>t<=3?M.getCornerPoints(e)[t]:M.getEdgeCenterPoints(e)[t-4],Dj=(e,t)=>{const n=[];for(let r=0;r<e.length;r++){let o=M.getRectangleByPoints([e[r],e[(r+1)%4]]);const i=new Array(2).fill(0);i[(r+1)%2]=t/2,o=M.expand(o,i[0],i[1]),n.push(o)}return n},av=new WeakMap,Gu=e=>!!av.get(e),Aj=(e,t)=>Gu(e)&&t(av.get(e)),Bj=(e,t,n)=>{I.getBoardContainer(e).classList.add(`${n}-resizing`),av.set(e,t),ol(e,!0)},Rj=(e,t)=>{I.getBoardContainer(e).classList.remove(`${t}-resizing`),av.delete(e),ol(e,!1)},j6=(e,t)=>y3(t)>=4,Wm=(e,t)=>!j6(e,t),h8=(e,t,n,r,o)=>{const i=kr([r],n,o)[0],a=kr([M.getCenterPoint(t)],n,o)[0],s=M.getPoints(t),l=M.getCenterPoint(e),u=kr([a],i,-o)[0],c=kr(s,l,o);return kr(c,u,-o)},Mj=e=>{const t=e.points;return t&&t.length>1},uv=(e,t)=>{if(I.hasBeenTextEditing(e)||gi(e))return!1;const n=Qe(e);return 1===n.length&&n[0]===t&&Mj(t)};function Kn(e,t){const n=t[0]-e[0],r=t[1]-e[1],o=Math.sqrt(n*n+r*r);if(0===o)throw new Error("Points must not be the same for a unit vector calculation.");return[n/o,r/o]}function Jd(e,t,n){const r=Math.hypot(t[0],t[1]);return[e[0]+t[0]/r*n,e[1]+t[1]/r*n]}function CC(e,t,n,r){return r?[e[0]+n,e[1]+n/t[0]*t[1]]:[e[0]+n/t[1]*t[0],e[1]+n]}function xC(e){const t=e[0];return[e[1],-t]}function Kg(e,t){if(!t)return e;const n=e[0],r=e[1];return[n*Math.cos(t)-r*Math.sin(t),n*Math.sin(t)+r*Math.cos(t)]}function $S(e,t,n){const r=Tt(e[0],e[1],t[0],t[1]),o=Tt(e[0],e[1],n[0],n[1]),i=Tt(t[0],t[1],n[0],n[1]);return Math.abs(r+o-i)<.1}const bj=(e,t,n)=>{const r=[],o=[Math.min(t[0],n[0]),Math.max(t[0],n[0])],i=[Math.min(t[1],n[1]),Math.max(t[1],n[1])],a=Kn(t,n);if(e[0]>=o[0]&&e[0]<=o[1]){const n=CC(t,a,e[0]-t[0],!0);r.push(n)}else if(e[1]>=i[0]&&e[1]<=i[1]){const n=CC(t,a,e[1]-t[1],!1);r.push(n)}return r};function WS(e,t){const n=zS(e)*t;let r=0;for(let t=0;t<e.length-1;t++){const[o,i]=e[t],[a,s]=e[t+1],l=Tt(o,i,a,s);if(r+l>=n){const e=(n-r)/l;return[o+(a-o)*e,i+(s-i)*e]}r+=l}return e[e.length-1]}function zS(e){let t=0;for(let n=0;n<e.length-1;n++){const[r,o]=e[n],[i,a]=e[n+1];t+=Tt(r,o,i,a)}return t}function VS(e,t){const n=zS(e);let r=0;for(let o=0;o<e.length-1;o++){if($S(t,e[o],e[o+1]))return r+=Tt(t[0],t[1],e[o][0],e[o][1]),r/n;r+=Tt(e[o][0],e[o][1],e[o+1][0],e[o+1][1])}throw new Error("Cannot get ratio by point")}const w0=e=>{const t=[];return e.forEach(e=>{-1===t.findIndex(t=>mt.isEquals(e,t))&&t.push(e)}),t};function _u(e){if(e.length<=2)return e;let t=[e[0]];for(let n=1;n<e.length-1;n++){const r=e[n-1],o=e[n],i=e[n+1];!mt.isOverHorizontal([r,o,i])&&!mt.isOverVertical([r,o,i])&&t.push(o)}return t.push(e[e.length-1]),t}const Yg=(e,t,n)=>{const r=Tt(...e,...t),o=mt.isEquals(e,t),i=o?1:(t[1]-e[1])/r,a=o?1:(t[0]-e[0])/r;return[e[0]+n*a,e[1]+n*i]},kj={[kt.left]:{x:-1,y:0},[kt.right]:{x:1,y:0},[kt.top]:{x:0,y:-1},[kt.bottom]:{x:0,y:1}};function Oj(e){switch(e){case kt.left:return kt.right;case kt.right:return kt.left;case kt.top:return kt.bottom;case kt.bottom:return kt.top}}function US(e){return 0===e[0]?kt.left:1===e[0]?kt.right:0===e[1]?kt.top:1===e[1]?kt.bottom:void 0}function Kd(e){const t=e[0],n=e[1];if(0===t&&0===n)return null;if(0===t)return n>0?kt.bottom:kt.top;if(0===n)return t>0?kt.right:kt.left;const r=Math.atan2(n,t);return r>-Math.PI/4&&r<=Math.PI/4?kt.right:r>Math.PI/4&&r<=3*Math.PI/4?kt.bottom:r>-3*Math.PI/4&&r<=-Math.PI/4?kt.top:kt.left}function Yf(e){return kj[e]}function C0(e){return 0===e?e:e/Math.abs(e)}const Ij=(e,t,n,r,o)=>{const i=Yf(t),a=Yf(r),s=[e[0]+i.x*o,e[1]+i.y*o],l=[n[0]+a.x*o,n[1]+a.y*o],u=Fj(s,t,l),c=0!==u.x?"x":"y",d=u[c];let h,f,p=[];const[g,m]=Lj({sourceX:e[0],sourceY:e[1],targetX:n[0],targetY:n[1]});if(i[c]*a[c]===-1){h=g,f=m;const e=[[h,s[1]],[h,l[1]]],t=[[s[0],f],[l[0],f]];p=i[c]===d?"x"===c?e:t:"x"===c?t:e}else{const e=[[s[0],l[1]]],n=[[l[0],s[1]]];let o;if(p="x"===c?i.x===d?n:e:i.y===d?e:n,t!==r){const t="x"===c?1:0,r=i[c]===a["x"===c?"y":"x"],u=s[t]>l[t],d=s[t]<l[t];o=1===i[c]&&(!r&&u||r&&d)||1!==i[c]&&(!r&&d||r&&u),o&&(p="x"===c?e:n)}}return[e,s,...p,l,n]},Fj=(e,t=kt.bottom,n)=>t===kt.left||t===kt.right?e[0]<n[0]?{x:1,y:0}:{x:-1,y:0}:e[1]<n[1]?{x:0,y:1}:{x:0,y:-1};function Lj({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,i=n<e?n+o:n-o,a=Math.abs(r-t)/2;return[i,r<t?r+a:r-a,o,a]}function d8(e){const t=e.ctrlKey||e.metaKey,n=nn.isKeyHotkey("alt",e),r=nn.isKeyHotkey("shift",e),o=e.key.includes("CapsLock"),i=e.key.includes("Tab"),a=e.key.includes("Escape"),s=e.key.startsWith("F"),l=!!e.key.includes("Arrow");return o||t||n||l||r||i||a||s}const _j=e=>nn.isKeyHotkey("mod+/",e),Nj=e=>"Tab"===e.key,Hj=e=>"Enter"===e.key,g8=e=>"Space"===e.code,p8=e=>Ti.isDeleteBackward(e)||Ti.isDeleteForward(e);var Gi;!function(e){e.dnd="dnd",e.drawing="drawing"}(Gi||(Gi={}));const XS=new WeakMap,KS=e=>XS.get(e),na=(e,t)=>{XS.set(e,t)},lv=e=>KS(e)===Gi.dnd,F0=e=>KS(e)===Gi.drawing,L0=e=>{const t=yn.getElementRef(e);return(null==t?void 0:t.getTextManages())||[]},oh=e=>{const t=L0(e)[0];return t||console.warn("can not find textManage"),t},sh=e=>L0(e).map(e=>e.editor),cv=e=>{const t=sh(e)[0];return t||console.warn("can not find textManage"),t},Gj=e=>{const t=Qe(e);let n=null;return t.forEach(e=>{const t=sh(e);!n&&t&&t.length>0&&(n=t[0])}),n},YS=e=>e.map(e=>{try{const t=sh(e);return t.length?t.map(e=>{const t=Ke.texts(e);return Array.from(t).reduce((e,t)=>e+t[0].text,"")}).join(" "):""}catch{return""}}).filter(e=>e).join(" "),qS=(e,t)=>{const n=t||Qe(e);if(n.length){const e=[];n.forEach(t=>{e.push(...L0(t))});const t=e.find(e=>e.isEditing);return t?[t.editor]:e.map(e=>e.editor)}},eu=(e,t,n)=>{n=n||{};const r="string"==typeof e?{children:[{text:e,...n}],type:"paragraph"}:e;return t&&(r.align=t),r},EC=e=>14===e?20:18===e?25:1.5*e,ZS=async(e,t,n,r)=>{let o=0,i=0;await jj(t,n).then(e=>{o=e.width,i=e.height});let a=null;const s=URL.createObjectURL(t);I.getBoardContext(e).setUploadingFile({url:s,file:t}),a={url:s,width:o,height:i},r(a)};function jj(e,t){return new Promise((n,r)=>{const o=new Image;o.src=URL.createObjectURL(e),o.onload=function(){const e=t,r=t*o.naturalHeight/o.naturalWidth;n(o.naturalWidth>t?{width:e,height:r}:{width:o.naturalWidth,height:o.naturalHeight})}})}const m8=new WeakMap,fo=e=>m8.get(e),QS=(e,t)=>{m8.set(e,t)},$j=e=>{m8.delete(e)};class Wj{constructor(){this.list=[]}enqueue(e){this.list.push(e),this.list=this.list.sort((e,t)=>e.priority-t.priority)}dequeue(){return this.list.shift()}}class zj{constructor(e){this.graph=e,this.cameFrom=new Map}heuristic(e,t){return Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1])}search(e,t,n){const r=new Wj,o=this.graph.get(e);this.cameFrom=new Map;const i=new Map;for(i.set(o,0),r.enqueue({node:o,priority:0});r.list.length>0;){var a=r.dequeue();if(!a)throw new Error("can't find current");const e=a.node.data;if(e[0]===t[0]&&e[1]===t[1])break;a.node.adjacentNodes.forEach(e=>{let o=i.get(a.node)+this.heuristic(e.data,a.node.data);const s=this.cameFrom.get(a.node),l=s?s.data:n,u=l[0]===(null==a?void 0:a.node.data[0])&&l[0]===e.data[0],c=l[1]===(null==a?void 0:a.node.data[1])&&l[1]===e.data[1];if(!u&&!c&&(o+=1),!i.has(e)||i.get(e)&&o<i.get(e)){i.set(e,o);const n=o+this.heuristic(e.data,t);r.enqueue({node:e,priority:n}),this.cameFrom.set(e,a.node)}})}}getRoute(e,t){const n=[];let r=t;for(;r[0]!==e[0]||r[1]!==e[1];){const e=this.graph.get(r),t=this.cameFrom.get(e);n.unshift(t.data),r=t.data}return n}}class Vj{constructor(e){this.data=e,this.distance=Number.MAX_SAFE_INTEGER,this.adjacentNodes=[]}}class Uj{constructor(){this.index={}}add(e){const t=e[0],n=e[1],r=t.toString(),o=n.toString();r in this.index||(this.index[r]={}),o in this.index[r]||(this.index[r][o]=new Vj(e))}connect(e,t){const n=this.get(e),r=this.get(t);if(!n||!r)throw new Error("A point was not found");n.adjacentNodes.push(r)}has(e){const t=e[0],n=e[1],r=t.toString(),o=n.toString();return r in this.index&&o in this.index[r]}get(e){const t=e[0],n=e[1],r=t.toString(),o=n.toString();return r in this.index&&o in this.index[r]?this.index[r][o]:null}}const JS=A0("debug:plait:elbow-line-routing"),eT=(e,t)=>{const{nextSourcePoint:n,nextTargetPoint:r}=e,o=Kj(e),i=Yj(o),a=new zj(i);a.search(n,r,e.sourcePoint);let s=a.getRoute(n,r);s=[e.sourcePoint,...s,r,e.targetPoint];const l=M.isHitX(e.sourceOuterRectangle,e.targetOuterRectangle),u=M.isHitY(e.sourceOuterRectangle,e.targetOuterRectangle),c=l?void 0:M.getGapCenter(e.sourceOuterRectangle,e.targetOuterRectangle,!0),d=u?void 0:M.getGapCenter(e.sourceOuterRectangle,e.targetOuterRectangle,!1);return s=Xj(s,{centerX:c,centerY:d,sourceRectangle:e.sourceRectangle,targetRectangle:e.targetRectangle},t),s},Xj=(e,t,n)=>{const{sourceRectangle:r,targetRectangle:o,centerX:i,centerY:a}=t;if(n&&JS.clear(),void 0!==i){const t=SC(e,i,!0),a=t.pointOfHit&&PC(e,{parallelPaths:t.parallelPaths,pointOfHit:t.pointOfHit,sourceRectangle:r,targetRectangle:o},n);a&&(e=a)}if(void 0!==a){const t=SC(e,a,!1),i=t.pointOfHit&&PC(e,{parallelPaths:t.parallelPaths,pointOfHit:t.pointOfHit,sourceRectangle:r,targetRectangle:o},n);i&&(e=i)}return e},PC=(e,t,n)=>{const{parallelPaths:r,pointOfHit:o,sourceRectangle:i,targetRectangle:a}=t;let s=null;return r.forEach(t=>{const r=[o,t[0],t[1]],l=M.getRectangleByPoints(r);if(!M.isHit(l,i)&&!M.isHit(l,a)){const t=M.getCornerPointsByPoints(r);n&&JS.drawRectangle(n,l);const o=[],i=[];e.forEach((e,n)=>{const r=t.findIndex(t=>mt.isEquals(e,t));-1!==r&&(o.push(n),i.push(r))});const a=[...e],u=t.find((e,t)=>!i.includes(t)),c=Math.abs(o[0]-o[o.length-1])+1;a.splice(o[0]+1,c-2,u);const d=_u([...e]).length-1;_u([...a]).length-1<=d&&(s=a)}return null}),s},SC=(e,t,n)=>{const r=[];let o=null,i=null;const a=n?0:1;for(let n=0;n<e.length;n++){const s=e[n-1],l=e[n];null===o&&s&&s[a]===l[a]&&(o=s),null!==o&&s[a]!==l[a]&&(r.push([o,s]),o=null),l[a]===t&&(i=l)}return o&&r.push([o,e[e.length-1]]),{pointOfHit:i,parallelPaths:r}},Kj=e=>{const{nextSourcePoint:t,nextTargetPoint:n,sourceOuterRectangle:r,targetOuterRectangle:o}=e,i=[],a=[];let s=[];[r,o].forEach(e=>{i.push(e.x,e.x+e.width/2,e.x+e.width),a.push(e.y,e.y+e.height/2,e.y+e.height)});const l=[r.x,r.x+r.width,o.x,o.x+o.width].sort((e,t)=>e-t);i.push((l[1]+l[2])/2,t[0],n[0]);const u=[r.y,r.y+r.height,o.y,o.y+o.height].sort((e,t)=>e-t);a.push((u[1]+u[2])/2,t[1],n[1]);for(let e=0;e<i.length;e++)for(let t=0;t<a.length;t++){const n=[i[e],a[t]],l=M.isPointInRectangle(r,n),u=M.isPointInRectangle(o,n);!l&&!u&&s.push(n)}return s=w0(s).filter(e=>{const t=M.isPointInRectangle(r,e),n=M.isPointInRectangle(o,e);return!t&&!n}),s},Yj=e=>{const t=new Uj,n=[],r=[];e.forEach(e=>{const o=e[0],i=e[1];n.indexOf(o)<0&&n.push(o),r.indexOf(i)<0&&r.push(i),t.add(e)}),n.sort((e,t)=>e-t),r.sort((e,t)=>e-t);const o=e=>t.has(e);for(let e=0;e<n.length;e++)for(let i=0;i<r.length;i++){const a=[n[e],r[i]];if(o(a)){if(e>0){const s=[n[e-1],r[i]];o(s)&&(t.connect(s,a),t.connect(a,s))}if(i>0){const s=[n[e],r[i-1]];o(s)&&(t.connect(s,a),t.connect(a,s))}}}return t},qj=(e,t)=>{const n=30;let r=new Array(4).fill(n),o=new Array(4).fill(n);const i=e.x-(t.x+t.width),a=t.x-(e.x+e.width);if(i>0&&i<60){const e=i/2;r[3]=e,o[1]=e}if(a>0&&a<60){const e=a/2;o[3]=e,r[1]=e}const s=e.y-(t.y+t.height),l=t.y-(e.y+e.height);if(s>0&&s<60){const e=s/2;r[0]=e,o[2]=e}if(l>0&&l<60){const e=l/2;r[2]=e,o[0]=e}return{sourceOffset:r,targetOffset:o}},TC=(e,t,n)=>{switch(n){case kt.top:return[e[0],t.y];case kt.bottom:return[e[0],t.y+t.height];case kt.right:return[t.x+t.width,e[1]];default:return[t.x,e[1]]}},Zj=(e,t)=>{const{sourceOffset:n,targetOffset:r}=qj(e,t);return{sourceOuterRectangle:M.expand(e,n[3],n[0],n[1],n[2]),targetOuterRectangle:M.expand(t,r[3],r[0],r[1],r[2])}},Qj=e=>{const{sourcePoint:t,nextSourcePoint:n,sourceRectangle:r,sourceOuterRectangle:o,targetPoint:i,nextTargetPoint:a,targetRectangle:s,targetOuterRectangle:l}=e;return M.isPointInRectangle(s,t)||M.isPointInRectangle(l,n)||M.isPointInRectangle(o,a)||M.isPointInRectangle(r,i)},zm=new Map,v8=(e,t,n)=>{let r=zm.has(e)?zm.get(e):{};r[t]=n,zm.set(e,r)},fv=e=>zm.get(e),tT=new WeakMap,Jj=(e,t)=>{I.getBoardContainer(e).classList.add("draw-elements-rotating"),tT.set(e,t),ol(e,!0)},e$=e=>{I.getBoardContainer(e).classList.remove("draw-elements-rotating"),tT.delete(e),ol(e,!1)},DC=(e,t)=>{const n=e.getRectangle(t);return n?n.width*n.height:0},t$=(e,t,n="asc")=>t.sort((t,r)=>{const o=DC(e,t),i=DC(e,r);return"asc"===n?o-i:i-o}),n$=e=>e&&e!==NS&&e!==H6,xc=(e,t)=>{switch(e){case Ss.dashed:return[8,8+t];case Ss.dotted:return[2,4+t];default:return}},nT=(e,t,n,r)=>t.map(e=>{const t=r&&r(e);if(t)return t;if(e.points){const t=e.points.map(e=>[e[0]-n[0],e[1]-n[1]]);return{...e,points:t}}return e}),rT=(e,t,n,r)=>{const o={};t.forEach(e=>{o[e.id]=En()}),t.forEach(t=>{t.id=o[t.id],r&&r(t,o),t.points&&(t.points=t.points.map(e=>[n[0]+e[0],n[1]+e[1]])),Xe.insertNode(e,t,[e.children.length])}),Xe.addSelectionWithTemporaryElements(e,t)},Yn=(e,t,n=kt.right)=>n===kt.left?[e[0]-t,e[1]]:n===kt.bottom?[e[0],e[1]+t]:n===kt.top?[e[0],e[1]-t]:[e[0]+t,e[1]],ym=(e,t,n=kt.right)=>n===kt.bottom||n===kt.top?[e[0]+t,e[1]]:[e[0],e[1]+t],r$=e=>0===e?kt.top:1===e?kt.right:2===e?kt.bottom:3===e?kt.left:kt.right,iT=(e,t,n)=>Math.abs(n?e[0]-t[0]:e[1]-t[1]),i$="foreign-object-image",yy=class extends Yo{constructor(e,t){super(e,t),this.board=e,this.options=t,this.isFocus=!1}canDraw(e){return!!this.options.getImageItem(e)}draw(e){this.element=e;const t=Lt(),n=this.options.getRectangle(e);this.foreignObject=L4(n.x,n.y,n.width,n.height),this.foreignObject.classList.add(i$),t.append(this.foreignObject);const r={board:this.board,imageItem:this.options.getImageItem(e),element:e,getRectangle:()=>this.options.getRectangle(e)};return this.imageComponentRef=this.board.renderImage(this.foreignObject,r),this.activeGenerator=Ep(this.board,{getStrokeWidth:()=>(1===Qe(this.board).length&&gi(this.board),1),getStrokeOpacity:()=>{const e=Qe(this.board);return 1===e.length&&!gi(this.board)||!e.length?1:.5},getRectangle:()=>this.options.getRectangle(this.element),hasResizeHandle:()=>{const e=uv(this.board,this.element);return!!fo(this.board)||e}}),t}updateImage(e,t,n){if(this.element=n,t!==n&&this.imageComponentRef){const e={imageItem:this.options.getImageItem(n),element:n,getRectangle:()=>this.options.getRectangle(n)};this.imageComponentRef.update(e)}const r=this.options.getRectangle(n);Pg(this.g,r.width,r.height,r.x,r.y),r&&void 0!==n.angle&&Ps(this.g,M.getCenterPoint(r),n.angle);const o=I.getActiveHost(this.board);this.activeGenerator.processDrawing(n,o,{selected:this.isFocus})}setFocus(e,t){this.isFocus=t;const n=I.getActiveHost(this.board);this.activeGenerator.processDrawing(e,n,{selected:t});const r={isFocus:t};this.imageComponentRef.update(r)}destroy(){var e,t;super.destroy(),null==(e=this.imageComponentRef)||e.destroy(),null==(t=this.activeGenerator)||t.destroy()}};yy.key="image-generator";let qu=yy;const Pp=(e,t,n)=>{Qe(e).forEach(r=>{if(null!=n&&n.match&&(null==n||!n.match(r)))return;const o=I.findPath(e,r),i=null!=n&&n.getMemorizeKey?null==n?void 0:n.getMemorizeKey(r):"";for(let e in t)i&&v8(i,e,t[e]);null!=n&&n.callback?n.callback(r,o):Xe.setNode(e,t,o)})},o$=(e,t,n)=>{Pp(e,{strokeStyle:t},n)},s$=(e,t,n)=>{Pp(e,{fill:t},n)},a$=(e,t,n)=>{Pp(e,{strokeColor:t},n)},u$=(e,t,n)=>{Pp(e,{strokeWidth:t},n)},tu={setFillColor:s$,setStrokeStyle:o$,setProperty:Pp,setStrokeWidth:u$,setStrokeColor:a$},qf=(e,t=!1)=>{let n=e[0],r=e[1];if(t){const e=Math.abs(n[0]-r[0]),t=Math.abs(n[1]-r[1]),o=Math.max(t,e);r=[n[0]+(r[0]>n[0]?o:-o),n[1]+(r[1]>n[1]?o:-o)]}return[[Math.min(n[0],r[0]),Math.min(n[1],r[1])],[Math.max(n[0],r[0]),Math.max(n[1],r[1])]]},AC=(e,t)=>!I.isReadonly(e)&&!I.hasBeenTextEditing(e)&&I.isPointer(e,Zt.selection),ah=(e,t)=>{const{pointerDown:n,pointerMove:r,globalPointerUp:o}=e;let i=null,a=null,s=null,l=null;e.pointerDown=r=>{if(!t.canResize()||!AC(e)||!Va(r))return void n(r);const o=At(e,Ot(e,r.x,r.y));if(i=t.hitTest(o),i)return i.cursorClass&&I.getBoardContainer(e).classList.add(`${i.cursorClass}`),s=[r.x,r.y],void(a={path:Array.isArray(i.element)?i.element.map(t=>I.findPath(e,t)):I.findPath(e,i.element),element:i.element,handle:i.handle,handleIndex:i.handleIndex,rectangle:i.rectangle,options:i.options});n(r)},e.pointerMove=n=>{if(!t.canResize()||!AC(e))return u(),void r(n);if(s&&i&&!Gu(e)){const r=[n.x,n.y];Tt(s[0],s[1],r[0],r[1])>3&&(Bj(e,a,t.key),br.set(e,!0),t.beforeResize&&t.beforeResize(a))}if(Gu(e)||cc(e)){if(s&&Gu(e)){n.preventDefault();const r=At(e,Ot(e,n.x,n.y));return void Ua(e,"with-common-resize",()=>{s&&a&&t.onResize(a,{startPoint:At(e,Ot(e,s[0],s[1])),endPoint:r,isShift:!!n.shiftKey})})}}else{const r=At(e,Ot(e,n.x,n.y));Ua(e,t.key+"-common-resize-hit-test",()=>{const n=t.hitTest(r);n?(l&&n.cursorClass!==l.cursorClass&&I.getBoardContainer(e).classList.remove(`${l.cursorClass}`),l=n,l.cursorClass&&I.getBoardContainer(e).classList.add(`${l.cursorClass}`)):u()})}r(n)},e.globalPointerUp=n=>{o(n),(Gu(e)||i)&&(t.afterResize&&t.afterResize(a),Rj(e,t.key),s=null,i=null,a=null,br.set(e,!1))};const u=()=>{l&&(l.cursorClass&&I.getBoardContainer(e).classList.remove(`${l.cursorClass}`),l=null)};return e};class l$ extends Yo{canDraw(e){return!0}draw(e,t){const n={stroke:"",strokeWidth:1,strokeLineDash:[5]};let r={x:0,y:0,width:0,height:0};return t&&(n.stroke="#999",r=z4(this.board,e,!0)),ua(this.board,r,n)}}class c${constructor(){this.textManages=[],this.generatorMap=new Map,this.updateActiveSection=()=>{}}addGenerator(e,t){this.generatorMap.set(e,t)}getGenerator(e){return this.generatorMap.get(e)}initializeTextManage(e){this.textManages=[],Array.isArray(e)?this.textManages.push(...e):this.textManages.push(e)}getTextManages(){return this.textManages}destroyTextManage(){this.textManages.forEach(e=>{e.destroy()}),this.textManages=[]}}class Ec extends HF{constructor(e=new c$){super(e)}}class f$ extends Ec{constructor(){super()}initializeGenerator(){this.activeGenerator=Ep(this.board,{getRectangle:e=>z4(this.board,e),getStrokeWidth:()=>0,getStrokeOpacity:()=>0,hasResizeHandle:()=>!gi(this.board)}),this.groupGenerator=new l$(this.board)}initialize(){super.initialize(),this.initializeGenerator();const e=I.getBoardContext(this.board);this.onStableSubscription=e.onStable().subscribe(()=>{const e=Bs(this.board,this.element,!1,!0),t=e.some(e=>T6(this.board,e))&&!e.every(e=>T6(this.board,e));this.groupGenerator.processDrawing(this.element,this.getElementG(),t)})}onContextChanged(e,t){}destroy(){var e;super.destroy(),null==(e=this.onStableSubscription)||e.unsubscribe()}}function oT(e){let t,n;const{drawElement:r,pointerMove:o,globalPointerUp:i,insertFragment:a,getDeletedFragment:s,deleteFragment:l,getRelatedFragment:u,getRectangle:c,keyDown:d}=e;return e.drawElement=e=>wo.isGroup(e.element)?f$:r(e),e.pointerMove=n=>{Ua(e,"with-group",()=>{null==t||t.remove();const r=At(e,Ot(e,n.x,n.y));let o={anchor:r,focus:r};e.selection&&!v0.isCollapsed(e.selection)&&(o=e.selection);const i=I.getPointer(e);if(!Gu(e)&&!fc(e)&&i===Zt.selection){const n=iP(e,o);n.length&&(t=YI(e,n),t&&I.getElementTopHost(e).append(t))}}),o(n)},e.globalPointerUp=e=>{null==t||t.remove(),t=null,i(e)},e.getRelatedFragment=(t,n)=>{const r=XI(e,t,n);return u([...t,...r],n)},e.insertFragment=(t,n,r)=>{var o,i;let s=[];if(null!=(o=null==t?void 0:t.elements)&&o.length){s=new Array(null==(i=null==t?void 0:t.elements)?void 0:i.length);const n=Cc(e,null==t?void 0:t.elements);U4(e,null==t?void 0:t.elements).forEach(e=>{const n=t.elements.map(e=>e.id).indexOf(e.id);s.splice(n,1,e.groupId?w3(e,void 0):e)}),n.length&&n.forEach(e=>{const n=t.elements.map(e=>e.id).indexOf(e.id),r={...w3(e,void 0),id:En()};s.splice(n,1,r),sT(e,t.elements,r.id,s)}),t.elements=s}a(t,n,r),(null==s?void 0:s.filter(e=>wo.isGroup(e))).forEach(t=>{Xe.insertNode(e,t,[e.children.length])})},e.getDeletedFragment=t=>(n=h$(e),n&&n.length&&t.push(...n),s(t)),e.deleteFragment=t=>{null!=n&&n.length&&g$(e,n),l(t),n=null},e.getRectangle=t=>wo.isGroup(t)?z4(e,t,!0):c(t),e.keyDown=t=>{if(!I.isReadonly(e)){if(nn.isKeyHotkey("mod+g",t))return t.preventDefault(),void Xe.addGroup(e);if(nn.isKeyHotkey("mod+shift+g",t))return t.preventDefault(),void Xe.removeGroup(e)}d(t)},e}const w3=(e,t)=>({...e,groupId:t}),sT=(e,t,n,r)=>{const o=t.filter(t=>t.groupId===e.id);return o.length&&o.forEach(e=>{const o=t.map(e=>e.id).indexOf(e.id);if(wo.isGroup(e)){const i={...w3(e,n),id:En()};r.splice(o,1,i),sT(e,t,i.id,r)}else r.splice(o,1,w3(e,n))}),r},h$=e=>{const t=[...e.getRelatedFragment([])],n=[...Cc(e),...X4(e)];return n.forEach(r=>{const o=wc(e,r,!0);if(o.length){const r=Bs(e,o[0],!1,!0).filter(e=>![...n,...t].map(e=>e.id).includes(e.id));if((1===r.length||0===r.length)&&(t.includes(o[0])||t.push(o[0]),1===r.length&&o.length>1)){const r=d$(e,o.slice(1,o.length),[...n,...t]);let i=o.length;r&&(i=o.findIndex(e=>e.id===r.id)),[...o.slice(1,i)].forEach(e=>{t.includes(e)||t.push(e)})}}}),t},d$=(e,t,n)=>{let r=null;for(let o=0;o<t.length;o++)if(Bs(e,t[o],!1,!0).filter(e=>!n.map(e=>e.id).includes(e.id)).length>0){r=t[o];break}return r},g$=(e,t)=>{const n=X4(e);[...Cc(e),...n.filter(e=>e.groupId)].forEach(n=>{const r=wc(e,n,!0);if(r.length){const o=Bs(e,r[0],!1,!0).filter(e=>e.id!==n.id);if(1===o.length){const n=t.map(e=>e.id);if(r.some(e=>n.includes(e.id))){const t=r.find(e=>!n.includes(e.id)),i=I.findPath(e,o[0]);Xe.setNode(e,{groupId:(null==t?void 0:t.id)||void 0},i)}}}})},v5=new WeakMap,p$=e=>{if(e){if(!v5.get(e)){const t=document.createElement("canvas");return v5.set(e,t),t}return v5.get(e)}return document.createElement("canvas")};function Sp(e,t,n,r=1e4){const o=p$(e).getContext("2d"),i=Ke.texts(t),a=[[]];for(const e of i){const[t]=e;Ke.string(t).split("\n").forEach((e,n)=>{const r={...t,text:e};if(0===n)a[a.length-1].push(r);else{const e=[];e.push(r),a.push(e)}})}let s=0,l=0;return a.forEach((e,t)=>{let i=0,a=EC(n.fontSize);if(e.forEach((t,r)=>{const s=m$(t,{fontFamily:n.fontFamily,fontSize:n.fontSize});o.font=s,i+=o.measureText(t.text).width;const l=r===e.length-1;if(t["font-size"]&&(l||""!==t.text)){const e=EC(parseFloat(t["font-size"]));e>a&&(a=e)}}),i<=r)i>s&&(s=i),l+=a;else{s=r;const e=Math.ceil(i/r);l+=a*e}}),{width:s,height:l}}const m$=(e,t)=>`${e.italic?"italic ":""} ${e.bold?"bold ":""} ${e["font-size"]||t.fontSize}px ${t.fontFamily} `;class Tp{constructor(e,t){this.board=e,this.options=t,this.isEditing=!1,this.getSize=(e,t)=>{const n=window.getComputedStyle(this.foreignObject.children[0]),r=n.fontFamily,o=parseFloat(n.fontSize),i=e||this.editor.children[0];return Sp(this.board,i,{fontSize:o,fontFamily:r},t||this.options.getMaxWidth())},this.getText=()=>this.editor.children[0],this.options.getMaxWidth||(this.options.getMaxWidth=()=>999)}draw(e){const t=this.options.getRectangle();this.g=Lt(),this.foreignObject=L4(t.x,t.y,t.width,t.height),this.g.append(this.foreignObject),this.g.classList.add("text");const n={board:this.board,text:e,textPlugins:this.options.textPlugins,onChange:e=>{if(e.operations.some(e=>!Nu.isSelectionOperation(e))){const{width:t,height:n}=this.getSize();this.options.onChange&&this.options.onChange({...e,width:t,height:n}),br.set(this.board,!0)}},afterInit:e=>{this.editor=e},onComposition:e=>{if("compositionend"===e.type)return;const t=v$(this.editor,e.data);if(t){const e=this.getSize(t.children[0]);this.options.onChange&&this.options.onChange({...e}),br.set(this.board,!0)}}};this.textComponentRef=this.board.renderText(this.foreignObject,n)}updateRectangleWidth(e){RO(this.g,e)}updateAngle(e,t=0){Ps(this.g,e,t)}updateRectangle(e){const{x:t,y:n,width:r,height:o}=e||this.options.getRectangle();Pg(this.g,r,o,t,n)}updateText(e){const t={text:e};this.textComponentRef.update(t)}edit(e,t){this.isEditing=!0,h6.set(this.board,!0);this.textComponentRef.update({readonly:!1}),Re.select(this.editor,[0]);const n=n3(document,"mousedown").subscribe(e=>{const t=At(this.board,Ot(this.board,e.x,e.y)),n=this.options.getRenderRectangle?this.options.getRenderRectangle():this.options.getRectangle(),r=M.isHit(M.getRectangleByPoints([t,t]),n),i=e.target.closest(".plait-board-attached");!r&&!i&&nO(0).subscribe(()=>{o()})}),r=n3(document,"keydown").subscribe(e=>{if(!e.isComposing&&("Escape"===e.key||"Tab"===e.key||t&&t(e)))return e.preventDefault(),e.stopPropagation(),void o()}),o=()=>{if(this.isEditing){this.updateRectangle(),n.unsubscribe(),r.unsubscribe(),h6.set(this.board,!1),br.set(this.board,!1),e&&e();const t={readonly:!0};this.textComponentRef.update(t),this.isEditing=!1,this.exitCallback=void 0}};return this.exitCallback=o,o}destroy(){var e,t;null==(e=this.g)||e.remove(),null==(t=this.textComponentRef)||t.destroy(),this.exitCallback&&this.exitCallback()}}const v$=(e,t)=>{if(e.selection&&Ee.isCollapsed(e.selection)){const[n,r]=F.node(e,e.selection),o=e.selection.anchor.offset,i={children:[JSON.parse(JSON.stringify(e.children[0]))]},a=n.text.slice(0,o+1)+t+n.text.slice(o+1);return Ke.get(i,r).text=a,i}return null},y$=e=>{const t=e;return t.renderText=(e,t)=>{throw new Error("No implementation for renderText method.")},t};var hi;!function(e){e.left="left",e.center="center",e.right="right"}(hi||(hi={}));const w$=e=>{const t=e;return t.renderImage=(e,t)=>{throw new Error("No implementation for renderImage method.")},t},$6={isActive(e,t){const n=Ke.get(e,BC);if(n){const{align:e}=n;return e===t}return!1},setAlign(e,t){const n={align:t};Re.setNodes(e,n,{at:BC})}},BC=[0];var li;!function(e){e.bold="bold",e.italic="italic",e.underline="underlined",e.strike="strike",e.color="color",e.fontSize="font-size"}(li||(li={}));const RC=[li.bold,li.color,li.italic,li.strike,li.underline,li.fontSize];var C3;!function(e){e.fontSize12="12",e.fontSize13="13",e.fontSize14="14",e.fontSize15="15",e.fontSize16="16",e.fontSize18="18",e.fontSize20="20",e.fontSize24="24",e.fontSize28="28",e.fontSize32="32",e.fontSize40="40",e.fontSize48="48"}(C3||(C3={})),li.bold,li.italic,li.underline,li.strike;const hv=14,ja={getMarks(e){const t={};let n=[];e.selection?n=e.selection:e.children&&e.children.length>0&&(n={anchor:F.start(e,[0]),focus:F.end(e,[0])});const r=F.nodes(e,{match:ot.isText,at:n});for(const e of r){const[n]=e,{text:r,...o}=n;Object.assign(t,o)}for(const e in t)RC.includes(e)||delete t[e];return t},getMarksByElement(e){const t={},n=Ke.texts(e);for(const e of n){const[n]=e,{text:r,...o}=n;Object.assign(t,o)}for(const e in t)RC.includes(e)||delete t[e];return t},isMarkActive(e,t){var n,r;if(null==e||!e.selection)return;const o=Ke.get(e,null==(r=null==(n=null==e?void 0:e.selection)?void 0:n.anchor)?void 0:r.path);if(!ot.isText(o))return!1;const i=ja.getMarks(e);return!(!i||!i[t])},toggleMark(e,t){y5(e),ja.isMarkActive(e,t)?F.removeMark(e,t):F.addMark(e,t,!0)},setFontSizeMark(e,t,n=14){y5(e),Number(t)===n?F.removeMark(e,li.fontSize):F.addMark(e,li.fontSize,Number(t))},setColorMark(e,t,n=qr){y5(e),t===n||null==t?F.removeMark(e,"color"):F.addMark(e,"color",t)}};function y5(e){e.selection||Re.select(e,[0])}const $a={wrapLink(e,t,n){$a.isLinkActive(e)&&$a.unwrapLink(e);const{selection:r}=e,o={type:"link",url:n,children:[{text:t}]};if(r&&Ee.isCollapsed(r)||""===Ke.string(e))Re.insertNodes(e,o);else if(r)Re.wrapNodes(e,o,{split:!0}),Re.collapse(e,{edge:"end"});else{const t={anchor:F.start(e,[0]),focus:F.end(e,[0])};Re.wrapNodes(e,o,{split:!0,at:t})}},unwrapLink(e,t){t||!(t=e.selection)&&e.children&&e.children.length>0&&(t={anchor:F.start(e,[0]),focus:F.end(e,[0])}),Re.unwrapNodes(e,{at:t,match:e=>ut.isElement(e)&&"link"===e.type})},isLinkActive(e){let t=e.selection;!t&&e.children&&e.children.length>0&&(t={anchor:F.start(e,[0]),focus:F.end(e,[0])});const[n]=F.nodes(e,{match:e=>ut.isElement(e)&&"link"===e.type,at:t});return!!n},getLinkElement(e){let t=e.selection;!t&&e.children&&e.children.length>0&&(t={anchor:F.start(e,[0]),focus:F.end(e,[0])});const[n]=F.nodes(e,{match:e=>ut.isElement(e)&&"link"===e.type,at:t});return n}},aT=20;function MC(e){if("string"!=typeof e)return!1;const t=e.match(/^mailto:([^\s@]+@[^\s@]+\.[^\s@]+)$/);if(t)return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t[1]);const n=e.match(/^(?:\w+:)?\/\/(\S+)$/);if(!n)return!1;const r=n[1];return!!r&&!(!/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/.test(r)&&!/^[^\s\.]+\.\S{2,}$/.test(r))}const uT=e=>{const t=sh(e)[0];return t&&0!==t.children.length?ja.getMarks(t):{}},C$=(e,t,n)=>{let r;if(null!=n&&n.length)r=n;else{const n=Qe(e);if(n.length){const o=Gj(e);if(!o)return;const i=ja.getMarks(o),a=n.filter(e=>sh(e).some(e=>ja.getMarks(e)[t]===i[t]));r=qS(e,a)}}r&&r.length&&r.forEach(e=>{ja.toggleMark(e,t)})},x$=(e,t,n,r)=>{const o=y8(e,r);if(o&&o.length){const r=Qe(e);o.forEach(e=>{let o;if("function"==typeof n){const t=r.find(t=>sh(t).includes(e));o=n(t)}else o=n;ja.setFontSizeMark(e,t,o)})}},E$=(e,t,n,r)=>{const o=y8(e,r);o&&o.length&&o.forEach(e=>{n&&Re.select(e,n),"transparent"===t?F.removeMark(e,li.color):ja.setColorMark(e,t)})},P$=(e,t,n)=>{const r=y8(e,n);r&&r.length&&r.forEach(e=>$6.setAlign(e,t))},y8=(e,t)=>{let n;return n=null!=t&&t.length?t:qS(e),n},W6={setTextAlign:P$,setTextColor:E$,setFontSize:x$,setTextMarks:C$},bC=()=>b.jsx("span",{contentEditable:!1,style:{fontSize:0},children:String.fromCodePoint(160)}),S$=({attributes:e,children:t,element:n})=>b.jsxs("a",{...e,style:{textDecoration:"none",cursor:"inherit"},"data-url":n.url,className:"plait-board-link",children:[b.jsx(bC,{}),t,b.jsx(bC,{})]}),T$=e=>{const{insertData:t,insertText:n,isInline:r}=e;return e.isInline=e=>e.type&&["link"].includes(e.type)||r(e),e.insertText=t=>{t&&MC(t)?$a.wrapLink(e,t,t):n(t)},e.insertData=n=>{const r=n.getData("text/plain");r&&MC(r)?$a.wrapLink(e,r,r):t(n)},e},kC=e=>{const{text:t,readonly:n,onChange:r,onComposition:o,afterInit:i}=e,a=j.useCallback(e=>b.jsx(B$,{...e}),[]),s=[t],l=j.useMemo(()=>{const e=T$(xj(yj(mj(ZN()))));return i&&i(e),e},[]);j.useEffect(()=>{t!==l.children[0]&&(l.children=[t],l.onChange())},[t,l]);return b.jsx(pj,{editor:l,initialValue:s,onChange:e=>{r&&r({newText:l.children[0],operations:l.operations})},children:b.jsx(uj,{className:"slate-editable-container plait-text-container",renderElement:e=>b.jsx(D$,{...e}),renderLeaf:a,readOnly:void 0===n||n,onCompositionStart:e=>{o&&o(e)},onCompositionUpdate:e=>{o&&o(e)},onCompositionEnd:e=>{o&&o(e)},onKeyDown:e=>{const{selection:t}=l;if(t&&Ee.isCollapsed(t)){const{nativeEvent:t}=e;if(nn.isKeyHotkey("left",t))return e.preventDefault(),void Re.move(l,{unit:"offset",reverse:!0});if(nn.isKeyHotkey("right",t))return e.preventDefault(),void Re.move(l,{unit:"offset"})}}})})},D$=e=>{const{attributes:t,children:n,element:r}=e;return"link"===r.type?b.jsx(S$,{...e}):b.jsx(A$,{...e})},A$=({attributes:e,children:t,element:n})=>{const r={textAlign:n.align};return b.jsx("div",{style:r,...e,children:t})},B$=({children:e,leaf:t,attributes:n})=>(t.bold&&(e=b.jsx("strong",{children:e})),t.code&&(e=b.jsx("code",{children:e})),t.italic&&(e=b.jsx("em",{children:e})),t.underlined&&(e=b.jsx("u",{children:e})),b.jsx("span",{style:{color:t.color},...n,children:e})),R$=e=>{const t=e;return t.renderText=(e,t)=>{const n=z3.createRoot(e);let r;const o=b.jsx(kC,{...t,afterInit:e=>{r=e,t.afterInit&&t.afterInit(e)}});n.render(o);let i={...t};return{destroy:()=>{setTimeout(()=>{n.unmount()},0)},update:e=>{if(!e||!i||Object.keys(e).every(t=>e[t]===i[t]))return;const t=ze.isReadOnly(r);i={...i,...e},n.render(b.jsx(kC,{...i})),!0===t&&!1===i.readonly?setTimeout(()=>{ze.focus(r)},0):!1===t&&!0===i.readonly&&(ze.blur(r),ze.deselect(r))}}},t},M$=e=>{const{pointerDown:t,pointerMove:n,pointerUp:r,globalPointerUp:o}=e,i=[];let a=!1;return e.pointerDown=n=>{const r=[n.clientX,n.clientY];i.length<2&&(e.viewport.zoom,i.push({pointerId:n.pointerId,lastPoint:r,currentPoint:r,hasMoved:!1})),t(n)},e.pointerMove=t=>{const r=[t.clientX,t.clientY];if(i.length>=2){const n=i.find(e=>e.pointerId===t.pointerId);if(n&&(n.currentPoint=r,n.hasMoved=!0,2===i.length&&i.every(e=>e.hasMoved))){const[t,n]=i,r=x9(...t.lastPoint,...n.lastPoint),o=x9(...t.currentPoint,...n.currentPoint),s=o[0]-r[0],l=o[1]-r[1],u=I.getBoardContainer(e).getBoundingClientRect(),c=u.width/2,d=u.height/2,h=e.viewport.zoom,f=b0(e);let p=f[0]+c/h-s/h,g=f[1]+d/h-l/h,m=[p-u.width/2/h,g-u.height/2/h],v=h;const y=Tt(...t.lastPoint,...n.lastPoint),b=Tt(...t.currentPoint,...n.currentPoint)/y,w=[t.currentPoint[0]-t.lastPoint[0],t.currentPoint[1]-t.lastPoint[1]],x=[n.currentPoint[0]-n.lastPoint[0],n.currentPoint[1]-n.lastPoint[1]],C=(w[0]*x[0]+w[1]*x[1])/(Math.sqrt(w[0]*w[0]+w[1]*w[1])*Math.sqrt(x[0]*x[0]+x[1]*x[1])||1);if(a=!!(C<-.7||C<=.8&&a&&b>=.01),a){v=Math.min(Math.max(e.viewport.zoom*b,XE),4);const t=I.getBoardContainer(e).getBoundingClientRect(),n=o[0]-t.x,r=o[1]-t.y;p=m[0]+n/h,g=m[1]+r/h,m=[p-n/v,g-r/v]}vn.updateViewport(e,m,v),i.forEach(e=>{e.lastPoint=e.currentPoint,e.hasMoved=!1})}return}n(t)},e.pointerUp=e=>{const t=i.findIndex(t=>t.pointerId===e.pointerId);-1!==t&&i.splice(t,1),r(e)},e.globalPointerUp=e=>{const t=i.findIndex(t=>t.pointerId===e.pointerId);-1!==t&&i.splice(t,1),o(e)},e},lT=({value:e,children:t,options:n,plugins:r,viewport:o,theme:i,onChange:a,onSelectionChange:s,onValueChange:l,onViewportChange:u,onThemeChange:c})=>{const[d,h]=j.useState(()=>{const t=b$(e,n,r,o,i);return{v:0,board:t,listRender:k$(t)}}),{board:f,listRender:p}=d,g=j.useCallback(()=>{if(a){const e={children:f.children,operations:f.operations,viewport:f.viewport,selection:f.selection,theme:f.theme};a(e)}const e=f.operations.some(e=>ql.isSetSelectionOperation(e)),t=f.operations.some(e=>ql.isSetViewportOperation(e)),n=f.operations.some(e=>ql.isSetThemeOperation(e)),r=f.operations.length>0&&!f.operations.every(e=>ql.isSetSelectionOperation(e)||ql.isSetViewportOperation(e)||ql.isSetThemeOperation(e));l&&r&&l(f.children),s&&e&&s(f.selection),u&&t&&u(f.viewport),c&&n&&c(f.theme.themeColorMode),h(e=>({v:e.v+1,board:f,listRender:p}))},[f,a,s,l]);j.useEffect(()=>(r3.set(f,()=>{if(f.operations.length&&f.operations.every(e=>"set_selection"===e.type))return void p.update(f.children,{board:f,parent:f,parentG:I.getElementHost(f)});const e=f.operations.length&&f.operations.some(e=>"set_viewport"===e.type);if(e&&aI(f))return vP(f,!1),void p.update(f.children,{board:f,parent:f,parentG:I.getElementHost(f)});p.update(f.children,{board:f,parent:f,parentG:I.getElementHost(f)}),e?j4(f):iI(f),u3(f),Qe(f).forEach(e=>{yn.getElementRef(e).updateActiveSection()})}),i3.set(f,()=>{g()}),()=>{r3.delete(f),i3.delete(f)}),[f]);const m=j.useRef(!0);return j.useEffect(()=>{m.current?m.current=!1:e!==d.board.children&&!Fm.get(f)&&(f.children=e,p.update(f.children,{board:f,parent:f,parentG:I.getElementHost(f)}),vn.fitViewport(f))},[e]),b.jsx(Q4.Provider,{value:d,children:t})},b$=(e,t,n,r,o)=>{let i=iL(UF(zF(VF(oL(tL(WF(sL(rL(R$(w$(y$($F(e,t)))))))))))));return n.forEach(e=>{i=e(i)}),M$(i),r&&(i.viewport=r),o&&(i.theme=o),i},k$=e=>new VP(e);function O$(e,t){return Math.sqrt(I$(e,t))}function I$(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function Wd(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function F$(e,t){const n=e[t+0],r=e[t+1],o=e[t+2],i=e[t+3];let a=3*r[0]-2*n[0]-i[0];a*=a;let s=3*r[1]-2*n[1]-i[1];s*=s;let l=3*o[0]-2*i[0]-n[0];l*=l;let u=3*o[1]-2*i[1]-n[1];return u*=u,a<l&&(a=l),s<u&&(s=u),a+s}function z6(e,t,n,r){const o=r||[];if(F$(e,t)<n){const n=e[t+0];o.length?O$(o[o.length-1],n)>1&&o.push(n):o.push(n),o.push(e[t+3])}else{const r=e[t+0],i=e[t+1],a=e[t+2],s=e[t+3],l=Wd(r,i,.5),u=Wd(i,a,.5),c=Wd(a,s,.5),d=Wd(l,u,.5),h=Wd(u,c,.5),f=Wd(d,h,.5);z6([r,l,d,f],0,n,o),z6([f,h,c,s],0,n,o)}return o}function Co(e,t=.15,n){const r=[],o=(e.length-1)/3;for(let n=0;n<o;n++){z6(e,3*n,t,r)}return r}var pt,gt,ft,Ko,mo,sa,x0;!function(e){e.rectangle="rectangle",e.ellipse="ellipse",e.diamond="diamond",e.roundRectangle="roundRectangle",e.parallelogram="parallelogram",e.text="text",e.triangle="triangle",e.leftArrow="leftArrow",e.trapezoid="trapezoid",e.rightArrow="rightArrow",e.cross="cross",e.star="star",e.pentagon="pentagon",e.hexagon="hexagon",e.octagon="octagon",e.pentagonArrow="pentagonArrow",e.processArrow="processArrow",e.twoWayArrow="twoWayArrow",e.comment="comment",e.roundComment="roundComment",e.cloud="cloud"}(pt||(pt={})),function(e){e.process="process",e.decision="decision",e.data="data",e.connector="connector",e.terminal="terminal",e.manualInput="manualInput",e.preparation="preparation",e.manualLoop="manualLoop",e.merge="merge",e.delay="delay",e.storedData="storedData",e.or="or",e.summingJunction="summingJunction",e.predefinedProcess="predefinedProcess",e.offPage="offPage",e.document="document",e.multiDocument="multiDocument",e.database="database",e.hardDisk="hardDisk",e.internalStorage="internalStorage",e.noteCurlyRight="noteCurlyRight",e.noteCurlyLeft="noteCurlyLeft",e.noteSquare="noteSquare",e.display="display"}(gt||(gt={})),function(e){e.actor="actor",e.useCase="useCase",e.container="container",e.note="note",e.simpleClass="simpleClass",e.activityClass="activityClass",e.branchMerge="branchMerge",e.port="port",e.package="package",e.combinedFragment="combinedFragment",e.class="class",e.interface="interface",e.object="object",e.component="component",e.componentBox="componentBox",e.template="template",e.activation="activation",e.deletion="deletion",e.assembly="assembly",e.providedInterface="providedInterface",e.requiredInterface="requiredInterface"}(ft||(ft={})),function(e){e.name="name",e.content="content"}(Ko||(Ko={})),function(e){e.swimlaneVertical="swimlaneVertical",e.swimlaneHorizontal="swimlaneHorizontal"}(mo||(mo={})),function(e){e.swimlaneVertical="swimlaneVertical",e.swimlaneHorizontal="swimlaneHorizontal",e.swimlaneVerticalWithHeader="swimlaneVerticalWithHeader",e.swimlaneHorizontalWithHeader="swimlaneHorizontalWithHeader"}(sa||(sa={})),(x0||(x0={})).table="table";const qg={isTable:e=>"table"===e.type,isVerticalText:e=>{var t;return"vertical"===(null==(t=e.text)?void 0:t.direction)}},cT="plait-draw-plugin-key";var x3;!function(e){e.lineText="line-text",e.geometryText="geometry-text"}(x3||(x3={}));const lt={rectangleAndText:4},dv={strokeWidth:2,fill:NS},L$={selectionStrokeWidth:1},Zg={width:100,height:100,strokeColor:qr,strokeWidth:2},OC={width:120,height:50},_$={width:138,height:80},IC={width:100,height:80},N$={width:120,height:100},gv={height:20,text:""},fT={defaultTextMaxWidth:476},w5={width:44,height:44},Ia={width:120,height:60},H$={width:70,height:80},G$={width:80,height:80},j$={width:140,height:70},$$={width:124,height:60},hT={width:120,height:70},C5={width:160,height:100},V6={width:120,height:80},W$={width:117,height:59},z$={width:47,height:33},V$={width:68,height:100},U$={width:300,height:240},X$={width:210,height:150,texts:[{id:Ko.name,text:"",align:hi.left},{id:Ko.content,text:"",align:hi.left}]},K$={width:18,height:80},wm={width:120,height:60},Y$={width:200,height:150},FC={width:40,height:40},q$={width:20,height:20},Z$={width:70,height:56},Q$={width:120,height:56},J$={width:70,height:34},eW={width:400,height:280,texts:[{id:Ko.name,text:"Opt | Alt | Loop",align:hi.left},{id:Ko.content,text:"[Condition]",align:hi.left}]},tW={width:230,height:180,texts:[{text:"Class",align:hi.center},{text:"+ attribute1:type  defaultValue\n+ attribute2:type\n- attribute3:type",align:hi.left},{text:"+ operation1(params):returnType\n- operation2(params)\n- operation3()",align:hi.left}]},nW={width:230,height:140,texts:[{text:"<<interface>>\nInterface",align:hi.center},{text:"+ operation1(params):returnType\n- operation2(params)\n- operation3()",align:hi.left}]},dT={[pt.pentagonArrow]:OC,[pt.processArrow]:OC,[pt.cloud]:N$,[pt.twoWayArrow]:_$,[pt.leftArrow]:IC,[pt.rightArrow]:IC},gT={[gt.connector]:w5,[gt.process]:Ia,[gt.decision]:j$,[gt.data]:$$,[gt.terminal]:Ia,[gt.manualInput]:W$,[gt.preparation]:Ia,[gt.manualLoop]:Ia,[gt.merge]:z$,[gt.delay]:Ia,[gt.storedData]:Ia,[gt.or]:w5,[gt.summingJunction]:w5,[gt.predefinedProcess]:Ia,[gt.offPage]:Ia,[gt.document]:hT,[gt.multiDocument]:V6,[gt.database]:H$,[gt.hardDisk]:Ia,[gt.internalStorage]:G$,[gt.noteCurlyLeft]:C5,[gt.noteCurlyRight]:C5,[gt.noteSquare]:C5,[gt.display]:Ia},pT={[ft.actor]:V$,[ft.useCase]:hT,[ft.container]:U$,[ft.note]:wm,[ft.package]:X$,[ft.combinedFragment]:eW,[ft.class]:tW,[ft.interface]:nW,[ft.activation]:K$,[ft.object]:wm,[ft.deletion]:FC,[ft.activityClass]:wm,[ft.simpleClass]:wm,[ft.component]:V6,[ft.template]:V6,[ft.componentBox]:Y$,[ft.port]:q$,[ft.branchMerge]:FC,[ft.assembly]:Q$,[ft.providedInterface]:J$,[ft.requiredInterface]:Z$},rW={[ft.package]:Object.keys(Ko),[ft.combinedFragment]:Object.keys(Ko)},E3=10,iW=6,oW=8,mT=[gt.or,gt.summingJunction,ft.activation,ft.deletion,ft.port,ft.branchMerge,ft.assembly,ft.providedInterface,ft.requiredInterface],sW=[ft.package,ft.combinedFragment],aW=[gt.noteCurlyLeft,gt.noteCurlyRight,gt.noteSquare,ft.requiredInterface,ft.deletion],w8=()=>[...Object.keys(pt),...Object.keys(gt),...Object.keys(ft)],vT=()=>Object.keys(sa),uW=()=>Object.keys(gt),lW=()=>Object.keys(ft),cW=()=>Object.keys(Fn),fW=()=>Object.keys(A3),hW=1e3,yT={[fr.default]:{strokeColor:qr,fill:"#FFFFFF"},[fr.colorful]:{strokeColor:"#06ADBF",fill:"#CDEFF2"},[fr.soft]:{strokeColor:"#6D89C1",fill:"#DADFEB"},[fr.retro]:{strokeColor:"#E9C358",fill:"#F6EDCF"},[fr.dark]:{strokeColor:"#FFFFFF",fill:"#434343"},[fr.starry]:{strokeColor:"#42ABE5",fill:"#163F5A"}},hg=42,dW={width:580,height:524},gW={width:524,height:580},pW={width:580,height:524},mW={width:524,height:580},wT={[sa.swimlaneHorizontal]:mW,[sa.swimlaneVertical]:pW,[sa.swimlaneHorizontalWithHeader]:gW,[sa.swimlaneVerticalWithHeader]:dW},P3=5,CT={strokeWidth:2},vW=4,yW=6,wW=1,CW=1,xW=12,e0=3,EW="",Qg=new WeakMap,LC=(e,t,n,r)=>{const o=Qg.get(e);return Qg.set(e,{...o,[zT(t,n)]:r})},bg=(e,t,n)=>Qg.get(e)[zT(t,n)],_C=(e,t)=>{const n=Qg.get(e);delete n[t],Qg.set(e,n)};class C8{get shape(){return this.element.shape||this.element.type}constructor(e,t,n,r){this.board=e,this.texts=n,this.element=t,this.options=r}initialize(){const e=(this.board.getPluginOptions(N6)||{}).textPlugins;this.textManages=this.texts.map(t=>{const n=this.createTextManage(t,e);return LC(this.board,this.element,t,n),n}),yn.getElementRef(this.element).initializeTextManage(this.textManages)}draw(e){const t=M.getCenterPoint(this.board.getRectangle(this.element));this.texts.forEach(n=>{const r=bg(this.board,this.element,n);n.text&&r&&(r.draw(n.text),e.append(r.g),(this.element.angle||0===this.element.angle)&&r.updateAngle(t,this.element.angle))})}update(e,t,n,r){this.element=e;const o=M.getCenterPoint(this.board.getRectangle(this.element)),i=(this.board.getPluginOptions(N6)||{}).textPlugins,a=t.filter(e=>!n.find(t=>t.id===e.id));a.length&&a.forEach(t=>{const n=bg(this.board,e,t),r=this.textManages.findIndex(e=>e===n);r>-1&&t.text&&t.textHeight&&this.textManages.splice(r,1),null==n||n.destroy(),_C(this.board,t.id)}),n.forEach(t=>{if(t.text){let n=bg(this.board,this.element,t);n?(n.updateText(t.text),n.updateRectangle()):(n=this.createTextManage(t,i),LC(this.board,e,t,n),n.draw(t.text),r.append(n.g),this.textManages.push(n)),(this.element.angle||0===this.element.angle)&&n.updateAngle(o,this.element.angle)}})}createTextManage(e,t){return new Tp(this.board,{getRectangle:()=>this.getRectangle(e),onChange:t=>this.options.onChange(this.element,t,e),getMaxWidth:()=>this.getMaxWidth(e),getRenderRectangle:()=>this.options.getRenderRectangle?this.options.getRenderRectangle(this.element,e):this.getRectangle(e),textPlugins:t})}getRectangle(e){const t=pi(this.shape).getTextRectangle;return t?t(this.element,e):Tr(this.element)}getMaxWidth(e){return this.options.getMaxWidth?this.options.getMaxWidth():this.getRectangle(e).width}destroy(){yn.getElementRef(this.element).destroyTextManage(),this.textManages=[],this.texts.forEach(e=>{_C(this.board,e.id)})}}const U6=e=>{const t=Qe(e);return t&&1===t.length&&fe.isElementByTable(t[0])},PW=(e,t)=>(null!=t&&t.length?t:Qe(e)).filter(e=>fe.isElementByTable(e)),x8=new WeakMap;function t0(e){return x8.get(e)}function xT(e,t){return x8.set(e,t)}function NC(e){return x8.delete(e)}function Dp(e,t){const n=null==e?void 0:e.buildTable(t);if(!(n&&n.points&&n.columns&&n.rows))throw new Error("can not get table cells points");const r=M.getRectangleByPoints(n.points),o=n.columns.length,i=n.rows.length,a=HC(n.columns,r.width,o,!0),s=HC(n.rows,r.height,i,!1);return n.cells.map(e=>{const t=n.rows.findIndex(t=>t.id===e.rowId),o=n.columns.findIndex(t=>t.id===e.columnId);let i=r.x;for(let e=0;e<o;e++)i+=a[e];let l=r.y;for(let e=0;e<t;e++)l+=s[e];const u=i+GC(e,a,o,!0),c=l+GC(e,s,t,!1);return{...e,points:[[i,l],[u,c]]}})}function uh(e,t,n){try{const r=Dp(e,t);return r[r&&t.cells.findIndex(e=>e.id===n)]}catch{throw new Error("can not get table cell points")}}function HC(e,t,n,r){const o=[],i=r?"width":"height";let a=t;e.forEach((e,t)=>{e[i]&&(o[t]=e[i],a-=e[i])});const s=n-o.filter(e=>!!e).length,l=s>0?a/s:0;for(let e=0;e<n;e++)o[e]||(o[e]=l);return o}function GC(e,t,n,r){const o=r?e.colspan||1:e.rowspan||1;let i=0;for(let e=0;e<o;e++){i+=t[n+e]}return i}function jC(e,t,n){const r=e.buildTable(t),o=Dp(e,r),i=M.getRectangleByPoints([n,n]),a=o.find(e=>{const t=M.getRectangleByPoints(e.points);return M.isHit(i,t)});return a?r.cells.find(e=>e.id===a.id):null}function $C(e,t){const n=ET(e,t);n&&n.edit()}function ET(e,t){return bg(e,void 0,t)}const PT=(e,t,n,r)=>({columns:e.columns.map(e=>e.id===t?{...e,width:n}:e),points:[e.points[0],[e.points[1][0]+r,e.points[1][1]]]}),ST=(e,t,n,r)=>({rows:e.rows.map(e=>e.id===t?{...e,height:n}:e),points:[e.points[0],[e.points[1][0],e.points[1][1]+r]]});function SW(e,t,n,r){const o=`${r}Id`;e.forEach(e=>{e[o]===t&&(e[o]=n)})}function WC(e,t){e[`${t}s`].forEach(n=>{const r=En();SW(e.cells,n.id,r,t),n.id=r})}function TW(e){e.forEach(e=>{const t=En();e.id=t})}function TT(e){return e.text&&e.textHeight}function DW(e,t,n){const r=Dp(e,t),o=n.map(e=>r.find(t=>t.id===e.id).points);return M.getRectangleByPoints(o)}const x5=(e,t,n=null)=>{const r={id:En(),rowId:e,columnId:t};return null!==n&&(r.textHeight=20,r.text={children:[{text:n}],align:hi.center}),r},AW=6,E5=new WeakMap,_0=e=>{let t="";switch(!0){case fe.isText(e):t=Go.text;break;case fe.isBasicShape(e):t=Go.basicShape;break;case fe.isFlowchart(e):t=Go.flowchart;break;case fe.isArrowLine(e):t=Go.arrowLine;break;case fe.isUML(e):t=Go.UML}return t},DT=()=>({...fv(Go.arrowLine)}),Pc=e=>{let t="";t=fe.isBasicShape({shape:e})?e===pt.text?Go.text:Go.basicShape:fe.isUML({shape:e})?Go.UML:Go.flowchart;const n={...fv(t)},r={...n.text};return delete n.text,{textProperties:r,geometryProperties:n}},E8=(e,t)=>{var n;const r=_0(e);let o=(null==(n=fv(r))?void 0:n.text)||{};const i=t.find(e=>"set_node"===e.type);if(i){const{properties:e,newProperties:t}=i;for(const e in t){const n=t[e];null==n?delete o[e]:o[e]=n}for(const n in e)t.hasOwnProperty(n)||delete o[n];v8(r,"text",o)}},BW=(e,t)=>{const n=E5.has(e)?E5.get(e):[],r=n.indexOf(t);t===pt.text||0===r||(-1!==r?n.splice(r,1):6===n.length&&n.pop(),n.unshift(t),E5.set(e,n))},RW="debug:plait:line-mirror",Cm=A0(RW),P8=(e,t)=>{const n=[...t];return mt.isVertical(n,e,3)&&(n[0]=e[0]),mt.isHorizontal(n,e,3)&&(n[1]=e[1]),n};function MW(e,t,n,r){const o={previous:null,next:null},i=e[r],a=e[r+1],s=mt.isHorizontal(i,a),l=mt.isVertical(i,a),u=e[r-1]??e[0],c=e[r-2]??t;(s&&mt.isHorizontal(c,u)||l&&mt.isVertical(c,u))&&(o.previous=u);const d=e[r+2]??e[e.length-1],h=e[r+3]??n;return(s&&mt.isHorizontal(d,h)||l&&mt.isVertical(d,h))&&(o.next=d),o}function bW(e,t,n,r){let o=e,i=t;if(mt.isHorizontal(e,t)){const a=mt.getOffsetY(n.startPoint,n.endPoint);let s=e[1]+a;r.previous&&Math.abs(r.previous[1]-s)<3?s=r.previous[1]:r.next&&Math.abs(r.next[1]-s)<3&&(s=r.next[1]),o=[e[0],s],i=[t[0],s]}if(mt.isVertical(e,t)){const a=mt.getOffsetX(n.startPoint,n.endPoint);let s=e[0]+a;r.previous&&Math.abs(r.previous[0]-s)<3?s=r.previous[0]:r.next&&Math.abs(r.next[0]-s)<3&&(s=r.next[0]),o=[s,e[1]],i=[s,t[1]]}return[o,i]}function AT(e,t,n,r,o){let i=null,a=null;const s=r[o],l=r[o+1];if(!s||!l)return{index:i,deleteCount:a};const u=n.slice(1,-1),c=u.findIndex(e=>mt.isEquals(e,s)),d=u.findIndex(e=>mt.isEquals(e,l));if(Math.max(c,d)>-1){if(c>-1&&d>-1)return{index:c,deleteCount:2};if(c>-1&&-1===d)return c<u.length-1&&mt.isAlign([u[c],u[c+1],s,l])?{index:c,deleteCount:2}:{index:c,deleteCount:1};if(-1===c&&d>-1)return d>0&&mt.isAlign([u[d],u[d-1],s,l])?{index:d-1,deleteCount:2}:{index:d,deleteCount:1}}else for(let e=0;e<u.length-1;e++){const t=u[e],n=u[e+1];if(mt.isAlign([t,n,s,l])){i=e,a=2;break}if(mt.isAlign([t,n,s])){i=Math.min(e+1,u.length-1),a=1;break}if(mt.isAlign([t,n,l])){i=Math.max(e-1,0),a=1;break}}if(null===i)if(a=0,u.length>0){const n=Mp(e,t),s=bp(e,t,n),l=w0(eT(s,e)),c=_u(l.slice(1,l.length-1)),d=BT(e,[r[0],...u,r[r.length-1]],c,s);for(let e=o-1;e>=0;e--){const t=d.slice(1,-1).findIndex(t=>mt.isEquals(t,r[e]));if(t>-1){i=t+1;break}}null===i&&(i=0,mt.isAlign(r)&&(a=u.length))}else i=0;return{index:i,deleteCount:a}}function BT(e,t,n,r){for(let o=1;o<t.length-2;o++)kW(e,o,t,n,r);return t}const kW=(e,t,n,r,o)=>{const i=n[t-1],a=n[t],s=n[t+1],l=n[t+2],u=[i,a],c=[s,l],d=mt.isAlign(u),h=mt.isAlign(c);let f=!1,p=!1;if(!d||!h){const e=X6(r,u[0],u[1]),t=X6(r,c[0],c[1]),n=e.length>0&&t.length>0;f=!d&&!n,p=!h&&!n}if(f||p){const u=[a,s],c=FW(e,u,IW(u,r),o.sourceRectangle,o.targetRectangle);if(1===c.length){const e=c[0];f&&n.splice(t,1,e[0]),p&&n.splice(t+1,1,e[1])}else{const e=mt.isHorizontal(a,s)?0:1;if(f){const r=[a[0],a[1]];r[e]=i[e],n.splice(t,1,r)}if(p){const r=[s[0],s[1]];r[e]=l[e],n.splice(t+1,1,r)}}}};function OW(e,t,n,r,o){const{deleteCount:i}=AT(e,t,n,r,o);return null!==i&&i>1}function X6(e,t,n){let r=[],o=-1,i=-1;for(let r=0;r<e.length;r++)if(mt.isAlign([e[r],t])&&(o=r),o>-1&&mt.isAlign([e[r],n])){i=r;break}return o>-1&&i>-1&&(r=e.slice(o,i+1)),r}function IW(e,t){const n=mt.isHorizontal(e[0],e[1]),r=[];for(let e=0;e<t.length-1;e++){const o=t[e],i=t[e+1],a=mt.isHorizontal(o,i,.1);n&&a&&r.push([o,i]),!n&&!a&&r.push([o,i])}return r}function FW(e,t,n,r,o){Cm.isDebug()&&Cm.clear();const i=[];for(let a=0;a<n.length;a++){const s=n[a],l=[t[0][0],t[0][1]],u=[t[1][0],t[1][1]],c=mt.isHorizontal(l,u)?0:1;l[c]=s[0][c],u[c]=s[1][c];const d=M.getRectangleByPoints([l,u,...s]);!M.isHit(d,r)&&!M.isHit(d,o)&&(i.push([l,u]),Cm.isDebug()&&Cm.drawPolygon(e,M.getCornerPoints(d)))}return i}const RT=e=>1===e.length||e.some((t,n)=>{const r=e[n-1],o=e[n+1],i=r&&[r,t],a=o&&[t,o],s=i&&mt.isAlign(i),l=a&&mt.isAlign(a);return 0===n?!l:n===e.length-1?!s:!s&&!l}),zC=20,LW=(e,t,n)=>{const r=Lt();if(Yr.isSourceMark(e,Vr.none)&&Yr.isTargetMark(e,Vr.none))return null;const o=zt(e),i=o*o/3;if(1===t.length&&(t=[t[0],[t[0][0]+.1,t[0][1]]]),!Yr.isSourceMark(e,Vr.none)){const o=Yg(t[0],t[1],20+i),a=VC(e,{marker:e.source.marker,source:o,target:t[0],isSource:!0},n);a&&r.appendChild(a)}if(!Yr.isTargetMark(e,Vr.none)){const o=Yg(t[t.length-1],t[t.length-2],20+i),a=VC(e,{marker:e.target.marker,source:o,target:t[t.length-1],isSource:!1},n);a&&r.appendChild(a)}return r},VC=(e,t,n)=>{const{marker:r,target:o,source:i,isSource:a}=t;let s;switch(r){case Vr.openTriangle:s=GW(e,i,o,n);break;case Vr.solidTriangle:s=HW(i,o,n);break;case Vr.arrow:s=NW(e,i,o,n);break;case Vr.sharpArrow:s=_W(i,o,n);break;case Vr.oneSideUp:s=UC(i,o,a?"down":"up",n);break;case Vr.oneSideDown:s=UC(i,o,a?"up":"down",n);break;case Vr.hollowTriangle:s=$W(i,o,n);break;case Vr.singleSlash:s=jW(i,o,a,n)}return s},_W=(e,t,n)=>{const r=t,{pointLeft:o,pointRight:i}=M0(e,t,20),a=Lt(),s=F4();let l=`M${i[0]},${i[1]}A25,25,20,0,1,${o[0]},${o[1]}L${r[0]},${r[1]}Z`;return s.setAttribute("d",l),s.setAttribute("stroke",`${null==n?void 0:n.stroke}`),s.setAttribute("stroke-width",`${null==n?void 0:n.strokeWidth}`),s.setAttribute("fill",`${null==n?void 0:n.stroke}`),a.appendChild(s),a},NW=(e,t,n,r)=>{const o=Kn(t,n),i=zt(e),a=[n[0]+i*o[0]/2,n[1]+i*o[1]/2],s=Tt(...t,...a),l=[a[0]-(3*s/5+i)/2*o[0],a[1]-(3*s/5+i)/2*o[1]],{pointLeft:u,pointRight:c}=M0(t,a,30),d=Ds([u,a,c,l],{...r,fill:r.stroke},!0);return d.querySelector("path").setAttribute("stroke-linejoin","round"),d},HW=(e,t,n)=>{const r=t,{pointLeft:o,pointRight:i}=M0(e,r,30);return Ds([o,r,i],{...n,fill:n.stroke},!0)},GW=(e,t,n,r)=>{const o=Kn(t,n),i=zt(e),a=[n[0]+i*o[0]/2,n[1]+i*o[1]/2],{pointLeft:s,pointRight:l}=M0(t,a,40);return Ds([s,a,l],r)},UC=(e,t,n,r)=>{const{pointLeft:o,pointRight:i}=M0(e,t,40);return Ds(["up"===n?i:o,t],r)},jW=(e,t,n,r)=>{const o=Tt(...e,...t),i=Yg(t,e,o/2),a=n?120:60;return Ds([m0(...e,...i,a*Math.PI/180),m0(...t,...i,a*Math.PI/180)],r)},$W=(e,t,n)=>{const{pointLeft:r,pointRight:o}=M0(e,t,30);return Ds([r,o,t],{...n,fill:"white"},!0)};class MT extends Yo{canDraw(e){return!0}draw(e){let t;return t=zW(this.board,e),t}}const WW=(e,t,n,r,o,i)=>({id:En(),type:"arrow-line",shape:e,source:n,texts:o||[],target:r,opacity:1,points:t,...i}),ji=(e,t)=>{switch(t.shape){case Fn.elbow:return wv(e,t);case Fn.curve:return bT(e,t);default:{const n=Yr.getPoints(e,t),r=Mp(e,t);return n[0]=r.source.point,n[n.length-1]=r.target.point,n}}},bT=(e,t)=>{if(2===t.points.length){const n=Mp(e,t),{source:r,target:o}=n,i=n.source.boundElement,a=n.target.boundElement;let s=[r.point];const l=12+Tt(...r.point,...o.point)/3;if(i&&s.push(Jd(r.point,r.vector,l)),a&&s.push(Jd(o.point,o.vector,l)),i&&!a||!i&&a){s.push(o.point);return Co(KW(s))}return!i&&!a&&(s.push(Jd(r.point,r.vector,l)),s.push(Jd(o.point,o.vector,l))),s.push(o.point),Co(s)}{let n=Yr.getPoints(e,t);n=w0(n);return Co(wp(n))}},zW=(e,t)=>{const n=zt(t),r=H0(e,t),o=vv(e,t),i={stroke:r,strokeWidth:n,strokeLineDash:xc(o,n)},a=Lt();let s,l=ji(e,t);s=t.shape===Fn.curve?I.getRoughSVG(e).curve(l,i):Ds(l,i);const u=En();s.setAttribute("mask",`url(#${u})`),t.strokeStyle===Ss.dotted&&Wt(s,"round"),a.appendChild(s);const{mask:c,maskTargetFillRect:d}=YW(e,t,u);a.appendChild(c),s.appendChild(d);const h=LW(t,l,{stroke:r,strokeWidth:n});return h&&a.appendChild(h),a},E0=(e,t,n)=>{const r=M8(e,n,t),o=r.connectorPoint||r.edgePoint;return VW(o,n)},VW=(e,t)=>{let n=M.getRectangleByPoints(t.points);return[(e[0]-n.x)/n.width,(e[1]-n.y)/n.height]},UW=(e,t)=>{const n=M.getRectangleByPoints(t.points),r=Sc(t);return pi(r).getConnectorPoints(n).find(t=>Tt(...t,...e)<=8)},S8=(e,t,n)=>{const r=t.texts[n],o=WS(ji(e,t),r.position);return{x:o[0]-r.width/2,y:o[1]-r.height/2,width:r.width,height:r.height}},XW=e=>k0(e,{match:e=>fe.isArrowLine(e),recursion:e=>fe.isDrawElement(e)}),KW=e=>{const t=[],n=e.length/3;for(let r=0;r<n;r++){const n=e[r],o=e[r+1],i=e[r+2],a=Tt(...n,...o),s=Tt(...i,...o),l=Yg(n,o,2*a/3),u=Yg(i,o,2*s/3);t.push(n,l,u,i)}return t},T8=(e,t,n,r,o,i,a)=>{const s=R8(e,r),l=s?E0(e,r,s):void 0,u=o?E0(e,n,o):void 0,c=s?s.id:void 0,d=new MT(e),h=DT();let f,p;f=h.source,p=h.target,f&&delete h.source,p&&delete h.target;const g=WW(t,[n,r],{marker:f||Vr.none,connection:u,boundId:null==o?void 0:o.id},{marker:p||Vr.arrow,connection:l,boundId:c},[],{strokeWidth:CT.strokeWidth,...h,...a}),m=ji(e,g)[0];return g.points[1]=P8(m,r),d.processDrawing(g,i),I.getElementTopHost(e).append(i),g};function YW(e,t,n){const r=PO();r.setAttribute("id",n);const o=ji(e,t);let i=M.getRectangleByPoints(o);i=M.getOutlineRectangle(i,-30);const a=V7(i,{fill:"white"});r.appendChild(a),t.texts.forEach((n,o)=>{let i=S8(e,t,o);i=M.inflate(i,8);const a=V7(i,{fill:"black"});r.appendChild(a)});const s=V7(i);return s.setAttribute("opacity","0"),s.setAttribute("fill","none"),{mask:r,maskTargetFillRect:s}}const D8=(e,t,n)=>{const r=t.texts;if(!r.length)return-1;const o=ji(e,t);return r.findIndex(e=>{const t=WS(o,e.position),r={x:t[0]-e.width/2,y:t[1]-e.height/2,width:e.width,height:e.height};return M.isHit(r,M.getRectangleByPoints([n,n]))})},A8=e=>sW.includes(e),Vu=e=>fe.isGeometry(e)&&A8(e.shape),qW=e=>rW[e],ZW=(e,t,n={})=>({id:En(),type:"geometry",shape:e,angle:0,opacity:1,texts:QW(e),points:t,...n}),QW=e=>{var t;const n={...Pc(e).textProperties},r=null==n?void 0:n.align,o=(null==n?void 0:n.textHeight)||gv.height;null==n||delete n.align,null==n||delete n.textHeight;const i=(null==(t=I8(e))?void 0:t.texts)||[];return(qW(e)||[]).map(e=>{const t=null==i?void 0:i.find(t=>(null==t?void 0:t.key)===e);return{id:e,text:eu((null==t?void 0:t.text)||"",r||(null==t?void 0:t.align)||hi.center,n),textHeight:o}})},JW=(e,t)=>{const n=pi(e.shape),r=M.getRectangleByPoints([t,t]);let o;return n.getTextRectangle&&(o=e.texts.find(t=>{const o=n.getTextRectangle(e,{id:t.id});return M.isHit(r,o)})),o};class kT extends Yo{canDraw(e){return!0}draw(e){let t;return t=nz(this.board,e),t}}const oc=(e,t)=>{switch(t.shape){case np.straight:return t.points;case np.curve:if(2===t.points.length)return Co(t.points);{let e=t.points;return Co(wp(e))}default:return null}},ez=(e,t,n)=>({id:En(),type:"vector-line",shape:e,opacity:1,points:t,...n}),tz=(e,t,n,r,o)=>{const i=new kT(e),a=DT(),s=ez(t,[...n,r],{strokeWidth:CT.strokeWidth,...a}),l=n[n.length-1];return s.points[s.points.length-1]=P8(l,r),i.processDrawing(s,o),I.getElementTopHost(e).append(o),s},nz=(e,t)=>{const n=zt(t),r=H0(e,t),o=vv(e,t),i={stroke:r,strokeWidth:n,strokeLineDash:xc(o,n),fill:mv(e,t)},a=Lt();const s=Ds(oc(0,t),i),l=En();return s.setAttribute("mask",`url(#${l})`),t.strokeStyle===Ss.dotted&&Wt(s,"round"),a.appendChild(s),a},N0=e=>{const t=[];for(let n=0;n<e.length;n++){let r=n==e.length-1?0:n+1;t.push([(e[n][0]+e[r][0])/2,(e[n][1]+e[r][1])/2])}return t},OT=(e,t)=>{const n=[];for(let r=1;r<=e.length;r++){let o=e[r-1],i=r===e.length?e[0]:e[r];const a=bj(t,o,i);n.push(...a)}return n},Qr=(e,t)=>{for(let n=1;n<=e.length;n++){let r=e[n-1],o=n===e.length?e[0]:e[n];if($S(t,r,o))return[r,o]}return null};function K6(e){const t=e.width/7,n=e.height/3.2,r=t/8.5,o=n/20;return{startPoint:[e.x+t,e.y+n],arcCommands:[{rx:r,ry:1.2*o,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+2*t,endY:e.y+n/2},{rx:r,ry:o,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+4.2*t,endY:e.y+n/2.2},{rx:r,ry:o,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+5.8*t,endY:e.y+n},{rx:r,ry:1.3*o,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+6*t,endY:e.y+2.2*n},{rx:r,ry:1.2*o,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+5*t,endY:e.y+2.8*n},{rx:r,ry:o/1.2,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+2.8*t,endY:e.y+2.8*n},{rx:r,ry:o,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t,endY:e.y+2.2*n},{rx:r,ry:1.42*o,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t,endY:e.y+n}]}}const IT={draw(e,t,n){const r=I.getRoughSVG(e),{startPoint:o,arcCommands:i}=K6(t),a=`M ${o[0]} ${o[1]} `+i.map(e=>`A ${e.rx} ${e.ry} ${e.xAxisRotation} ${e.largeArcFlag} ${e.sweepFlag} ${e.endX} ${e.endY}`).join("\n")+" Z",s=r.path(a,{...n,fillStyle:"solid"});return EO(s,"round"),s},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints:e=>M.getCornerPoints(e),getNearestPoint(e,t){const{startPoint:n,arcCommands:r}=K6(e);let o=1/0,i=t,a=n;for(const e of r){const n=J3(t,a,e),r=Tt(t[0],t[1],n[0],n[1]);r<o&&(o=r,i=n),a=[e.endX,e.endY]}return i},getEdgeByConnectionPoint(e,t){const n=IT.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,o=t.width-2*lt.rectangleAndText-2*n,i=o/1.5;return{height:r,width:i>0?i:0,x:t.x+lt.rectangleAndText+n+o/6,y:t.y+t.height/6+(4*t.height/6-r)/2}}},FT=(e,t,n)=>-1!==D8(e,t,n),Jg=(e,t)=>tP(t,e)<=5,LT=(e,t,n)=>{const r=ji(e,t);return FT(e,t,n)||Jg(r,n)},_T=(e,t,n)=>{const r=oc(0,t);return Bp(t.points)&&lc(n,r)||Jg(r,n)},rz=(e,t)=>{const n=pi(e.shape);if(Vu(e))return e.texts.some(r=>{const o=n.getTextRectangle(e,{id:r.id});return S3(t,M.getCornerPoints(o),e.angle)});{const r=n.getTextRectangle?n.getTextRectangle(e):Tr(e);return S3(t,M.getCornerPoints(r),e.angle)}},NT=(e,t)=>{const n=pi(e.shape);if(Vu(e))return e.texts.some(r=>{const o=n.getTextRectangle(e,{id:r.id});return M.isPointInRectangle(o,t)});{const r=n.getTextRectangle?n.getTextRectangle(e):Tr(e);return M.isPointInRectangle(r,t)}},HT=e=>{if(!B8(e))return!0;const t=cv(e);return F.isEmpty(t,t.children[0])},iz=(e,t,n)=>{const r=M.getRectangleByPoints([n.anchor,n.focus]);if(fe.isGeometry(t)){return XC(e,r,t)||!HT(t)&&rz(t,r)}if(fe.isImage(t))return XC(e,r,t);if(fe.isArrowLine(t)){const n=ji(e,t);return o3(n,r)}if(fe.isVectorLine(t)){const e=oc(0,t);return o3(e,r)}return null},XC=(e,t,n)=>{const r=M.getRectangleByPoints(n.points);return S3(t,M.getCornerPoints(r),n.angle)},S3=(e,t,n)=>{let r=CF(t,n)||t;return o3(r,e)},GT=(e,t)=>{let n=jT(e,t),r=t.length;n&&(r=t.indexOf(n)+1);const o=t.slice(0,r),i=sz(o);return i?i[0]:t$(e,o,"asc")[0]},jT=(e,t)=>{let n=null;for(let r=0;r<t.length;r++){const o=t[r];if(pv(e,o)||Ap(o)){const t=mv(e,o);if(n$(t)){n=o;break}}}return n},oz=(e,t)=>null!==jT(e,[t]),sz=e=>{const t=e.filter(e=>fe.isText(e)||fe.isLine(e)||fe.isImage(e));return t.length?t:null},az="debug:plait:hit:shape:edge:sample-points",zd=A0(az),uz=[pt.cloud],lz=(e,t,n,r=!0)=>{const o=e.getRectangle(t);if(n=hc(e,n,t)||n,fe.isGeometry(t)&&o){if(zd.isDebug()&&uz.includes(t.shape)){zd.clear();const{startPoint:t,arcCommands:r}=K6(o),i=[t,...r.map(e=>[e.endX,e.endY])];zd.drawCircles(e,i,5,!1);let a=1/0,s=n,l=t;for(const t of r){const r=J3(n,l,t),o=Tt(n[0],n[1],r[0],r[1]),{center:i}=nP(l,t);zd.drawCircles(e,[i],8,!1,{fill:"yellow"}),o<a&&(a=o,s=r),l=[t.endX,t.endY]}zd.drawCircles(e,[n],12,!1,{fill:"black",stroke:"black"}),zd.drawCircles(e,[s],12,!1,{fill:"green",stroke:"green"})}if($T(e,t,n,5))return!0;const i=pi(Sc(t));if(fe.isText(t)){const e=Tr(t);return M.isPointInRectangle(e,n)}return!(r&&HT(t)&&!oz(e,t))&&(NT(t,n)||i.isInsidePoint(o,n))}if(fe.isImage(t)){const e=M.getRectangleByPoints(t.points);return M.isPointInRectangle(e,n)}return fe.isArrowLine(t)?LT(e,t,n):fe.isVectorLine(t)?_T(0,t,n):null},$T=(e,t,n,r)=>{const o=YT(t,n);return Tt(o[0],o[1],n[0],n[1])<=r},cz=(e,t,n,r)=>{const o=M.inflate(M.getRectangleByPoints(t.points),r);return pi(Sc(t)).isInsidePoint(o,n)},fz=(e,t,n)=>{const r=e.getRectangle(t);if(n=hc(e,n,t)||n,fe.isGeometry(t)&&!fe.isGeometryByTable(t)){const e=pi(Sc(t)),o=e.isInsidePoint(r,n);if(o)return o;if(e.getTextRectangle){const e=NT(t,n);if(e)return e}}if(fe.isImage(t)){const e=M.getRectangleByPoints(t.points);return M.isPointInRectangle(e,n)}return fe.isArrowLine(t)?LT(e,t,n):fe.isVectorLine(t)?_T(0,t,n):null},Tr=e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,o=t.width-2*lt.rectangleAndText-2*n;return{height:r,width:o>0?o:0,x:t.x+lt.rectangleAndText+n,y:t.y+(t.height-r)/2}},zt=e=>fe.isText(e)?0:e.strokeWidth||dv.strokeWidth,Zu=(e,t)=>{BW(e,t.shape),Xe.insertNode(e,t,[e.children.length]),B0(e),rh(e,t),vn.updatePointerType(e,Zt.selection)},B8=e=>!!fe.isText(e)||!fe.isImage(e)&&(fe.isGeometry(e)?L8(e):fe.isArrowLine(e)?sh(e).length>0:!fe.isElementByTable(e)||e.cells.some(e=>TT(e))),hz=e=>e.some(e=>B8(e)),Ap=e=>!!fe.isDrawElement(e)&&(!(fe.isText(e)||fe.isArrowLine(e)||fe.isImage(e))&&(fe.isVectorLine(e)?Bp(e.points):!fe.isGeometry(e)||Bz(e))),pv=(e,t)=>fe.isCustomGeometryElement(e,t)&&Bp(t.points),R8=(e,t)=>{let n=WT(e,t);if(n){const r=M8(e,n,t);if(r.isHitConnector||r.isHitEdge)return n}return null},M8=(e,t,n)=>{const r=hc(e,n,t)||n,o=UW(r,t),i=YT(t,r);return{isHitEdge:$T(e,t,r,6),isHitConnector:!!o,connectorPoint:o,edgePoint:i}},WT=(e,t,n=10)=>{let r=null;return dz(e,o=>{null===r&&cz(0,o,hc(e,t,o)||t,2*n)&&(r=o)}),r},dz=(e,t)=>{di(e,e=>{!I.isBoard(e)&&fe.isShapeElement(e)&&t(e)},nh(e),!0)},KC=(e,t,n,r,o)=>pi(n).draw(e,t,r,o),gz=(e,t,n={hasMask:!0,hasConnector:!0})=>{const r=Lt(),o=M.getRectangleByPoints(t.points),i=M.inflate(o,2),a=Sc(t);let s;fe.isElementByTable(t)&&(s={element:t});const l=KC(e,i,a,{stroke:yo,strokeWidth:2},s);if(r.appendChild(l),n.hasMask){const n=KC(e,i,a,{stroke:yo,strokeWidth:0,fill:Ap(t)?_4:dv.fill,fillStyle:"solid"},s);r.appendChild(n)}return n.hasConnector&&pi(a).getConnectorPoints(o).forEach(t=>{const n=ih(I.getRoughSVG(e),t,8,{stroke:yo,strokeWidth:1,fill:"#FFF",fillStyle:"solid"});r.appendChild(n)}),r},zT=(e,t)=>e&&Vu(e)?`${e.id}-${t.id}`:t.id,Bp=e=>{const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]},ep=e=>ov(e,x3.geometryText,gv.text),H0=(e,t)=>{const n=Sz(e.theme.themeColorMode);return t.strokeColor||n},mv=(e,t)=>{const n=fe.isFlowchart(t)&&Ap(t)?Tz(e.theme.themeColorMode):dv.fill;return t.fill||n},vv=(e,t)=>t.strokeStyle||Ss.solid;class VT extends Yo{canDraw(e,t){return!0}draw(e,t){const n=M.getRectangleByPoints(e.points),r=e.shape;if(r===pt.text)return;const o=mv(this.board,e),i=zt(e),a=H0(this.board,e),s=vv(this.board,e),l=xc(s,i);return Cz(this.board,M.inflate(n,-i),r,{stroke:a,strokeWidth:i,fill:o,strokeLineDash:l})}}function UT(e,t){const n=[],r=t.shape;if(r===Fn.straight){const r=fe.isArrowLine(t)?Yr.getPoints(e,t):t.points;for(let e=0;e<r.length-1;e++)Tt(...r[e],...r[e+1])<10||n.push([(r[e][0]+r[e+1][0])/2,(r[e][1]+r[e+1][1])/2])}if(r===Fn.curve){const r=fe.isArrowLine(t)?Yr.getPoints(e,t):t.points,o=fe.isArrowLine(t)?bT(e,t):oc(0,t);if(2===r.length){const e=o.length-1,t=Math.round((0+e)/2);n.push(o[t])}else for(let e=0;e<r.length-1;e++){const t=o.findIndex(t=>t[0]===r[e][0]&&t[1]===r[e][1]),i=o.findIndex(t=>t[0]===r[e+1][0]&&t[1]===r[e+1][1]),a=Math.round((t+i)/2);Tt(...r[e],...r[e+1])<10||n.push(o[a])}}if(r===Fn.elbow){const r=wv(e,t),o=bp(e,t);if(!_8(t,o)){const[o,i]=QT(e,t);for(let e=0;e<r.length-1;e++){if(0==e&&mt.isEquals(r[e+1],o)||e===r.length-2&&mt.isEquals(r[r.length-2],i))continue;const[t,a]=r[e],[s,l]=r[e+1],u=[(t+s)/2,(a+l)/2];n.push(u)}}}return n}var Xr;!function(e){e.source="source",e.target="target",e.addHandle="addHandle"}(Xr||(Xr={}));const XT=(e,t,n)=>{let r=fe.isArrowLine(t)?Yr.getPoints(e,t):t.points;const o=Y6(r,n);if(-1!==o){const e=o;if(0===o)return{handle:Xr.source,handleIndex:e};if(o===r.length-1)return{handle:Xr.target,handleIndex:e};if(t.shape!==Fn.elbow)return{handleIndex:e}}const i=Y6(UT(e,t),n);if(-1!==i)return{handle:Xr.addHandle,handleIndex:i}};function Y6(e,t){const n=e.map(e=>({x:e[0]-4.5,y:e[1]-4.5,width:9,height:9})),r=n.find(e=>M.isHit(M.getRectangleByPoints([t,t]),e));return r?n.indexOf(r):-1}class KT extends Yo{constructor(e,t={active:!0}){super(e,t),this.board=e,this.onlySelectedCurrentLine=!1}canDraw(e,t){return!!t.selected}draw(e,t){const n=Lt(),r=Qe(this.board);if(this.onlySelectedCurrentLine=1===r.length,this.onlySelectedCurrentLine){n.classList.add(vp);const r=fe.isArrowLine(e)?Yr.getPoints(this.board,e):e.points;let o=[...r],i=[];e.shape===Fn.elbow&&(o=r.slice(0,1).concat(r.slice(-1)),i=JT(this.board,e,t.linePoints)),o.map(e=>Gg(this.board,e)).forEach(e=>{const t=mC(this.board,e);n.appendChild(t)});const a=UT(this.board,e).map(e=>Gg(this.board,e));if(!I.hasBeenTextEditing(this.board))for(let t=0;t<a.length;t++){const o=a[t];if(e.shape===Fn.elbow&&i.length){const t=Y6(a,o);if(OW(this.board,e,[...r],i,t)){const e=mC(this.board,o);n.appendChild(e);continue}}const s=Pj(this.board,o);n.appendChild(s)}}else{const t=this.board.getRectangle(e);if(t){const e=Di(this.board,t);let r="0.5";(0===e.height||0===e.width)&&(r="0.8");const o=ua(this.board,e,{stroke:I0,strokeWidth:L$.selectionStrokeWidth});o.style.opacity=r,n.appendChild(o)}}return n}needUpdate(){return 1===Qe(this.board).length!==this.onlySelectedCurrentLine}}const wy=class extends Yo{constructor(e){super(e,{active:!0}),this.board=e,this.hoverElement=null}canDraw(e,t){const n=Qe(this.board);return!(!t.selected||1!==n.length||gi(this.board))}draw(e,t){return this.autoCompleteG=Lt(),O8(this.board,e,!0).forEach((e,t)=>{const n=ih(I.getRoughSVG(this.board),e,6,{stroke:"none",fill:Hg(I0,1),fillStyle:"solid"});n.classList.add(`line-auto-complete-${t}`),this.autoCompleteG.appendChild(n)}),this.autoCompleteG}removeAutoCompleteG(e){this.hoverElement=this.autoCompleteG.querySelector(`.line-auto-complete-${e}`),this.hoverElement.style.visibility="hidden"}recoverAutoCompleteG(){this.hoverElement&&(this.hoverElement.style.visibility="visible",this.hoverElement=null)}};wy.key="line-auto-complete-generator";let Qu=wy;class pz extends C8{get textManage(){return this.textManages[0]}constructor(e,t,n,r){super(e,t,[{id:t.id,text:n,textHeight:t.textHeight}],r)}update(e,t,n,r){Vu(e)||super.update(e,[{text:t,id:e.id,textHeight:e.textHeight}],[{text:n,id:e.id,textHeight:e.textHeight}],r)}}class yv extends Yo{canDraw(e,t){return!0}draw(e,t){const n=M.getRectangleByPoints(e.points),r=zt(e),o=H0(this.board,e),i=vv(this.board,e),a=xc(i,r);return pi(x0.table).draw(this.board,n,{strokeWidth:r,stroke:o,strokeLineDash:a},{element:e})}}const Sc=e=>fe.isImage(e)?pt.rectangle:fe.isTable(e)?x0.table:e.shape,b8=(e,t)=>fe.isUMLClassOrInterface({shape:t})?new yv(e):new VT(e),mz=(e,t,n)=>{const r=Pc(t),o={id:En(),type:"geometry",angle:0,opacity:1,points:n,strokeWidth:Zg.strokeWidth,...r.geometryProperties};let i,a;return t===ft.class?(i=[{id:En(),height:30},{id:En()},{id:En()}],a=[{id:En()}]):(i=[{id:En(),height:50},{id:En()}],a=[{id:En()}]),{...o,shape:t,rows:i,columns:a,cells:vz(e,i,a,t)}},vz=(e,t,n,r)=>{var o;const i=Pc(r),a=t.length*n.length,s=(null==(o=I8(r))?void 0:o.texts)||[],l=s.map(t=>Rp(e,t.text||ep(e),i.textProperties["font-size"]).height);return new Array(a).fill("").map((e,r)=>{const o=Math.floor(r/n.length),i=r%n.length;return{id:En(),rowId:t[o].id,columnId:n[i].id,textHeight:l[r],text:{children:[{text:s[r].text}],align:s[r].align}}})},k8=(e,t,n,r={},o={})=>mT.includes(e)?wz(e,t,r):yz(e,t,n,r,o),yz=(e,t,n,r={},o={})=>{let i={},a=hi.center,s=gv.height;return e===pt.text&&(i={autoSize:!0},a=void 0),null!=(o={...o})&&o.align&&(a=null==o?void 0:o.align),null!=o&&o.textHeight&&(s=null==o?void 0:o.textHeight),null==o||delete o.align,null==o||delete o.textHeight,{id:En(),type:"geometry",shape:e,angle:0,opacity:1,textHeight:s,text:eu(n,a,o),points:t,...i,...r}},wz=(e,t,n={})=>({id:En(),type:"geometry",shape:e,angle:0,opacity:1,points:t,...n}),Cz=(e,t,n,r)=>pi(n).draw(e,t,r),YT=(e,t)=>{const n=M.getRectangleByPoints(e.points),r=Sc(e);return pi(r).getNearestPoint(n,t)},xz=e=>gT[e],Ez=e=>dT[e]||Zg,Pz=e=>pT[e],O8=(e,t,n=!1)=>{const r=M.getRectangleByPoints(t.points),o=Di(e,r),i=n?o:r;return M.getEdgeCenterPoints(M.inflate(i,33))},qT=(e,t)=>t.findIndex(t=>{const n=M.getRectangleByPoints([e]);let r=M.getRectangleByPoints([t]);return r=M.inflate(r,9),M.isHit(n,r)}),Sz=e=>yT[e].strokeColor,Tz=e=>yT[e].fill,Rp=(e,t,n)=>{n=n?Number(n):14;const r=Sp(e,eu(t),{fontSize:n,fontFamily:a0});return{width:r.width+2*lt.rectangleAndText,height:r.height}},ZT=(e,t)=>{const n=I8(e);return M.getPoints(M.getRectangleByCenterPoint(t,n.width,n.height))},I8=e=>{const t=uW().includes(e),n=lW().includes(e);return t?xz(e):n?Pz(e):Ez(e)},F8=(e,t,n,r)=>{const o=Pc(pt.text);return r=r||M.getRectangleByPoints(t).height,k8(pt.text,t,n,o.geometryProperties,{...o.textProperties,textHeight:r})},tp=(e,t,n)=>{const r=Pc(n),o=Rp(e,gv.text,r.textProperties["font-size"]).height;return fe.isUMLClassOrInterface({shape:n})?mz(e,n,t):A8(n)?ZW(n,t,{strokeWidth:Zg.strokeWidth,...r.geometryProperties}):k8(n,t,"",{strokeWidth:Zg.strokeWidth,...r.geometryProperties},{...r.textProperties,textHeight:o})},P5=(e,t,n)=>{const r=n?bg(e,t,n):oh(t);r&&r.edit(()=>{})},L8=e=>Az(e)||Vu(e),Dz=e=>!mT.includes(e)&&!A8(e),Az=e=>fe.isGeometry(e)&&Dz(e.shape),Bz=e=>!aW.includes(e.shape),Rz=e=>e.source.boundId&&e.source.boundId===e.target.boundId,_8=(e,t)=>Qj(t)&&!Rz(e),wv=(e,t)=>{const n=Mp(e,t),r=bp(e,t,n);if(_8(t,r))return _u(Ij(n.source.point,n.source.direction,n.target.point,n.target.direction,30));const o=w0(eT(r,e)),i=o.slice(1,o.length-1);if(2===t.points.length)return _u(o);{const n=_u(i),a=w0(Yr.getPoints(e,t)).slice(1,-1);if(RT(a))return _u(o);const s=BT(e,[n[0],...a,n[n.length-1]],n,r),l=[o[0]];for(let e=0;e<s.length-1;e++){let t=s[e],r=s[e+1];if(mt.isAlign([t,r]))l.push(t);else{const e=X6(n,t,r);e.length?(l.push(t),l.push(...e)):(l.push(t),console.log("unknown data points"))}}return l.push(o[o.length-2],o[o.length-1]),_u(l)}},QT=(e,t)=>{const n=bp(e,t);return[n.nextSourcePoint,n.nextTargetPoint]},Mz=(e,t,n)=>{let r=t.source.boundId?xs(e,t.source.boundId):void 0,o=t.target.boundId?xs(e,t.target.boundId):void 0;if(!r){const e=n.source;r=YC(e.point,e.vector)}if(!o){const e=n.target;o=YC(e.point,e.vector)}let i=M.getRectangleByPoints(r.points);const a=Ka(M.getCornerPoints(i),r)||M.getCornerPoints(i);i=M.getRectangleByPoints(a),i=M.inflate(i,2*zt(r));let s=M.getRectangleByPoints(o.points);const l=Ka(M.getCornerPoints(s),o)||M.getCornerPoints(s);return s=M.getRectangleByPoints(l),s=M.inflate(s,2*zt(o)),{sourceRectangle:i,targetRectangle:s}},YC=(e,t)=>{const n=Jd(e,t,-25),r=M.getPoints(M.getRectangleByCenterPoint(n,50,50));return k8(pt.rectangle,r,"")};function JT(e,t,n){let r=n??wv(e,t);const[o,i]=QT(e,t);return r.splice(0,1,o),r.splice(-1,1,i),w0(r)}const T3=(e,t)=>(null!=t&&t.length?t:Qe(e)).filter(e=>fe.isDrawElement(e)),N8=e=>Qe(e).filter(e=>fe.isArrowLine(e)),eD=e=>Qe(e).filter(e=>fe.isVectorLine(e)),bz=e=>{const t=Qe(e);return t&&1===t.length&&fe.isSwimlane(t[0])},kz=e=>{const t=Qe(e);return t&&1===t.length&&fe.isLine(t[0])},tD=(e,t,n)=>{const r=tp(e,t,n);return Zu(e,r),r},Oz=(e,t,n)=>{const r=Pc(pt.text),o=Rp(e,n,r.textProperties["font-size"]),i=[t,[t[0]+o.width,t[1]+o.height]],a=F8(0,i,n);Zu(e,a)},Iz=(e,t,n,r)=>{const o=qf(t),i=Xt.get(e,r),a={points:o,textHeight:n};fe.isText(i)&&i.autoSize&&(a.autoSize=!1),Xe.setNode(e,a,r)},Fz=(e,t)=>{const n=Qe(e),r=[];n.forEach(n=>{if(fe.isGeometry(n)&&!fe.isText(n)){const o=I.findPath(e,n);Xe.setNode(e,{shape:t},o),EU(e,{...n,shape:t},r)}}),r.length&&r.forEach(t=>{$i.resizeArrowLine(e,t.property,t.path)})},nD=(e,t,n,r)=>{let o=t.points,i=t.autoSize;const a=lt.rectangleAndText;if(i){const e=n<5?5:n,i=cv(t);if($6.isActive(i,hi.right))o=[[o[1][0]-(e+2*a),o[0][1]],[o[1][0],o[0][1]+r]];else if($6.isActive(i,hi.center)){const t=(e-Math.abs(o[0][0]-o[1][0]))/2;o=[[o[0][0]-t-a,o[0][1]],[o[1][0]+t+a,o[0][1]+r]]}else o=[o[0],[o[0][0]+e+2*a,o[0][1]+r]];Xa(t)&&(o=h8(M.getRectangleByPoints(t.points),M.getRectangleByPoints(o),M.getCenterPoint(M.getRectangleByPoints(t.points)),M.getCenterPoint(M.getRectangleByPoints(o)),t.angle))}return{points:o}},Lz=(e,t,n,r,o)=>{const i={text:n,textHeight:o,...nD(0,t,r,o)},a=e.children.findIndex(e=>e===t);Xe.setNode(e,i,[a])},_z=(e,t,n,r)=>{if(t.autoSize){const o={textHeight:r,...nD(0,t,n,r)},i=mt.isEquals(t.points[0],o.points[0])&&mt.isEquals(t.points[1],o.points[1]),a=Math.round(r)===Math.round(t.textHeight);if(!i||!a){const n=e.children.findIndex(e=>e===t);Xe.setNode(e,o,[n])}}},Nz=(e,t,n)=>{const{width:r,height:o,url:i}=t,a=At(e,Ot(e,I.getBoardContainer(e).clientWidth/2,I.getBoardContainer(e).clientHeight/2)),s=n?[n,[n[0]+r,n[1]+o]]:[[a[0]-r/2,a[1]-o/2],[a[0]+r/2,a[1]+o/2]],l={id:En(),type:"image",points:s,url:i};Xe.insertNode(e,l,[e.children.length]),Xe.addSelectionWithTemporaryElements(e,[l])},rD=(e,t,n)=>{Xe.setNode(e,t,n)},Hz=(e,t,n)=>{const r=I.findPath(e,t);Xe.setNode(e,{texts:n},r)},Gz=(e,t,n)=>{var r;const o=I.findPath(e,t),i=[...null!=(r=t.texts)&&r.length?[...t.texts]:[]];i.splice(n,1),Xe.setNode(e,{texts:i},o)},jz=(e,t,n)=>{v8(Go.arrowLine,t,n),N8(e).forEach(r=>{const o=I.findPath(e,r);let i=t===Es.source?r.source:r.target;i={...i,marker:n},Xe.setNode(e,{[t]:i},o)})},$z=(e,t)=>{N8(e).map(n=>{const r={...t};if(n.shape===t.shape)return;const o=I.findPath(e,n);Xe.setNode(e,r,o)})},Wz=(e,t,n,r)=>{const o=Yr.getPoints(e,t),i=n===Es.source?o[0]:o[o.length-1],a=E0(e,i,r);if(a){let o=t.source,i=t.target;n===Es.source?o={...o,boundId:r.id,connection:a}:i={...i,boundId:r.id,connection:a};const s=I.findPath(e,t);rD(e,{source:o,target:i},s)}};function zz(e){const t={...e};return fe.isHorizontalSwimlane(e)?(t.cells=e.cells.map((t,n)=>(0===n&&e.header&&(t={...e.cells[0],rowspan:e.rows.length}),t.text&&t.textHeight&&!t.text.direction&&(t={...t,text:{...t.text,direction:"vertical"}}),t)),t):(e.header&&(t.cells=[{...e.cells[0],colspan:e.columns.length},...e.cells.slice(1,e.cells.length)]),t)}const iD=(e,t)=>{const n=wT[e];return M.getPoints(M.getRectangleByCenterPoint(t,n.width,n.height))},D3=(e,t)=>{const n=Xz(e),r=Kz(e),o=t[1][0]-t[0][0],i=t[1][1]-t[0][1],a=qC(r,"row",n,i),s=qC(r,"column",n,o);return{id:En(),type:"swimlane",shape:r,points:t,rows:a,columns:s,header:n,cells:Vz(r,a,s,n)}},qC=(e,t,n,r)=>{const o=e=>new Array(e).fill("").map(()=>({id:En()}));let i=o(3);if("row"===t&&e===mo.swimlaneVertical||"column"===t&&e===mo.swimlaneHorizontal){i=n?i:o(2);const e="row"===t?"height":"width";let a=42;r<42*i.length&&(a=Math.min(r/i.length/42*42,42)),i=i.map((t,r)=>0===r||1===r&&n?{...t,[e]:a}:t)}return i},Vz=(e,t,n,r)=>{let o=[],i=0;r&&(o=[x5(t[0].id,n[0].id,"New Swimlane")],i=1);const a=new Array(6).fill("").map((o,a)=>{if(a<3){const o=e===mo.swimlaneVertical?t[i].id:t[a].id,s=e===mo.swimlaneVertical?n[a].id:n[i].id;return x5(o,s,r?"Lane":"New Swimlane")}const s=e===mo.swimlaneVertical?t[i+1].id:t[a-3].id,l=e===mo.swimlaneVertical?n[a-3].id:n[i+1].id;return x5(s,l)});return[...o,...a]},Uz=e=>fe.isHorizontalSwimlane(e)?e.rows.length:fe.isVerticalSwimlane(e)?e.columns.length:0,Xz=e=>[sa.swimlaneHorizontalWithHeader,sa.swimlaneVerticalWithHeader].includes(e),Kz=e=>[sa.swimlaneHorizontalWithHeader,sa.swimlaneHorizontal].includes(e)?mo.swimlaneHorizontal:mo.swimlaneVertical,oD=(e,t=e.pointer)=>vT().includes(t),Yz=(e,t,n)=>{if(n>0&&fe.isSwimlane(t)){const r=Uz(t);if(fe.isHorizontalSwimlane(t))if(n>r)sD(e,t,t.rows.length,n-r);else{const o=t.rows.length-(r-n);uD(e,t,o,r-n)}if(fe.isVerticalSwimlane(t))if(n>r)aD(e,t,t.columns.length,n-r);else{const o=t.columns.length-(r-n);lD(e,t,o,r-n)}}},sD=(e,t,n,r=1)=>{if(fe.isHorizontalSwimlane(t)){const o=[...t.rows],i=[];for(let e=0;e<r;e++)i.push({id:En()});o.splice(n,0,...i);const a=[...t.cells];i.forEach(e=>{a.push(...cD(t,e.id,"column"))});const s=uh(e,t,t.cells[t.cells.length-1].id).points,l=M.getRectangleByPoints(s).height,u=[t.points[0],[t.points[1][0],t.points[1][1]+l*r]];Cv(e,t,t.columns,o,a,u)}},aD=(e,t,n,r=1)=>{if(fe.isVerticalSwimlane(t)){const o=[...t.columns],i=[];for(let e=0;e<r;e++)i.push({id:En()});o.splice(n,0,...i);const a=[...t.cells];i.forEach(e=>{a.push(...cD(t,e.id,"row"))});const s=uh(e,t,t.cells[t.cells.length-1].id).points,l=M.getRectangleByPoints(s).width,u=[t.points[0],[t.points[1][0]+l*r,t.points[1][1]]];Cv(e,t,o,t.rows,a,u)}},uD=(e,t,n,r=1)=>{if(fe.isHorizontalSwimlane(t)){if(r>t.rows.length)return;const o=[...t.rows];if(o.splice(n,r),0===o.length){const n=I.findPath(e,t);Xe.removeNode(e,n)}else{let i=[...t.cells];const a=[];for(let e=n;e<r+n;e++){const n=t.rows[e];a.push(n),i=i.filter(e=>e.rowId!==n.id)}let s=0;a.forEach(n=>{if(n.height)s+=n.height;else{const r=t.cells.find(e=>e.rowId===n.id),o=uh(e,t,r.id).points;s+=M.getRectangleByPoints(o).height}});const l=[t.points[0],[t.points[1][0],t.points[1][1]-s]];Cv(e,t,t.columns,o,i,l)}}},lD=(e,t,n,r=1)=>{if(fe.isVerticalSwimlane(t)){if(r>t.columns.length)return;const o=[...t.columns];if(o.splice(n,r),0===o.length){const n=I.findPath(e,t);Xe.removeNode(e,n)}else{let i=[...t.cells];const a=[];for(let e=n;e<r+n;e++){const n=t.columns[e];a.push(n),i=i.filter(e=>e.columnId!==n.id)}let s=0;a.forEach(n=>{if(n.width)s+=n.width;else{const r=t.cells.find(e=>e.columnId===n.id),o=uh(e,t,r.id).points;s+=M.getRectangleByPoints(o).width}});const l=[t.points[0],[t.points[1][0]-s,t.points[1][1]]];Cv(e,t,o,t.rows,i,l)}}},cD=(e,t,n)=>{const r=e[`${n}s`].map(e=>({id:En(),rowId:"row"===n?e.id:t,columnId:"row"===n?t:e.id}));return e.header&&r.shift(),r[0]={...r[0],text:{children:[{text:e.header?"Lane":"New Swimlane"}],align:hi.center,direction:"row"===n?void 0:"vertical"},textHeight:20},r},Cv=(e,t,n,r,o,i)=>{const a=I.findPath(e,t);Xe.setNode(e,{columns:n,rows:r,cells:o,points:i},a)},qz=(e,t,n)=>{var r;const o={texts:null==(r=t.texts)?void 0:r.map(e=>e.id===n.id?{...e,...n}:e)},i=e.children.findIndex(e=>e===t);Xe.setNode(e,o,[i])},Zz=(e,t,n,r,o)=>{const i=Xt.get(e,t),a=uh(e,i,n),s=i.cells.findIndex(e=>e.id===a.id);let l=[...i.rows],u=[...i.columns],c=[...i.cells],d=[...i.points];const{width:h,height:f}=M.getRectangleByPoints(a.points),p=lt.rectangleAndText;if(qg.isVerticalText(a)){const e=i.columns.findIndex(e=>e.id===a.columnId);if(o>h){const t=o+2*p,n=t-h,r=PT(i,i.columns[e].id,t,n);d=r.points,u=r.columns}}else{const e=i.rows.findIndex(e=>e.id===a.rowId),t=i.rows[e].height??Math.max(f,a.textHeight||0);if(o>t){const n=o+2*p,r=n-t,a=ST(i,i.rows[e].id,n,r);d=a.points,l=a.rows}}c[s]={...c[s],textHeight:o,text:r},Xe.setNode(e,{rows:l,columns:u,cells:c,points:d},t)},Qz=(e,t,n,r)=>{const o=t0(t);let i=t.cells;i=null!=o&&o.length?t.cells.map(e=>o.map(e=>e.id).includes(e.id)?ZC(e,n):e):t.cells.map(e=>e.text&&e.textHeight?ZC(e,n):e),Xe.setNode(e,{cells:i},r)},ZC=(e,t)=>{const n={...e};return t?n.fill=t:delete n.fill,n},Jz=(e,t)=>{eD(e).map(n=>{if(n.shape===t.shape)return;const r=I.findPath(e,n);Xe.setNode(e,{...t},r)})},eV=(e,t,n,r)=>{const o=vT().includes(n);let i=gT[n]||dT[n]||pT[n]||Zg;o&&(i=wT[n]);const a=Kd(r);if(a){let s=0;s=[kt.left,kt.right].includes(a)?-i.width/2:-i.height/2;const l=Jd(t,r,s),u=M.getPoints(M.getRectangleByCenterPoint(l,i.width,i.height));if(o){const t=D3(n,u);return Zu(e,t),t}return tD(e,u,n)}return null},$i={setText:Lz,setDrawTexts:qz,insertGeometry:tD,resizeGeometry:Iz,insertText:Oz,setTextSize:_z,resizeArrowLine:rD,setArrowLineTexts:Hz,removeArrowLineText:Gz,setArrowLineMark:jz,setArrowLineShape:$z,setVectorLineShape:Jz,insertImage:Nz,connectArrowLineToDraw:Wz,switchGeometryShape:Fz,setTableText:Zz,addSwimlaneRow:sD,addSwimlaneColumn:aD,removeSwimlaneRow:uD,removeSwimlaneColumn:lD,updateSwimlaneCount:Yz,setTableFill:Qz,insertDrawByVector:eV},q6=(e,t,n,r=0)=>{const o=M.getCenterPoint(t),i=jS(t,9);if(r){const e=kr([n],o,-r)[0];let t=i.find(t=>M.isHit(M.getRectangleByPoints([e,e]),t.rectangle));return t&&(t.cursorClass=Tj(t.cursorClass,r)),t}return i.find(e=>M.isHit(M.getRectangleByPoints([n,n]),e.rectangle))},tV=e=>({x:e.x-20-18,y:e.y+e.height+20,width:18,height:18}),nV="debug:plait:resize-for-rotation",ys=A0(nV);function rV(e){const{afterChange:t,drawSelectionRectangle:n}=e;let r,o,i=!1,a=null;const s=()=>{const t=Qe(e);return t.length>=1&&t.every(t=>(fe.isDrawElement(t)||fe.isCustomGeometryElement(e,t)&&t.points.length>1)&&!kz(e)&&!bz(e))};return ah(e,{key:"draw-elements",canResize:s,hitTest:t=>{const n=Qe(e),r=on(e,n,!1),o=po(n),i=q6(0,r,t,o);return i?{element:[...n],rectangle:r,handle:i.handle,cursorClass:i.cursorClass}:null},onResize:(t,n)=>{null==r||r.remove(),ys.isDebug()&&ys.clear();const o=Wm(e,t.handle),s=n.isShift||1===t.element.length&&fe.isImage(t.element[0]),l=M.getCenterPoint(t.rectangle),u=y3(t.handle),{originPoint:c,handlePoint:d}=Z6(e,u,t.rectangle),h=po(t.element);let f;if(h){f={angle:h,offsetX:0,offsetY:0,newCenterPoint:[0,0]};const[e,t]=kr([n.startPoint,n.endPoint],l,-f.angle);n.startPoint=e,n.endPoint=t}const p=fD(e,t,n,{originPoint:c,handlePoint:d},s,o),g=xv(e,t.element,p);if(a=g.activePoints,r=g.snapG,I.getElementTopHost(e).append(r),f){const n=M.getPoints(t.rectangle),r=n.map(e=>ju(e,c,g.xZoom,g.yZoom)),o=M.getRectangleByPoints(r);ys.isDebug()&&ys.drawRectangle(e,o,{stroke:"blue"});const i=M.getCenterPoint(o),a=h8(M.getRectangleByPoints(n),M.getRectangleByPoints(r),l,i,f.angle),s=M.getCenterPoint(M.getRectangleByPoints(a));f=Object.assign(f,{offsetX:s[0]-i[0],offsetY:s[1]-i[1],newCenterPoint:s}),ys.isDebug()&&ys.drawRectangle(e,a)}t.element.forEach(t=>{const n=I.findPath(e,t);let r;if(f){r=A6(t.points,l,-f.angle).map(e=>ju(e,c,g.xZoom,g.yZoom));const e=r.map(e=>[e[0]+f.offsetX,e[1]+f.offsetY]);r=A6(e,f.newCenterPoint,f.angle)}else Xa(t)&&(i=!0),r=Xa(t)&&xF(t.angle)?iV(e,t.points,c,g.xZoom,g.yZoom):t.points.map(e=>ju(e,c,g.xZoom,g.yZoom));if(fe.isGeometry(t))if(fe.isGeometry(t)&&L8(t)){const{height:o}=oh(t).getSize();$i.resizeGeometry(e,r,o,n)}else r=qf(r),Xe.setNode(e,{points:r},n);else if(fe.isLine(t)||fe.isCustomGeometryElement(e,t)||fe.isVectorLine(t))Xe.setNode(e,{points:r},n);else if(fe.isImage(t))if(s)Xe.setNode(e,{points:r},n);else{const r=M.getRectangleByPoints(t.points),o=M.getCenterPoint(r),i=ju(o,c,g.xZoom,g.yZoom),a=M.getRectangleByCenterPoint(i,r.width,r.height);Xe.setNode(e,{points:M.getPoints(a)},n)}})},afterResize:t=>{if(null==r||r.remove(),r=null,i){i=!1,a=null;const t=Qe(e);Xe.addSelectionWithTemporaryElements(e,t)}}}),e.afterChange=()=>{t(),o&&(o.remove(),o=null);const n=Qe(e);s()&&!gi(e)&&n.length>1&&(o=oV(e,a,i),I.getActiveHost(e).append(o))},e.drawSelectionRectangle=()=>{if(i){const t=M.getRectangleByPoints(a),n=Di(e,t);return ua(e,M.inflate(n,1),{stroke:yo,strokeWidth:1})}return n()},e}const Z6=(e,t,n)=>{const r=Sj(e,t);return{originPoint:wC(n,r),handlePoint:wC(n,t)}},H8=(e,t,n,r,o)=>{const[i,a]=e;let s=0,l=0;if(r)if(o)s=mt.getOffsetX(i,a)/(n[0]-t[0]),l=s;else{let e=mt.getOffsetX(i,a),r=mt.getOffsetY(i,a);s=e/(n[0]-t[0]),l=r/(n[1]-t[1])}else{const e=mt.isHorizontal(t,n,.1)||!1;const r=(e?mt.getOffsetX(i,a):mt.getOffsetY(i,a))/(e?n[0]-t[0]:n[1]-t[1]);o?(s=r,l=r):e?s=r:l=r}return{xZoom:s,yZoom:l}},ju=(e,t,n,r)=>{const o=(e[0]-t[0])*n,i=(e[1]-t[1])*r;return[e[0]+o,e[1]+i]},iV=(e,t,n,r,o)=>{const i=M.getRectangleByPoints(t);ys.isDebug()&&ys.drawRectangle(e,i,{stroke:"black"});let a=t;a=kr(a,M.getCenterPoint(i),.5*Math.PI),ys.isDebug()&&ys.drawRectangle(e,a,{stroke:"blue"}),a=a.map(e=>ju(e,n,r,o)),ys.isDebug()&&ys.drawRectangle(e,a);const s=M.getRectangleByPoints(a);return kr(a,M.getCenterPoint(s),-.5*Math.PI)},oV=(e,t,n)=>{const r=Lt(),o=Qe(e),i=n?M.getRectangleByPoints(t):on(e,o,!1),a=Di(e,i);let s=M.getCornerPoints(a);const l=po(o);if(l){const e=M.getCenterPoint(a);s=kr(s,e,l)}return s.forEach(t=>{const n=GS(e,t);r.append(n)}),r},sV="debug:plait:point-for-geometry",QC=A0(sV),xm=10;function fD(e,t,n,r,o,i){const{originPoint:a,handlePoint:s}=r,l=[n.startPoint,n.endPoint],{xZoom:u,yZoom:c}=H8(l,a,s,i,o);let d,h=[];if(Array.isArray(t.element)){d=t.element;const n=on(e,t.element,!1);h=M.getPoints(n)}else d=[t.element],h=t.element.points;const f=h.map(e=>ju(e,a,u,c)),p=M.getRectangleByPoints(f),g=xp(p,po(d)),m=ju(s,a,u,c),[v,y]=Kn(a,m);return{resizePoints:l,resizeOriginPoint:h,activeRectangle:g,originPoint:a,handlePoint:s,directionFactors:[C0(v),C0(y)],isAspectRatio:o,isFromCorner:i}}function xv(e,t,n){const r=Lt(),o=BP(e,t);let i=lV(o,n);0===i.deltaX&&0===i.deltaY&&(i=aV(o,n));const a=po(t),s=uV(i,n,a),l=fV(e,s.activePoints,o,n,a),u=cV(e,s.activePoints,o,n,a);return r.append(l,u),{...s,...i,snapG:r}}function aV(e,t){let n={deltaX:0,deltaY:0};const{isAspectRatio:r,activeRectangle:o,directionFactors:i}=t,a=0!==i[0]||r,s=0!==i[1]||r;if(a){const t=Kf(o,!0),a=Sg(e,-1===i[0]?t[0]:t[2],!0);if(Math.abs(a)<2&&(n.deltaX=a,0!==n.deltaX&&r))return n.deltaY=n.deltaX/(o.width/o.height),n}if(s){const t=Kf(o,!1),a=Sg(e,-1===i[1]?t[0]:t[2],!1);if(Math.abs(a)<2&&(n.deltaY=a,0!==n.deltaY&&r))return n.deltaX=n.deltaY*(o.width/o.height),n}return n}function uV(e,t,n){const{deltaX:r,deltaY:o}=e,{resizePoints:i,isCreate:a}=t,s=[i[0],[i[1][0]+r,i[1][1]+o]];let l=s,u=0,c=0;if(!a){const{originPoint:e,handlePoint:r,isFromCorner:o,isAspectRatio:i,resizeOriginPoint:a}=t,d=H8(s,e,r,o,i);u=d.xZoom,c=d.yZoom,l=a.map(t=>ju(t,e,u,c)),n&&(l=h8(M.getRectangleByPoints(a),M.getRectangleByPoints(l),M.getCenterPoint(M.getRectangleByPoints(a)),M.getCenterPoint(M.getRectangleByPoints(l)),n))}return{xZoom:u,yZoom:c,activePoints:l}}function lV(e,t){let n={deltaX:0,deltaY:0};const{isAspectRatio:r,activeRectangle:o}=t,i=e.find(e=>Math.abs(e.width-o.width)<2);if(i){const e=i.width-o.width;if(n.deltaX=e*t.directionFactors[0],r){const r=e/(o.width/o.height);return n.deltaY=r*t.directionFactors[1],n}}const a=e.find(e=>Math.abs(e.height-o.height)<2);if(a){const e=a.height-o.height;if(n.deltaY=e*t.directionFactors[1],r){const r=e*(o.width/o.height);return n.deltaX=r*t.directionFactors[0],n}}return n}function Em(e,t){return t?[[e.x,e.y-10],[e.x+e.width,e.y-10]]:[[e.x-10,e.y],[e.x-10,e.y+e.height]]}function cV(e,t,n,r,o){QC.isDebug()&&QC.clear();const i=M.getRectangleByPoints(t),a=xp(i,o),{isAspectRatio:s,directionFactors:l}=r;return RP(e,a,n,0!==l[0]||s,0!==l[1]||s)}function fV(e,t,n,r,o){let i=[],a=[];const s=0!==r.directionFactors[0]||r.isAspectRatio,l=0!==r.directionFactors[1]||r.isAspectRatio,u=M.getRectangleByPoints(t),c=xp(u,o);for(let e of n)c.width===e.width&&s&&i.push(Em(e,!0)),c.height===e.height&&l&&a.push(Em(e,!1));i.length&&s&&i.push(Em(c,!0)),a.length&&l&&a.push(Em(c,!1));return MP(e,[...i,...a])}const hV=(e,t,n)=>nT(0,t,n,r=>{if(fe.isArrowLine(r)){let o={...r.source},i={...r.target},a=[...r.points];return r.source.boundId&&(a[0]=nc(xs(e,r.source.boundId),r.source.connection),xs(e,r.source.boundId,t)||(delete o.boundId,delete o.connection)),r.target.boundId&&(a[a.length-1]=nc(xs(e,r.target.boundId),r.target.connection),xs(e,r.target.boundId,t)||(delete i.boundId,delete i.connection)),a=a.map(e=>[e[0]-n[0],e[1]-n[1]]),{...r,points:a,source:o,target:i}}}),dV=(e,t,n)=>{rT(e,t,n,(e,n)=>{fe.isArrowLine(e)&&(e.source.boundId&&t.find(t=>[e.source.boundId,n[e.source.boundId]].includes(t.id))&&(e.source.boundId=n[e.source.boundId]),e.target.boundId&&t.find(t=>[e.target.boundId,n[e.target.boundId]].includes(t.id))&&(e.target.boundId=n[e.target.boundId])),fe.isElementByTable(e)&&(WC(e,"row"),WC(e,"column"),TW(e.cells))})},wg=3/4,gV={draw(e,t,n){const r=dg(t),o=I.getRoughSVG(e).polygon(r,{...n,fillStyle:"solid"});return Wt(o,"round"),o},isInsidePoint(e,t){const n=dg(e);return lc(t,n)},getCornerPoints:e=>dg(e),getNearestPoint:(e,t)=>Ln(t,dg(e)),getEdgeByConnectionPoint(e,t){const n=dg(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,o=t.width-2*lt.rectangleAndText-2*n;return{height:r,width:o>0?o:0,x:t.x+lt.rectangleAndText+n,y:t.y+(t.height*wg-r)/2}}},dg=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height*wg],[e.x+3*e.width/5,e.y+e.height*wg],[e.x+e.width/2,e.y+e.height],[e.x+2*e.width/5,e.y+e.height*wg],[e.x,e.y+e.height*wg]];function Or(e){const t=e.getPolygonPoints,n={draw(e,n,r){const o=t(n),i=I.getRoughSVG(e).polygon(o,{...r,fillStyle:"solid"});return Wt(i,"round"),i},isInsidePoint(e,n){const r=t(e);return lc(n,r)},getCornerPoints:e=>t(e),getNearestPoint:(e,n)=>Ln(n,t(e)),getNearestCrossingPoint(e,n){const r=t(e),o=OT(r,n);let i=o[0],a=Tt(n[0],n[1],i[0],i[1]);return o.filter((e,t)=>t>0).forEach(e=>{let t=Tt(n[0],n[1],e[0],e[1]);t<a&&(a=t,i=e)}),i},getEdgeByConnectionPoint(e,n){const r=t(e),o=M.getConnectionPoint(e,n);return Qr(r,o)},getConnectorPoints:n=>e.getConnectorPoints?e.getConnectorPoints(n):t(n)};return e.getTextRectangle&&(n.getTextRectangle=e.getTextRectangle),n}const pV=e=>[[e.x+e.width/4,e.y],[e.x+3*e.width/4,e.y],[e.x+3*e.width/4,e.y+e.height/4],[e.x+e.width,e.y+e.height/4],[e.x+e.width,e.y+3*e.height/4],[e.x+3*e.width/4,e.y+3*e.height/4],[e.x+3*e.width/4,e.y+e.height],[e.x+e.width/4,e.y+e.height],[e.x+e.width/4,e.y+3*e.height/4],[e.x,e.y+3*e.height/4],[e.x,e.y+e.height/4],[e.x+e.width/4,e.y+e.height/4]],mV=Or({getPolygonPoints:pV,getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTextRectangle(e){const t=Tr(e),n=t.width;return t.width=t.width/2,t.x+=n/4,t}}),S5=Or({getPolygonPoints:M.getEdgeCenterPoints,getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTextRectangle(e){const t=Tr(e);return t.width=t.width/2,t.x+=t.width/2,t}});function G8(e){const t={draw(e,t,n){const r=[t.x+t.width/2,t.y+t.height/2],o=I.getRoughSVG(e).ellipse(r[0],r[1],t.width,t.height,{...n,fillStyle:"solid"});return Wt(o,"round"),o},isInsidePoint(e,t){const n=[e.x+e.width/2,e.y+e.height/2];return Uu(t,n,e.width/2,e.height/2)},getCornerPoints:e=>M.getEdgeCenterPoints(e),getNearestPoint:(e,t)=>Ai(t,[e.x+e.width/2,e.y+e.height/2],e.width/2,e.height/2),getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t),r=[e.x+e.width/2,e.y+e.height/2],o=[n[0]-r[0],-(n[1]-r[1])],i=e.width/2,a=e.height/2,s=qa(o[0],o[1],i,a);return Za(o[0],o[1],s)},getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTextRectangle(e){const t=Tr(e),n=t.width;return t.width=3*t.width/4,t.x+=n/8,t}};return null!=e&&e.draw&&(t.draw=e.draw),null!=e&&e.getTextRectangle&&(t.getTextRectangle=e.getTextRectangle),t}const T5=G8(),vV=e=>[[e.x+e.width/4,e.y],[e.x+3*e.width/4,e.y],[e.x+e.width,e.y+e.height/2],[e.x+3*e.width/4,e.y+e.height],[e.x+e.width/4,e.y+e.height],[e.x,e.y+e.height/2]],yV=Or({getPolygonPoints:vV,getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTextRectangle(e){const t=Tr(e),n=t.width;return t.width=3*t.width/4,t.x+=n/8,t}}),wV=e=>[[e.x,e.y+e.height/2],[e.x+.32*e.width,e.y],[e.x+.32*e.width,e.y+.2*e.height],[e.x+e.width,e.y+.2*e.height],[e.x+e.width,e.y+.8*e.height],[e.x+.32*e.width,e.y+.8*e.height],[e.x+.32*e.width,e.y+e.height]],CV=Or({getPolygonPoints:wV,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],getTextRectangle(e){const t=Tr(e),n=t.width;return t.width=t.width*(1-.32),t.x+=.32*n,t}}),xV=e=>[[e.x+3*e.width/10,e.y],[e.x+7*e.width/10,e.y],[e.x+e.width,e.y+3*e.height/10],[e.x+e.width,e.y+7*e.height/10],[e.x+7*e.width/10,e.y+e.height],[e.x+3*e.width/10,e.y+e.height],[e.x,e.y+7*e.height/10],[e.x,e.y+3*e.height/10]],EV=Or({getPolygonPoints:xV,getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTextRectangle(e){const t=Tr(e),n=t.width;return t.width=3*t.width/4,t.x+=n/8,t}}),JC=e=>[[e.x+e.width/4,e.y],[e.x+e.width,e.y],[e.x+3*e.width/4,e.y+e.height],[e.x,e.y+e.height]],ex=Or({getPolygonPoints:JC,getConnectorPoints:e=>{const t=JC(e);return N0(t)},getTextRectangle(e){const t=Tr(e),n=t.width;return t.width=t.width/2,t.x+=n/4,t}}),PV=e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+2*e.height/5],[e.x+4*e.width/5,e.y+e.height],[e.x+e.width/5,e.y+e.height],[e.x,e.y+2*e.height/5]],SV=Or({getPolygonPoints:PV,getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,o=t.width-2*lt.rectangleAndText-2*n,i=3*o/5;return{height:r,width:i>0?i:0,x:t.x+lt.rectangleAndText+n+o/5,y:t.y+t.height/5+(4*t.height/5-r)/2}}}),TV=e=>{const t=e.width>e.height/2;return[[e.x,e.y],[e.x+(t?e.width-e.height/2:0),e.y],[e.x+e.width,e.y+e.height/2],[e.x+(t?e.width-e.height/2:0),e.y+e.height],[e.x,e.y+e.height]]},DV=Or({getPolygonPoints:TV,getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=Tr(e),r=t.width>t.height/2+20;return n.width=r?t.width-t.height/2:n.width,n}}),AV=e=>{const t=e.width>e.height/2;return[[e.x,e.y],[e.x+(t?e.width-e.height/2:0),e.y],[e.x+e.width,e.y+e.height/2],[e.x+(t?e.width-e.height/2:0),e.y+e.height],[e.x,e.y+e.height],[e.x+(t?e.height/2:e.width),e.y+e.height/2]]},BV=Or({getPolygonPoints:AV,getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=Tr(e),r=t.width>t.height+20;return n.width=r?t.width-t.height:n.width,n.x=r?t.x+t.height/2:n.x,n}}),RV=e=>[[e.x,e.y+.2*e.height],[e.x+.68*e.width,e.y+.2*e.height],[e.x+.68*e.width,e.y],[e.x+e.width,e.y+e.height/2],[e.x+.68*e.width,e.y+e.height],[e.x+.68*e.width,e.y+.8*e.height],[e.x,e.y+.8*e.height]],MV=Or({getPolygonPoints:RV,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],getTextRectangle(e){const t=Tr(e);return t.width=.68*t.width,t}}),rn={draw:(e,t,n)=>ua(e,t,{...n,fillStyle:"solid"}),isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints:e=>M.getCornerPoints(e),getNearestPoint:(e,t)=>Ln(t,rn.getCornerPoints(e)),getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints:e=>M.getEdgeCenterPoints(e)},bV={draw:(e,t,n)=>R0(I.getRoughSVG(e),t.x,t.y,t.x+t.width,t.y+t.height,{...n,fillStyle:"solid"},!1,u0(t)),isInsidePoint:(e,t)=>k4(t,e,u0(e)),getCornerPoints:e=>M.getCornerPoints(e),getNearestPoint:(e,t)=>hD(t,e,u0(e)),getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints:e=>M.getEdgeCenterPoints(e)},u0=e=>Math.min(.1*e.width,.1*e.height);function hD(e,t,n){const{x:r,y:o,width:i,height:a}=t;let s=Ln(e,M.getCornerPoints(t)),l=null;return e[0]>=r&&e[0]<=r+n&&e[1]>=o&&e[1]<=o+n&&(l=[r+n,o+n]),e[0]>=r&&e[0]<=r+n&&e[1]>=o+a&&e[1]<=o+a-n&&(l=[r+n,o+a-n]),e[0]>=r+i-n&&e[0]<=r+i&&e[1]>=o&&e[1]<=o+n&&(l=[r+i-n,o+n]),e[0]>=r+i-n&&e[0]<=r+i&&e[1]>=o+a-n&&e[1]<=o+a&&(l=[r+i-n,o+a-n]),l&&(s=Ai(e,l,n,n)),s}const Lf=3/4,kV={draw(e,t,n){const r=I.getRoughSVG(e),o=t.x,i=t.y,a=t.x+t.width,s=t.y+t.height*Lf,l=u0(t),u=[o+l,i],c=[a-l,i],d=[a,i+l],h=[a,s-l],f=[a-l,s],p=[o+l,s],g=[o,s-l],m=[o,i+l],v=[o+t.width/4,s],y=[o+t.width/4,t.y+t.height],b=[o+t.width/2,s],w=r.path(`M${c[0]} ${c[1]} A ${l} ${l}, 0, 0, 1, ${d[0]} ${d[1]} L ${h[0]} ${h[1]} A ${l} ${l}, 0, 0, 1, ${f[0]} ${f[1]} L    ${b[0]} ${b[1]}  ${y[0]} ${y[1]}   ${v[0]} ${v[1]}   ${p[0]} ${p[1]} A ${l} ${l}, 0, 0, 1, ${g[0]} ${g[1]} L ${m[0]} ${m[1]} A ${l} ${l}, 0, 0, 1, ${u[0]} ${u[1]} Z`,{...n,fillStyle:"solid"});return Wt(w,"round"),w},isInsidePoint(e,t){const n=[[e.x+e.width/4,e.y+3*e.height/4],[e.x+e.width/4,e.y+e.height],[e.x+e.width/2,e.y+3*e.height/4]];return e.height=3*e.height/4,lc(t,n)||k4(t,e,u0(e))},getCornerPoints:e=>D5(e),getNearestPoint:(e,t)=>Ln(t,D5(e)),getEdgeByConnectionPoint(e,t){const n=D5(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints:e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height*Lf],[e.x,e.y+e.height/2]],getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,o=t.width-2*lt.rectangleAndText-2*n;return{height:r,width:o>0?o:0,x:t.x+lt.rectangleAndText+n,y:t.y+(t.height*Lf-r)/2}}},D5=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height*Lf],[e.x+e.width/2,e.y+e.height*Lf],[e.x+e.width/4,e.y+e.height],[e.x+e.width/4,e.y+e.height*Lf],[e.x,e.y+e.height*Lf]],tx=e=>[[e.x+.15*e.width,e.y],[e.x+.85*e.width,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],OV=Or({getPolygonPoints:tx,getConnectorPoints(e){const t=tx(e);return N0(t)},getTextRectangle(e){const t=Tr(e),n=t.width;return t.width=3*t.width/4,t.x+=n/8,t}}),nx=e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],IV=Or({getPolygonPoints:nx,getConnectorPoints(e){const t=nx(e);return[...N0(t),...t]},getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,o=t.width-2*lt.rectangleAndText-2*n,i=2*o/3;return{height:r,width:i>0?i:0,x:t.x+lt.rectangleAndText+n+o/6,y:t.y+3*t.height/5+(2*t.height/5-r)/2}}}),FV=e=>[[e.x,e.y+e.height/2],[e.x+8*e.width/25,e.y],[e.x+8*e.width/25,e.y+e.height/5],[e.x+17*e.width/25,e.y+e.height/5],[e.x+17*e.width/25,e.y],[e.x+e.width,e.y+e.height/2],[e.x+17*e.width/25,e.y+e.height],[e.x+17*e.width/25,e.y+4*e.height/5],[e.x+8*e.width/25,e.y+4*e.height/5],[e.x+8*e.width/25,e.y+e.height]],LV=Or({getPolygonPoints:FV,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]]}),rx=e=>[[e.x+e.width/2,e.y+75*e.height/91],[e.x+18.61*e.width/96,e.y+e.height],[e.x+24.2235871*e.width/96,e.y+57.7254249*e.height/91],[e.x,e.y+34.5491503*e.height/91],[e.x+33.3053687*e.width/96,e.y+29.7745751*e.height/91],[e.x+e.width/2,e.y],[e.x+62.6946313*e.width/96,e.y+29.7745751*e.height/91],[e.x+e.width,e.y+34.5491503*e.height/91],[e.x+71.7764129*e.width/96,e.y+57.7254249*e.height/91],[e.x+77.3892626*e.width/96,e.y+e.height]],_V=Or({getPolygonPoints:rx,getConnectorPoints:e=>{const t=rx(e);return[t[1],t[3],t[5],t[7],t[9]]},getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,o=t.width-2*lt.rectangleAndText-2*n,i=o/2;return{height:r,width:i>0?i:0,x:t.x+lt.rectangleAndText+n+o/4,y:t.y+1*t.height/6+(4*t.height/5-r)/2}}}),NV={draw:(e,t,n)=>R0(I.getRoughSVG(e),t.x,t.y,t.x+t.width,t.y+t.height,{...n,fillStyle:"solid"},!1,Pm(t)),isInsidePoint:(e,t)=>k4(t,e,Pm(e)),getCornerPoints:e=>M.getCornerPoints(e),getNearestPoint:(e,t)=>HV(t,e,Pm(e)),getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t),r=Pm(e),o=dD(e,r,n);if(o){const e=[n[0]-o[0],-(n[1]-o[1])],t=r,i=r,a=qa(e[0],e[1],t,i);return Za(e[0],e[1],a)}return null},getConnectorPoints:e=>M.getEdgeCenterPoints(e)},Pm=e=>Math.min(e.width/2,e.height/2);function HV(e,t,n){let r=null,o=dD(t,n,e);if(o)r=Ai(e,o,n,n);else{r=Ln(e,M.getCornerPoints(t))}return r}function dD(e,t,n){const{x:r,y:o,width:i,height:a}=e;let s=null;return n[0]>=r&&n[0]<=r+t&&n[1]>=o&&n[1]<=o+t&&(s=[r+t,o+t]),n[0]>=r&&n[0]<=r+t&&n[1]>=o+a-t&&n[1]<=o+a&&(s=[r+t,o+a-t]),n[0]>=r+i-t&&n[0]<=r+i&&n[1]>=o&&n[1]<=o+t&&(s=[r+i-t,o+t]),n[0]>=r+i-t&&n[0]<=r+i&&n[1]>=o+a-t&&n[1]<=o+a&&(s=[r+i-t,o+a-t]),s}const ix=e=>[[e.x,e.y+e.height/4],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],GV=Or({getPolygonPoints:ix,getConnectorPoints:e=>{const t=ix(e);return N0(t)},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,o=t.width-2*lt.rectangleAndText-2*n;return{height:r,width:o>0?o:0,x:t.x+lt.rectangleAndText+n,y:t.y+t.height/4+(3*t.height/4-r)/2}}}),jV=e=>[[e.x,e.y+e.height/2],[e.x+e.width/6,e.y],[e.x+5*e.width/6,e.y],[e.x+e.width,e.y+e.height/2],[e.x+5*e.width/6,e.y+e.height],[e.x+e.width/6,e.y+e.height]],$V=Or({getPolygonPoints:jV,getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTextRectangle(e){const t=Tr(e),n=t.width;return t.width=2*t.width/3,t.x+=n/6,t}}),ox=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+7*e.width/8,e.y+e.height],[e.x+e.width/8,e.y+e.height]],WV=Or({getPolygonPoints:ox,getConnectorPoints:e=>{const t=ox(e);return N0(t)},getTextRectangle(e){const t=Tr(e),n=t.width;return t.width=3*t.width/4,t.x+=n/8,t}}),sx=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width/2,e.y+e.height]],zV=Or({getPolygonPoints:sx,getConnectorPoints:e=>{const t=sx(e);return[...N0(t),...t]},getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,o=t.width-2*lt.rectangleAndText-2*n,i=2*o/3;return{height:r,width:i>0?i:0,x:t.x+lt.rectangleAndText+n+o/6,y:t.y+(2*t.height/3-r)/2}}}),VV={draw(e,t,n){const r=I.getRoughSVG(e).path(`M${t.x} ${t.y} L${t.x+3*t.width/4} ${t.y} A  ${t.width/4} ${t.height/2}, 0, 0, 1,${t.x+3*t.width/4} ${t.y+t.height} L${t.x} ${t.y+t.height} Z`,{...n,fillStyle:"solid"});return Wt(r,"round"),r},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]),r=M.isHit({...e,width:3*e.width/4},n),o=Uu(t,[e.x+3*e.width/4,e.y+e.height/2],e.width/4,e.height/2);return r||o},getCornerPoints:e=>M.getCornerPoints(e),getNearestPoint(e,t){const n=Ln(t,rn.getCornerPoints(e));return n[0]>e.x+3*e.width/4?Ai(t,[e.x+3*e.width/4,e.y+e.height/2],e.width/4,e.height/2):n},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t),r=[e.x+3*e.width/4,e.y+e.height/2],o=[n[0]-r[0],-(n[1]-r[1])],i=e.width/4,a=e.height/2,s=qa(o[0],o[1],i,a);return Za(o[0],o[1],s)},getConnectorPoints:e=>M.getEdgeCenterPoints(e)},UV={draw(e,t,n){const r=I.getRoughSVG(e).path(`M${t.x+t.width/10} ${t.y} L${t.x+t.width} ${t.y} A  ${t.width/10} ${t.height/2}, 0, 0, 0,${t.x+t.width} ${t.y+t.height} L${t.x+t.width/10} ${t.y+t.height}A  ${t.width/10} ${t.height/2}, 0, 0, 1,${t.x+t.width/10} ${t.y}`,{...n,fillStyle:"solid"});return Wt(r,"round"),r},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]),r=M.isHit({...e,x:e.x+e.width/10,width:9*e.width/10},n),o=Uu(t,[e.x+e.width/10,e.y+e.height/2],e.width/10,e.height/2),i=!Uu(t,[e.x+e.width,e.y+e.height/2],e.width/10,e.height/2);return r&&i||o},getCornerPoints:e=>M.getCornerPoints(e),getNearestPoint(e,t){const n=Ln(t,rn.getCornerPoints(e));if(n[0]<e.x+e.width/10){const n=[e.x+e.width/10,e.y+e.height/2],r=Ai(t,n,e.width/10,e.height/2);return r[0]>n[0]&&(r[0]=2*n[0]-r[0]),r}if(n[0]>e.x+9*e.width/10){const n=[e.x+e.width,e.y+e.height/2],r=Ai(t,n,e.width/10,e.height/2);return r[0]>n[0]&&(r[0]=2*n[0]-r[0]),r}return n},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t);let r=[e.x+e.width/10,e.y+e.height/2],o=e.width/10,i=e.height/2;const a=n[0]>e.x+9*e.width/10&&n[1]>e.y;a&&(r=[e.x+e.width,e.y+e.height/2]);const s=[n[0]-r[0],-(n[1]-r[1])],l=qa(s[0],s[1],o,i),u=Za(s[0],s[1],l);return a?u.map(e=>-e):u},getConnectorPoints:e=>[[e.x+e.width/2,e.y],[e.x+9*e.width/10,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]],getTextRectangle(e){const t=Tr(e),n=t.width;return t.width=3*t.width/4,t.x+=n/8,t}},XV={draw(e,t,n){const r=I.getRoughSVG(e).path(`M${t.x} ${t.y} H${t.x+t.width} V${t.y+t.height} H${t.x} Z M${t.x+.06*t.width} ${t.y} L${t.x+.06*t.width} ${t.y+t.height} M${t.x+t.width-.06*t.width} ${t.y} L${t.x+t.width-.06*t.width} ${t.y+t.height}`,{...n,fillStyle:"solid"});return Wt(r,"round"),r},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints:e=>M.getCornerPoints(e),getNearestPoint:(e,t)=>Ln(t,rn.getCornerPoints(e)),getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,o=t.width-2*lt.rectangleAndText-2*n-.06*t.width*2;return{height:r,width:o>0?o:0,x:t.x+lt.rectangleAndText+n+.06*t.width,y:t.y+(t.height-r)/2}}},KV=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]],YV=Or({getPolygonPoints:KV,getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,o=t.width-2*lt.rectangleAndText-2*n;return{width:o>0?o:0,height:r,x:t.x+lt.rectangleAndText+n,y:t.y+(t.height-t.height/2-r)/2}}}),qV=G8({draw(e,t,n){const r=I.getRoughSVG(e),o=t.width/2,i=t.height/2,a=[t.x+t.width,t.y+t.height/2],s=r.path(`M${a[0]} ${a[1]}\n        A${o},${i} 0 1,1 ${a[0]} ${a[1]-.01}\n        M${t.x} ${t.y+t.height/2}\n        L${t.x+t.width} ${t.y+t.height/2}\n        M${t.x+t.width/2} ${t.y}\n        L${t.x+t.width/2} ${t.y+t.height}\n        `,{...n,fillStyle:"solid"});return Wt(s,"round"),s}}),ZV=G8({draw(e,t,n){const r=I.getRoughSVG(e),o=t.width/2,i=t.height/2,a=[t.x+t.width,t.y+t.height/2],s=[t.x+t.width/2,t.y+t.height/2],l=C9([t.x,t.y],[t.x+t.width,t.y+t.height],s[0],s[1],o,i),u=C9([t.x+t.width,t.y],[t.x,t.y+t.height],s[0],s[1],o,i),c=r.path(`M${a[0]} ${a[1]}\n        A${o},${i} 0 1,1 ${a[0]} ${a[1]-.01}\n        M${l[0][0]} ${l[0][1]}\n        L${l[1][0]} ${l[1][1]}\n        M${u[0][0]} ${u[0][1]}\n        L${u[1][0]} ${u[1][1]}\n        `,{...n,fillStyle:"solid"});return Wt(c,"round"),c}}),QV={draw(e,t,n){const r=I.getRoughSVG(e).path(`M${t.x} ${t.y+t.height-t.height/9} V${t.y} H${t.x+t.width} V${t.y+t.height-t.height/9}\n            Q${t.x+t.width-t.width/4} ${t.y+t.height-t.height/9*3}, ${t.x+t.width/2} ${t.y+t.height-t.height/9} T${t.x} ${t.y+t.height-t.height/9}           \n            `,{...n,fillStyle:"solid"});return Wt(r,"round"),r},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints:e=>M.getCornerPoints(e),getNearestPoint(e,t){let n=Ln(t,rn.getCornerPoints(e)),r=wp([[e.x,e.y+e.height-e.height/9],[e.x+e.width/4,e.y+e.height],[e.x+e.width/2,e.y+e.height-e.height/9],[e.x+e.width/4*3,e.y+e.height-e.height/9*2],[e.x+e.width,e.y+e.height-e.height/9]]);if(r=Co(r),n[1]>e.y+e.height-e.height/9){if(n[0]===e.x+e.width/2)return n[1]=e.y+e.height-e.height/9,n;n=Ln(t,r,!1)}return n},getConnectorPoints:e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height-e.height/9],[e.x,e.y+e.height/2]],getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t);return n[0]>e.x&&n[0]<e.x+e.width/4?Kn([e.x+e.width/4,e.y+e.height],n):n[0]>e.x+e.width/4&&n[0]<e.x+e.width/4*3?Kn([e.x+e.width/4*3,e.y+e.height-e.height/9],[e.x+e.width/4,e.y+e.height]):n[0]>e.x+e.width/4*3?Kn([e.x+e.width,e.y+e.height-e.height/9],n):Kn(n,[e.x+e.width/4,e.y+e.height])},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,o=t.width-2*lt.rectangleAndText-2*n-.06*t.width*2;return{height:r,width:o>0?o:0,x:t.x+lt.rectangleAndText+n+.06*t.width,y:t.y+(t.height-r)/2}}},ax=e=>{const t=[[e.x,e.y+10],[e.x+5,e.y+10],[e.x+5,e.y+5],[e.x+10,e.y+5],[e.x+10,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height-e.height/9-10-3],[e.x+e.width-5,e.y+e.height-e.height/9-10-3-4],[e.x+e.width-5,e.y+e.height-e.height/9-5-3],[e.x+e.width-10,e.y+e.height-e.height/9-5-3-4],[e.x+e.width-10,e.y+e.height-e.height/9]];let n=wp([[e.x+e.width-10,e.y+e.height-e.height/9],[e.x+e.width-10-(e.width-10)/4,e.y+e.height-e.height/9*2],[e.x+(e.width-10)/2,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height],[e.x,e.y+e.height-e.height/9]]);return n=Co(n),[...t,...n]},JV={draw(e,t,n){const r=I.getRoughSVG(e).path(`M${t.x} ${t.y+t.height-t.height/9} V${t.y+10} H${t.x+5} V${t.y+5} H${t.x+10} V${t.y} H${t.x+t.width} V${t.y+t.height-t.height/9-10-3} L${t.x+t.width-5} ${t.y+t.height-t.height/9-10-3-4} V${t.y+t.height-t.height/9-5-3}\n                 L${t.x+t.width-10} ${t.y+t.height-t.height/9-5-3-4} V${t.y+t.height-t.height/9}\n                \n             Q${t.x+t.width-10-(t.width-10)/4} ${t.y+t.height-t.height/9*3}, ${t.x+(t.width-10)/2} ${t.y+t.height-t.height/9} T${t.x} ${t.y+t.height-t.height/9}\n              \n                M${t.x+5} ${t.y+10} H${t.x+t.width-10} V${t.y+t.height-t.height/9} \n                    \n                M${t.x+10} ${t.y+5} H${t.x+t.width-5} V${t.y+t.height-t.height/9-10-3}\n            `,{...n,fillStyle:"solid"});return Wt(r,"round"),r},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints:e=>M.getCornerPoints(e),getNearestPoint:(e,t)=>Ln(t,ax(e),!1),getConnectorPoints(e){let t=wp([[e.x,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height],[e.x+(e.width-10)/2,e.y+e.height-e.height/9],[e.x+(e.width-10)/4*3,e.y+e.height-e.height/9*2],[e.x+e.width-10,e.y+e.height-e.height/9]]);t=Co(t);const n=Ln([e.x+e.width/2,e.y+e.height],t);return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[n[0],n[1]],[e.x,e.y+e.height/2]]},getNearestCrossingPoint(e,t){const n=OT(ax(e),t);let r=n[0],o=Tt(t[0],t[1],r[0],r[1]);return n.filter((e,t)=>t>0).forEach(e=>{let n=Tt(t[0],t[1],e[0],e[1]);n<o&&(o=n,r=e)}),r},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t);if(n[0]>e.x&&n[0]<e.x+(e.width-10)/4)return Kn([e.x+(e.width-10)/4,e.y+e.height],n);if(n[0]>e.x+(e.width-10)/4&&n[0]<e.x+(e.width-10)/4*3)return Kn([e.x+(e.width-10)/4*3,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height]);if(n[0]>e.x+(e.width-10)/4*3&&n[0]<e.x+e.width-10)return Kn([e.x+(e.width-10),e.y+e.height-e.height/9],n);const r=Yf(US(t)||kt.bottom);return[r.x,r.y]},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,o=t.width-2*lt.rectangleAndText-2*n-.06*t.width*2;return{height:r,width:o>0?o-10:0,x:t.x+lt.rectangleAndText+n+.06*t.width,y:t.y+(t.height-r)/2}}},eU={draw(e,t,n){const r=I.getRoughSVG(e).path(`M${t.x} ${t.y+.15*t.height}  \n            A${t.width/2} ${.15*t.height}, 0, 0, 0,${t.x+t.width} ${t.y+.15*t.height} \n            A${t.width/2} ${.15*t.height}, 0, 0, 0,${t.x} ${t.y+.15*t.height} \n            V${t.y+t.height-.15*t.height}\n            A${t.width/2} ${.15*t.height}, 0, 0, 0, ${t.x+t.width} ${t.y+t.height-.15*t.height}\n            V${t.y+.15*t.height}`,{...n,fillStyle:"solid"});return Wt(r,"round"),r},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]),r=M.isHit({...e,y:e.y+.15*e.height,height:e.height-.3*e.height},n),o=Uu(t,[e.x+e.width/2,e.y+.15*e.height],e.width/2,.15*e.height),i=Uu(t,[e.x+e.width/2,e.y+e.height-.15*e.height],e.width/2,.15*e.height);return r||o||i},getCornerPoints:e=>M.getCornerPoints(e),getNearestPoint(e,t){const n=Ln(t,rn.getCornerPoints(e));if(n[1]<e.y+.15*e.height){const n=[e.x+e.width/2,e.y+.15*e.height],r=Ai(t,n,e.width/2,.15*e.height);return r[1]>n[1]&&(r[1]=2*n[1]-r[1]),r}if(n[1]>e.y+e.height-.15*e.height){const n=[e.x+e.width/2,e.y+e.height-.15*e.height],r=Ai(t,n,e.width/2,.15*e.height);return r[1]<n[1]&&(r[1]=2*n[0]-r[1]),r}return n},getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t);let r=[e.x+e.width/2,e.y+e.height-.15*e.height],o=e.width/2,i=.15*e.height;n[1]<e.y+.15*e.height&&n[0]>e.x&&(r=[e.x+e.width/2,e.y+.15*e.height]);const a=[n[0]-r[0],-(n[1]-r[1])],s=qa(a[0],a[1],o,i);return Za(a[0],a[1],s)},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,o=t.width-2*lt.rectangleAndText-2*n;return{height:r,width:o>0?o:0,x:t.x+lt.rectangleAndText+n,y:t.y+.3*t.height+(t.height-.45*t.height-r)/2}}},tU={draw(e,t,n){const r=I.getRoughSVG(e).path(`M${t.x+t.width-.15*t.width} ${t.y}  \n            A${.15*t.width} ${t.height/2}, 0, 0, 0,${t.x+t.width-.15*t.width} ${t.y+t.height} \n            A${.15*t.width} ${t.height/2}, 0, 0, 0,${t.x+t.width-.15*t.width} ${t.y} \n            H${t.x+.15*t.width}\n            A${.15*t.width} ${t.height/2}, 0, 0, 0, ${t.x+.15*t.width} ${t.y+t.height}\n            H${t.x+t.width-.15*t.width}`,{...n,fillStyle:"solid"});return Wt(r,"round"),r},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]),r=M.isHit({...e,x:e.x+.15*e.width,width:e.width-.3*e.width},n),o=Uu(t,[e.x+.15*e.width,e.y+e.height/2],.15*e.width,e.height/2),i=Uu(t,[e.x+e.width-.15*e.width,e.y+e.height/2],.15*e.width,e.height/2);return r||o||i},getCornerPoints:e=>M.getCornerPoints(e),getNearestPoint(e,t){const n=Ln(t,rn.getCornerPoints(e));if(n[0]<e.x+.15*e.width){const n=[e.x+.15*e.width,e.y+e.height/2],r=Ai(t,n,.15*e.width,e.height/2);return r[0]>n[0]&&(r[0]=2*n[0]-r[0]),r}if(n[0]>e.x+e.width-.15*e.width){const n=[e.x+e.width-.15*e.width,e.y+e.height/2],r=Ai(t,n,.15*e.width,e.height/2);return r[0]<n[0]&&(r[0]=2*n[0]-r[0]),r}return n},getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t);let r=[e.x+.15*e.width,e.y+e.height/2],o=.15*e.width,i=e.height/2;n[0]>e.x+e.width-.15*e.width&&n[1]>e.y&&(r=[e.x+e.width-.15*e.width,e.y+e.height/2]);const a=[n[0]-r[0],-(n[1]-r[1])],s=qa(a[0],a[1],o,i);return Za(a[0],a[1],s)},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,o=t.width-.45*t.width-2*lt.rectangleAndText-2*n;return{height:r,width:o>0?o:0,x:t.x+.15*t.width+lt.rectangleAndText+n,y:t.y+(t.height-r)/2}}},nU={draw(e,t,n){const r=I.getRoughSVG(e).path(`M${t.x} ${t.y} h${t.width} v${t.height} h${-t.width} v${-t.height}\n            M${t.x} ${t.y+t.height/10} h${t.width}\n            M${t.x+t.width/10} ${t.y} v${t.height}\n            `,{...n,fillStyle:"solid"});return Wt(r,"round"),r},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints:e=>M.getCornerPoints(e),getNearestPoint:(e,t)=>Ln(t,rn.getCornerPoints(e)),getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,o=t.width-.1*t.width-2*lt.rectangleAndText-2*n;return{height:r,width:o>0?o:0,x:t.x+.1*t.width+lt.rectangleAndText+n,y:t.y+.1*t.height+(t.height-.1*t.height-r)/2}}};function ux(e){const t=.09*e.width,n=e.x+e.width,r=e.y+e.height/2;return{startPoint:[n,e.y],upperCurve:{controlPoint1:[n-t,e.y],controlPoint2:[n,r],endPoint:[n-t,r]},lowerCurve:{controlPoint1:[n,r],controlPoint2:[n-t,e.y+e.height],endPoint:[n,e.y+e.height]}}}const rU={draw(e,t,n){const r=I.getRoughSVG(e),{startPoint:o,upperCurve:i,lowerCurve:a}=ux(t),s=[`M${o[0]} ${o[1]}`,`C${i.controlPoint1[0]} ${i.controlPoint1[1]},\n            ${i.controlPoint2[0]} ${i.controlPoint2[1]},\n            ${i.endPoint[0]} ${i.endPoint[1]}`,`C${a.controlPoint1[0]} ${a.controlPoint1[1]},\n            ${a.controlPoint2[0]} ${a.controlPoint2[1]},\n            ${a.endPoint[0]} ${a.endPoint[1]}`].join(" "),l=r.path(s,{...n,fillStyle:"solid",fill:"transparent"});return Wt(l,"round"),l},getNearestPoint(e,t){const{startPoint:n,upperCurve:r,lowerCurve:o}=ux(e),i=[...Co([n,r.controlPoint1,r.controlPoint2,r.endPoint],.001),...Co([r.endPoint,o.controlPoint1,o.controlPoint2,o.endPoint],.001)];let a=1/0,s=t;for(const e of i){const n=Tt(t[0],t[1],e[0],e[1]);n<a&&(a=n,s=[...e])}return s},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints:e=>M.getCornerPoints(e),getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,o=t.width-.09*t.width-2*lt.rectangleAndText-2*n;return{height:r,width:o>0?o:0,x:t.x+lt.rectangleAndText+n,y:t.y+(t.height-r)/2}}};function lx(e){const t=.09*e.width,n=e.y+e.height/2;return{startPoint:[e.x,e.y],upperCurve:{controlPoint1:[e.x+t,e.y],controlPoint2:[e.x,n],endPoint:[e.x+t,n]},lowerCurve:{controlPoint1:[e.x,n],controlPoint2:[e.x+t,e.y+e.height],endPoint:[e.x,e.y+e.height]}}}const iU={draw(e,t,n){const r=I.getRoughSVG(e),{startPoint:o,upperCurve:i,lowerCurve:a}=lx(t),s=[`M${o[0]} ${o[1]}`,`C${i.controlPoint1[0]} ${i.controlPoint1[1]},\n            ${i.controlPoint2[0]} ${i.controlPoint2[1]},\n            ${i.endPoint[0]} ${i.endPoint[1]}`,`C${a.controlPoint1[0]} ${a.controlPoint1[1]},\n            ${a.controlPoint2[0]} ${a.controlPoint2[1]},\n            ${a.endPoint[0]} ${a.endPoint[1]}`].join(" "),l=r.path(s,{...n,fillStyle:"solid",fill:"transparent"});return Wt(l,"round"),l},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints:e=>M.getCornerPoints(e),getNearestPoint(e,t){const{startPoint:n,upperCurve:r,lowerCurve:o}=lx(e),i=[...Co([n,r.controlPoint1,r.controlPoint2,r.endPoint],.001),...Co([r.endPoint,o.controlPoint1,o.controlPoint2,o.endPoint],.001)];let a=1/0,s=[...t];for(const e of i){const n=Tt(t[0],t[1],e[0],e[1]);n<a&&(a=n,s=[...e])}return s},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,o=t.width-.09*t.width-2*lt.rectangleAndText-2*n;return{height:r,width:o>0?o:0,x:t.x+.09*t.width+lt.rectangleAndText+n,y:t.y+(t.height-r)/2}}},oU={draw(e,t,n){const r=I.getRoughSVG(e).path(`M${t.x+.075*t.width} ${t.y+t.height} H${t.x} V${t.y} H${t.x+.075*t.width}\n           `,{...n,fillStyle:"solid",fill:"transparent"});return Wt(r,"round"),r},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints:e=>M.getCornerPoints(e),getNearestPoint:(e,t)=>Ln(t,rn.getCornerPoints(e)),getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,o=t.width-2*lt.rectangleAndText-2*n;return{height:r,width:o>0?o:0,x:t.x+lt.rectangleAndText+n,y:t.y+(t.height-r)/2}}},sU=e=>[[e.x,e.y+e.height/2],[e.x+.15*e.width,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x+.15*e.width,e.y+e.height]],aU={draw(e,t,n){const r=I.getRoughSVG(e).path(`M${t.x+.15*t.width} ${t.y} \n            H${t.x+t.width-.1*t.width} \n            A ${.1*t.width} ${t.height/2}, 0, 0, 1,${t.x+t.width-.1*t.width} ${t.y+t.height}\n            H${t.x+.15*t.width}\n            L${t.x} ${t.y+t.height/2}\n            Z\n            `,{...n,fillStyle:"solid"});return Wt(r,"round"),r},isInsidePoint(e,t){const n=[[e.x,e.y+e.height/2],[e.x+.15*e.width,e.y],[e.x+e.width-.1*e.width,e.y],[e.x+e.width-.1*e.width,e.y+e.height],[e.x+.15*e.width,e.y+e.height]],r=lc(t,n),o=Uu(t,[e.x+e.width-.1*e.width,e.y+e.height/2],.1*e.width,e.height/2);return r||o},getCornerPoints:e=>M.getCornerPoints(e),getNearestPoint(e,t){const n=Ln(t,sU(e));return n[0]>e.x+e.width-.1*e.width?Ai(t,[e.x+e.width-.1*e.width,e.y+e.height/2],.1*e.width,e.height/2):n},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t),r=[e.x+e.width-.1*e.width,e.y+e.height/2],o=[n[0]-r[0],-(n[1]-r[1])],i=.1*e.width,a=e.height/2,s=qa(o[0],o[1],i,a);return Za(o[0],o[1],s)},getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,o=t.width-2*n-.25*t.width;return{width:o>0?o:0,height:r,x:t.x+n+.15*t.width,y:t.y+(t.height-r)/2}}},Yd={draw(e,t,n,r){const o=Lt();try{const i=Dp(e,{...null==r?void 0:r.element});if(i){const r=I.getRoughSVG(e),{x:a,y:s,width:l,height:u}=t,c=um(r,[a,s],[a+l,s],n),d=um(r,[a,s],[a,s+u],n);o.append(c,d),i.forEach(t=>{const i=M.getRectangleByPoints(t.points),{x:a,y:s,width:l,height:u}=i,c=ua(e,{x:a+1,y:s+1,width:l-2,height:u-2},{fill:t.fill,fillStyle:"solid",strokeWidth:0}),d=um(r,[a+l,s],[a+l,s+u],n),h=um(r,[a,s+u],[a+l,s+u],n);o.append(c,d,h)}),Wt(o,"round")}}catch(e){console.error(e)}return o},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints:e=>M.getCornerPoints(e),getNearestPoint:(e,t)=>hD(t,e,u0(e)),getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTextRectangle(e,t){try{if(t&&t.id){const n=uh(null==t?void 0:t.board,e,t.id);if(n)return qg.isVerticalText(n)?uU(n):gD(n)}}catch(e){console.error(e)}return{x:0,y:0,width:0,height:0}}};function uU(e){const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight||0,o=t.height-2*lt.rectangleAndText-2*n;return{width:o>0?o:0,height:r,x:t.x-o/2+t.width/2,y:t.y+(t.height-r)/2}}function gD(e){const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight||0,o=t.width-2*lt.rectangleAndText-2*n;return{height:r,width:o>0?o:0,x:t.x+lt.rectangleAndText+n,y:t.y+(t.height-r)/2}}function cx(e){const t=e.x+e.width/2,n={width:e.width/3/2,height:e.height/4/2};return e.y,e.height,{headArcCommand:{rx:n.width,ry:n.height,xAxisRotation:0,largeArcFlag:0,sweepFlag:1,endX:t,endY:e.y},bodyLine:[[t,e.y+e.height/4],[t,e.y+e.height/4*3]],armsLine:[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],leftLegLine:[[t,e.y+e.height/4*3],[e.x+e.width/12,e.y+e.height]],rightLegLine:[[t,e.y+e.height/4*3],[e.x+e.width/12*11,e.y+e.height]]}}const lU={draw(e,t,n){const r=I.getRoughSVG(e),{headArcCommand:o,bodyLine:i,armsLine:a,leftLegLine:s,rightLegLine:l}=cx(t),u=[`M${i[0][0]} ${i[0][1]}`,`A${o.rx} ${o.ry} ${o.xAxisRotation} ${o.largeArcFlag} ${o.sweepFlag} ${o.endX} ${o.endY}`,`A${o.rx} ${o.ry} ${o.xAxisRotation} ${o.largeArcFlag} ${o.sweepFlag} ${i[0][0]} ${i[0][1]}`,`V${i[1][1]}`,`M${a[0][0]} ${a[0][1]} H${a[1][0]}`,`M${s[0][0]} ${s[0][1]} L${s[1][0]} ${s[1][1]}`,`M${l[0][0]} ${l[0][1]} L${l[1][0]} ${l[1][1]}`].join(" "),c=r.path(u,{...n,fillStyle:"solid"});return Wt(c,"round"),c},getNearestPoint(e,t){const{headArcCommand:n,bodyLine:r,armsLine:o,leftLegLine:i,rightLegLine:a}=cx(e),s=Ai(t,[e.x+e.width/2,e.y+e.height/4/2],n.rx,n.ry),l=Tt(...t,...s),u=b4(t,[r,o,i,a]);return l<Tt(...t,...u)?s:u},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints:e=>M.getCornerPoints(e),getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t);if(n[1]>=e.y&&n[1]<=e.y+e.height/4){const t=[e.x+e.width/2,e.y+e.height/4/2],r=[n[0]-t[0],-(n[1]-t[1])],o=e.width/2,i=e.height/2,a=qa(r[0],r[1],o,i);return Za(r[0],r[1],a)}return n[1]>=e.y+e.height/4&&n[1]<e.y+e.height/4*3?n[0]<e.x+e.width/2?Kg(Kn([e.x,e.y+e.height/2],n),-Math.PI/2):Kg(Kn([e.x+e.width,e.y+e.height/2],n),-Math.PI/2):n[1]>=e.y+e.height/4*3?n[0]<e.x+e.width/2?Kn(n,[e.x+e.width/12,e.y+e.height]):Kn([e.x+e.width/12*11,e.y+e.height],n):Kn(n,[e.x+e.width/4,e.y+e.height])},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=e.textHeight,r=t.width+40;return{height:n,width:r>0?r:0,x:t.x-20,y:t.y+t.height+4}}},cU={draw(e,t,n){const r=I.getRoughSVG(e).path(`M${t.x} ${t.y} H${t.x+t.width} V${t.y+t.height} H${t.x} Z M${t.x+40} ${t.y} L${t.x+40} ${t.y+t.height} `,{...n,fillStyle:"solid"});return Wt(r,"round"),r},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints:e=>M.getCornerPoints(e),getNearestPoint:(e,t)=>Ln(t,rn.getCornerPoints(e)),getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,o=40-2*lt.rectangleAndText-2*n;return{height:r,width:o>0?o:0,x:t.x+lt.rectangleAndText+n,y:t.y+(t.height-r)/2}}};function fx(e){const t=.7*e.width,n=e.x+.8*e.width;return{headerHeight:25,points:{leftTop:[e.x,e.y+25],topStart:[e.x,e.y],topEnd:[e.x+t,e.y],cornerPoint:[n,e.y+25],rightTop:[e.x+e.width,e.y+25],rightBottom:[e.x+e.width,e.y+e.height],leftBottom:[e.x,e.y+e.height],leftMiddle:[e.x,e.y+25],middlePoint:[n,e.y+25]}}}const fU={draw(e,t,n){const r=I.getRoughSVG(e),{points:o}=fx(t),i=[`M${o.leftTop[0]} ${o.leftTop[1]}`,`V${o.topStart[1]}`,`H${o.topEnd[0]}`,`L${o.cornerPoint[0]} ${o.cornerPoint[1]}`,`H${o.rightTop[0]}`,`V${o.rightBottom[1]}`,`H${o.leftBottom[0]}`,`V${o.leftMiddle[1]}`,`H${o.middlePoint[0]}`].join(" "),a=r.path(i,{...n,fillStyle:"solid"});return Wt(a,"round"),a},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints:e=>M.getCornerPoints(e),getNearestPoint(e,t){const{points:n}=fx(e);return b4(t,[[n.topStart,n.leftTop],[n.leftTop,n.leftBottom],[n.leftBottom,n.rightBottom],[n.rightBottom,n.rightTop],[n.topStart,n.topEnd],[n.topEnd,n.cornerPoint],[n.cornerPoint,n.rightTop],[n.leftMiddle,n.middlePoint]])},getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t);return n[0]>e.x+.7*e.width&&n[1]<e.y+25?Kn([e.x+.7*e.width,e.y],n):Kn([e.x+.8*e.width,e.y+25],n)},getTextRectangle(e,t){var n,r;const o=M.getRectangleByPoints(e.points),i=zt(e),a=null==(r=null==(n=e.texts)?void 0:n.find(e=>e.id===(null==t?void 0:t.id)))?void 0:r.textHeight;if((null==t?void 0:t.id)===Ko.name){const e=.7*o.width-lt.rectangleAndText-i;return{height:a,width:e>0?e:0,x:o.x+lt.rectangleAndText+i,y:o.y+(25-a)/2}}if((null==t?void 0:t.id)===Ko.content){const e=o.width-2*lt.rectangleAndText-2*i;return{height:a,width:e>0?e:0,x:o.x+lt.rectangleAndText+i,y:o.y+25+(o.height-25-a)/2}}return o}},hU={draw(e,t,n){const r=I.getRoughSVG(e).path(`M${t.x} ${t.y+25} \n            V${t.y}\n            H${t.x+t.width} \n            V${t.y+t.height}\n            H${t.x}\n            V${t.y+25}\n            H${t.x+t.width/3-8}\n            L${t.x+t.width/3} ${t.y+16}\n            V${t.y}\n            `,{...n,fillStyle:"solid"});return Wt(r,"round"),r},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints:e=>M.getCornerPoints(e),getNearestPoint:(e,t)=>Ln(t,rn.getCornerPoints(e)),getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTextRectangle(e,t){var n,r;const o=M.getRectangleByPoints(e.points),i=zt(e),a=null==(r=null==(n=e.texts)?void 0:n.find(e=>e.id===(null==t?void 0:t.id)))?void 0:r.textHeight;if((null==t?void 0:t.id)===Ko.name){const e=o.width/3-8-lt.rectangleAndText-i;return{height:a,width:e>0?e:0,x:o.x+lt.rectangleAndText+i,y:o.y+(25-a)/2}}if((null==t?void 0:t.id)===Ko.content){const e=o.width-2*lt.rectangleAndText-2*i;return{height:a,width:e>0?e:0,x:o.x+lt.rectangleAndText+i,y:o.y+25+lt.rectangleAndText+i}}return o}};function hx(e){return[[[e.x,e.y],[e.x+e.width,e.y+e.height]],[[e.x+e.width,e.y],[e.x,e.y+e.height]]]}const dU={draw(e,t,n){const r=I.getRoughSVG(e),o=hx(t),i=r.path(o.map(([e,t])=>`M${e[0]} ${e[1]} L${t[0]} ${t[1]}`).join(" "),{...n,fillStyle:"solid",strokeWidth:4});return Wt(i,"round"),i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints:e=>M.getCornerPoints(e),getNearestPoint(e,t){const n=hx(e);let r=1/0,o=t;return n.forEach(e=>{const n=Q3(t,e),i=Tt(t[0],t[1],n[0],n[1]);i<r&&(r=i,o=n)}),o},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints:e=>M.getEdgeCenterPoints(e)},gU={draw(e,t,n){const r=I.getRoughSVG(e).path(`M${t.x} ${t.y} H${t.x+t.width} V${t.y+t.height} H${t.x} Z M${t.x+.125*t.width} ${t.y} L${t.x+.125*t.width} ${t.y+t.height} M${t.x+t.width-.125*t.width} ${t.y} L${t.x+t.width-.125*t.width} ${t.y+t.height}`,{...n,fillStyle:"solid"});return Wt(r,"round"),r},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints:e=>M.getCornerPoints(e),getNearestPoint:(e,t)=>Ln(t,rn.getCornerPoints(e)),getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,o=t.width-2*lt.rectangleAndText-2*n-.125*t.width*2;return{height:r,width:o>0?o:0,x:t.x+lt.rectangleAndText+n+.125*t.width,y:t.y+(t.height-r)/2}}},pU={draw(e,t,n){const r=I.getRoughSVG(e).path(`M${t.x} ${t.y} \n            h${t.width-16}\n            v16\n            h16\n            v${t.height-16}\n            h${-t.width}\n            Z\n            M${t.x+t.width-16} ${t.y} \n            A16 16, 0,0,1, ${t.x+t.width} ${t.y+16}\n            `,{...n,fillStyle:"solid"});return Wt(r,"round"),r},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints:e=>M.getCornerPoints(e),getNearestPoint(e,t){const n=Ln(t,rn.getCornerPoints(e));return n[0]>e.x+e.width-16&&n[1]<e.y+16?Ai(t,[e.x+e.width-16,e.y+16],16,16):n},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t),r=[e.x+3*e.width/4,e.y+e.height/2],o=[n[0]-r[0],-(n[1]-r[1])],i=qa(o[0],o[1],16,16);return Za(o[0],o[1],i)},getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,o=t.width-2*lt.rectangleAndText-n-15;return{height:r,width:o>0?o:0,x:t.x+lt.rectangleAndText+n,y:t.y+(t.height-r)/2}}};function dx(e){const t=e.y+e.height/2,n=e.x+.3*e.width,r=.13*e.width,o=.285*e.height,i=n+r,a=.233*e.width;return{startPoint:[e.x,t],line1:[[e.x,t],[n,t]],circleArcCommand:{rx:r,ry:o,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:n,endY:t},verticalArcCommand:{rx:a,ry:e.height/2,xAxisRotation:0,largeArcFlag:0,sweepFlag:1,endX:i,endY:e.y+e.height},line2:[[i+a,t],[e.x+e.width,t]]}}const mU={draw(e,t,n){const r=I.getRoughSVG(e),{startPoint:o,line1:i,circleArcCommand:a,verticalArcCommand:s,line2:l}=dx(t),u=[`M${o[0]} ${o[1]}`,`H${i[1][0]}`,`A${a.rx} ${a.ry} ${a.xAxisRotation} ${a.largeArcFlag} ${a.sweepFlag} ${i[1][0]+2*a.rx} ${a.endY}`,`A${a.rx} ${a.ry} ${a.xAxisRotation} ${a.largeArcFlag} ${a.sweepFlag} ${a.endX} ${a.endY}`,`M${s.endX} ${t.y}`,`A${s.rx} ${s.ry} ${s.xAxisRotation} ${s.largeArcFlag} ${s.sweepFlag} ${s.endX} ${s.endY}`,`M${l[0][0]} ${l[0][1]} H${l[1][0]}`].join(" "),c=r.path(u,{...n,fillStyle:"solid"});return Wt(c,"round"),c},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints:e=>M.getCornerPoints(e),getConnectorPoints:e=>M.getEdgeCenterPoints(e),getNearestPoint(e,t){const{line1:n,line2:r,circleArcCommand:o,verticalArcCommand:i}=dx(e),a=Ln(t,[...n,...r]),s=Tt(...t,...a),l=Ai(t,[n[1][0]+o.rx,n[1][1]],o.rx,o.ry),u=Tt(...t,...l),c=J3(t,[i.endX,e.y],i),d=Tt(...t,...c),h=Math.min(s,u,d);return h===s?a:h===u?l:c},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t);return n[0]>e.x+.43*e.width&&n[1]<e.y+e.height/2?Kg(Kn(n,[e.x,e.y+e.height/2]),-Math.PI):(n[0]>e.x+.43*e.width&&(n[1],e.y,e.height),Kn(n,[e.x,e.y+e.height/2]))}};function gx(e){const t=.39*e.width,n=e.height/2;return{startPoint:[e.x,e.y],leftArcCommand:{rx:t,ry:n,xAxisRotation:0,largeArcFlag:0,sweepFlag:1,endX:e.x,endY:e.y+e.height},line:{startX:e.x+.41*e.width,startY:e.y+e.height/2,endX:e.x+e.width,endY:e.y+e.height/2}}}const vU={draw(e,t,n){const r=I.getRoughSVG(e),{startPoint:o,leftArcCommand:i,line:a}=gx(t),s=[`M${o[0]} ${o[1]}`,`A${i.rx} ${i.ry} ${i.xAxisRotation} ${i.largeArcFlag} ${i.sweepFlag} ${i.endX} ${i.endY}`,`M${a.startX} ${a.startY} H${a.endX}`].join(" "),l=r.path(s,{...n,fillStyle:"solid",fill:"transparent"});return Wt(l,"round"),l},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints:e=>M.getCornerPoints(e),getNearestPoint(e,t){const{startPoint:n,leftArcCommand:r,line:o}=gx(e);let i=1/0,a=t;const s=J3(t,n,r),l=Tt(t[0],t[1],s[0],s[1]);l<i&&(i=l,a=s);const u=Q3(t,[[o.startX,o.startY],[o.endX,o.endY]]),c=Tt(t[0],t[1],u[0],u[1]);return c<i&&(i=c,a=u),a},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints:e=>M.getEdgeCenterPoints(e)},px=.54;function mx(e){const t=e.y+e.height/2,n=e.width*(1-px)/2,r=e.height/2,o=[e.x,t],i=e.x+e.width*px;return{startPoint:o,line:{startX:o[0],startY:t,endX:i,endY:t},arcCommands:[{rx:n,ry:r,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+e.width,endY:t},{rx:n,ry:r,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:i,endY:t}]}}const yU={draw(e,t,n){const r=I.getRoughSVG(e),{startPoint:o,line:i,arcCommands:a}=mx(t),s=[`M${o[0]} ${o[1]}`,`H${i.endX}`,...a.map(e=>`A${e.rx} ${e.ry} ${e.xAxisRotation} ${e.largeArcFlag} ${e.sweepFlag} ${e.endX} ${e.endY}`)].join(" "),l=r.path(s,{...n,fillStyle:"solid"});return Wt(l,"round"),l},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints:e=>M.getCornerPoints(e),getConnectorPoints:e=>M.getEdgeCenterPoints(e),getNearestPoint(e,t){const{line:n,arcCommands:r}=mx(e),o=Ln(t,[[n.startX,n.startY],[n.endX,n.endY]]),i=Tt(...t,...o),a=Ai(t,[e.x+3*e.width/4,n.startY],r[0].rx,r[0].ry);return i<Tt(...t,...a)?o:a},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t),r=[e.x+3*e.width/4,e.y+e.height/2];if(n[0]>e.x+.54*e.width){const t=[n[0]-r[0],-(n[1]-r[1])],o=.46*e.width/2,i=e.height/2,a=qa(t[0],t[1],o,i);return Za(t[0],t[1],a)}return Kn(n,[e.x,e.y+e.height/2])}};function Sm(e){const t=e.x+12,n=e.width>70?24:.2*e.width,r=e.height-28-.35*e.height>1?14:.175*e.height,o=e.y+.175*e.height,i=e.y+e.height-.175*e.height-r;return{boxSize:{width:n,height:r},points:{mainStart:[t,e.y],topBoxStart:[t,o],topBoxEnd:[t,o+r],bottomBoxStart:[t,i],bottomBoxEnd:[t,i+r],mainEnd:[t,e.y+e.height],rightTop:[e.x+e.width,e.y],rightBottom:[e.x+e.width,e.y+e.height]}}}const pD={draw(e,t,n){const r=I.getRoughSVG(e),{boxSize:o,points:i}=Sm(t),a=[`M${i.mainStart[0]} ${i.mainStart[1]}`,`H${i.rightTop[0]}`,`V${i.rightBottom[1]}`,`H${i.mainEnd[0]}`,`M${i.topBoxStart[0]} ${i.topBoxStart[1]}`,`h${o.width/2} v${o.height} h${-o.width} v${-o.height} h${o.width/2}`,`M${i.bottomBoxStart[0]} ${i.bottomBoxStart[1]}`,`h${o.width/2} v${o.height} h${-o.width} v${-o.height} h${o.width/2}`,`M${i.mainStart[0]} ${i.mainStart[1]}`,`V${i.topBoxStart[1]}`,`M${i.topBoxEnd[0]} ${i.topBoxEnd[1]}`,`V${i.bottomBoxStart[1]}`,`M${i.bottomBoxEnd[0]} ${i.bottomBoxEnd[1]}`,`V${i.mainEnd[1]}`].join(" "),s=r.path(a,{...n,fillStyle:"solid"});return Wt(s,"round"),s},getNearestPoint(e,t){const{boxSize:n,points:r}=Sm(e);return b4(t,[[r.mainStart,[r.rightTop[0],r.mainStart[1]]],[[r.rightTop[0],r.mainStart[1]],r.rightBottom],[r.rightBottom,[r.mainEnd[0],r.rightBottom[1]]],[[r.mainEnd[0],r.rightBottom[1]],r.mainStart],[r.topBoxStart,[r.topBoxStart[0]+n.width/2,r.topBoxStart[1]]],[[r.topBoxStart[0]+n.width/2,r.topBoxStart[1]],[r.topBoxStart[0]+n.width/2,r.topBoxEnd[1]]],[[r.topBoxStart[0]+n.width/2,r.topBoxEnd[1]],[r.topBoxStart[0]-n.width/2,r.topBoxEnd[1]]],[[r.topBoxStart[0]-n.width/2,r.topBoxEnd[1]],[r.topBoxStart[0]-n.width/2,r.topBoxStart[1]]],[[r.topBoxStart[0]-n.width/2,r.topBoxStart[1]],r.topBoxStart],[r.bottomBoxStart,[r.bottomBoxStart[0]+n.width/2,r.bottomBoxStart[1]]],[[r.bottomBoxStart[0]+n.width/2,r.bottomBoxStart[1]],[r.bottomBoxStart[0]+n.width/2,r.bottomBoxEnd[1]]],[[r.bottomBoxStart[0]+n.width/2,r.bottomBoxEnd[1]],[r.bottomBoxStart[0]-n.width/2,r.bottomBoxEnd[1]]],[[r.bottomBoxStart[0]-n.width/2,r.bottomBoxEnd[1]],[r.bottomBoxStart[0]-n.width/2,r.bottomBoxStart[1]]],[[r.bottomBoxStart[0]-n.width/2,r.bottomBoxStart[1]],r.bottomBoxStart],[r.mainStart,r.topBoxStart],[r.topBoxEnd,r.bottomBoxStart],[r.bottomBoxEnd,r.mainEnd]])},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints:e=>M.getCornerPoints(e),getTangentVectorByConnectionPoint(e,t){const{points:n}=Sm(e),r=M.getConnectionPoint(e,t);return Kn(n.mainStart,r)},getConnectorPoints(e){const{points:t}=Sm(e);return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[t.mainStart[0],e.y+e.height/2]]},getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,o=t.width-24-2*lt.rectangleAndText-2*n;return{height:r,width:o>0?o:0,x:t.x+24+lt.rectangleAndText+n,y:t.y+(t.height-r)/2}}},wU={draw(e,t,n){const r=I.getRoughSVG(e),o=t.width-90-18>1?45:.25*t.width,i=t.height-30-16>1?30:.2*t.height,a={x:t.x+t.width-18-o,y:t.y+8,width:o,height:i},s=r.path(`M${t.x} ${t.y} \n            H${t.x+t.width} \n            V${t.y+t.height} \n            H${t.x} Z\n\n            `,{...n,fillStyle:"solid"}),l=pD.draw(e,a,n);return s.append(l),Wt(s,"round"),s},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints:e=>M.getCornerPoints(e),getNearestPoint:(e,t)=>Ln(t,rn.getCornerPoints(e)),getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,o=t.width-90-18>1?45:.25*t.width,i=t.width-18-o-lt.rectangleAndText-2*n;return{height:r,width:i>0?i:0,x:t.x+lt.rectangleAndText+n,y:t.y+(t.height-r)/2}}},CU={draw:(e,t,n)=>R0(I.getRoughSVG(e),t.x,t.y,t.x+t.width,t.y+t.height,{...n,fillStyle:"solid",dashGap:10,strokeLineDash:[10,10]},!1,4),isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints:e=>M.getCornerPoints(e),getNearestPoint:(e,t)=>Ln(t,rn.getCornerPoints(e)),getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,o=t.width-2*lt.rectangleAndText-2*n;return{height:r,width:o>0?o:0,x:t.x+lt.rectangleAndText+n,y:t.y+(t.height-r)/2}}},xU={[pt.rectangle]:rn,[pt.diamond]:S5,[pt.ellipse]:T5,[pt.parallelogram]:ex,[pt.roundRectangle]:bV,[pt.text]:rn,[pt.triangle]:IV,[pt.leftArrow]:CV,[pt.trapezoid]:OV,[pt.rightArrow]:MV,[pt.cross]:mV,[pt.star]:_V,[pt.pentagon]:SV,[pt.hexagon]:yV,[pt.octagon]:EV,[pt.pentagonArrow]:DV,[pt.processArrow]:BV,[pt.twoWayArrow]:LV,[pt.comment]:gV,[pt.roundComment]:kV,[pt.cloud]:IT,[gt.process]:rn,[gt.decision]:S5,[gt.connector]:T5,[gt.data]:ex,[gt.terminal]:NV,[gt.database]:eU,[gt.hardDisk]:tU,[gt.internalStorage]:nU,[gt.manualInput]:GV,[gt.preparation]:$V,[gt.manualLoop]:WV,[gt.merge]:zV,[gt.delay]:VV,[gt.storedData]:UV,[gt.or]:qV,[gt.summingJunction]:ZV,[gt.predefinedProcess]:XV,[gt.offPage]:YV,[gt.document]:QV,[gt.multiDocument]:JV,[gt.noteCurlyLeft]:rU,[gt.noteCurlyRight]:iU,[gt.noteSquare]:oU,[gt.display]:aU,[mo.swimlaneHorizontal]:Yd,[mo.swimlaneVertical]:Yd,[x0.table]:Yd,[ft.actor]:lU,[ft.useCase]:T5,[ft.container]:cU,[ft.note]:pU,[ft.package]:fU,[ft.combinedFragment]:hU,[ft.class]:Yd,[ft.interface]:Yd,[ft.activation]:rn,[ft.object]:rn,[ft.deletion]:dU,[ft.activityClass]:gU,[ft.simpleClass]:rn,[ft.component]:pD,[ft.componentBox]:wU,[ft.template]:CU,[ft.port]:rn,[ft.branchMerge]:S5,[ft.assembly]:mU,[ft.requiredInterface]:vU,[ft.providedInterface]:yU},pi=e=>xU[e],Mp=(e,t)=>{const n=zt(t),r=t.source.boundId?xs(e,t.source.boundId):void 0,o=t.target.boundId?xs(e,t.target.boundId):void 0;let i=r?nc(r,t.source.connection):t.points[0],a=o?nc(o,t.target.connection):t.points[t.points.length-1],s=Kd([a[0]-i[0],a[1]-i[1]])||kt.right,l=Oj(s);const u=Yf(s),c=Yf(l),d={key:Es.source,point:i,direction:s,vector:[u.x,u.y]},h={key:Es.target,point:a,direction:l,vector:[c.x,c.y]};if(r){const e=Yr.isSourceMarkOrTargetMark(t,Vr.none,Es.source)?0:n,o=vx(r,t.source.connection);if(d.vector=o,d.boundElement=r,Xa(r)){s=Kd(Kg(o,r.angle))||s}else{s=Kd(o)||s}d.direction=s,i=nc(r,t.source.connection,s,e),d.point=Ka(i,r)||i}if(o){const e=Yr.isSourceMarkOrTargetMark(t,Vr.none,Es.target)?0:n,r=vx(o,t.target.connection);if(h.vector=r,h.boundElement=o,Xa(o)){l=Kd(Kg(r,o.angle))||l}else{l=Kd(r)||l}h.direction=l,a=nc(o,t.target.connection,l,e),h.point=Ka(a,o)||a}return{source:d,target:h}},nc=(e,t,n,r)=>{const o=M.getRectangleByPoints(e.points);if(n&&r){const e=Yf(n),i=M.getConnectionPoint(o,t);return[i[0]+e.x*r,i[1]+e.y*r]}return M.getConnectionPoint(o,t)},vx=(e,t)=>{const n=M.getRectangleByPoints(e.points),r=Sc(e),o=pi(r);const i=US(t);if(i&&e.shape!==pt.ellipse){const e=Yf(i);return[e.x,e.y]}if(o.getEdgeByConnectionPoint){const e=o.getEdgeByConnectionPoint(n,t);if(e){return xC([e[1][0]-e[0][0],e[1][1]-e[0][1]])}}if(o.getTangentVectorByConnectionPoint){const e=o.getTangentVectorByConnectionPoint(n,t);if(e)return xC(e)}return[0,0]},bp=(e,t,n)=>{n=n??Mp(e,t);const{sourceRectangle:r,targetRectangle:o}=Mz(e,t,n),{sourceOuterRectangle:i,targetOuterRectangle:a}=Zj(r,o),s=n.source.point,l=n.target.point;return{sourcePoint:s,nextSourcePoint:TC(s,i,n.source.direction),sourceRectangle:r,sourceOuterRectangle:i,targetPoint:l,nextTargetPoint:TC(l,a,n.target.direction),targetRectangle:o,targetOuterRectangle:a}},EU=(e,t,n)=>{const r=k0(e,{match:e=>!!fe.isArrowLine(e)&&(e.source.boundId===e.id||e.target.boundId===e.id),recursion:e=>!0});r.length&&r.forEach(r=>{const o=r.source.boundId===t.id,i=o?"source":"target",a={...r[i]},s=ji(e,r),l=o?s[0]:s[s.length-1];a.connection=E0(e,l,t);const u=I.findPath(e,r),c=n.findIndex(e=>wt.equals(e.path,u));-1===c?n.push({property:{[i]:a},path:u}):n[c].property={...n[c].property,[i]:a}})};var Vr,Fn,Es;!function(e){e.arrow="arrow",e.none="none",e.openTriangle="open-triangle",e.solidTriangle="solid-triangle",e.sharpArrow="sharp-arrow",e.oneSideUp="one-side-up",e.oneSideDown="one-side-down",e.hollowTriangle="hollow-triangle",e.singleSlash="single-slash"}(Vr||(Vr={})),function(e){e.straight="straight",e.curve="curve",e.elbow="elbow"}(Fn||(Fn={})),function(e){e.source="source",e.target="target"}(Es||(Es={}));const Yr={isSourceMarkOrTargetMark:(e,t,n)=>n===Es.source?e.source.marker===t:e.target.marker===t,isSourceMark:(e,t)=>Yr.isSourceMarkOrTargetMark(e,t,Es.source),isTargetMark:(e,t)=>Yr.isSourceMarkOrTargetMark(e,t,Es.target),isBoundElementOfSource:(e,t)=>e.source.boundId===t.id,isBoundElementOfTarget:(e,t)=>e.target.boundId===t.id,getPoints(e,t){let n,r;if(t.source.boundId){const r=xs(e,t.source.boundId),o=nc(r,t.source.connection);n=Ka(o,r)||o}else n=t.points[0];if(t.target.boundId){const n=xs(e,t.target.boundId),o=nc(n,t.target.connection);r=Ka(o,n)||o}else r=t.points[t.points.length-1];return[n,...t.points.length>2?t.points.slice(1,t.points.length-1):[],r]}};var Go,A3,np;!function(e){e.basicShape="basicShape",e.flowchart="flowchart",e.text="text",e.arrowLine="arrow-line",e.UML="UML"}(Go||(Go={})),(A3||(A3={})).vectorLine="vectorLine",function(e){e.straight="straight",e.curve="curve"}(np||(np={}));const fe={isGeometry:e=>"geometry"===e.type,isArrowLine:e=>"arrow-line"===e.type||"line"===e.type,isVectorLine:e=>"vector-line"===e.type,isLine:e=>fe.isArrowLine(e)||fe.isVectorLine(e),isText:e=>"geometry"===e.type&&e.shape===pt.text,isImage:e=>"image"===e.type,isTable:e=>qg.isTable(e),isDrawElement:e=>!!(fe.isGeometry(e)||fe.isLine(e)||fe.isImage(e)||fe.isTable(e)||fe.isSwimlane(e)),isCustomGeometryElement:(e,t)=>{const n=e.getPluginOptions(cT);return!!((null==n?void 0:n.customGeometryTypes)||[]).includes(t.type)},isShapeElement:e=>fe.isImage(e)||fe.isGeometry(e)||fe.isTable(e)||fe.isSwimlane(e),isBasicShape:e=>Object.keys(pt).includes(e.shape),isFlowchart:e=>Object.keys(gt).includes(e.shape),isUML:e=>Object.keys(ft).includes(e.shape),isSwimlane:e=>"swimlane"===e.type,isVerticalSwimlane:e=>fe.isSwimlane(e)&&e.shape===mo.swimlaneVertical,isHorizontalSwimlane:e=>fe.isSwimlane(e)&&e.shape===mo.swimlaneHorizontal,isUMLClassOrInterface:e=>Object.keys(ft).includes(e.shape)&&[ft.class,ft.interface].includes(e.shape),isGeometryByTable:e=>fe.isUMLClassOrInterface(e),isElementByTable:e=>fe.isTable(e)||fe.isSwimlane(e)||fe.isGeometryByTable(e)};class yx extends Ec{constructor(){super()}initializeGenerator(){this.activeGenerator=Ep(this.board,{getStrokeWidth:()=>(1===Qe(this.board).length&&gi(this.board),1),getStrokeOpacity:()=>1!==Qe(this.board).length||gi(this.board)?.5:1,getRectangle:e=>M.getRectangleByPoints(e.points),hasResizeHandle:()=>uv(this.board,this.element)}),this.lineAutoCompleteGenerator=new Qu(this.board),this.shapeGenerator=new VT(this.board),L8(this.element)&&this.initializeTextManage(),this.getRef().addGenerator(Qu.key,this.lineAutoCompleteGenerator),this.getRef().addGenerator(m3.key,this.activeGenerator),this.getRef().updateActiveSection=()=>{this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getElementTopHost(this.board),{selected:this.selected}),this.textGenerator&&this.textGenerator.draw(this.getElementG())}onContextChanged(e,t){e.element!==t.element||e.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}),this.textGenerator&&this.updateText(t.element,e.element)):(e.selected!==t.selected||e.selected)&&(this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}))}updateText(e,t){Vu(this.element)?this.textGenerator.update(this.element,e.texts,t.texts,this.getElementG()):this.textGenerator.update(this.element,e.text,t.text,this.getElementG())}initializeTextManage(){const e=(e,t,n)=>{t.newText?Vu(e)?$i.setDrawTexts(this.board,e,{id:n.id,text:t.newText,textHeight:t.height}):$i.setText(this.board,e,t.newText,t.width,t.height):$i.setTextSize(this.board,e,t.width,t.height),t.operations&&E8(e,t.operations)};Vu(this.element)?this.textGenerator=new C8(this.board,this.element,this.element.texts,{onChange:e}):this.textGenerator=new pz(this.board,this.element,this.element.text,{onChange:e,getMaxWidth:()=>{var e;let t=Tr(this.element).width;const n=pi(this.element.shape).getTextRectangle;return n&&(t=n(this.element).width),null!=(e=this.element)&&e.autoSize?fT.defaultTextMaxWidth:t}}),this.textGenerator.initialize()}destroy(){var e;super.destroy(),this.activeGenerator.destroy(),this.lineAutoCompleteGenerator.destroy(),null==(e=this.textGenerator)||e.destroy()}}const PU="debug:plait:line-turning",wx=A0(PU);class SU extends Ec{constructor(){super(),this.boundedElements={}}initializeGenerator(){this.shapeGenerator=new MT(this.board),this.activeGenerator=new KT(this.board),this.initializeTextManages()}initialize(){this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG());const e=ji(this.board,this.element);this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected,linePoints:e}),super.initialize(),this.boundedElements=this.getBoundedElements(),this.drawText(),this.getRef().updateActiveSection=()=>{const e=ji(this.board,this.element);this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected,linePoints:e})},wx.isDebug()&&wx.drawCircles(this.board,this.element.points.slice(1,-1),4,!0)}getBoundedElements(){const e={};if(this.element.source.boundId){const t=xs(this.board,this.element.source.boundId);t&&(e.source=t)}if(this.element.target.boundId){const t=xs(this.board,this.element.target.boundId);t&&(e.target=t)}return e}onContextChanged(e,t){const n=this.getBoundedElements(),r=n.source!==this.boundedElements.source||n.target!==this.boundedElements.target;this.boundedElements=n;const o=ji(this.board,this.element);if(e.element!==t.element||e.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected,linePoints:o}),this.updateText(t.element.texts,e.element.texts),this.updateTextRectangle()):(e.selected!==t.selected||this.activeGenerator.needUpdate()||e.selected)&&this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected,linePoints:o}),r)return this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected,linePoints:o}),void this.updateTextRectangle()}initializeTextManages(){var e;if(null!=(e=this.element.texts)&&e.length){const e=[];this.element.texts.forEach((t,n)=>{const r=this.createTextManage(t,n);e.push(r)}),this.getRef().initializeTextManage(e)}}drawText(){var e;null!=(e=this.element.texts)&&e.length&&this.getRef().getTextManages().forEach((e,t)=>{e.draw(this.element.texts[t].text),this.getElementG().append(e.g)})}createTextManage(e,t){return new Tp(this.board,{getRectangle:()=>S8(this.board,this.element,t),onChange:e=>{const n=I.findPath(this.board,this.element),r=[...Xt.get(this.board,n).texts],o=e.width<5?5:e.width;r.splice(t,1,{text:e.newText?e.newText:this.element.texts[t].text,position:this.element.texts[t].position,width:o,height:e.height}),$i.setArrowLineTexts(this.board,this.element,r),e.operations&&E8(this.element,e.operations)},getMaxWidth:()=>fT.defaultTextMaxWidth,textPlugins:[]})}updateText(e,t){if(e===t)return;const n=e.length,r=t.length,o=this.getRef().getTextManages();if(r===n)for(let r=0;r<n;r++)e[r].text!==t[r].text&&o[r].updateText(t[r].text);else this.getRef().destroyTextManage(),this.initializeTextManages(),this.drawText()}updateTextRectangle(){this.getRef().getTextManages().forEach(e=>{e.updateRectangle()})}destroy(){super.destroy(),this.activeGenerator.destroy(),this.getRef().destroyTextManage()}}class TU extends Ec{constructor(){super()}initializeGenerator(){this.shapeGenerator=new kT(this.board),this.activeGenerator=new KT(this.board),this.getRef().updateActiveSection=()=>{const e=oc(this.board,this.element);this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected,linePoints:e})}}initialize(){this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG());const e=oc(this.board,this.element);this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected,linePoints:e}),super.initialize()}onContextChanged(e,t){const n=oc(this.board,this.element);e.element!==t.element||e.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected,linePoints:n})):(e.selected!==t.selected||this.activeGenerator.needUpdate()||e.selected)&&this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected,linePoints:n})}destroy(){super.destroy(),this.activeGenerator.destroy()}}const DU=e=>{const{keyDown:t,dblClick:n}=e;return e.keyDown=n=>{const r=Qe(e),o=1===r.length,i=r[0];if(!I.isReadonly(e)&&!d8(n)&&!p8(n)&&!g8(n)&&o&&fe.isGeometry(i))return n.preventDefault(),void P5(e,i);t(n)},e.dblClick=t=>{if(t.preventDefault(),!I.isReadonly(e)){const n=At(e,Ot(e,t.x,t.y)),r=Qa(e,n,void 0,!1);if(r&&fe.isGeometry(r)&&B8(r))if(Vu(r)){const t=JW(r,n)||r.texts.find(e=>e.id.includes(Ko.content))||r.texts[0];P5(e,r,t)}else P5(e,r)}n(t)},e},Cx=e=>{const t=w8();return I.isInPointer(e,t)&&lv(e)},A5=e=>{const t=w8();return I.isInPointer(e,t)&&F0(e)},AU=e=>{const{pointerMove:t,globalPointerUp:n,pointerUp:r}=e;let o=null,i=null,a=null;return e.pointerMove=n=>{null==o||o.remove(),o=Lt();const r=w8(),s=I.isInPointer(e,r)&&lv(e),l=At(e,Ot(e,n.x,n.y)),u=I.getPointer(e),c=b8(e,u);if(s){const t=Pc(u);if(u===pt.text){const n=Rp(e,ep(e),t.textProperties["font-size"]),r=M.getPoints(M.getRectangleByCenterPoint(l,n.width,n.height));if(i=F8(0,r,ep(e)),a)a.textManage.updateRectangle(),a.g.append(a.textManage.g);else{const t=new Tp(e,{getRectangle:()=>Tr(i)});t.draw(i.text),a={g:Lt(),textManage:t},I.getHost(e).append(a.g),a.g.append(t.g)}}else{const t=ZT(u,l);i=tp(e,t,u),c.processDrawing(i,o),I.getElementTopHost(e).append(o)}}t(n)},e.pointerUp=t=>{Cx(e)&&i||r(t)},e.globalPointerUp=t=>{Cx(e)&&i&&(Zu(e,i),null==a||a.textManage.destroy(),null==a||a.g.remove(),a=null),i=null,null==o||o.remove(),o=null,n(t)},e},BU=e=>{const{pointerDown:t,pointerMove:n,pointerUp:r,keyDown:o,keyUp:i}=e;let a,s=null,l=null,u=null,c=!1;return e.keyDown=e=>{c=nn.isKeyHotkey("shift",e),o(e)},e.keyUp=e=>{c=!1,i(e)},e.pointerDown=n=>{if(!I.isReadonly(e)&&A5(e)){const t=At(e,Ot(e,n.x,n.y));s=t;const r=I.getPointer(e);if(r===pt.text){const n=Pc(r),o=Rp(e,ep(e),n.textProperties["font-size"]),i=M.getPoints(M.getRectangleByCenterPoint(t,o.width,o.height)),a=F8(0,i,ep(e));Zu(e,a),s=null}}t(n)},e.pointerMove=t=>{null==l||l.remove(),l=Lt();const r=At(e,Ot(e,t.x,t.y)),o=I.getPointer(e),i=b8(e,o);if(null==a||a.remove(),s&&A5(e)){let t=qf([s,r],c);const n=M.getRectangleByPoints(t),[d,h]=Kn(s,r),f=xv(e,[],{resizePoints:t,activeRectangle:n,directionFactors:[C0(d),C0(h)],isAspectRatio:c,isFromCorner:!0,isCreate:!0});a=f.snapG,I.getElementTopHost(e).append(a),t=qf(f.activePoints,c),u=tp(e,t,o),i.processDrawing(u,l),I.getElementTopHost(e).append(l)}n(t)},e.pointerUp=t=>{if(A5(e)&&s){const n=At(e,Ot(e,t.x,t.y)),{width:r,height:o}=M.getRectangleByPoints([s,n]);if(Math.hypot(r,o)<8){const t=I.getPointer(e);if(t!==pt.text){const r=ZT(t,n);u=tp(e,r,t)}}return u&&Zu(e,u),null==a||a.remove(),null==l||l.remove(),l=null,s=null,void(u=null)}r(t)},e},RU=e=>{const t=e,{getDeletedFragment:n,buildFragment:r,insertFragment:o}=t;return t.getDeletedFragment=e=>{const r=T3(t);if(r.length){const n=r.filter(e=>fe.isGeometry(e)),o=r.filter(e=>fe.isArrowLine(e)),i=r.filter(e=>fe.isVectorLine(e)),a=r.filter(e=>fe.isImage(e)),s=r.filter(e=>fe.isTable(e)),l=r.filter(e=>fe.isSwimlane(e)),u=[...gg(t,n),...gg(t,a),...gg(t,s),...gg(t,l)].filter(e=>!o.includes(e));e.push(...n,...o,...i,...a,...s,...l,...u.filter(e=>!o.includes(e)))}return n(e)},t.buildFragment=(e,n,o,i)=>{const a=T3(t,i);let s=[];if(a.length){if(o===aa.cut){const e=a.filter(e=>fe.isGeometry(e)),n=a.filter(e=>fe.isArrowLine(e));s=gg(t,e).filter(e=>!n.includes(e))}const r=[...a,...s],i=hV(t,r,n?[n.x,n.y]:[0,0]),l={text:YS(r),type:Xu.elements,elements:i};e=iv(e,l)}return r(e,n,o,i)},t.insertFragment=(e,n,r)=>{var i,a,s;const l=Qe(t);if(null!=(i=null==e?void 0:e.files)&&i.length){const r=HS.map(e=>"image/"+e),o=!(fo(t)||1===l.length&&t.isImageBindingAllowed(l[0]));if(r.includes(e.files[0].type)&&o){const r=e.files[0];return void ZS(t,r,hW,e=>{$i.insertImage(t,e,n)})}}if(null!=(a=null==e?void 0:e.elements)&&a.length){const r=null==(s=e.elements)?void 0:s.filter(e=>fe.isDrawElement(e));e.elements&&e.elements.length>0&&r.length>0&&dV(t,r,n)}null==e||!e.text||e.elements&&0!==e.elements.length||1===l.length&&l[0].children?o(e,n,r):$i.insertText(t,n,e.text)},t},gg=(e,t)=>XW(e).filter(e=>t.find(t=>Yr.isBoundElementOfSource(e,t)||Yr.isBoundElementOfTarget(e,t))),MU=e=>{const{pointerDown:t,pointerMove:n,globalPointerUp:r}=e;let o,i=null,a=null,s=null;return e.pointerDown=n=>{const r=cW(),a=I.isInPointer(e,r);if(!I.isReadonly(e)&&a&&F0(e)){const t=At(e,Ot(e,n.x,n.y));i=t;const r=R8(e,t);r&&(o=r)}t(n)},e.pointerMove=t=>{null==a||a.remove(),a=Lt();let r=At(e,Ot(e,t.x,t.y));if(i){const t=I.getPointer(e);s=T8(e,t,i,r,o,a)}n(t)},e.globalPointerUp=t=>{s&&(Xe.insertNode(e,s,[e.children.length]),B0(e),rh(e,s),vn.updatePointerType(e,Zt.selection)),null==a||a.remove(),a=null,o=null,i=null,s=null,r(t)},e},bU=e=>{let t,n,r,o,i;return ah(e,{key:"draw-line",canResize:()=>!0,hitTest:t=>{const n=N8(e);if(n.length>0){let r=null;return n.forEach(n=>{const o=XT(e,n,t);o&&(r={element:n,handle:o.handle,handleIndex:o.handleIndex})}),r}return null},beforeResize:a=>{if(a.element.shape===Fn.elbow&&a.handle!==Xr.source&&a.handle!==Xr.target){const s=bp(e,a.element);if(_8(a.element,s))return;const l=[...a.element.points],u=a.handleIndex,c=wv(e,a.element);r=c[0],o=c[c.length-1],i=JT(e,a.element,c);const d=AT(e,a.element,[...l],i,u);t=d.index,n=d.deleteCount}},onResize:(a,s)=>{let l=[...a.element.points],u={...a.element.source},c={...a.element.target},d=a.handleIndex;const h=R8(e,s.endPoint);if(a.handle===Xr.source||a.handle===Xr.target){const t=a.handle===Xr.source?u:c;l[d]=s.endPoint,h?(t.connection=E0(e,s.endPoint,h),t.boundId=h.id):(t.connection=void 0,t.boundId=void 0)}else if(a.element.shape===Fn.elbow){if(i&&r&&o){const e=MW(i,r,o,d),a=i[d],u=i[d+1],[c,h]=bW(a,u,s,e);let f=[...l].slice(1,l.length-1);null!==t&&null!==n&&(RT(f)?f=[c,h]:f.splice(t,n,c,h),l=[r,...f,o])}}else a.handle===Xr.addHandle?l.splice(d+1,0,s.endPoint):l[d]=s.endPoint;if(!h){d=a.handle===Xr.addHandle?d+1:d;const t=ji(e,a.element),n=[...l];n[0]=t[0],n[n.length-1]=t[t.length-1],(a.element.shape!==Fn.elbow||a.element.shape===Fn.elbow&&2===n.length)&&n.forEach((e,t)=>{t!==d&&l[d]&&(l[d]=P8(e,l[d]))})}$i.resizeArrowLine(e,{points:l,source:u,target:c},a.path)},afterResize:a=>{if(a.element.shape===Fn.elbow){const t=Xt.get(e,a.path);let n=t&&[...t.points];if(n.length>2&&i&&r&&o){const t=i[0],s=i[i.length-1];n.splice(0,1,t),n.splice(-1,1,s),n=_u(n),mt.isEquals(n[0],t)&&n.splice(0,1),mt.isEquals(n[n.length-1],s)&&n.pop(),1===n.length&&(n=[]),n=[r,...n,o],$i.resizeArrowLine(e,{points:n},a.path)}}t=null,n=null,r=null,o=null,i=null}}),e},kU=e=>{const{pointerMove:t,pointerUp:n}=e;let r=null;return e.pointerMove=n=>{if(null==r||r.remove(),I.isReadonly(e))return void t(n);const o=Object.keys(Fn),i=I.isInPointer(e,o),a=At(e,Ot(e,n.x,n.y)),s=Aj(e,e=>{const{element:t,handle:n}=e,r=n===Xr.target||n===Xr.source;return fe.isArrowLine(t)&&r});if(i||s){const t=WT(e,a);if(t){const n=M8(e,t,a),o=n.isHitEdge||n.isHitConnector;if(r=gz(e,t,{hasMask:o,hasConnector:!0}),o){const t=ih(I.getRoughSVG(e),n.connectorPoint||n.edgePoint,6,{stroke:yo,strokeWidth:2,fill:yo,fillStyle:"solid"});r.appendChild(t)}Xa(t)&&Ps(r,M.getCenterPointByPoints(t.points),t.angle),I.getElementTopHost(e).append(r)}}t(n)},e.pointerUp=e=>{null==r||r.remove(),r=null,n(e)},e},mD=e=>ov(e,x3.lineText,EW),OU=e=>{const{dblClick:t}=e;return e.dblClick=n=>{var r,o;if(!I.isReadonly(e)){const t=At(e,Ot(e,n.x,n.y)),i=Qa(e,t);if(i&&fe.isArrowLine(i)){const n=i&&I.findPath(e,i),a=ji(e,i),s=Ln(t,a),l=null!=(r=i.texts)&&r.length?[...i.texts]:[],u=D8(e,i,t);if(FT(e,i,t))xx(e,i,u);else{const t=mD(e),r=(null==(o=fv("arrow-line"))?void 0:o.text)||{},u=eu(t,void 0,r),{width:c,height:d}=Sp(e,u,{fontSize:14,fontFamily:a0}),h=VS(a,s);l.push({text:u,position:h,width:c,height:d}),$i.setArrowLineTexts(e,i,l),setTimeout(()=>{if(n){const t=Xt.get(e,n),r=L0(t);xx(e,t,r.length-1,!0)}})}}}t(n)},e};function xx(e,t,n,r=!1){const o=L0(t)[n];o.edit(()=>{const i=Ke.string(o.getText()),a=mD(e);(!i||r&&i===a)&&$i.removeArrowLineText(e,t,n)})}class IU extends Ec{constructor(){super()}initializeGenerator(){this.imageGenerator=new qu(this.board,{getRectangle:e=>({x:e.points[0][0],y:e.points[0][1],width:e.points[1][0]-e.points[0][0],height:e.points[1][1]-e.points[0][1]}),getImageItem:e=>({url:e.url,width:e.points[1][0]-e.points[0][0],height:e.points[1][1]-e.points[0][1]})}),this.lineAutoCompleteGenerator=new Qu(this.board),this.getRef().addGenerator(Qu.key,this.lineAutoCompleteGenerator),this.getRef().updateActiveSection=()=>{this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.imageGenerator.processDrawing(this.element,this.getElementG()),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})}onContextChanged(e,t){e.element!==t.element?(this.imageGenerator.updateImage(this.getElementG(),t.element,e.element),this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})):(e.selected!==t.selected||e.selected)&&(this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}))}destroy(){super.destroy(),this.imageGenerator.destroy(),this.lineAutoCompleteGenerator.destroy()}}const FU="plait-arrow-line-auto-complete-plugin-key",n0=new WeakMap,LU=e=>{const{pointerDown:t,pointerMove:n,globalPointerUp:r}=e;let o,i,a=null,s=null;return e.pointerDown=n=>{const r=T3(e),i=1===r.length&&r[0],s=Xf(e,n.x,n.y);if(!I.isReadonly(e)&&i&&fe.isShapeElement(i)){const t=O8(e,i,!0),n=t[qT(hc(e,s,i,!0)||s,t)];if(n){w6(e);const t=eI(e,n);a=At(e,Ot(e,t[0],t[1])),o=i,vn.updatePointerType(e,Fn.elbow)}}t(n)},e.pointerMove=t=>{null==s||s.remove(),s=Lt();let r=At(e,Ot(e,t.x,t.y));if(a&&o&&Tt(...hc(e,r,o)||r,...a)>6){const t=M.getRectangleByPoints(o.points),n=Sc(o),l=pi(n);let u=a;l.getNearestCrossingPoint&&(u=l.getNearestCrossingPoint(t,a));const c=Ka(u,o)||u;i=T8(e,Fn.elbow,c,r,o,s),Xe.addSelectionWithTemporaryElements(e,[])}n(t)},e.globalPointerUp=t=>{var n;if(i){Xe.insertNode(e,i,[e.children.length]),B0(e),rh(e,i);const t=null==(n=e.getPluginOptions(FU))?void 0:n.afterComplete;t&&t(i)}else{const t=n0.get(e);t&&(Xe.insertNode(e,t.temporaryArrowLineElement,[e.children.length]),Zu(e,t.temporaryShapeElement),n0.delete(e))}a&&(vn.updatePointerType(e,Zt.selection),a=null),null==s||s.remove(),s=null,o=null,i=null,r(t)},e},Ex=100,_U=e=>{const{pointerMove:t,pointerLeave:n,globalPointerUp:r}=e;let o=null,i=null,a=null,s=null,l=null;e.pointerMove=n=>{null==o||o.remove(),I.getBoardContainer(e).classList.remove(Eg.crosshair);const r=T3(e);null==s||s.remove(),null==l||l.remove();const u=1===r.length&&r[0],c=Xf(e,n.x,n.y);if(!I.isReadonly(e)&&!gi(e)&&u&&fe.isShapeElement(u)){const t=O8(e,u,!0),n=qT(hc(e,c,u,!0)||c,t),r=t[n];if(yn.getElementRef(u).getGenerator(Qu.key).recoverAutoCompleteG(),r){if(o=ih(I.getRoughSVG(e),r,12,{stroke:"none",fill:Hg(I0,1),fillStyle:"solid"}),I.getActiveHost(e).append(o),I.getBoardContainer(e).classList.add(Eg.crosshair),Xa(u)){const t=e.getRectangle(u),n=Di(e,t);Ps(o,M.getCenterPoint(n),u.angle)}if(fe.isGeometry(u)&&!fe.isText(u)){const t=M.getRectangleByPoints(u.points);let r=M.getEdgeCenterPoints(t)[n];const o=r$(n);let c=Yn(r,Ex,o);const d=b8(e,u.shape),h=u.points.map(e=>Yn(e,Ex+iT(u.points[0],u.points[1],MF(o)),o));s=Lt(),l=Lt(),s.style.opacity="0.6",l.style.opacity="0.6",a=tp(e,h,u.shape),a.angle=u.angle,a.fill=u.fill,a.strokeColor=u.strokeColor,a.strokeStyle=u.strokeStyle,a.strokeWidth=u.strokeWidth,a.groupId=u.groupId;const f=Ka(r,u)||r,p=Ka(c,a)||c;i=T8(e,Fn.elbow,f,p,u,s),n0.set(e,{temporaryArrowLineElement:i,temporaryShapeElement:a});const g=E0(e,p,a);i.target.boundId=a.id,i.target.connection=g,d.processDrawing(a,l),I.getElementTopHost(e).append(l)}return}}n0.delete(e),t(n)},e.pointerLeave=e=>{u(),n(e)};const u=()=>{o&&(null==o||o.remove(),I.getBoardContainer(e).classList.remove(Eg.crosshair),null==s||s.remove(),null==l||l.remove()),n0.get(e)&&n0.delete(e)};return e.globalPointerUp=e=>{r(e),u()},e},NU=e=>{let t=0;return ah(e,{key:"line-text",canResize:()=>!0,hitTest:n=>{const r=Qa(e,n,e=>fe.isArrowLine(e));if(r){const o=D8(e,r,n),i=L0(r)[o];if(-1!==o&&!i.isEditing)return t=o,{element:r,handle:G6.e}}return null},onResize:(n,r)=>{const o=n.element;if(o){const n=r.endPoint,i=ji(e,o);if(tP(n,i)<=100){const r=VS(i,Ln(n,i,!1)),a=[...o.texts];a[t]={...a[t],position:r},$i.setArrowLineTexts(e,o,a)}}}}),e},HU=e=>{const{pointerDown:t,pointerMove:n,globalPointerUp:r,afterChange:o,drawSelectionRectangle:i}=e;let a,s=null,l=!1;const u=()=>{const t=Qe(e);return t.length>0&&t.every(t=>fe.isDrawElement(t)&&!fe.isArrowLine(t)||fe.isCustomGeometryElement(e,t))};return e.pointerDown=n=>{if(!u()||I.isReadonly(e)||I.hasBeenTextEditing(e)||!Va(n))return void t(n);const r=Xf(e,n.x,n.y),o=Qe(e),i=on(e,o,!1),a=Di(e,i),l=tV(a),c=po(o),d=c?kr(r,M.getCenterPoint(a),-c):r;l&&M.isHit(M.getRectangleByPoints([d,d]),l)&&(s={elements:[...o],startPoint:r}),t(n)},e.pointerMove=t=>{if(s){t.preventDefault();const n=!!t.shiftKey;Jj(e,s);const r=Xf(e,t.x,t.y),o=on(e,s.elements,!1),i=Di(e,o),a=M.getCenterPoint(i);return!po(s.elements)&&s.elements.length>1&&(l=!0),void Ua(e,"with-common-rotate",()=>{if(s&&s.startPoint){let t=PF(s.startPoint,r,a);const o=po(s.elements);t=jg(o+t),n&&(t+=Math.PI/12/2,t-=t%(Math.PI/12));let i=t%(Math.PI/2);if(Math.PI/2-i<=B6(5)){t+=Math.PI/2-i}if(i<=B6(5)){t+=-i}s.angle=jg(t-o)||0,EF(e,s.elements,s.angle),br.set(e,!0),I.getBoardContainer(e).classList.add("element-rotating")}})}n(t)},e.globalPointerUp=t=>{if(r(t),l){l=!1;const t=Qe(e);Xe.addSelectionWithTemporaryElements(e,t)}I.getBoardContainer(e).classList.remove("element-rotating"),e$(e),s=null,br.set(e,!1)},e.afterChange=()=>{if(o(),a&&(a.remove(),a=null),u()&&!gi(e)){if(l&&s){const t=on(e,s.elements,!1),n=Di(e,t);a=vC(e,n),a.classList.add(v9),s.angle&&Ps(a,M.getCenterPoint(n),s.angle)}else{const t=Qe(e),n=on(e,t,!1),r=Di(e,n);a=vC(e,r),a.classList.add(v9),Ps(a,M.getCenterPoint(r),po(t))}I.getActiveHost(e).append(a)}},e.drawSelectionRectangle=()=>{if(l&&s){const t=on(e,s.elements,!1),n=Di(e,t),r=ua(e,M.inflate(n,1),{stroke:yo,strokeWidth:1});return r.classList.add(vp),s.angle&&Ps(r,M.getCenterPoint(n),s.angle),r}return i()},e};class vD extends Ec{constructor(){super()}initializeGenerator(){this.activeGenerator=Ep(this.board,{getStrokeWidth:()=>1,getStrokeOpacity:()=>1,getRectangle:e=>{const t=t0(e);return null!=t&&t.length?DW(this.board,this.element,t):M.getRectangleByPoints(e.points)},hasResizeHandle:()=>{const e=t0(this.element);return(null==e||!e.length)&&uv(this.board,this.element)}}),this.tableGenerator=new yv(this.board),this.initializeTextManage(),this.lineAutoCompleteGenerator=new Qu(this.board),this.getRef().addGenerator(Qu.key,this.lineAutoCompleteGenerator),this.getRef().updateActiveSection=()=>{this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.draw()}draw(){this.tableGenerator.processDrawing(this.element,this.getElementG()),this.textGenerator.draw(this.getElementG()),this.rotateVerticalText(),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})}rotateVerticalText(){this.board.buildTable(this.element).cells.forEach(e=>{if(qg.isVerticalText(e)){const t=ET(this.board,e);if(t){const n=pi(x0.table).getTextRectangle(this.element,{id:e.id,board:this.board});t.g.classList.add("vertical-cell-text"),Ps(t.g,M.getCenterPoint(n),B6(-90))}}})}getDrawShapeTexts(e){return e.filter(e=>TT(e)).map(e=>({id:e.id,text:e.text,textHeight:e.textHeight,board:this.board}))}initializeTextManage(){const e=this.getDrawShapeTexts(this.element.cells);this.textGenerator=new C8(this.board,this.element,e,{onChange:(e,t,n)=>{const r=I.findPath(this.board,e);t.newText&&$i.setTableText(this.board,r,n.id,t.newText,t.height),t.operations&&E8(e,t.operations)},getRenderRectangle:(e,t)=>{const n=uh(this.board,e,t.id);if(qg.isVerticalText(n)){const e=M.getRectangleByPoints(n.points),t=zt(n),r=n.textHeight||0,o=e.height-2*lt.rectangleAndText-2*t;return{width:r,height:o>0?o:0,x:e.x+lt.rectangleAndText+t,y:e.y+(e.height-o)/2}}return gD(n)}}),this.textGenerator.initialize()}onContextChanged(e,t){if(e.element!==t.element||e.hasThemeChanged){const n=t0(t.element);null!=n&&n.length&&(NC(t.element),xT(e.element,n)),this.tableGenerator.processDrawing(e.element,this.getElementG()),this.activeGenerator.processDrawing(e.element,I.getActiveHost(this.board),{selected:this.selected});const r=this.getDrawShapeTexts(t.element.cells),o=this.getDrawShapeTexts(e.element.cells);this.textGenerator.update(e.element,r,o,this.getElementG()),this.rotateVerticalText()}else{const n=e.selected===t.selected,r=t0(e.element);(!n||null!=r&&r.length||e.selected)&&this.activeGenerator.processDrawing(e.element,I.getActiveHost(this.board),{selected:this.selected}),this.selected||NC(e.element)}this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})}destroy(){super.destroy(),this.activeGenerator.destroy(),this.tableGenerator.destroy(),this.textGenerator.destroy(),this.lineAutoCompleteGenerator.destroy()}}const Px=20;function GU(e){let t;return ah(e,{key:"draw-table",canResize:()=>{const t=Qe(e);return U6(e)&&!Xa(t[0])},hitTest:t=>{const n=Qe(e)[0];if(n&&fe.isElementByTable(n)){let r=e.getRectangle(n),o=q6(0,r,t,n.angle);if(o){const t=Hf(e,n);if(t&&U6(e)||!t&&!Wm(e,o.handle))return{element:n,handle:o.handle,cursorClass:o.cursorClass,rectangle:r}}const i=Dp(e,n);for(let a=0;a<i.length;a++)if(r=M.getRectangleByPoints(i[a].points),o=q6(0,r,t,0),o&&!Wm(e,o.handle))return{element:n,handle:o.handle,cursorClass:o.cursorClass,rectangle:r,options:{cell:i[a]}}}return null},onResize:(n,r)=>{var o,i,a,s;null==t||t.remove();const l=I.findPath(e,n.element);if(null!=(o=n.options)&&o.cell&&n.rectangle){const t=y3(n.handle),{originPoint:o,handlePoint:u}=Z6(e,t,n.rectangle),c=[r.startPoint,r.endPoint],{xZoom:d,yZoom:h}=H8(c,o,u,!1,!1),f=null==(i=n.options)?void 0:i.cell.points,p=f.map(e=>ju(e,o,d,h)),g=p[1][0]-f[1][0],m=p[1][1]-f[1][1],v=p[1][0]-p[0][0],y=p[1][1]-p[0][1];if(0!==g&&v>=20){const{columns:t,points:r}=PT(n.element,null==(a=n.options)?void 0:a.cell.columnId,v,g);Xe.setNode(e,{columns:t,points:r},l)}else if(0!==m&&y>=20){const{rows:t,points:r}=ST(n.element,null==(s=n.options)?void 0:s.cell.rowId,y,m);Xe.setNode(e,{rows:t,points:r},l)}}else{const o=Wm(e,n.handle),i=r.isShift,a=y3(n.handle),{originPoint:s,handlePoint:u}=Z6(e,a,n.rectangle),c=fD(e,n,r,{originPoint:s,handlePoint:u},i,o),d=xv(e,[n.element],c);t=d.snapG,I.getElementTopHost(e).append(t);const h=d.activePoints,f=n.element.points,p=M.getRectangleByPoints(f),g=M.getRectangleByPoints(h),m=g.width-p.width,v=g.height-p.height;let y=[...n.element.columns],b=[...n.element.rows];0!==m&&(y=y.map(e=>e.width?{...e,width:e.width+m*(e.width/p.width)}:e)),0!==v&&(b=b.map(e=>e.height?{...e,height:e.height+v*(e.height/p.height)}:e)),Xe.setNode(e,{points:qf(h),columns:y,rows:b},l)}},afterResize:e=>{null==t||t.remove(),t=null}}),e}const jU=e=>{const t=e,{drawElement:n,getRectangle:r,isRectangleHit:o,isHit:i,isMovable:a,dblClick:s,keyDown:l,pointerUp:u}=t;return t.drawElement=e=>fe.isElementByTable(e.element)?vD:n(e),t.isHit=(e,t,n)=>{if(fe.isElementByTable(e)){const n=M.getRectangleByPoints(e.points),r=Yd.getNearestPoint(n,t);return Tt(r[0],r[1],t[0],t[1])<=5||M.isPointInRectangle(n,t)}return i(e,t,n)},t.getRectangle=e=>fe.isElementByTable(e)?M.getRectangleByPoints(e.points):r(e),t.isMovable=e=>!!fe.isElementByTable(e)||a(e),t.isRectangleHit=(e,t)=>{if(fe.isElementByTable(e)){const n=M.getRectangleByPoints([t.anchor,t.focus]),r=M.getRectangleByPoints(e.points);return o3(M.getCornerPoints(r),n)}return o(e,t)},t.keyDown=n=>{const r=Qe(e),o=1===r.length,i=r[0];if(!I.isReadonly(e)&&!I.hasBeenTextEditing(t)&&!d8(n)&&!p8(n)&&!g8(n)&&o&&(n.preventDefault(),fe.isElementByTable(i))){const t=t0(i);let n=i.cells.find(e=>e.text&&e.textHeight);if(null!=t&&t.length&&(n=t.find(e=>e.text&&e.textHeight)),n)return void $C(e,n)}l(n)},t.dblClick=n=>{if(n.preventDefault(),!I.isReadonly(e)){const r=At(e,Ot(e,n.x,n.y)),o=Qa(e,r);if(o&&fe.isElementByTable(o)){const n=jC(t,o,r);if(n&&n.text&&n.textHeight)return void $C(e,n)}}s(n)},t.pointerUp=e=>{const n=I.isPointer(t,Zt.selection)||I.isPointer(t,Zt.hand);if(Va(e)&&!cc(t)&&n){if(U6(t)){const n=At(t,Ot(t,e.x,e.y)),r=PW(t)[0],o=jC(t,r,n);o&&o.text&&o.textHeight&&xT(r,[o])}u(e)}else u(e)},t.buildTable=e=>e,GU(t)},B5=e=>oD(e)&&lv(e),R5=e=>oD(e)&&F0(e),$U=e=>{const{pointerMove:t,globalPointerUp:n,pointerUp:r}=e;let o=null,i=null;return e.pointerMove=n=>{null==o||o.remove(),o=Lt();const r=new yv(e),a=I.getPointer(e),s=B5(e),l=At(e,Ot(e,n.x,n.y));if(s){const t=iD(a,l);i=D3(a,t),r.processDrawing(i,o),I.getElementTopHost(e).append(o)}t(n)},e.pointerUp=t=>{B5(e)&&i||r(t)},e.globalPointerUp=t=>{B5(e)&&i&&Zu(e,i),i=null,null==o||o.remove(),o=null,n(t)},e},WU=e=>{const{pointerDown:t,pointerMove:n,pointerUp:r,keyDown:o,keyUp:i}=e;let a,s=null,l=null,u=null,c=!1;return e.keyDown=e=>{c=nn.isKeyHotkey("shift",e),o(e)},e.keyUp=e=>{c=!1,i(e)},e.pointerDown=n=>{!I.isReadonly(e)&&R5(e)&&(s=At(e,Ot(e,n.x,n.y))),t(n)},e.pointerMove=t=>{null==l||l.remove(),l=Lt();const r=new yv(e),o=At(e,Ot(e,t.x,t.y)),i=I.getPointer(e);if(null==a||a.remove(),s&&R5(e)){let t=qf([s,o],c);const n=M.getRectangleByPoints(t),[d,h]=Kn(s,o),f=xv(e,[],{resizePoints:t,activeRectangle:n,directionFactors:[C0(d),C0(h)],isAspectRatio:c,isFromCorner:!0,isCreate:!0});a=f.snapG,I.getElementTopHost(e).append(a),t=qf(f.activePoints,c),u=D3(i,t),r.processDrawing(u,l),I.getElementTopHost(e).append(l)}n(t)},e.pointerUp=t=>{if(R5(e)&&s){const n=At(e,Ot(e,t.x,t.y)),{width:r,height:o}=M.getRectangleByPoints([s,n]);if(Math.hypot(r,o)<8){const t=I.getPointer(e),r=iD(t,n);u=D3(t,r)}return u&&Zu(e,u),null==a||a.remove(),null==l||l.remove(),l=null,s=null,void(u=null)}r(t)},e},zU=e=>{const{drawElement:t,buildTable:n,pointerUp:r}=e;return e.drawElement=e=>fe.isSwimlane(e.element)?vD:t(e),e.buildTable=e=>fe.isSwimlane(e)?zz(e):n(e),WU($U(e))},VU=e=>{const{pointerDown:t,pointerMove:n,dblClick:r,globalKeyDown:o}=e;let i=null,a=null,s=[];const l=()=>{a&&Xe.insertNode(e,a,[e.children.length]),I.getBoardContainer(e).classList.remove("vector-line-closed"),null==i||i.remove(),i=null,a=null,s=[]};return e.pointerDown=n=>{const r=fW(),o=I.isInPointer(e,r);if(!I.isReadonly(e)&&o&&F0(e)){let t=At(e,Ot(e,n.x,n.y));return s.length>1&&Tt(...t,...s[0])<=10?(s.push(s[0]),void l()):void s.push(t)}t(n)},e.pointerMove=t=>{null==i||i.remove(),i=Lt();let r=At(e,Ot(e,t.x,t.y));I.getPointer(e)===A3.vectorLine&&s.length>0&&(Tt(...r,...s[0])<=10?(r=s[0],I.getBoardContainer(e).classList.add("vector-line-closed")):I.getBoardContainer(e).classList.remove("vector-line-closed"),a=tz(e,np.straight,s,r,i)),n(t)},e.dblClick=t=>{if(!I.isReadonly(e)&&a)return l(),void vn.updatePointerType(e,Zt.selection);r(t)},e.globalKeyDown=t=>{if(!I.isReadonly(e)){const n=nn.isKeyHotkey("esc",t),r=nn.isKeyHotkey("v",t);(n||r)&&a&&(l(),r&&vn.updatePointerType(e,Zt.selection))}o(t)},e},UU=e=>(ah(e,{key:"draw-vector-line",canResize:()=>!0,hitTest:t=>{const n=eD(e);if(n.length>0){let r=null;return n.forEach(n=>{const o=XT(e,n,t);o&&(r={element:n,handle:o.handle,handleIndex:o.handleIndex})}),r}return null},onResize:(t,n)=>{let r=[...t.element.points],o=t.handleIndex;if(t.handle===Xr.source||t.handle===Xr.target)if(r[o]=n.endPoint,Bp(t.element.points))r[r.length-1]=n.endPoint;else{const e=t.handle===Xr.source?r[r.length-1]:r[0];Tt(...n.endPoint,...e)<=10&&(r[o]=e)}else t.handle===Xr.addHandle?r.splice(o+1,0,n.endPoint):r[o]=n.endPoint;Xe.setNode(e,{points:r},t.path)}}),e),yD=e=>{const{drawElement:t,getRectangle:n,isRectangleHit:r,isHit:o,isInsidePoint:i,isMovable:a,isAlign:s,getRelatedFragment:l,getOneHitElement:u}=e;return e.drawElement=e=>fe.isGeometry(e.element)?(fe.isUML(e.element),yx):fe.isArrowLine(e.element)?SU:fe.isVectorLine(e.element)?TU:fe.isImage(e.element)?IU:t(e),e.getRectangle=t=>{if(fe.isGeometry(t))return M.getRectangleByPoints(t.points);if(fe.isArrowLine(t)){const n=ji(e,t),r=t.texts.map((n,r)=>S8(e,t,r)),o=M.getRectangleByPoints(n);return M.getBoundingRectangle([o,...r])}if(fe.isVectorLine(t)){const e=oc(0,t),n=M.getRectangleByPoints(e);return M.getBoundingRectangle([n])}return fe.isImage(t)?M.getRectangleByPoints(t.points):n(t)},e.isRectangleHit=(t,n)=>{const o=iz(e,t,n);return null!==o?o:r(t,n)},e.isHit=(t,n,r)=>{const i=lz(e,t,n,r);return null!==i?i:o(t,n,r)},e.getOneHitElement=t=>t.every(e=>fe.isDrawElement(e))?GT(e,t):u(t),e.isInsidePoint=(t,n)=>{const r=fz(e,t,n);return null!==r?r:i(t,n)},e.isMovable=t=>{if(fe.isGeometry(t)||fe.isImage(t)||fe.isVectorLine(t))return!0;if(fe.isArrowLine(t)){const n=Qe(e),r=e=>!!n.find(t=>t.id===e);return!!(!t.source.boundId&&!t.target.boundId||t.source.boundId&&r(t.source.boundId)&&n.includes(t)||t.target.boundId&&r(t.target.boundId)&&n.includes(t))}return a(t)},e.isAlign=e=>!(!fe.isGeometry(e)&&!fe.isImage(e))||s(e),e.getRelatedFragment=(t,n)=>{const r=null!=n&&n.length?n:Qe(e),o=e.children.filter(e=>fe.isArrowLine(e)).filter(e=>{const t=r.find(t=>t.id===e.source.boundId),n=r.find(t=>t.id===e.target.boundId),o=r.includes(e);return t&&n&&!o});return l([...t,...o],n)},zU(jU(rV(VU(_U(kU(UU(bU(NU(OU(HU(MU(LU(AU(BU(RU(DU(e)))))))))))))))))},yt={isAbstract:e=>"number"==typeof e.start&&"number"==typeof e.end};var Je,vo;function Q6(e){return e.origin.layout?e.origin.layout:yt.isAbstract(e.origin)?j8(Q6(e.parent)):e.parent?Q6(e.parent):null}!function(e){e.right="right",e.left="left",e.standard="standard",e.upward="upward",e.downward="downward",e.rightBottomIndented="right-bottom-indented",e.rightTopIndented="right-top-indented",e.leftTopIndented="left-top-indented",e.leftBottomIndented="left-bottom-indented"}(Je||(Je={})),function(e){e.logic="logic",e.indented="indented",e.fishBone="fish-bone"}(vo||(vo={}));const Ya=e=>e===Je.rightBottomIndented||e===Je.rightTopIndented||e===Je.leftBottomIndented||e===Je.leftTopIndented,XU=e=>e===Je.right||e===Je.left||e===Je.downward||e===Je.upward,xo=e=>e===Je.standard,ci=e=>e===Je.right||e===Je.left||e===Je.standard||Ya(e),rp=e=>e===Je.right||e===Je.left||e===Je.standard,J6=e=>e===Je.upward||e===Je.downward,rc=e=>e===Je.leftTopIndented||e===Je.rightTopIndented||e===Je.upward,KU=e=>e===Je.leftBottomIndented||e===Je.rightBottomIndented||e===Je.downward,ip=e=>e===Je.left||e===Je.leftTopIndented||e===Je.leftBottomIndented,B3=e=>e===Je.right||e===Je.rightTopIndented||e===Je.rightBottomIndented,M5=e=>Ya(e)?vo.indented:(xo(e)||XU(e),vo.logic),j8=e=>Ya(e)?B3(e)?Je.right:Je.left:e;class op{constructor(e,t,n,r){this.x=0,this.y=0,this.vGap=0,this.hGap=0,this.width=0,this.height=0,this.depth=0,this.children=[],this.left=!1,this.up=!1;const o=t.getHorizontalGap(e,r),i=t.getVerticalGap(e,r);this.origin=e,this.width=t.getWidth(e),this.height=t.getHeight(e),this.x=this.y=0,r&&(this.parent=r);const a=Q6(this);this.layout=a&&a!==Je.standard?a:n.rootLayoutType;const s=t.getVerticalConnectingPosition(e,r);s&&(this.verticalConnectingPosition=s),this.addGap(o,i)}isRoot(){return 0===this.depth}addGap(e,t){const n=this;n.hGap+=e,n.vGap+=t,n.width+=2*e,n.height+=2*t}eachNode(e){wD(this,e)}getBoundingBox(){const e={left:Number.MAX_VALUE,top:Number.MAX_VALUE,right:Number.MIN_VALUE,bottom:Number.MIN_VALUE,width:0,height:0};return this.eachNode(t=>{e.left=Math.min(e.left,t.x),e.top=Math.min(e.top,t.y),e.right=Math.max(e.right,t.x+t.width),e.bottom=Math.max(e.bottom,t.y+t.height)}),e.width=e.right-e.left,e.height=e.bottom-e.top,e}translate(e=0,t=0){this.eachNode(n=>{n.x+=e,n.y+=t})}right2left(){const e=this,t=e.getBoundingBox();e.eachNode(e=>{e.x=e.x-2*(e.x-t.left)-e.width,e.left=!0}),e.translate(t.width,0)}down2up(){const e=this,t=e.getBoundingBox();e.eachNode(e=>{e.y=e.y-2*(e.y-t.top)-e.height,e.up=!0}),e.translate(0,t.height)}}function wD(e,t){var n;null==(n=e.children)||n.forEach(e=>{wD(e,t)}),t(e)}class YU{constructor(e,t,n,r,o,i,a,s,l,u){this.left=e,this.right=t,this.top=n,this.bottom=r,this.width=o,this.height=i,this.rootX=a,this.rootY=s,this.rootWidth=l,this.rootHeight=u}}function qU(e){return{left:e.top,right:e.bottom,top:e.left,bottom:e.right,width:e.height,height:e.width,rootX:e.rootY,rootY:e.rootX,rootWidth:e.rootHeight,rootHeight:e.rootWidth}}var e4;!function(e){e.middle="middle",e.bottom="bottom"}(e4||(e4={}));class Zf{constructor(e,t,n,r,o){this.width=e,this.height=t,this.y=n,this.children=r,this.childrenCount=r.length,this.x=0,this.preliminary=0,this.modifier=0,this.shift=0,this.change=0,this.tl=null,this.tr=null,this.el=null,this.er=null,this.msel=0,this.mser=0,this.origin=o}}const Tc=e=>{var t;return e.children?null==(t=e.children)?void 0:t.filter(e=>e instanceof op?!yt.isAbstract(e.origin):e instanceof Zf?!yt.isAbstract(e.origin.origin):!yt.isAbstract(e)):[]},CD=(e,t)=>{const n=e.children.indexOf(t);return e.children.find(t=>{if(t instanceof op)return yt.isAbstract(t.origin)&&t.origin.end===n;if(t instanceof Zf&&e instanceof Zf){if(yt.isAbstract(t.origin.origin)){const{end:r}=sc(t.origin.origin,e.origin);return r===n}return!1}return yt.isAbstract(t)&&t.end===n})},ZU=(e,t)=>{const n=e.children.indexOf(t);return e.children.find(t=>{if(t instanceof op)return yt.isAbstract(t.origin)&&t.origin.start===n;if(t instanceof Zf&&e instanceof Zf){if(yt.isAbstract(t.origin.origin)){const{start:r}=sc(t.origin.origin,e.origin);return r===n}return!1}return yt.isAbstract(t)&&t.start===n})},sc=(e,t)=>{let n=e.start,r=e.end;if(xo(t.layout)){const e=t.origin.rightNodeCount;n>=e&&(r-=e,n-=e)}return{start:n,end:r}};function R3(e,t,n){e.children[t].modifier+=n}function QU(e){return 0===e.childrenCount?null:e.children[0]}function xD(e){let t=Tc(e);return 0===e.childrenCount?null:t[t.length-1]}function JU(e,t){if(yt.isAbstract(e.children[t].origin.origin))return;let n=e.children[t-1],r=e.children[t],o=n.modifier+n.preliminary+n.width,i=r.modifier+r.preliminary,a=0,s=e,l=e;for(;n||r;){if(n){let e=a+n.modifier+n.preliminary+n.width;e>o&&(o=e),o=PD(s,n,o,a),s=n,a=n.modifier+a,n=xD(n)}if(r){let e=r.modifier+r.preliminary;e<i&&(i=e),i=nX(l,r,i),l=r,r=QU(r)}}const u=o-i;u>0&&R3(e,t,u)}function eX(e){const t=e.children[0];let n=t.preliminary+t.modifier;const r=Tc(e),o=r[r.length-1];let i=o.modifier+o.preliminary+o.width;t.origin.blackNode&&t.origin.blackNode.rootX>t.origin.blackNode.left&&(n+=t.origin.blackNode.rootX-t.origin.blackNode.left),o.origin.blackNode&&o.origin.blackNode.rootX+o.origin.blackNode.rootWidth<o.origin.blackNode.right&&(i-=o.origin.blackNode.right-(o.origin.blackNode.rootX+o.origin.blackNode.rootWidth)),t.origin.verticalConnectingPosition&&o.origin.verticalConnectingPosition&&(n=n+t.width-t.origin.vGap,i-=o.origin.vGap);let a=e.width/2;e.origin.verticalConnectingPosition&&(a=e.width-e.origin.vGap);const s=(n+i)/2-a;s>0?e.preliminary=s:e.children.forEach((t,n)=>{R3(e,n,Math.abs(s))})}function t4(e){if(0!==e.childrenCount){t4(e.children[0]);for(let t=1;t<e.childrenCount;t++){const n=e.children.find(n=>{let r=null;if(yt.isAbstract(n.origin.origin)){let{end:t}=sc(n.origin.origin,e.origin);r=t}return r===t-1});n&&tX(e,n),t4(e.children[t]),JU(e,t)}eX(e)}}function ED(e,t){t+=e.modifier,e.x=e.preliminary+t;for(let n=0;n<e.childrenCount;n++)ED(e.children[n],t)}function tX(e,t,n){const{start:r,end:o}=sc(t.origin.origin,e.origin),i=e.children.indexOf(t),a=e.children[r];let s=e.children[o];const l=a.modifier;let u=s.modifier+s.preliminary+s.width,c=s.modifier,d=e;for(e.children[i].modifier=a.modifier;s.childrenCount;){d=s;s=xD(s)||s;let e=c+s.modifier+s.preliminary+s.width;u=PD(d,s,u,c),c+=s.modifier,e>u&&(u=e)}const h=t.origin.blackNode?2*t.origin.blackNode.rootX+t.origin.blackNode.rootWidth:t.width,f=u-l;if(f>h){R3(e,i,(f-h)/2)}else{const t=(h-f)/2;for(let n=r;n<o+1;n++)R3(e,n,t)}}function PD(e,t,n,r){const o=CD(e,t);return o?Math.max(o.modifier+o.width+r,n):n}function nX(e,t,n){const r=ZU(e,t);return r?Math.min(r.modifier+r.preliminary,n):n}function rX(e){t4(e),ED(e,0)}function n4(e,t=0){e.x=t,e.children.forEach(t=>{if(yt.isAbstract(t.origin)){let n=0;for(let r=t.origin.start;r<=t.origin.end;r++){const t=e.children[r].getBoundingBox();n=Math.max(t.width,n)}n4(t,e.x+e.width/2+n)}else n4(t,e.x+e.width/2)})}function iX(e,t){let n=e.y+e.height,r=null;!function e(o){o.children.forEach((i,a)=>{const s=o.children.find(e=>yt.isAbstract(e.origin)&&e.origin.end===a-1);if(s){const e=null!=r&&r.origin.isCollapsed?t.getExtendHeight(i.origin):0;n=oX(o,s)+e}if(yt.isAbstract(i.origin))return;let l=n+i.vGap;r&&!rp(r.layout)&&r.origin.children.length>0&&(r.origin.isCollapsed?l+=t.getExtendHeight(i.origin):l+=t.getIndentedCrossLevelGap()),i.y=l,r=i,n=i.y+i.height,e(i)})}(e)}function oX(e,t){const n=t.origin,r=e.children.indexOf(t),o=e.children[n.start],i=e.children[n.end];e.children[r].y=o.y;const a=o.y;let s=i.y+i.height,l=i,u=e;for(;null!=l&&l.children.length;){u=l;const e=Tc(u);l=e[e.length-1];const t=CD(u,l);s=t?Math.max(t.y+t.height,l.y+l.height):l.y+l.height}const c=s-a,d=t.blackNode?t.blackNode.height:t.height,h=t.blackNode?2*t.blackNode.rootY+t.blackNode.rootHeight:t.height;if(h>c){const t=(h-c)/2;for(let r=n.start;r<=n.end;r++)e.children[r].eachNode(e=>{e.y+=t})}else{const t=(c-h)/2;e.children[r].y+=t}return Math.max(t.y+d,o.y+c)}function SD(e,t,n){n?t.y=e.x:t.x=e.x,e.children.forEach((e,r)=>{SD(e,t.children[r],n)})}function TD(e,t,n=0){var r,o;if(t){if(yt.isAbstract(e.origin)){const{start:t,end:o}=sc(e.origin,e.parent);for(let i=t;i<=o;i++){const t=null==(r=e.parent)?void 0:r.children[i].getBoundingBox().right;n=Math.max(t,n)}}e.x=n,n+=e.width}else{if(yt.isAbstract(e.origin))for(let t=e.origin.start;t<=e.origin.end;t++){const r=null==(o=e.parent)?void 0:o.children[t].getBoundingBox().bottom;n=Math.max(r,n)}e.y=n,n+=e.height}e.children.forEach(e=>{TD(e,t,n)})}const DD=(e,t)=>{const n=[];return e.children.forEach(e=>{n.push(DD(e,t))}),t?(e.blackNode&&(e.blackNode=qU(e.blackNode)),new Zf(e.height,e.width,e.x,n,e)):new Zf(e.width,e.height,e.y,n,e)};class sX{constructor(){}layout(e,t,n,r,o=!1,i){const a=[],s=[],l=this.buildLayoutNode(e,n,r,a,i);switch(a.filter(e=>e.origin.children.length>0).forEach(e=>{const o=e.layout,i=r.toTop||ci(r.rootLayoutType)&&rc(o),a=r.toLeft||!ci(r.rootLayoutType)&&ip(o),l=ci(o),u=this.layout(e.origin,M5(o),n,{toTop:i,toLeft:a,rootLayoutType:r.rootLayoutType},l,e.parent);!r.toTop&&i&&t!==vo.indented&&u.down2up(),!r.toLeft&&a&&u.right2left();const c=u.getBoundingBox();e.width=c.width,e.height=c.height,e.blackNode=new YU(c.left,c.right,c.top,c.bottom,c.width,c.height,u.x,u.y,u.width,u.height),s.push(u)}),t){case vo.indented:n4(l),iX(l,n);break;case vo.fishBone:break;case vo.logic:default:TD(l,o);const e=DD(l,o);rX(e),SD(e,l,o)}const u=[];return a.filter(e=>e.origin.children.length>0).forEach((e,t)=>{if(e.parent){const n=s[t];let r,o;n.parent=e.parent,ci(e.parent.layout)?(r=n.x,o=0):(r=0,o=n.y),n.translate(e.x-r,e.y-o);const i=e.parent.children.indexOf(e),a=e.parent.children[i];e.parent.children[i]=Object.assign(a,n);const l=u.find(t=>t.parent===e.parent&&!yt.isAbstract(e.origin));l?(l.offsetX<r&&(l.offsetX=r),l.offsetX<o&&(l.offsetX=o)):yt.isAbstract(e.origin)||u.push({parent:e.parent,offsetX:r,offsetY:o})}}),u.forEach(e=>{e.parent.children.forEach(t=>t.translate(e.offsetX,e.offsetY))}),l}buildLayoutNode(e,t,n,r,o){const i=new op(e,t,n,o);if(!i.origin.isCollapsed){const e=[i];let o;for(;o=e.pop();)if(!o.origin.isCollapsed){const i=o.origin.children,a=i?i.length:0;if(o.children=[],i&&a)for(let s=0;s<a;s++){const a=new op(i[s],t,n,o);o.children.push(a),a.depth=o.depth+1,(o.layout===a.layout||M5(o.layout)===M5(a.layout)&&ci(o.layout)===ci(a.layout))&&!yt.isAbstract(a.origin)||a.origin.isCollapsed?e.push(a):r.push(a)}}}return i}}class aX{static layout(e,t,n){const r=new sX;if(xo(n)){const o=e.children.length,i=[],a=[],s={...e};for(let t=0;t<o;t++){const n=e.children[t];yt.isAbstract(n)&&n.end<e.rightNodeCount?i.push(n):yt.isAbstract(n)&&n.start>=e.rightNodeCount?a.push(n):t<e.rightNodeCount?i.push(n):a.push(n)}s.children=i;const l=r.layout(s,vo.logic,t,{toLeft:!1,toTop:!1,rootLayoutType:n},!0);s.children=a;const u=r.layout(s,vo.logic,t,{toLeft:!0,toTop:!1,rootLayoutType:n},!0);u.right2left(),l.translate(u.x-l.x,u.y-l.y);const c=l.children.filter(e=>yt.isAbstract(e.origin));return l.children=l.children.filter(e=>!yt.isAbstract(e.origin)),u.children.forEach(e=>{l.children.push(e),e.parent=l}),l.children=l.children.concat(c),l.x=u.x,l.origin=e,l}const o=Ya(n),i=o?vo.indented:vo.logic,a=!!o||ci(n),s=rc(n),l=ip(n),u=r.layout(e,i,t,{toTop:s,toLeft:l,rootLayoutType:n},a);return s&&u.down2up(),l&&u.right2left(),u}}const M3=new WeakMap;var tn;!function(e){e.top="top",e.right="right",e.bottom="bottom",e.left="left"}(tn||(tn={}));const b3={[Je.right]:[tn.right],[Je.left]:[tn.left],[Je.upward]:[tn.top],[Je.downward]:[tn.bottom],[Je.rightBottomIndented]:[tn.right,tn.bottom],[Je.rightTopIndented]:[tn.right,tn.top],[Je.leftBottomIndented]:[tn.left,tn.bottom],[Je.leftTopIndented]:[tn.left,tn.top]};var $u;($u||($u={})).mind="mind";const uX=["#A287E0","#6E80DB","#6DC4C4","#E0B75E","#B1C675","#77C386","#C18976","#E48484","#E582D4","#6AB1E4"],lX=["#F94239","#FF8612","#F3D222","#B3D431","#00BC7B","#06ADBF","#476BFF","#4E49BE","#8957E5","#FE5DA1"],cX=["#6D89C1","#F2BDC7","#B796D9","#5BA683","#B3D431 ","#F2DC6C","#F7C98D","#60B4D1","#838F9E","#C1A381"],fX=["#459476","#9A894F","#D48444","#E9C358 ","#4B9D9D","#C14C41","#827086 ","#60718D","#D38183","#9DC19D"],hX=["#3DD1AE","#F6C659","#A9E072","#FF877B ","#F693E7","#5DCFFF","#868AF6","#4C6DC7","#D97C26","#268FAC"],dX=["#E46C57","#579360","#B98339","#3A62D1 ","#B883B7","#42ABE5","#2B9D8F","#A4705E","#265833","#787865"],AD={...HP,branchColors:uX,rootFill:"#f5f5f5",rootTextColor:qr},gX={...GP,branchColors:lX,rootFill:qr,rootTextColor:"#FFFFFF"},pX={...jP,branchColors:cX,rootFill:"#FFFFFF",rootTextColor:qr},mX={...$P,branchColors:fX,rootFill:"#153D5D",rootTextColor:"#FFFFFF"},vX={...WP,branchColors:hX,rootFill:"#FFFFFF",rootTextColor:qr},yX={...zP,branchColors:dX,rootFill:"#FFFFFF",rootTextColor:qr},BD=[AD,gX,pX,mX,vX,yX],wX={isMindThemeColor:e=>!!(e.branchColors&&e.rootFill&&e.rootTextColor)},Ev="plait-mind-plugin-key",Ur=4,l0="#6698FF",Sx="#AAAAAA",r4=2,Tx=8,RD=10,Af=2,Ha=20,pg=10,CX=Hg("#000000",.2),xX="#6698FF",Dx="white",EX=240;var k3;function i4(e,t){const n=e.getPluginOptions(Ev),r=t.data.emojis.length;return{width:MD(t)*r+2*r*n.emojiPadding+(r-1)*n.spaceBetweenEmojis,height:t.height}}function MD(e){return qt.isMind(e)?20:16}!function(e){e.mindCentralText="mind-center-text",e.abstractNodeText="abstract-node-text"}(k3||(k3={}));const Qf=(e,t,n)=>t[n],P0={branch:{color:Sx,width:2},shape:{strokeColor:Sx,strokeWidth:2}},Pv={shape:{rectangleRadius:4,strokeWidth:2,fill:"none"}},PX=e=>{const t=e.rightNodeCount,n=e.children;let r=[],o=[];for(let e=0;e<n.length;e++){const i=n[e];yt.isAbstract(i)&&i.end<t?r.push(i):yt.isAbstract(i)&&i.start>=t?o.push(i):e<t?r.push(i):o.push(i)}return{leftChildren:o,rightChildren:r}},kp=e=>{const t=Me.findParent(e);if(!t)return;const n=t.children.indexOf(e);return t.children.find(e=>yt.isAbstract(e)&&n>=e.start&&n<=e.end)},bD=e=>{const t=Me.findParent(e);if(!t)return[];const n=t.children.indexOf(e);return t.children.filter(e=>yt.isAbstract(e)&&e.start>n)},kD=(e,t)=>{const n=[];return t.filter(e=>!yt.isAbstract(e)&&!qt.isMind(e)).forEach(e=>{const r=kp(e);if(r&&-1===t.indexOf(r)&&-1===n.indexOf(r)){const{start:o,end:i}=r;Me.getParent(e).children.slice(o,i+1).every(e=>t.indexOf(e)>-1)&&n.push(r)}}),n},OD=(e,t)=>{const n=[];return t.filter(e=>!yt.isAbstract(e)&&!qt.isMind(e)).forEach(e=>{const r=kp(e);if(r&&t.indexOf(r)>0){const t=n.findIndex(e=>e.abstract===r);-1===t?n.push({abstract:r,references:[e]}):n[t].references.push(e)}}),n};function ID(e,t){return{start:t.indexOf(e.references[0]),end:t.indexOf(e.references[e.references.length-1])}}const FD=(e,t,n=1,r=!0,o=new Map)=>{const i=Xt.parent(e,t),a=0!==t[t.length-1];let s;if(a){const n=Xt.get(e,wt.previous(t));s=bD(n)}else s=i.children.filter(e=>yt.isAbstract(e));if(s.length&&s.forEach(e=>{let t=o.get(e);t||(t={start:0,end:0},o.set(e,t)),t.start=t.start+n,t.end=t.end+n}),!a)return o;const l=Xt.get(e,wt.previous(t)),u=kp(l),c=!r&&u&&u.end===t[t.length-1]-1;if(u&&!c){let e=o.get(u);e||(e={start:0,end:0},o.set(u,e)),e.end=e.end+n}return o},LD=(e,t,n=new Map)=>(t.forEach(e=>{if(!qt.isMind(e)){const r=bD(e).filter(e=>!t.includes(e));r.length&&r.forEach(e=>{let t=n.get(e);t||(t={start:0,end:0},n.set(e,t)),t.start=t.start-1,t.end=t.end-1});const o=kp(e);if(o&&!t.includes(o)){let e=n.get(o);e||(e={start:0,end:0},n.set(o,e)),e.end=e.end-1}}}),n),_D=(e,t)=>!!Me.getAncestors(e,t).find(e=>yt.isAbstract(e)),$8=(e,t)=>yt.isAbstract(t)||_D(e,t)?HD(e,t):Qf(0,t,"branchColor")||Qf(0,t,"strokeColor")||GD(e,t),W8=(e,t)=>Qf(0,t,"branchShape")||Jf.bight,ND=(e,t)=>Qf(0,t,"branchWidth")||Qf(0,t,"strokeWidth")||2,SX=(e,t)=>Xo(t.branchWidth)?P0.branch.width:t.branchWidth,HD=(e,t)=>t.branchColor||t.strokeColor?t.branchColor||t.strokeColor:P0.branch.color,GD=(e,t)=>{const n=I.findPath(e,t);return TX(e,n[1])},TX=(e,t)=>{const n=z8(e),r=t%n.branchColors.length;return n.branchColors[r]},z8=e=>{const t=I.getThemeColors(e).find(t=>t.mode===e.theme.themeColorMode);return t&&wX.isMindThemeColor(t)?t:AD},V8=(e,t)=>{if(qt.isMind(t)){const n=z8(e).rootFill;return t.strokeColor||n}return yt.isAbstract(t)||_D(e,t)?t.strokeColor||P0.shape.strokeColor:Qf(0,t,"strokeColor")||GD(e,t)},Sv=(e,t)=>t.strokeStyle||Ss.solid,Op=(e,t)=>t.strokeWidth||(yt.isAbstract(t)?P0.shape.strokeWidth:Pv.shape.strokeWidth),jD=(e,t)=>{if(t.fill)return t.fill;const n=z8(e).rootFill;return t.isRoot?n:Pv.shape.fill},sp=(e,t)=>Qf(0,t,"shape")||Ju.roundRectangle;function U8(e){const t=oh(e);null==t||t.edit(()=>{},e=>{const t=e;return"Enter"===t.key&&!t.shiftKey})}const b5=(e,t)=>(null!=t&&t.length?t:Qe(e)).filter(t=>Me.isMindElement(e,t)),Ax=e=>{const t=[];return e.forEach(e=>{b3[e].forEach(e=>{!t.includes(e)&&!t.includes(K8(e))&&t.push(e)})}),t},DX=(e,t)=>{const n=b3[e],r=b3[t];if(!r)throw new Error(`unexpected layout: ${t} on correct layout`);return r.find(e=>n.includes(K8(e)))},AX=(e,t)=>{const n=t===tn.left||t===tn.right;let r=Je.standard;switch(e){case Je.left:r=Je.right;break;case Je.right:r=Je.left;break;case Je.downward:r=Je.upward;break;case Je.upward:r=Je.downward;break;case Je.rightBottomIndented:r=n?Je.leftBottomIndented:Je.rightTopIndented;break;case Je.leftBottomIndented:r=n?Je.rightBottomIndented:Je.leftTopIndented;break;case Je.rightTopIndented:r=n?Je.leftTopIndented:Je.rightBottomIndented;break;case Je.leftTopIndented:r=n?Je.rightTopIndented:Je.leftBottomIndented}return r},X8=()=>Je.standard,Bx=e=>{const t=[],n=e.map(K8);for(const r in Je){const o=Je[r],i=b3[o];if(i){const r=i.some(t=>e.includes(t)),a=i.some(e=>n.includes(e));r&&!a&&t.push(o)}}return t},K8=e=>{let t=tn.right;switch(e){case tn.top:t=tn.bottom;break;case tn.bottom:t=tn.top;break;case tn.right:t=tn.left;break;case tn.left:t=tn.right}return t},gc=e=>e.layout||X8(),BX=e=>{function t(e,t){return e.isRoot?48:(t&&t.isRoot(),12)}function n(e,t){return e.isRoot?48:34}return{getHeight:t=>kn.getNodeHeight(e,t),getWidth:t=>kn.getNodeWidth(e,t),getHorizontalGap(e,r){const o=r&&r.layout||gc(e),i=ci(o);return Ya(o)?24:i?n(e):t(e,r)},getVerticalGap(e,r){const o=r&&r.layout||gc(e);return Ya(o)?14:ci(o)?t(e,r):n(e)},getVerticalConnectingPosition(e,t){if(e.shape===Ju.underline&&t&&rp(t.layout))return e4.bottom},getExtendHeight:e=>0,getIndentedCrossLevelGap:()=>4}},Y8=14,$D=18,RX=34,MX={defaultTextMaxWidth:476},bX="#6698FF80",Yl=3.5,Rx=10,Tm=8,kX="",OX="",IX=e=>ov(e,k3.mindCentralText,kX),FX=e=>ov(e,k3.abstractNodeText,OX),Tv=(e,t,n,r,o)=>{let i=a0,a=14;t?(i=a0,a=18):n&&(i=a0);return Sp(e,r,{fontSize:a,fontFamily:i},o||34*a)},Mx=(e,t)=>{const n=IX(e),r=Tv(e,!0,!1,eu(n)),o=Dv(n,r.width,r.height,{layout:Je.right});o.isRoot=!0,o.type="mindmap";const i=kn.getNodeWidth(e,o),a=kn.getNodeHeight(e,o);return o.points=[[t[0]-i/2,t[1]-a/2]],o},Dv=(e,t,n,r)=>{const o={id:En(),data:{topic:eu(e)},children:[],width:t,height:n};let i;for(i in r)Xo(r[i])||(o[i]=r[i]);return o},LX=["fill","strokeColor","strokeWidth","strokeStyle","shape","layout","branchColor","branchWidth","branchShape"],WD=e=>e.children.reduce((e,t)=>e+WD(t),0)+e.children.length,zD=(e,t)=>{let n=Me.findParent(t);for(;n;){if(n===e)return!0;n=Me.findParent(n)}return!1},kg=e=>{let t=[];return e.forEach(n=>{e.some(e=>zD(e,n))||t.push(n)}),t},bx=(e,t)=>e.y>t.y,VD=e=>{const t={...e};t.id=En(),t.children=[];for(const n of e.children)t.children.push(VD(n));return t},q8=(e,t,n)=>{const r={};t.isRoot||(LX.forEach(e=>{r[e]=t[e]}),delete r.layout);const o=Dv("",14,20,r);Xe.insertNode(e,o,n),B0(e),rh(e,o),setTimeout(()=>{U8(o)})},_X=e=>{const t=[],n=[];for(let r=0;r<e.length;r++){const o=Me.getParent(e[r]),i=n.indexOf(o);-1===i?(n.push(o),t.push([e[r]])):t[i].push(e[r])}return{parentElements:n,abstractIncludedGroups:t}},NX=(e,t)=>{if(qt.isMind(t))return 18;if(Me.isMindElement(e,t))return 14;throw new Error("can not find default font-size")},ap={horizontal:{nodeAndText:10,emojiAndText:6},vertical:{nodeAndText:4,nodeAndImage:4,imageAndText:6}},Z8={horizontal:{nodeAndText:16,emojiAndText:8},vertical:{nodeAndText:8}},k5=(e,t)=>(qt.isMind(t)?Z8.horizontal.nodeAndText:ap.horizontal.nodeAndText)+Op(0,t),O5=(e,t)=>{const n=qt.isMind(t),r=Op(0,t);return(n?Z8.vertical.nodeAndText:ap.vertical.nodeAndText)+r},kx=e=>qt.isMind(e)?Z8.horizontal.emojiAndText:ap.horizontal.emojiAndText,kn={getNodeWidth(e,t){const n=k5(0,t);return Me.hasEmojis(t)?kn.getEmojiLeftSpace(e,t)+i4(e,t).width+kx(t)+kn.getNodeDynamicWidth(e,t)+n:n+kn.getNodeDynamicWidth(e,t)+n},getNodeHeight(e,t){const n=O5(0,t);return Me.hasImage(t)?kn.getTextTopSpace(e,t)+t.height+n:n+t.height+n},getNodeDynamicWidth(e,t){var n;const r=t.manualWidth||t.width,o=Me.hasImage(t)?null==(n=t.data.image)?void 0:n.width:0;return Math.max(r,o)},getNodeNewDynamicWidth(e,t,n){const r=t.manualWidth||t.width;return Math.max(r,n)},getNodeResizableMinWidth(e,t){const n=kn.getNodeTopicMinWidth(e,t);return Me.hasImage(t)&&t.data.image.width>n?t.data.image.width:n},getNodeTopicMinWidth(e,t){const n=NX(e,t),r=cv(t);return ja.getMarks(r)[li.fontSize]||n},getTextLeftSpace(e,t){const n=k5(0,t);return Me.hasEmojis(t)?kn.getEmojiLeftSpace(e,t)+i4(e,t).width+kx(t):n},getTextTopSpace(e,t){const n=O5(0,t);return Me.hasImage(t)?kn.getImageTopSpace(e,t)+t.data.image.height+ap.vertical.imageAndText:n},getImageTopSpace:(e,t)=>Op(0,t)+ap.vertical.nodeAndImage,getEmojiLeftSpace(e,t){const n=e.getPluginOptions(Ev);return k5(0,t)-n.emojiPadding},getEmojiTopSpace:(e,t)=>O5(0,t)},HX=e=>"string"==typeof e?14:ja.getMarksByElement(e)[li.fontSize]||14;function tr(e){return{x:e.x+e.hGap,y:e.y+e.vGap,width:e.width-2*e.hGap,height:e.height-2*e.vGap}}function GX(e,t){const n=kn.getNodeWidth(e,t),r=kn.getNodeHeight(e,t);return{x:t.points[0][0],y:t.points[0][1],width:n,height:r}}function UD(e,t,n){const r=Me.getNode(n);return!(!r||0!==yp(t[0],t[1],tr(r)))}function XD(e,t){let{x:n,y:r}=tr(Me.getNode(t));n+=kn.getEmojiLeftSpace(e,t);const{width:o}=i4(e,t);return{x:n,y:r,width:o,height:kn.getNodeHeight(e,t)}}function KD(e,t){const n=YD(e,tr(t),t.origin);return n.width=n.width,n}function YD(e,t,n){const r=t.x+kn.getTextLeftSpace(e,n),o=t.y+kn.getTextTopSpace(e,n),i=kn.getNodeDynamicWidth(e,n);return{height:Math.ceil(n.height),width:i,x:r,y:o}}function Av(e,t){let{x:n,y:r}=tr(Me.getNode(t));const o=t.manualWidth||t.width;n=o>t.data.image.width?n+kn.getTextLeftSpace(e,t)+(o-t.data.image.width)/2:n+kn.getTextLeftSpace(e,t),r=kn.getImageTopSpace(e,t)+r;const{width:i,height:a}=t.data.image;return{x:n,y:r,width:i,height:a}}const qD=(e,t,n)=>{const r=Av(e,t),o=M.getOutlineRectangle(r,-4.5);return M.isPointInRectangle(o,n)},jX=(e,t,n)=>{const r=Av(e,t);return jS(r,9).find(e=>M.isHit(M.getRectangleByPoints([n,n]),e.rectangle))},$X=(e,t)=>{const n={...t};return delete n.isRoot,delete n.rightNodeCount,delete n.type,n.layout===Je.standard&&delete n.layout,n},o4=e=>{const t={...e};return delete t.start,delete t.end,t},WX=(e,t)=>{const n={...t};return Ke.string(n.data.topic)||(n.data.topic={children:[{text:""}]}),null==n||delete n.strokeColor,null==n||delete n.fill,null==n||delete n.shape,null==n||delete n.strokeWidth,null==n||delete n.isCollapsed,{...n,layout:n.layout??Je.right,isRoot:!0,type:"mindmap"}},zX=(e,t)=>{QS(e,t),yn.getElementRef(t).getGenerator(qu.key).setFocus(t,!0)},Vm=(e,t)=>{$j(e),yn.getElementRef(t).getGenerator(qu.key).setFocus(t,!1)},ZD=(e,t,n)=>{const r=oh(t),{height:o}=r.getSize(void 0,n);if(Math.abs(o-t.height)>2)return o},QD=e=>{yn.getElementG(e).classList.add("dragging-node"),!e.isCollapsed&&e.children.forEach(e=>{QD(e)})},JD=e=>{yn.getElementG(e).classList.remove("dragging-node"),!e.isCollapsed&&e.children.forEach(e=>{JD(e)})},Ox=(e,t)=>{ol(e,t),t?I.getBoardContainer(e).classList.add("mind-node-dragging"):I.getBoardContainer(e).classList.remove("mind-node-dragging")},VX=(e,t,n)=>{let r=Tc(e);if(qt.isMind(e)&&xo(gc(e))){const o=eA(e,t);o&&(r=r.slice(0,e.rightNodeCount)),o||(r=r.slice(e.rightNodeCount,r.length),n=[...n,n[n.length-1]-e.rightNodeCount])}let o=0!==n[n.length-1],i=n[n.length-1]!==((null==r?void 0:r.length)||0);return e.isCollapsed&&(i=!1,o=!1),{hasPreviousNode:o,hasNextNode:i}},eA=(e,t)=>{const n=t.target;return qt.isMind(e)&&xo(gc(e))&&-1!==e.children.indexOf(n)&&e.children.indexOf(n)<e.rightNodeCount||qt.isMind(n)&&xo(gc(n))&&"right"===t.detectResult},UX=(e,t,n)=>{if(t.origin.isRoot||yt.isAbstract(t.origin)){const r=Eo.getCorrectLayoutByElement(e,null==t?void 0:t.origin);if(xo(r))return Fa(n,["top","bottom"]);if(r===Je.upward)return Fa(n,["left","right","bottom"]);if(r===Je.downward)return Fa(n,["left","right","top"]);if(ip(r))return Fa(n,["right","top","bottom"]);if(B3(r))return Fa(n,["left","top","bottom"])}else{const r=Eo.getCorrectLayoutByElement(e,null==t?void 0:t.parent.origin);if(xo(r)){const e=t.parent.children.findIndex(e=>e===t)>=(t.parent.origin.rightNodeCount||0);return Fa(n,[e?"right":"left"])}if(ip(r))return Fa(n,["right"]);if(B3(r))return Fa(n,["left"]);if(r===Je.upward)return Fa(n,["bottom"]);if(r===Je.downward)return Fa(n,["top"])}return null},Fa=(e,t)=>{const n=e;return t.forEach(e=>{const t=n.findIndex(t=>t===e);-1!==t&&n.splice(t,1)}),n.length?n:null},XX=(e,t,n,r)=>{let o=null;return di(e,i=>{if(!Me.isMindElement(e,i)||o)return;const a=Me.getNode(i),s=KX(a,t);s&&(o=UX(e,a,s)),n=null;const l=r.every(e=>YX(e,a.origin));o&&l&&(n={target:a.origin,detectResult:o[0]})},nh(e)),n},KX=(e,t)=>{const{x:n,y:r,width:o,height:i}=tr(e),a=r+i/2,s=n+o/2,l=e.y,u=e.y+e.height,c=e.x,d=e.x+e.width,h=[];return t[1]>r&&t[1]<r+i?(t[0]>c&&t[0]<s&&h.push("left"),t[0]>s&&t[0]<d&&h.push("right"),(t[0]>n&&t[0]<s||t[0]>s&&t[0]<n+o)&&(t[1]<a?h.push("top"):h.push("bottom")),h.length?h:null):t[0]>n&&t[0]<n+o?(t[1]>l&&t[1]<a&&h.push("top"),t[1]>a&&t[1]<u&&h.push("bottom"),(t[1]>r&&t[1]<r+i||t[1]>a&&t[1]<r+i)&&(t[0]<s?h.push("left"):h.push("right")),h.length?h:null):null},YX=(e,t)=>e!==t&&!zD(e,t),qX=(e,t)=>{let n=I.findPath(e,null==t?void 0:t.target);const r=qt.isMind(null==t?void 0:t.target)?gc(null==t?void 0:t.target):Eo.getCorrectLayoutByElement(e,Me.getParent(null==t?void 0:t.target)),o=Tc(t.target);return J6(r)&&(("top"===t.detectResult||"bottom"===t.detectResult)&&n.push(o.length),"right"===t.detectResult&&(n=wt.next(n))),rp(r)&&("right"===t.detectResult&&(qt.isMind(null==t?void 0:t.target)&&xo(r)?n.push(null==t?void 0:t.target.rightNodeCount):n.push(o.length)),"left"===t.detectResult&&n.push(o.length),"bottom"===t.detectResult&&(n=wt.next(n))),Ya(r)&&(rc(r)&&"top"===t.detectResult&&(n=wt.next(n)),KU(r)&&"bottom"===t.detectResult&&(n=wt.next(n)),ip(r)&&"left"===t.detectResult&&n.push(o.length),B3(r)&&"right"===t.detectResult&&n.push(o.length)),n};function ZX(e,t){return Q8(e,tr(t),t.origin)}function Q8(e,t,n){const r=jD(e,n),o=V8(e,n),i=Op(0,n),a=Sv(0,n),s=xc(a,i),l=M.inflate(t,-i);return R0(I.getRoughSVG(e),l.x,l.y,l.x+l.width,l.y+l.height,{stroke:o,strokeWidth:i,fill:r,fillStyle:"solid",strokeLineDash:s},!1,Pv.shape.rectangleRadius)}var Gn,Tn;!function(e){e.left="left",e.center="center",e.right="right"}(Gn||(Gn={})),function(e){e.top="top",e.middle="middle",e.bottom="bottom"}(Tn||(Tn={}));const go=(e,t)=>{let n=e.x,r=e.y;return t[0]===Gn.center&&(n=e.x+e.width/2),t[0]===Gn.right&&(n=e.x+e.width),t[1]===Tn.middle&&(r=e.y+e.height/2),t[1]===Tn.bottom&&(r=e.y+e.height),[n,r]},ic=(e,t)=>t?e.left?tn.left:tn.right:e.up?tn.top:tn.bottom,jo=(e,t)=>{if(t===tn.left&&(e[0]===Gn.right?e[0]=Gn.left:e[0]===Gn.left&&(e[0]=Gn.right)),t===tn.bottom||t===tn.top){let t=Gn.center,n=Tn.middle;e[1]===Tn.top&&(t=Gn.left),e[1]===Tn.bottom&&(t=Gn.right),e[0]===Gn.left&&(n=Tn.top),e[0]===Gn.right&&(n=Tn.bottom),e[0]=t,e[1]=n}t===tn.top&&(e[1]===Tn.bottom?e[1]=Tn.top:e[1]===Tn.top&&(e[1]=Tn.bottom))};function QX(e,t,n,r=!0,o=null,i,a){const s=W8(0,t.origin),l=i||ND(0,n.origin),u=o||$8(e,n.origin),c=Sv(0,n.origin),d=sp(0,n.origin)===Ju.underline;let h,f,p,g,m=t,v=n;const y=tr(m),b=tr(v);h=m.x+m.width/2,f=bx(t,n)?y.y:y.y+y.height,p=t.left?v.x+v.hGap+b.width:v.x+v.hGap,g=d?v.y+v.height-v.vGap:v.y+v.height/2;let w=bx(t,n)?t.left?[-1,-1]:[1,-1]:t.left?[-1,1]:[1,1],x=[[h,f],[h,f],[h,f],[h,g-3*v.hGap*w[1]/5],[h,g-v.hGap*w[1]/5],[h+v.hGap*w[0]/4,g],[h+v.hGap*w[0]*3/5,g],d&&r?[p+(v.width-2*v.hGap)*w[0],g]:[p,g],d&&r?[p+(v.width-2*v.hGap)*w[0],g]:[p,g],d&&r?[p+(v.width-2*v.hGap)*w[0],g]:[p,g]];const C=xc(c,l);if(s===Jf.polyline){return Ds([[h,f],[h,g],[p,g],d&&r?[p+(v.width-2*v.hGap)*w[0],g]:[p,g]],{stroke:u,strokeWidth:l,strokeLineDash:C})}return VO(Co(x,.001),{stroke:u,strokeWidth:l})}function JX(e,t,n,r,o=null,i,a){const s=W8(0,t.origin),l=o||$8(e,n.origin),u=i||ND(0,n.origin),c=Sv(0,n.origin),d=s===Jf.polyline||!t.origin.isRoot,h=sp(0,t.origin),f=sp(0,n.origin)===Ju.underline,p=h===Ju.underline,g=tr(n),m=tr(t),v=ic(n,r),y=[Gn.right,Tn.middle],b=[Gn.left,Tn.middle];jo(y,v),jo(b,v),r&&p&&!t.origin.isRoot&&(y[1]=Tn.bottom),r&&f&&(b[1]=Tn.bottom);let w=go(m,y),x=go(g,b);const C=d?Yn(w,8,v):w;let E=d?[w,C,C]:[];const D=(t.hGap+n.hGap)/3,S=-(t.hGap+n.hGap)/2.4;let P=[C,Yn(C,D,v),Yn(x,S,v),x];const T=Yn(x,g.width,v),A=f&&r?[T,T,T]:[],M=Co([...E,...P,...A]),k=xc(c,u);let B;if(s===Jf.polyline){const e=Yn(C,8,v);B=Ds([...E,e,r?[e[0],x[1]]:[x[0],e[1]],x,...A],{stroke:l,strokeWidth:u,strokeLineDash:k})}else B=I.getRoughSVG(e).curve(M,{stroke:l,strokeWidth:u,strokeLineDash:k});return c===Ss.dotted&&Wt(B,"round"),B}function tA(e,t,n,r,o,i,a,s){return Me.isIndentedLayout(t.origin)?QX(e,t,n,o,i,a):JX(e,t,n,r,i,a)}const eK="foreign-object-emoji";class tK{constructor(e){this.board=e,this.emojiComponentRef=null}draw(e,t,n){this.destroy();const r={board:this.board,emojiItem:t,element:n,fontSize:MD(n)};this.emojiComponentRef=this.board.renderEmoji(e,r)}destroy(){this.emojiComponentRef&&(this.emojiComponentRef.destroy(),this.emojiComponentRef=null)}}const Cy=class{constructor(e){this.board=e,this.emojiGenerators=[]}drawEmojis(e){if(this.destroy(),Me.hasEmojis(e)){this.g=Lt(),this.g.classList.add("emojis");const t=XD(this.board,e),n=L4(t.x,t.y,t.width,t.height);n.classList.add(eK),this.g.append(n);const r=document.createElement("div");return r.classList.add("node-emojis-container"),n.append(r),this.emojiGenerators=e.data.emojis.map(t=>{const n=new tK(this.board);return n.draw(r,t,e),n}),this.g}}destroy(){this.g&&this.g.remove(),this.emojiGenerators.forEach(e=>e.destroy()),this.emojiGenerators=[]}};Cy.key="node-emojis-generator";let up=Cy;const nK=(e,t,n,r)=>{const o=yn.getElementRef(t),i=Me.getNode(t),a=Lt();a.classList.add("dragging","fake-node","plait-board-attached");const s={...i,x:i.x+n,y:i.y+r},l=KD(e,i),u=ZX(e,s),c=oh(t).g.cloneNode(!0);if(Pg(c,l.width,l.height,l.x+n,l.y+r),null==a||a.append(u),null==a||a.append(c),Me.hasEmojis(t)){const i=o.getGenerator(up.key).g.cloneNode(!0),s=XD(e,t);Pg(i,s.width,s.height,s.x+n,s.y+r),null==a||a.append(i)}if(Me.hasImage(t)){const i=o.getGenerator(qu.key).g.cloneNode(!0),s=Av(e,t);Pg(i,s.width,s.height,s.x+n,s.y+r),null==a||a.append(i)}return a},rK=(e,t,n)=>{const r=t.target,o=Lt(),i=Xt.get(e,wt.parent(n)),a=Eo.getLayoutByElement(i),s=ci(a),{hasNextNode:l,hasPreviousNode:u}=VX(i,t,n),c=12;let d,h,f,p;if(u||l)if(!u&&l){const t=Xt.get(e,n);f=Me.getNode(t);const r=tr(f);p=ic(f,s);const o=[Gn.left,Tn.top];jo(o,p);let l=-12;Me.isIndentedLayout(i)&&(l=rc(a)?l/2+f.height-f.vGap:0),h=go(r,o),h=ym(h,l,p)}else if(u&&!l){const t=Xt.get(e,wt.previous(n));f=Me.getNode(t);const r=tr(f);p=ic(f,s);const o=[Gn.left,Tn.bottom];jo(o,p);let l=c;Me.isIndentedLayout(i)&&(l=rc(a)?-l-(f.height-f.vGap):l),h=go(r,o),h=ym(h,l,p)}else{const t=Xt.get(e,wt.previous(n));f=Me.getNode(t);const r=tr(f),o=Xt.get(e,n),i=tr(Me.getNode(o)),a=[Gn.left,Tn.bottom],l=[Gn.left,Tn.top];p=ic(f,s),jo(a,p),jo(l,p);const u=go(r,a),c=go(i,l);h=[(u[0]+c[0])/2,(u[1]+c[1])/2]}else{const e=Me.getNode(i),n=tr(e);p=ic(e,s),f=e,qt.isMind(r)&&xo(a)&&("left"===t.detectResult?(p=tn.left,f.left=!0):(p=tn.right,f.left=!1));const o=[Gn.right,Tn.middle];jo(o,p);const l=go(n,o);if(Ya(a)){const e=[Gn.center,rc(a)?Tn.top:Tn.bottom],t=go(n,e);h=Yn(t,c,p),h[1]=rc(a)?h[1]-c:h[1]+c}else h=Yn(l,30,p)}let g=h,m=h;const v=s?c:30,y=s?30:c;g=ym(g,-v/2,p),m=ym(m,v/2,p),m=Yn(m,y,p);const b=Math.min(g[0],m[0]),w=Math.min(g[1],m[1]);d={...f,x:b,y:w,width:30,height:c,hGap:Me.isIndentedLayout(i)?16+(f.origin.strokeWidth||2):0,vGap:Me.isIndentedLayout(i)?4:0};const x=R0(I.getRoughSVG(e),d.x,d.y,d.x+30,d.y+c,{stroke:l0,strokeWidth:2,fill:l0,fillStyle:"solid"}),C=tA(e,Me.getNode(i),d,s,!1,l0,2);return null==o||o.appendChild(C),null==o||o.appendChild(x),o};var fi,Og;function Ix(e,t,n,r,o){const i=Lt(),a=Me.getParent(n),s=Eo.getCorrectLayoutByElement(e,n),l=ci(s),u=Di(e,on(e,a.children.slice(n.start,n.end+1),!0));let c=M.getOutlineRectangle(u,-3.5);o&&(c=Cg(c,o,r,l));const d=oK(t,c.x,c.y,c.x+c.width,c.y+c.height,l,{stroke:l0,strokeWidth:1,fillStyle:"solid"}),h=[Gn.center,Tn.top],f=[Gn.center,Tn.bottom],p=ic(Me.getNode(n),l);jo(h,p),jo(f,p);let g=go(c,h),m=go(c,f);const v=Yn(g,-5,p),y=Yn(g,5,p),b=Yn(m,-5,p),w=Yn(m,5,p),x=t.line(v[0],v[1],y[0],y[1],Fx(r===fi.start)),C=t.line(b[0],b[1],w[0],w[1],Fx(r===fi.end));return iK(e,r,l),Wt(x,"round"),Wt(C,"round"),i.append(x),i.append(C),i.append(d),i}function Fx(e){return e?{stroke:l0,strokeWidth:4,fillStyle:"solid"}:{stroke:bX,strokeWidth:3,fillStyle:"solid"}}function iK(e,t,n){t?n?I.getBoardContainer(e).classList.add("abstract-resizing-horizontal"):I.getBoardContainer(e).classList.add("abstract-resizing-vertical"):(I.getBoardContainer(e).classList.remove("abstract-resizing-horizontal"),I.getBoardContainer(e).classList.remove("abstract-resizing-vertical"))}function oK(e,t,n,r,o,i,a){const s=Math.abs(t-r),l=Math.abs(n-o),u=18;if(i){const r=(s-u-10)/2,o=l-10;return e.path(`M${t+5},${n}\n            l${r},0\n            m18,0\n            l${r},0\n            a5,5,0,0,1,5,5\n            l0,${o}\n            a5,5,0,0,1,-5,5\n            l-${r},0\n            m-18,0\n            l-${r},0\n            a5,5,0,0,1,-5,-5\n            l0,-${o}\n            a5,5,0,0,1,5,-5`,a)}{const r=(l-u-10)/2,o=s-10;return e.path(`M${t+5},${n}\n            l${o},0\n            a5,5,0,0,1,5,5\n            l0,${r}\n            m0,18\n            l0,${r}\n            a5,5,0,0,1,-5,5\n            l-${o},0\n            a5,5,0,0,1,-5,-5\n            l0,-${r}\n            m0,-18\n            l0,-${r}\n            a5,5,0,0,1,5,-5`,a)}}!function(e){e.start="start",e.end="end"}(fi||(fi={})),function(e){e.start="start",e.resizing="resizing",e.end="end"}(Og||(Og={}));const xy=class extends Yo{canDraw(e,t){return!!t.selected}draw(e,t){const n=Lt(),r=tr(Me.getNode(e)),o=Di(this.board,r),i=Op(this.board,e),a=M.inflate(o,1),s=R0(I.getRoughSVG(this.board),a.x,a.y,a.x+a.width,a.y+a.height,{stroke:l0,strokeWidth:1,fill:""},!0,Pv.shape.rectangleRadius+(1+i)/2);return yt.isAbstract(e)&&(this.abstractOutlineG=Ix(this.board,I.getRoughSVG(this.board),e),n.append(this.abstractOutlineG),s.classList.add("abstract-element")),n.appendChild(s),n.classList.add(vp),n}updateAbstractOutline(e,t,n){const r=Ix(this.board,I.getRoughSVG(this.board),e,t,n);this.abstractOutlineG&&(this.abstractOutlineG.replaceWith(r),this.abstractOutlineG=r)}};xy.key="mind-node-active";let pc=xy;const Cg=(e,t,n,r)=>r?n===fi.start?{...e,y:t,height:e.height+e.y-t}:{...e,height:t-e.y}:n===fi.start?{...e,x:t,width:e.width+e.x-t}:{...e,width:t-e.x},sK=(e,t,n,r,o,i)=>{const a=Me.getNode(r),{start:s,end:l}=sc(a.origin,o),u=n[s],c=n[l];if(t===fi.start){const t=n.filter(e=>yt.isAbstract(e)&&e.end<r.start);let a;if(t.length){a=n[t.map(e=>{const{end:t}=sc(e,o);return t}).sort((e,t)=>t-e)[0]+1]}else a=n[0];const s=on(e,[a],!0),l=on(e,[c],!1);return i?{max:l.y-Yl,min:s.y-Yl}:{max:l.x-Yl,min:s.x-Yl}}{const t=n.filter(e=>yt.isAbstract(e)&&e.start>r.end);let a;if(t.length){a=n[t.map(e=>{const{start:t}=sc(e,o);return t}).sort((e,t)=>e-t)[0]-1]}else{const e=n.filter(e=>!yt.isAbstract(e));a=n[e.length-1]}const s=on(e,[a],!0),l=on(e,[u],!1);return i?{max:s.y+s.height+Yl,min:l.y+l.height+Yl}:{max:s.x+s.width+Yl,min:l.x+l.width+Yl}}},nA=(e,t,n)=>{const r=Eo.getCorrectLayoutByElement(e,t),o=ci(r);let i=on(e,Me.getParent(t).children.slice(t.start,t.end+1),!0);i=M.getOutlineRectangle(i,-3.5);const a=Lx(i,o,fi.start),s=Lx(i,o,fi.end),l=M.getRectangleByPoints([n,n]);return M.isHit(l,a)?fi.start:M.isHit(l,s)?fi.end:void 0},Lx=(e,t,n)=>{let r;if(n===fi.start){const o=t?e.y:e.x;r=Cg(e,o+4,fi.end,t),r=Cg(r,o-4,n,t)}else{const o=t?e.y+e.height:e.x+e.width;r=Cg(e,o-4,fi.start,t),r=Cg(r,o+4,n,t)}return r};function aK(e,t,n,r){const o=t.filter(e=>!yt.isAbstract(e)),i=o.map(t=>on(e,[t],!1)),a=on(e,[o[0]],!0),s={x:a.x-a.width,y:a.y-a.height,width:a.width,height:a.height},l=on(e,[o[o.length-1]],!0),u={x:l.x+l.width,y:l.y+l.height,width:l.width,height:l.height};i.push(u),i.unshift(s);for(let e=0;e<i.length-1;e++){if(n>=(r?i[e].y:i[e].x)+(r?i[e].height:i[e].width)/2&&n<=i[e+1][r?"y":"x"]+i[e+1][r?"height":"width"]/2)return e-1}return 0}function uK(e,t,n){let r;const o=Qe(e).filter(e=>yt.isAbstract(e)).find(t=>(r=nA(e,t,n),r));return t===o||(t&&(yn.getElementRef(t).getGenerator(pc.key).updateAbstractOutline(t),t=void 0),o&&(t=o,yn.getElementRef(t).getGenerator(pc.key).updateAbstractOutline(t,r))),t}const rA=e=>{const t=Me.findParent(e);if(t){const n=t.children.findIndex(t=>t.id===e.id);if(t.isRoot&&gc(t)===Je.standard&&t.rightNodeCount&&n<=t.rightNodeCount-1)return!0}return!1},iA=(e,t,n,r=[])=>{let o=r.findIndex(e=>wt.equals(e.path,t));const i=Xt.get(e,t);return-1===o?r.push({path:t,rightNodeCount:i.rightNodeCount+n}):r[o].rightNodeCount+=n,r},oA=(e,t,n=[])=>(t.forEach(t=>{if(rA(t)){const r=Me.getParent(t),o=I.findPath(e,r);let i=n.findIndex(e=>wt.equals(e.path,o));-1===i?n.push({path:o,rightNodeCount:r.rightNodeCount-1}):n[i].rightNodeCount-=1}}),n);function J8(e,t){const n=Tc(t);return I.findPath(e,t).concat(n.length)}function lK(e,t){const n=I.findPath(e,t);return K.next(n)}const ey=(e,t)=>{const n=Me.getAncestors(e,t);n.unshift(t);const r=n[n.length-1];let o=gc(r);if(qt.isMind(t))return o;const i=Me.getNode(t);let a=o;o===Je.standard&&(a=i.left?Je.left:Je.right);let s=null;const l=n.find(e=>e.layout||yt.isAbstract(e));if(l)if(yt.isAbstract(l)){const t=Me.getParent(l),n=ey(e,t);s=j8(n)}else s=null==l?void 0:l.layout;if(s===Je.standard||!s)return a;{const e=DX(a,s);return e?AX(s,e):s}},sA=(e,t)=>{const n=[];t.layout&&n.unshift(ey(e,t));let r=Me.findParent(t);for(;r;)r.layout&&n.unshift(r.layout),r=Me.findParent(r);return n},cK=(e,t)=>{const n=Me.findParent(t);if(n){const r=sA(e,n);if(r[0]===Je.standard){const e=Me.getNode(t);r[0]=e.left?Je.left:Je.right}const o=Ax(r);let i=Bx(o);const a=[r[r.length-1]],s=Ax(a),l=Bx(s);return i=i.filter(e=>l.some(t=>t===e)),i}},s4=e=>{const t=e.layout;if(t)return t;const n=!qt.isMind(e)&&Me.getParent(e);return yt.isAbstract(e)&&n?j8(s4(n)):n?s4(n):X8()},Eo={getAvailableSubLayoutsByElement:cK,getBranchLayouts:sA,getLayoutByElement:s4,getCorrectLayoutByElement:ey},qt={isMind:e=>"mindmap"===e.type},Me={hasLayout:(e,t)=>Eo.getLayoutByElement(e)===t,isIndentedLayout(e){const t=Eo.getLayoutByElement(e);return Ya(t)},isMindElement:(e,t)=>!(!t.data||!t.data.topic||Xo(t.width)||Xo(t.height)),getParent(e){if(qt.isMind(e))throw new Error("mind root node can not get parent");return Nf.get(e)},findParent:e=>qt.isMind(e)?void 0:Nf.get(e),getRoot(e,t){const n=I.findPath(e,t);return Xt.get(e,n.slice(0,1))},getAncestors(e,t){const n=I.findPath(e,t),r=[];for(const t of wt.ancestors(n,{reverse:!0})){const n=Xt.get(e,t);n&&!I.isBoard(n)&&r.push(n)}return r},getNode(e){const t=M3.get(e);if(!t)throw new Error(`can not get node from ${JSON.stringify(e)}`);return t},findParentNode(e){if(qt.isMind(e))return;const t=Me.getParent(e);return Me.getNode(t)},hasEmojis:e=>!!e.data.emojis,hasImage:e=>!!e.data.image,getEmojis:e=>e.data.emojis};var Ju,Jf;function fK(e,t,n){const r=SX(0,t.origin),o=HD(e,t.origin),i=Sv(0,t.origin),a=t.parent,s=W8(0,t.origin),l=tr(t);const u=on(e,a.children.slice(t.origin.start,t.origin.end+1).map(e=>e.origin),!0),c=ic(t,n),d=[Gn.right,Tn.top],h=[Gn.right,Tn.bottom],f=[Gn.left,Tn.middle];jo(d,c),jo(h,c),jo(f,c);let p=go(u,d),g=go(u,h),m=go(l,f),v=iT(m,p,n)-30;p=Yn(p,15,c);let y=Yn(p,v,c);g=Yn(g,15,c);let b=Yn(g,v,c),w=Yn(m,-15,c);const x=xc(i,r);if(s===Jf.polyline){const e=Lt(),t=Ds([p,y,w,b,g],{stroke:o,strokeWidth:r}),n=Ds([m,w],{stroke:o,strokeWidth:r,strokeLineDash:x});return e.appendChild(t),e.appendChild(n),e}return I.getRoughSVG(e).path(`M${p[0]},${p[1]} Q${y[0]},${y[1]} ${w[0]},${w[1]} Q${b[0]},${b[1]} ${g[0]},${g[1]} M${m[0]},${m[1]} L${w[0]},${w[1]}`,{stroke:o,strokeWidth:r,strokeLineDash:x})}!function(e){e.roundRectangle="round-rectangle",e.underline="underline"}(Ju||(Ju={})),function(e){e.bight="bight",e.polyline="polyline"}(Jf||(Jf={}));const aA=(e,t)=>{t.forEach((t,n)=>{const r=n.start+t.start,o=n.end+t.end,i=I.findPath(e,n);r>o?Xe.removeNode(e,i):Xe.setNode(e,{start:r,end:o},i)})},uA=(e,t)=>{const n=t.rightNodeCount,r=t.children.find(e=>yt.isAbstract(e)&&e.end>=n&&e.start<n);if(r){const t=I.findPath(e,r);Xe.setNode(e,{end:n-1},t)}},hK=(e,t)=>{let n=kg(t);const{parentElements:r,abstractIncludedGroups:o}=_X(n);o.forEach((t,n)=>{const o=r[n];dK(e,o,t)})},dK=(e,t,n)=>{const r=n.map(e=>t.children.indexOf(e)).sort((e,t)=>e-t),o=null==t?void 0:t.rightNodeCount,i=r[0],a=r[r.length-1];if(xo(Eo.getLayoutByElement(t))&&o&&i<o&&a>=o){const n=t.children.length,i=[...I.findPath(e,t),n],a=r.filter(e=>e>=o),s=r.filter(e=>e<o);I5(e,i,s[0],s[s.length-1]),I5(e,wt.next(i),a[0],a[a.length-1])}else{const n=[...I.findPath(e,t),t.children.length];I5(e,n,i,a)}},I5=(e,t,n,r)=>{const o=FX(e),{width:i,height:a}=Tv(e,!1,!1,eu(o)),s=Dv(o,i,a,{strokeWidth:P0.branch.width,branchWidth:P0.branch.width});s.start=n,s.end=r,Xe.insertNode(e,s,t),B0(e),rh(e,s)},ty=(e,t,n,r)=>{const o=kn.getNodeTopicMinWidth(e,t),i=n<o?o:n;return{width:Math.ceil(i),height:r}},gK=(e,t,n,r,o)=>{const i={data:{...t.data,topic:n},...ty(e,t,r,o)},a=I.findPath(e,t);Xe.setNode(e,i,a)},pK=(e,t,n,r)=>{const o=I.findPath(e,t),{width:i,height:a}=ty(e,t,n,r),s={manualWidth:i,height:a};Xe.setNode(e,s,o)},mK=(e,t,n,r)=>{const o={...ty(e,t,n,r)};let i=Math.ceil(t.width)===Math.ceil(o.width),a=Math.ceil(t.height)===Math.ceil(o.height);if(t.manualWidth&&(i=!0),!i||!a){const n=I.findPath(e,t);Xe.setNode(e,o,n)}},lA=(e,t,n)=>{const r=e.pathRef(n);t.forEach(t=>{r.current&&Xe.insertNode(e,t,r.current)}),r.unref()},vK=(e,t,n,r)=>{var o;const i=Xt.get(e,K.parent(r)),a=[...K.parent(r),null==(o=i.children)?void 0:o.length],s=t.map(e=>{const{start:t,end:o}=ID(e,n);return{...e.abstract,start:t+r[r.length-1],end:o+r[r.length-1]}});lA(e,s,a)},cA=(e,t)=>{t.forEach(t=>{Xe.setNode(e,{rightNodeCount:t.rightNodeCount},t.path)})},yK=(e,t)=>{if(Me.isMindElement(e,t)){tv(e,t);const n=I.findPath(e,t);if(t.isCollapsed){const t={isCollapsed:!1};vs.withoutSaving(e,()=>{Xe.setNode(e,t,n)})}q8(e,t,J8(e,t))}},wK=(e,t)=>{if(Me.isMindElement(e,t)&&!qt.isMind(t)&&!yt.isAbstract(t)){const n=I.findPath(e,t);if(rA(t)){const t=iA(e,n.slice(0,1),1);cA(e,t)}const r=FD(e,K.next(n));aA(e,r),q8(e,t,lK(e,t))}},CK=(e,t)=>{Xe.insertNode(e,t,[e.children.length]),Xe.addSelectionWithTemporaryElements(e,[t])},xK=(e,t,n)=>{const r=[...t.data.emojis||[]];r.push(n);const o={data:{...t.data,emojis:r}},i=I.findPath(e,t);Xe.setNode(e,o,i)},EK=(e,t,n)=>{const r=t.data.emojis.filter(e=>e!==n),o={data:{topic:t.data.topic}};Me.hasImage(t)&&(o.data.image=t.data.image),r.length>0&&(o.data.emojis=r);const i=I.findPath(e,t);Xe.setNode(e,o,i)},PK=(e,t,n,r)=>{const o={data:{...t.data}},i=t.data.emojis.map(e=>e===n?r:e);o.data.emojis=i;const a=I.findPath(e,t);Xe.setNode(e,o,a)},SK=(e,t)=>{Vm(e,t);const n={data:{...t.data}};delete n.data.image;const r=I.findPath(e,t),o=kn.getNodeNewDynamicWidth(e,t,0),i=ZD(0,t,o);i&&(n.height=i),Xe.setNode(e,n,r)},TK=(e,t,n)=>{const r={data:{...t.data,image:n}},o=kn.getNodeNewDynamicWidth(e,t,n.width),i=ZD(0,t,o);i&&(r.height=i);const a=I.findPath(e,t);Xe.setNode(e,r,a)},fA=(e,t,n)=>{var r;const o=Xt.get(e,n);o&&t&&(null==(r=o.children)||r.forEach((r,o)=>{var i;r.layout&&((rp(t)&&J6(r.layout)||J6(t)&&rp(r.layout))&&Xe.setNode(e,{layout:null},[...n,o]),null!=(i=r.children)&&i.length&&fA(e,t,[...n,o]))}))},DK=(e,t)=>{tu.setProperty(e,{},{callback:(n,r)=>{if(Me.isMindElement(e,n)){fA(e,t,r);const n=Xt.get(e,r);if(qt.isMind(n)&&xo(t)){let t={rightNodeCount:n.children.length/2};Xe.setNode(e,t,r),uA(e,n)}Xe.setNode(e,{layout:t},r)}}})},AK=(e,t)=>{tu.setProperty(e,{shape:t})},BK=(e,t)=>{tu.setProperty(e,{branchShape:t})},RK=(e,t)=>{tu.setProperty(e,{branchWidth:t})},MK=(e,t)=>{tu.setProperty(e,{branchColor:t})},Sr={setLayout:DK,setShape:AK,setBranchShape:BK,setBranchWidth:RK,setBranchColor:MK,setTopic:gK,setTopicSize:mK,setNodeManualWidth:pK,addEmoji:xK,removeEmoji:EK,replaceEmoji:PK,insertAbstract:hK,setAbstractsByRefs:aA,setAbstractByStandardLayout:uA,insertNodes:lA,insertAbstractNodes:vK,setRightNodeCountByRefs:cA,removeImage:SK,setImage:TK,insertChildNode:yK,insertSiblingNode:wK,insertMind:CK};class bK extends Yo{constructor(e){super(e,{prepend:!0})}canDraw(e,t){return sp(this.board,e)===Ju.roundRectangle}draw(e,t){const n=tr(t.node);return Q8(this.board,n,t.node.origin)}}const Ey=class extends Yo{canDraw(e,t){return!!((null!=t&&t.isHovered||null!=t&&t.isHoveredCollapseArea||null!=t&&t.isHoveredAddArea)&&a4(this.board)||null!=t&&t.isSelected&&OK(this.board,e)&&a4(this.board)||e.isCollapsed)}draw(e,t){const n=Lt(),r=$8(this.board,e),o=dA(this.board,e),i=gA(this.board,e,o),a=Yn(i[1],10,o),s=e.children.length>0,l=!e.isCollapsed&&(Hf(this.board,e)||!(null==t||!t.isHovered)||!(null==t||!t.isHoveredCollapseArea)||!(null==t||!t.isHoveredAddArea)),u=l&&s&&!qt.isMind(e),c=l&&!I.isReadonly(this.board),d=l&&hA(e,a,o)||null;return this.toggleCollapseOrAdd(a,d,r,n,u,c,!(null==t||!t.isHoveredAddArea),!(null==t||!t.isShowCollapseAnimation),!(null==t||!t.isShowAddAnimation)),this.toggleExpandBadge(e,i,a,r,n,!!e.isCollapsed,!(null==t||!t.isHoveredExpandArea)),n}toggleCollapseOrAdd(e,t,n,r,o,i,a,s,l){var u;if(null==(u=this.collapseOrAddG)||u.remove(),o||i){if(this.collapseOrAddG=Lt(),o){const t=Lt();this.collapseOrAddG.appendChild(t),t.classList.add("collapse-button"),s&&t.classList.add("animated");const r=I.getRoughSVG(this.board).circle(e[0],e[1],20,{fill:"#fff",stroke:n,strokeWidth:2,fillStyle:"solid"}),o=Yn(e,-5),i=Yn(e,5),a=I.getRoughSVG(this.board).line(o[0],o[1],i[0],i[1],{fill:"#fff",stroke:n,strokeWidth:2,fillStyle:"solid"});t.appendChild(r),t.appendChild(a),Wt(a,"round")}if(i&&t){const e=Lt();this.collapseOrAddG.appendChild(e),e.classList.add("add-button"),l&&e.classList.add("animated");const n=I.getRoughSVG(this.board).circle(t[0],t[1],22,{fill:a?xX:CX,stroke:H6,fillStyle:"solid"}),r=[t[0]-5,t[1]],o=[t[0]+5,t[1]],i=[t[0],t[1]-5],s=[t[0],t[1]+5],u=I.getRoughSVG(this.board).line(r[0],r[1],o[0],o[1],{stroke:Dx,strokeWidth:2});Wt(u,"round");const c=I.getRoughSVG(this.board).line(i[0],i[1],s[0],s[1],{stroke:Dx,strokeWidth:2});Wt(c,"round"),e.appendChild(n),e.appendChild(u),e.appendChild(c)}r.appendChild(this.collapseOrAddG)}}toggleExpandBadge(e,t,n,r,o,i,a){var s;if(null==(s=this.expandG)||s.remove(),!i)return;this.expandG=Lt(),this.expandG.classList.add("expanded-button");const l=t[1],u=I.getRoughSVG(this.board).line(t[0][0],t[0][1],l[0],l[1],{fill:r,stroke:r,fillStyle:"solid",strokeWidth:2}),c=Hg(r,a?.4:.2),d=I.getRoughSVG(this.board).circle(n[0],n[1],22,{fill:c,stroke:H6,fillStyle:"solid"}),h=WD(e);let f=`${h}`,p=n[1]+4.5;h>=99&&(f="...",p=n[1]+1);const{width:g,height:m}=Sp(this.board,eu(f),{fontSize:Number(C3.fontSize12),fontFamily:a0}),v=SO(n[0]-g/2,p,r,`${f}`);v.setAttribute("style",`font-size: ${Number(C3.fontSize12)}px;`),this.expandG.appendChild(u),this.expandG.appendChild(d),this.expandG.appendChild(v),o.appendChild(this.expandG)}};Ey.key="mind-node-more";let lp=Ey;const kK=(e,t)=>{const n=dA(e,t),[r,o]=gA(e,t,n),i=Yn(o,10,n);return{collapseCenter:i,addCenter:hA(t,i,n)}},hA=(e,t,n)=>{var r;let o=t;return(null==(r=e.children)?void 0:r.length)>0&&!qt.isMind(e)&&(o=Yn(o,30,n)),o},dA=(e,t)=>{const n=Me.getNode(t),r=Eo.getLayoutByElement(t),o=ci(r);let i=ic(n,o);return Ya(r)&&(i=rc(r)?tn.top:tn.bottom),i},gA=(e,t,n)=>{const r=Me.getNode(t),o=sp(0,t)===Ju.underline,i=tr(r);let a=[Gn.right,Tn.middle];jo(a,n);const s=Eo.getLayoutByElement(t);ci(s)&&o&&!t.isRoot&&(a[1]=Tn.bottom);let l=go(i,a);return[l,Yn(l,10,n)]},OK=(e,t)=>{const n=Qe(e).filter(t=>Me.isMindElement(e,t)).reverse();return n[n.length-1]===t},a4=e=>!(Gu(e)||gi(e)||cc(e)||fc(e));class pA extends Ec{get textManage(){return this.getRef().getTextManages()[0]}constructor(){super(),this.shapeG=null,this.trackBy=(e,t)=>t.origin.id}initializeGenerator(){this.nodeShapeGenerator=new bK(this.board),this.nodeEmojisGenerator=new up(this.board),this.activeGenerator=new pc(this.board),this.nodeMoreGenerator=new lp(this.board),this.imageGenerator=new qu(this.board,{getRectangle:e=>Av(this.board,e),getImageItem:e=>e.data.image});const e=(this.board.getPluginOptions(N6)||{}).textPlugins,t=new Tp(this.board,{getRectangle:()=>KD(this.board,this.node),onChange:e=>{const t=e.width,n=e.height;e.newText?Sr.setTopic(this.board,this.element,e.newText,t,n):Sr.setTopicSize(this.board,this.element,t,n)},getMaxWidth:()=>this.element.manualWidth?kn.getNodeDynamicWidth(this.board,this.element):Math.max(kn.getNodeDynamicWidth(this.board,this.element),MX.defaultTextMaxWidth),textPlugins:e||[]});this.getRef().addGenerator(pc.key,this.activeGenerator),this.getRef().addGenerator(up.key,this.nodeEmojisGenerator),this.getRef().addGenerator(qu.key,this.imageGenerator),this.getRef().addGenerator(lp.key,this.nodeMoreGenerator),this.getRef().initializeTextManage(t),this.getRef().updateActiveSection=()=>{this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.node=Me.getNode(this.element),this.index=i0.get(this.element)||0,this.roughSVG=I.getRoughSVG(this.board),this.nodeShapeGenerator.processDrawing(this.element,this.getElementG(),{node:this.node}),this.drawLink(),this.drawTopic(),this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}),this.nodeMoreGenerator.processDrawing(this.element,this.getElementG()),this.drawEmojis(),this.imageGenerator.processDrawing(this.element,this.getElementG()),qt.isMind(this.context.parent)&&this.getElementG().classList.add("branch")}onContextChanged(e,t){const n=Me.getNode(e.element),r=M.isEqual(this.node,n);if(this.node=n,!r||e.element!==t.element||e.hasThemeChanged)this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}),this.nodeMoreGenerator.processDrawing(this.element,this.getElementG(),{isSelected:this.selected}),this.nodeShapeGenerator.processDrawing(this.element,this.getElementG(),{node:this.node}),this.drawLink(),this.drawEmojis(),!Me.hasImage(t.element)&&Me.hasImage(this.element)&&this.imageGenerator.processDrawing(this.element,this.getElementG()),Me.hasImage(t.element)&&Me.hasImage(this.element)&&this.imageGenerator.updateImage(this.getElementG(),t.element,e.element),Me.hasImage(t.element)&&!Me.hasImage(this.element)&&this.imageGenerator.destroy(),this.updateTopic();else{const n=e.selected===t.selected,r=e.parent===t.parent;(!n||e.selected)&&(this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}),this.nodeMoreGenerator.processDrawing(this.element,this.getElementG(),{isSelected:this.selected})),r||this.drawLink()}}drawEmojis(){const e=this.nodeEmojisGenerator.drawEmojis(this.element);e&&this.getElementG().append(e)}drawLink(){if(qt.isMind(this.element))return;const e=Me.getParent(this.element),t=Me.getNode(e);this.linkLineG&&this.linkLineG.remove();const n=Eo.getLayoutByElement(e);yt.isAbstract(this.node.origin)?this.linkLineG=fK(this.board,this.node,ci(n)):this.linkLineG=tA(this.board,t,this.node,ci(n)),this.getElementG().append(this.linkLineG)}drawTopic(){this.textManage.draw(this.element.data.topic),this.getElementG().append(this.textManage.g)}updateTopic(){this.textManage.updateText(this.element.data.topic),this.textManage.updateRectangle()}destroy(){super.destroy(),this.nodeEmojisGenerator.destroy(),this.imageGenerator.destroy(),this.activeGenerator.destroy(),M3.get(this.element)===this.node&&M3.delete(this.element),this.getRef().destroyTextManage()}}class IK extends pA{initialize(){this.updateMindLayout(),super.initialize(),this.getElementG().classList.add("root")}beforeContextChange(e){e.element!==this.element&&this.initialized&&this.updateMindLayout(e.element)}updateMindLayout(e=this.element){const t=e.layout||X8();this.root=aX.layout(e,BX(this.board),t),this.updateMindNodeLocation(e)}updateMindNodeLocation(e){const{x:t,y:n,hGap:r,vGap:o}=this.root,i=t+r,a=n+o;di(this.root,t=>{t.x=t.x-i+e.points[0][0],t.y=t.y-a+e.points[0][1],M3.set(t.origin,t)})}}const FK=5,LK=e=>{const{pointerDown:t,pointerMove:n,globalPointerUp:r}=e;let o,i,a,s,l=[],u=[],c=null;return e.pointerDown=n=>{if(I.isReadonly(e)||I.hasBeenTextEditing(e)||!I.isPointer(e,Zt.selection)||!Va(n))return void t(n);const r=At(e,Ot(e,n.x,n.y)),i=Qe(e),a=Qa(e,r);if(a&&Me.isMindElement(e,a)&&!qt.isMind(a)&&!yt.isAbstract(a)){const t=i.filter(t=>Me.isMindElement(e,t)&&!t.isRoot&&!yt.isAbstract(t));i.length>0&&i.includes(a)?(l=t,o=r):(l=[a],o=r)}l.length&&(u=kD(0,l)),t(n)},e.pointerMove=t=>{if(!e.options.readonly&&l.length&&o){const n=At(e,Ot(e,t.x,t.y));if(Tt(o[0],o[1],n[0],n[1])<5)return;Ox(e,!0),null==a||a.remove();const r=At(e,Ot(e,t.x,t.y));c=XX(e,r,c,[...l,...u]),null!=c&&c.target&&(s=qX(e,c),a=rK(e,c,s),I.getHost(e).appendChild(a));const d=n[0]-o[0],h=n[1]-o[1];return null==i||i.remove(),i=Lt(),[...l,...u].forEach(e=>{QD(e)}),l.forEach(t=>{const n=nK(e,t,d,h);null==i||i.appendChild(n)}),void I.getHost(e).appendChild(i)}n(t)},e.globalPointerUp=t=>{const n=kg(l);if(!e.options.readonly&&n.length){if(n.push(...u),cc(e)&&n.forEach(e=>{JD(e)}),c){const t=e.pathRef(s),r=wt.hasPrevious(s)&&e.pathRef(wt.previous(s)),o=e.pathRef(I.findPath(e,c.target));let i=OD(0,n);const a=n.filter(e=>!i.some(t=>t.abstract===e)).map(e=>yt.isAbstract(e)?o4(e):e);if(0!==s[s.length-1]){const t=Xt.get(e,wt.previous(s)),n=kp(t);if(n&&n.end!==s[s.length-1]-1){const e=i.map(e=>o4(e.abstract));a.push(...e),i=[]}}const u=LD(0,n);FD(e,s,a.length,!1,u),Sr.setAbstractsByRefs(e,u);let d=oA(e,n);const h=Xt.get(e,wt.parent(s));eA(h,c)&&o.current&&(d=iA(e,o.current.slice(0,1),a.length,d)),Sr.setRightNodeCountByRefs(e,d),_P.removeElements(e,n);let f=t.current;const p=wt.parent(t.current||s);if(!f){const t=r&&r.unref();if(t)f=wt.next(t);else{const t=Xt.get(e,p),n=Tc(t);f=[...p,n.length||0]}}Sr.insertNodes(e,a,f),i.length&&Sr.insertAbstractNodes(e,i,a,f),o.current&&t.current&&wt.isAncestor(o.current,t.current)&&c.target.isCollapsed&&Xe.setNode(e,{isCollapsed:!1},o.current),o.unref(),t.unref();let g=[];di(e,e=>{l.some(t=>t.id===e.id)&&g.push(e)}),Xe.addSelectionWithTemporaryElements(e,g)}Ox(e,!1),l=[],null==i||i.remove(),i=void 0,null==a||a.remove(),a=void 0,c=null}r(t)},e},_K=e=>{const t=e,{pointerDown:n,pointerMove:r,pointerUp:o}=e;let i,a,s,l;return e.pointerDown=r=>{if(!Va(r)||I.isReadonly(e))return void n(r);const o=Qe(e).filter(e=>yt.isAbstract(e)),s=At(e,Ot(e,r.x,r.y));i=o.find(t=>(a=nA(e,t,s),a)),i?null!=t&&t.onAbstractResize&&t.onAbstractResize(Og.start):n(r)},e.pointerMove=n=>{Qe(e);const o=At(e,Ot(e,n.x,n.y));if(s=uK(e,s,o),a&&i){const n=Eo.getCorrectLayoutByElement(e,i),r=ci(n),s=Me.getParent(i);let u=s.children;const c=Eo.getLayoutByElement(s);if(xo(c)){const e=s.rightNodeCount,{leftChildren:t,rightChildren:n}=PX(s);i.end<e&&(u=n),i.start>=e&&(u=t)}null!=t&&t.onAbstractResize&&t.onAbstractResize(Og.resizing);const d=r?o[1]:o[0],h=Me.getNode(s),f=sK(e,a,u,i,h,r),p=Math.min(f.max,Math.max(f.min,d));let g=aK(e,u,p,r);if(a===fi.start&&g+1===i.start||a===fi.end&&g===i.end)l=void 0;else{if(xo(h.layout)){const e=h.origin.rightNodeCount;i.start>=e&&(g+=e)}l=a===fi.start?{start:g+1}:{end:g}}const m=yn.getElementRef(i).getGenerator(pc.key),v=Gg(e,[p,p]);m.updateAbstractOutline(i,a,r?v[1]:v[0])}r(n)},e.pointerUp=n=>{if(a=void 0,i){if(null!=t&&t.onAbstractResize&&t.onAbstractResize(Og.end),l){const t=I.findPath(e,i);Xe.setNode(e,l,t)}else yn.getElementRef(i).getGenerator(pc.key).updateAbstractOutline(i);i=void 0}else o(n)},e},NK=e=>{const t=e;return e.setPluginOptions(Ev,{spaceBetweenEmojis:4,emojiPadding:0}),t},HK="m",GK=e=>{const t=e,{keyDown:n,pointerDown:r,pointerMove:o,pointerUp:i}=e;let a=null,s=null;function l(){a&&(a.textManage.destroy(),a.g.remove(),a=null)}return t.pointerDown=n=>{const o=I.isPointer(e,$u.mind);if(!I.isReadonly(e)&&F0(e)&&o){const r=At(e,Ot(e,n.x,n.y)),o=Mx(t,r);return Sr.insertMind(e,o),void vn.updatePointerType(e,Zt.selection)}r(n)},t.pointerMove=n=>{if(I.isReadonly(e))return void o(n);const r=I.isPointer(e,$u.mind);lv(e)&&r?Ua(e,"with-mind-create",()=>{let n=I.getMovingPointInBoard(e);if(n){n=At(t,Ot(e,n[0],n[1])),s=Mx(t,n);const r=GX(t,s),o=Q8(e,r,s),i=YD(t,r,s);if(a)a.textManage.updateRectangle(i),a.nodeG.remove(),a.nodeG=o,a.g.append(o),a.g.append(a.textManage.g);else{const t=new Tp(e,{getRectangle:()=>i});t.draw(s.data.topic),a={g:Lt(),nodeG:o,textManage:t},a.g.classList.add("root"),a.g.setAttribute("plait-mind-temporary","true"),I.getHost(e).append(a.g),a.g.append(a.nodeG,t.g)}}}):l(),o(n)},t.pointerUp=t=>{if(s)return Sr.insertMind(e,s),vn.updatePointerType(e,Zt.selection),s=null,void l();i(t)},e.keyDown=t=>{if(!(I.isReadonly(e)||Qe(e).length>0))return t.key!==HK||I.isPointer(e,$u.mind)?void n(t):(vn.updatePointerType(e,$u.mind),na(e,Gi.drawing),void t.preventDefault());n(t)},t},jK=e=>{const t=e,{keyDown:n,globalKeyDown:r}=t;return t.keyDown=e=>{const r=Qe(t),o=1===r.length,i=1===r.length&&Me.isMindElement(t,r[0]),a=r[0];if(_j(e)&&i&&!qt.isMind(a)&&a.children&&a.children.length>0)Xe.setNode(t,{isCollapsed:!a.isCollapsed},I.findPath(t,a));else{if(!I.isReadonly(t)){if(Nj(e)&&i)return e.preventDefault(),void Sr.insertChildNode(t,a);if(Hj(e)&&i&&!qt.isMind(a)&&!yt.isAbstract(a))return void Sr.insertSiblingNode(t,a);if(!d8(e)&&!p8(e)&&!g8(e)&&o&&Me.isMindElement(t,a))return e.preventDefault(),void U8(a)}n(e)}},t.globalKeyDown=e=>{if(I.isFocus(t)&&I.hasBeenTextEditing(t)&&nn.isHotkey("mod+z",e)){const{history:e}=t,{undos:n}=e,r=n.length>0?n[n.length-1][0]:void 0;r&&"insert_node"===r.type&&Me.isMindElement(t,r.node)&&oh(r.node).isEditing&&t.undo()}r(e)},t},$K=e=>{const{pointerMove:t,pointerLeave:n,pointerUp:r}=e;let o=null;e.pointerMove=n=>{a4(e)&&Ua(e,"with-mind-node-hover-hit-test",()=>{o&&!yn.hasMounted(o.target)&&(o=null);const t=_x(e,n.x,n.y);o&&t&&o.target===t.target||(o&&i({target:o.target,isHovered:!1,isHoveredCollapseArea:!1,isHoveredExpandArea:!1,isHoveredAddArea:!1}),t?(i(t),o?o.target=t.target:o=t):o=null)}),t(n)},e.pointerUp=t=>{if(o&&(o.isHoveredCollapseArea||o.isHoveredExpandArea)){const n={isCollapsed:!o.target.isCollapsed},r=I.findPath(e,o.target);return Xe.setNode(e,n,r),void setTimeout(()=>{const n=_x(e,t.x,t.y);n?(i(n),o=n):o=null},0)}if(o&&o.isHoveredAddArea&&!I.isReadonly(e)){if(o){const t=J8(e,o.target);q8(e,o.target,t)}}else r(t)};const i=t=>{const n=yn.getElementRef(t.target),r=null==n?void 0:n.getGenerator(lp.key);if(r){const n=yn.getElementG(t.target);r.processDrawing(t.target,n,{isHovered:t.isHovered,isHoveredCollapseArea:t.isHoveredCollapseArea,isHoveredExpandArea:t.isHoveredExpandArea,isSelected:Hf(e,t.target),isHoveredAddArea:t.isHoveredAddArea,isShowCollapseAnimation:(t.isHovered||t.isHoveredCollapseArea)&&!Hf(e,t.target),isShowAddAnimation:(t.isHovered||t.isHoveredAddArea)&&!Hf(e,t.target)})}};return e.pointerLeave=e=>{o&&i({target:o.target,isHovered:!1,isHoveredCollapseArea:!1,isHoveredExpandArea:!1,isHoveredAddArea:!1}),o=null,n(e)},e},_x=(e,t,n)=>{let r=null,o=!1,i=!1,a=!1,s=!1;const l=At(e,Ot(e,t,n));return di(e,t=>{if(r||!Me.isMindElement(e,t))return;const n=qt.isMind(t),u=UD(e,l,t);let c=!1,d=!1;const{collapseCenter:h,addCenter:f}=kK(e,t),p=!n&&M.getRectangleByCenterPoint(h,20,20);c=p&&M.isHit(M.getRectangleByPoints([l,l]),p);const g=M.getRectangleByCenterPoint(f,20,20);d=M.isHit(M.getRectangleByPoints([l,l]),g),(u||c||d)&&(o=u,t.children.length>0&&(t.isCollapsed?a=c:i=c),s=d,r=t)},nh(e),!0),r?{target:r,isHovered:o,isHoveredCollapseArea:i,isHoveredExpandArea:a,isHoveredAddArea:s}:null},WK=e=>{const{keyDown:t,pointerUp:n,globalPointerUp:r,buildFragment:o,insertFragment:i,deleteFragment:a,afterChange:s}=e;return e.pointerUp=t=>{const r=fo(e);if(r&&Me.isMindElement(e,r)&&!cO(t)&&(I.isReadonly(e)||!Va(t)||!I.isPointer(e,Zt.selection)))return Vm(e,r),void n(t);if(I.isReadonly(e))return void n(t);const o=At(e,Ot(e,t.x,t.y)),i=Qa(e,o),a=i&&Me.isMindElement(e,i)&&Me.hasImage(i)&&qD(e,i,o);if(a&&r&&i===r)return w6(e),void n(t);r&&Me.isMindElement(e,r)&&Vm(e,r),a&&i&&(w6(e),zX(e,i)),n(t)},e.keyDown=n=>{const r=fo(e);if(!I.isReadonly(e)&&r&&(Ti.isDeleteBackward(n)||Ti.isDeleteForward(n)))return rh(e,r),void Sr.removeImage(e,r);t(n)},e.globalPointerUp=t=>{if(I.isFocus(e)){const n=t.target instanceof Node&&I.getBoardContainer(e).contains(t.target),r=fo(e);r&&Me.isMindElement(e,r)&&!n&&Vm(e,r)}r(t)},e.buildFragment=(t,n,r,i)=>{const a=fo(e);return a&&(t=TI(Xu.medias,[a.data.image],"")),o(t,n,r,i)},e.deleteFragment=t=>{const n=fo(e);n&&Sr.removeImage(e,n),a(t)},e.insertFragment=(t,n,r)=>{var o,a;const s=Qe(e),l=!!fo(e),u=1===s.length&&Me.isMindElement(e,s[0]);if(l||u){if(null!=(o=null==t?void 0:t.files)&&o.length){const n=HS.map(e=>"image/"+e),r=s[0]||fo(e);if(n.includes(t.files[0].type)){const n=t.files[0];return void ZS(e,n,EX,t=>{Sr.setImage(e,r,t)})}}if(null!=(a=null==t?void 0:t.medias)&&a.length){const n=s[0]||fo(e);return void Sr.setImage(e,n,t.medias[0])}}i(t,n,r)},e.afterChange=()=>{s();const t=fo(e);t&&Me.isMindElement(e,t)&&yn.getElementRef(t).getGenerator(qu.key).setFocus(t,!0)},e},zK=e=>{let t=null;return ah(e,{key:"mind-node",canResize:()=>!0,hitTest:t=>{const n=VK(e,t);return n?{element:n,handle:null,cursorClass:ra.ew}:null},beforeResize:n=>{t={minWidth:kn.getNodeResizableMinWidth(e,n.element),currentWidth:kn.getNodeDynamicWidth(e,n.element),path:I.findPath(e,n.element),textManage:oh(n.element)}},onResize:(n,r)=>{let o=t.currentWidth+mt.getOffsetX(r.startPoint,r.endPoint);o<=t.minWidth&&(o=t.minWidth);const i=Xt.get(e,t.path);if(i&&kn.getNodeTopicMinWidth(e,i)!==o){t.textManage.updateRectangleWidth(o);const{height:n}=t.textManage.getSize(void 0,o);Sr.setNodeManualWidth(e,i,o,n)}},afterResize:e=>{t=null}}),e},VK=(e,t)=>{const n=Qe(e).filter(t=>Me.isMindElement(e,t));if(n.length>0){return n.find(n=>{const r=UK(e,n);return yp(t[0],t[1],r)<=0})||null}return null},UK=(e,t)=>{const n=tr(Me.getNode(t));return{x:n.x+n.width-8,y:n.y,width:16,height:n.height}},XK=e=>(ah(e,{key:"mind-node-image",canResize:()=>!0,hitTest:t=>{const n=fo(e),r=n&&Me.isMindElement(e,n)?n:void 0;if(r){const n=jX(e,r,t);if(n)return{element:r,handle:n.handle,cursorClass:n.cursorClass}}return null},onResize:(t,n)=>{const r=mt.getOffsetX(n.startPoint,n.endPoint),o=t.element.data.image.width,i=t.element.data.image.height,a=t.path;let s=o+r;s<=100&&(s=100);const l=s/(o/i),u={...t.element.data.image,width:s,height:l};Sr.setImage(e,Xt.get(e,a),u),QS(e,Xt.get(e,a))}}),e),KK=(e,t,n)=>{let r=[];const o=kD(0,t),i=OD(0,[...t,...o]),a=t.filter(e=>!i.find(t=>t.abstract===e));a.push(...i.map(e=>e.abstract));const s=a.map(e=>Me.getNode(e));return a.forEach((e,t)=>{const o=tr(s[t]),l=[[o.x-n[0],o.y-n[1]]],u=i.find(t=>t.abstract===e);if(yt.isAbstract(e)&&u){const{start:t,end:n}=ID(u,a);r.push({...e,points:l,start:t,end:n})}else if(yt.isAbstract(e)){let t={...e,points:l};delete t.start,delete t.end,r.push(t)}else r.push({...e,points:l})}),r},YK=(e,t,n,r)=>{let o,i;const a=Qe(e);let s=[];const l=1===a.length,u=a[0],c=u&&I.findPath(e,u),d=u&&Tc(u).length;t.forEach((t,a)=>{if(o=VD(t),l&&r!==aa.duplicate){if(t.isRoot){o=$X(0,o);const{width:t,height:n}=Nx(e,o,u);o.width=t,o.height=n}yt.isAbstract(o)&&(o.start=o.start+d,o.end=o.end+d),i=[...c,d+a]}else{const r=[n[0]+t.points[0][0],n[1]+t.points[0][1]];if(o.points=[r],yt.isAbstract(t)&&(o=o4(o)),!t.isRoot){o=WX(0,o);const{width:t,height:n}=Nx(e,o);o.width=t,o.height=n}i=[e.children.length]}s.push(o),Xe.insertNode(e,o,i)}),Xe.addSelectionWithTemporaryElements(e,s)},qK=(e,t,n)=>{const{width:r,height:o}=Tv(e,!1,qt.isMind(t),eu(n)),i=Dv(n,Math.max(r,HX(n)),o,{});Xe.insertNode(e,i,J8(e,t)),Xe.addSelectionWithTemporaryElements(e,[i])},Nx=(e,t,n)=>Tv(e,qt.isMind(t),n&&qt.isMind(n)||!1,t.data.topic,t.manualWidth),ZK=e=>{const t=e;let n;const{getDeletedFragment:r,insertFragment:o,buildFragment:i,deleteFragment:a}=t;return t.getDeletedFragment=e=>{const o=b5(t);if(o.length){n=kg(o).reverse();const r=LD(0,n);Sr.setAbstractsByRefs(t,r);const i=oA(t,o);Sr.setRightNodeCountByRefs(t,i);const a=kg(o);e.push(...a)}return r(e)},t.deleteFragment=e=>{if(a(e),n){const e=QK(t,n);e&&rh(t,e),n=null}},t.buildFragment=(e,n,r,o)=>{const a=b5(t,o),s=kg(a);if(s.length){const t=KK(0,s,n?[n.x,n.y]:[0,0]),r={text:YS(a),type:Xu.elements,elements:t};e=iv(e,r)}return i(e,n,r,o)},t.insertFragment=(e,n,r)=>{var i,a;if(null!=(i=null==e?void 0:e.elements)&&i.length){const o=null==(a=e.elements)?void 0:a.filter(e=>Me.isMindElement(t,e));o&&o.length>0&&YK(t,o,n,r)}if(null!=e&&e.text){const n=b5(t);if(1===n.length)return void qK(t,n[0],eu(e.text))}o(e,n,r)},t},QK=(e,t)=>{let n;const r=t[0],o=I.findPath(e,r);let i=o;if(wt.hasPrevious(o)&&(i=wt.previous(o)),yt.isAbstract(r)){const e=Me.getParent(r);t.includes(e.children[r.start])||(n=e.children[r.start])}try{n||(n=Xt.get(e,i))}catch{}const a=t[0],s=Me.findParent(a),l=t.every(e=>Me.findParent(e)===s);return s&&l&&!n&&(n=s),n},JK=e=>{const t=e;return t.renderEmoji=(e,t)=>{throw new Error("No implementation for renderEmoji method.")},t},eY=e=>!(!e.data||!e.data.topic),tY=e=>!(Xo(e.width)||Xo(e.height)),nY=e=>{const t={children:[{text:""}]};if(e.data)e.data.topic||(e.data.topic=t);else{const n={topic:t};e.data=n}},rY=e=>{Xo(e.width)&&(e.width=56),Xo(e.height)&&(e.width=20)},mA=e=>{const t=e,{drawElement:n,dblClick:r,isRectangleHit:o,isHit:i,getRectangle:a,isMovable:s,isRecursion:l,isAlign:u,isImageBindingAllowed:c,canAddToGroup:d,canSetZIndex:h,isExpanded:f,getOneHitElement:p,normalizeElement:g}=t;return t.normalizeElement=e=>{qt.isMind(e.element)&&di(e.element,e=>{eY(e)||nY(e),tY(e)||rY(e)}),g(e)},t.drawElement=e=>qt.isMind(e.element)?IK:Me.isMindElement(t,e.element)?pA:n(e),t.applyTheme=e=>{const n=e,r=!I.isBoard(e)&&((null==n?void 0:n.branchColor)||(null==n?void 0:n.fill)||(null==n?void 0:n.strokeColor));if(qt.isMind(e)&&r){const n=I.findPath(t,e);Xe.setNode(t,{fill:null,strokeColor:null,branchColor:null},n)}},t.getRectangle=e=>Me.isMindElement(t,e)?(yn.hasMounted(e)||console.error("mind element has not been mounted"),tr(Me.getNode(e))):a(e),t.canAddToGroup=e=>!(Me.isMindElement(t,e)&&!e.isRoot)&&d(e),t.canSetZIndex=e=>!(Me.isMindElement(t,e)&&!e.isRoot)&&h(e),t.isRecursion=e=>(!Me.isMindElement(t,e)||!e.isCollapsed)&&l(e),t.isRectangleHit=(e,n)=>{if(Me.isMindElement(t,e)){const t=tr(Me.getNode(e));return M.isHit(M.getRectangleByPoints([n.anchor,n.focus]),t)}return o(e,n)},t.isHit=(e,n,r)=>{if(Me.isMindElement(t,e)){const t=tr(Me.getNode(e));return M.isHit(M.getRectangleByPoints([n,n]),t)}return i(e,n,r)},t.getOneHitElement=e=>e.every(e=>Me.isMindElement(t,e))?e[0]:p(e),t.isMovable=e=>!(!qt.isMind(e)||!e.isRoot)||s(e),t.isImageBindingAllowed=e=>!!Me.isMindElement(t,e)||c(e),t.isAlign=e=>!(!qt.isMind(e)||!e.isRoot)||u(e),t.isExpanded=e=>Me.isMindElement(t,e)&&!qt.isMind(e)?!e.isCollapsed:f(e),t.dblClick=e=>{if(I.isReadonly(t))return void r(e);const n=At(t,Ot(t,e.x,e.y));t.children.filter(e=>qt.isMind(e)).forEach(e=>{di(e,e=>{!I.hasBeenTextEditing(t)&&UD(t,n,e)&&U8(e)},nh(t))}),!I.hasBeenTextEditing(t)&&r(e)},JK(zK(XK(WK($K(ZK(jK(NK(GK(_K(LK(t)))))))))))};var Hx,F5={exports:{}};function iY(){return Hx||(Hx=1,e=F5,/*!mobile-detect v1.4.5 2021-03-13*/ /*!@license Copyright 2013, Heinrich Goebl, License: MIT, see https://github.com/hgoebl/mobile-detect.js*/t=function(){if(e.exports)return function(t){e.exports=t()};if(typeof window<"u")return function(e){window.MobileDetect=e()};throw new Error("unknown environment")}(),t(function(){var e,t={mobileDetectRules:{phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+|\\b(BBA100|BBB100|BBD100|BBE100|BBF100|STH100)\\b-[0-9]+",Pixel:"; \\bPixel\\b",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m|Android [0-9.]+; Pixel",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 5X|Nexus 6",Dell:"Dell[;]? (Streak|Aero|Venue|Venue Pro|Flash|Smoke|Mini 3iX)|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b|XT1068|XT1092|XT1052",Samsung:"\\bSamsung\\b|SM-G950F|SM-G955F|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F|SM-G920F|SM-G920V|SM-G930F|SM-N910C|SM-A310F|GT-I9190|SM-J500FN|SM-G903F|SM-J330F|SM-G610F|SM-G981B|SM-G892A|SM-A530F",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|MS323|M257)|LM-G710",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533|SOV34|601SO|F8332",Asus:"Asus.*Galaxy|PadFone.*Mobile",Xiaomi:"^(?!.*\\bx11\\b).*xiaomi.*$|POCOPHONE F1|MI 8|Redmi Note 9S|Redmi Note 5A Prime|N2G47H|M2001J2G|M2001J2I|M1805E10A|M2004J11G|M1902F1G|M2002J9G|M2004J19G|M2003J6A1G",NokiaLumia:"Lumia [0-9]{3,4}",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",Wiko:"KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo (3DS|Switch)",Amoi:"Amoi",INQ:"INQ",OnePlus:"ONEPLUS",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)",GoogleTablet:"Android.*Pixel C",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-T116BU|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|SM-T719|SM-T813|SM-T819|SM-T580|SM-T355Y?|SM-T280|SM-T817A|SM-T820|SM-W700|SM-P580|SM-T587|SM-P350|SM-P555M|SM-P355M|SM-T113NU|SM-T815Y|SM-T585|SM-T285|SM-T825|SM-W708|SM-T835|SM-T830|SM-T837V|SM-T720|SM-T510|SM-T387V|SM-P610|SM-T290|SM-T515|SM-T590|SM-T595|SM-T725|SM-T817P|SM-P585N0|SM-T395|SM-T295|SM-T865|SM-P610N|SM-P615|SM-T970|SM-T380|SM-T5950|SM-T905|SM-T231|SM-T500|SM-T860",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI|KFFOWI|KFGIWI|KFMEWI)\\b|Android.*Silk/[0-9.]+ like Chrome/[0-9.]+ (?!Mobile)",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z|\\bP027\\b|\\bP024\\b|\\bP00C\\b",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\\bA3-A20\\b|\\bA3-A30|A3-A40",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002",LenovoTablet:"Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-850M|YT3-X90L|YT3-X90F|YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)|TB-X103F|TB-X304X|TB-X304F|TB-X304L|TB-X505F|TB-X505L|TB-X505X|TB-X605F|TB-X605L|TB-8703F|TB-8703X|TB-8703N|TB-8704N|TB-8704F|TB-8704X|TB-8704V|TB-7304F|TB-7304I|TB-7304X|Tab2A7-10F|Tab2A7-20F|TB2-X30L|YT3-X50L|YT3-X50F|YT3-X50M|YT-X705F|YT-X703F|YT-X703L|YT-X705L|YT-X705X|TB2-X30F|TB2-X30L|TB2-X30M|A2107A-F|A2107A-H|TB3-730F|TB3-730M|TB3-730X|TB-7504F|TB-7504X|TB-X704F|TB-X104F|TB3-X70F|TB-X705F|TB-8504F|TB3-X70L|TB3-710F|TB-X704L",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|c|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",NokiaLumiaTablet:"Lumia 2520",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP641|SGP612|SOT31|SGP771|SGP611|SGP612|SGP712",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"Android.*(bq)?.*\\b(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris ([E|M]10|M8))\\b|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim|M2-A01L|BAH-L09|BAH-W09|AGS-L09|CMR-AL19",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z930|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android [0-9.]+; [a-z-]+; \\bG1\\b",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)|Qualcore 1027",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497|VFD 1400",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9|TECNO DP8D",JXDTablet:"Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",VerizonTablet:"QTAQZ3|QTAIR7|QTAQTZ3|QTASUN1|QTASUN2|QTAXIA1",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",OndaTablet:"\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+|V10 \\b4G\\b",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b",AocTablet:"MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712",MpmanTablet:"MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",WolderTablet:"miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b",MediacomTablet:"M-MPI10C3G|M-SP10EG|M-SP10EGP|M-SP10HXAH|M-SP7HXAH|M-SP10HXBH|M-SP8HXAH|M-SP8MXA",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",LeaderTablet:"TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",KocasoTablet:"\\b(TB-1207)\\b",HisenseTablet:"\\b(F5281|E2371)\\b",Hudl:"Hudl HT7S3|Hudl 2",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b|\\bQTAQZ3\\b|WVT101|TM1088|KT107"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Windows Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad|AppleCoreMedia",iPadOS:"CPU OS 13",SailfishOS:"Sailfish",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+$|Coast/[0-9.]+",Skyfire:"Skyfire",Edge:"\\bEdgiOS\\b|Mobile Safari/[.0-9]* Edge",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile|FxiOS",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version((?!\\bEdgiOS\\b).)*Mobile.*Safari|Safari.*Mobile|MobileSafari",WeChat:"\\bMicroMessenger\\b",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger",PaleMoon:"Android.*PaleMoon|Mobile.*PaleMoon"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:["Firefox/[VER]","FxiOS/[VER]"],Fennec:"Fennec/[VER]",Edge:"Edge/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];","Trident/[0-9.]+;.*rv:[VER]"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]",UCBrowser:["UCWEB[VER]","UC.*Browser/[VER]"],MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",SamsungBrowser:"SamsungBrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",PaleMoon:"PaleMoon/[VER]",SailfishBrowser:"SailfishBrowser/[VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",Goanna:"Goanna/[VER]",iOS:" \\bi?OS\\b [VER][ ;]{1}",Android:"Android [VER]",Sailfish:"Sailfish [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{Bot:"Googlebot|facebookexternalhit|Google-AMPHTML|s~amp-validator|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|YandexMobileBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom|contentkingapp|AspiegelBot",MobileBot:"Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2",DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|Nintendo Switch|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},detectMobileBrowsers:{fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,tabletPattern:/android|ipad|playbook|silk/i}},r=Object.prototype.hasOwnProperty;function o(e,t){return null!=e&&null!=t&&e.toLowerCase()===t.toLowerCase()}function i(e,t){var n,r,o=e.length;if(!o||!t)return!1;for(n=t.toLowerCase(),r=0;r<o;++r)if(n===e[r].toLowerCase())return!0;return!1}function a(e){for(var t in e)r.call(e,t)&&(e[t]=new RegExp(e[t],"i"))}function s(e,t){this.ua=function(e){return(e||"").substr(0,500)}(e),this._cache={},this.maxPhoneWidth=t||600}return t.FALLBACK_PHONE="UnknownPhone",t.FALLBACK_TABLET="UnknownTablet",t.FALLBACK_MOBILE="UnknownMobile",e="isArray"in Array?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},function(){var n,o,i,s,l,u,c=t.mobileDetectRules;for(n in c.props)if(r.call(c.props,n)){for(o=c.props[n],e(o)||(o=[o]),l=o.length,s=0;s<l;++s)(u=(i=o[s]).indexOf("[VER]"))>=0&&(i=i.substring(0,u)+"([\\w._\\+]+)"+i.substring(u+5)),o[s]=new RegExp(i,"i");c.props[n]=o}a(c.oss),a(c.phones),a(c.tablets),a(c.uas),a(c.utils),c.oss0={WindowsPhoneOS:c.oss.WindowsPhoneOS,WindowsMobileOS:c.oss.WindowsMobileOS}}(),t.findMatch=function(e,t){for(var n in e)if(r.call(e,n)&&e[n].test(t))return n;return null},t.findMatches=function(e,t){var n=[];for(var o in e)r.call(e,o)&&e[o].test(t)&&n.push(o);return n},t.getVersionStr=function(e,n){var o,i,a,s,l=t.mobileDetectRules.props;if(r.call(l,e))for(a=(o=l[e]).length,i=0;i<a;++i)if(null!==(s=o[i].exec(n)))return s[1];return null},t.getVersion=function(e,n){var r=t.getVersionStr(e,n);return r?t.prepareVersionNo(r):NaN},t.prepareVersionNo=function(e){var t;return 1===(t=e.split(/[a-z._ \/\-]/i)).length&&(e=t[0]),t.length>1&&(e=t[0]+".",t.shift(),e+=t.join("")),Number(e)},t.isMobileFallback=function(e){return t.detectMobileBrowsers.fullPattern.test(e)||t.detectMobileBrowsers.shortPattern.test(e.substr(0,4))},t.isTabletFallback=function(e){return t.detectMobileBrowsers.tabletPattern.test(e)},t.prepareDetectionCache=function(e,r,o){if(e.mobile===n){var i,a,l;if(a=t.findMatch(t.mobileDetectRules.tablets,r))return e.mobile=e.tablet=a,void(e.phone=null);if(i=t.findMatch(t.mobileDetectRules.phones,r))return e.mobile=e.phone=i,void(e.tablet=null);t.isMobileFallback(r)?(l=s.isPhoneSized(o))===n?(e.mobile=t.FALLBACK_MOBILE,e.tablet=e.phone=null):l?(e.mobile=e.phone=t.FALLBACK_PHONE,e.tablet=null):(e.mobile=e.tablet=t.FALLBACK_TABLET,e.phone=null):t.isTabletFallback(r)?(e.mobile=e.tablet=t.FALLBACK_TABLET,e.phone=null):e.mobile=e.tablet=e.phone=null}},t.mobileGrade=function(e){var t=null!==e.mobile();return e.os("iOS")&&e.version("iPad")>=4.3||e.os("iOS")&&e.version("iPhone")>=3.1||e.os("iOS")&&e.version("iPod")>=3.1||e.version("Android")>2.1&&e.is("Webkit")||e.version("Windows Phone OS")>=7||e.is("BlackBerry")&&e.version("BlackBerry")>=6||e.match("Playbook.*Tablet")||e.version("webOS")>=1.4&&e.match("Palm|Pre|Pixi")||e.match("hp.*TouchPad")||e.is("Firefox")&&e.version("Firefox")>=12||e.is("Chrome")&&e.is("AndroidOS")&&e.version("Android")>=4||e.is("Skyfire")&&e.version("Skyfire")>=4.1&&e.is("AndroidOS")&&e.version("Android")>=2.3||e.is("Opera")&&e.version("Opera Mobi")>11&&e.is("AndroidOS")||e.is("MeeGoOS")||e.is("Tizen")||e.is("Dolfin")&&e.version("Bada")>=2||(e.is("UC Browser")||e.is("Dolfin"))&&e.version("Android")>=2.3||e.match("Kindle Fire")||e.is("Kindle")&&e.version("Kindle")>=3||e.is("AndroidOS")&&e.is("NookTablet")||e.version("Chrome")>=11&&!t||e.version("Safari")>=5&&!t||e.version("Firefox")>=4&&!t||e.version("MSIE")>=7&&!t||e.version("Opera")>=10&&!t?"A":e.os("iOS")&&e.version("iPad")<4.3||e.os("iOS")&&e.version("iPhone")<3.1||e.os("iOS")&&e.version("iPod")<3.1||e.is("Blackberry")&&e.version("BlackBerry")>=5&&e.version("BlackBerry")<6||e.version("Opera Mini")>=5&&e.version("Opera Mini")<=6.5&&(e.version("Android")>=2.3||e.is("iOS"))||e.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||e.version("Opera Mobi")>=11&&e.is("SymbianOS")?"B":(e.version("BlackBerry")<5||e.match("MSIEMobile|Windows CE.*Mobile")||e.version("Windows Mobile"),"C")},t.detectOS=function(e){return t.findMatch(t.mobileDetectRules.oss0,e)||t.findMatch(t.mobileDetectRules.oss,e)},t.getDeviceSmallerSide=function(){return window.screen.width<window.screen.height?window.screen.width:window.screen.height},s.prototype={constructor:s,mobile:function(){return t.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return t.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return t.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return this._cache.userAgent===n&&(this._cache.userAgent=t.findMatch(t.mobileDetectRules.uas,this.ua)),this._cache.userAgent},userAgents:function(){return this._cache.userAgents===n&&(this._cache.userAgents=t.findMatches(t.mobileDetectRules.uas,this.ua)),this._cache.userAgents},os:function(){return this._cache.os===n&&(this._cache.os=t.detectOS(this.ua)),this._cache.os},version:function(e){return t.getVersion(e,this.ua)},versionStr:function(e){return t.getVersionStr(e,this.ua)},is:function(e){return i(this.userAgents(),e)||o(e,this.os())||o(e,this.phone())||o(e,this.tablet())||i(t.findMatches(t.mobileDetectRules.utils,this.ua),e)},match:function(e){return e instanceof RegExp||(e=new RegExp(e,"i")),e.test(this.ua)},isPhoneSized:function(e){return s.isPhoneSized(e||this.maxPhoneWidth)},mobileGrade:function(){return this._cache.grade===n&&(this._cache.grade=t.mobileGrade(this)),this._cache.grade}},typeof window<"u"&&window.screen?s.isPhoneSized=function(e){return e<0?n:t.getDeviceSmallerSide()<=e}:s.isPhoneSized=function(){},s._impl=t,s.version="1.4.5 2021-03-13",s})),F5.exports;var e,t,n}var oY=iY();const sY=vc(oY),Gx=e=>b.jsx("span",{className:"mind-node-emoji",style:{fontSize:`${e.fontSize}px`},children:e.emojiItem.name}),aY=e=>{const t=e;return e.setPluginOptions(Ev,{emojiPadding:0,spaceBetweenEmojis:4}),t.renderEmoji=(e,t)=>{const n=document.createElement("span");e.appendChild(n);const r=z3.createRoot(n);r.render(b.jsx(Gx,{...t}));let o={...t};return{destroy:()=>{setTimeout(()=>{r.unmount()},0)},update:e=>{o={...o,...e},r.render(b.jsx(Gx,{...o}))}}},t},jx=e=>{const t={src:e.imageItem.url,draggable:!1,width:"100%"};return b.jsx("div",{children:b.jsx("img",{...t,className:Dn("image-origin",{"image-origin--focus":e.isFocus})})})};var cp=(e=>(e.COPY="copy",e.PASTE="paste",e.CUT="cut",e.KEYDOWN="keydown",e.KEYUP="keyup",e.MOUSE_MOVE="mousemove",e.RESIZE="resize",e.UNLOAD="unload",e.FOCUS="focus",e.BLUR="blur",e.DRAG_OVER="dragover",e.DROP="drop",e.GESTURE_END="gestureend",e.BEFORE_UNLOAD="beforeunload",e.GESTURE_START="gesturestart",e.GESTURE_CHANGE="gesturechange",e.POINTER_MOVE="pointermove",e.POINTER_DOWN="pointerdown",e.POINTER_UP="pointerup",e.STATE_CHANGE="statechange",e.WHEEL="wheel",e.TOUCH_START="touchstart",e.TOUCH_END="touchend",e.HASHCHANGE="hashchange",e.VISIBILITY_CHANGE="visibilitychange",e.SCROLL="scroll",e.MENU_ITEM_SELECT="menu.itemSelect",e.MESSAGE="message",e.FULLSCREENCHANGE="fullscreenchange",e))(cp||{});const ny={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",avif:"image/avif",jfif:"image/jfif"},ry={json:"application/json",drawnix:"application/vnd.drawnix+json",...ny},uY={drawnix:1},iy=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})(),lY=iy?Promise.resolve().then(function(){return pY}):Promise.resolve().then(function(){return xY});async function cY(...e){return(await lY).default(...e)}iy?Promise.resolve().then(function(){return vY}):Promise.resolve().then(function(){return PY});const fY=iy?Promise.resolve().then(function(){return wY}):Promise.resolve().then(function(){return TY});async function hY(...e){return(await fY).default(...e)}const dY=async e=>{const t=await e.getFile();return t.handle=e,t};var gY=async(e=[{}])=>{Array.isArray(e)||(e=[e]);const t=[];e.forEach((e,n)=>{t[n]={description:e.description||"Files",accept:{}},e.mimeTypes?e.mimeTypes.map(r=>{t[n].accept[r]=e.extensions||[]}):t[n].accept["*/*"]=e.extensions||[]});const n=await window.showOpenFilePicker({id:e[0].id,startIn:e[0].startIn,types:t,multiple:e[0].multiple||!1,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}),r=await Promise.all(n.map(dY));return e[0].multiple?r:r[0]},pY={__proto__:null,default:gY};function Um(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(Um=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Um(e)}const vA=async(e,t,n=e.name,r)=>{const o=[],i=[];var a,s=!1,l=!1;try{for(var u,c=function(e){var t,n,r,o=2;for(typeof Symbol<"u"&&(n=Symbol.asyncIterator,r=Symbol.iterator);o--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new Um(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}(e.values());s=!(u=await c.next()).done;s=!1){const a=u.value,s=`${n}/${a.name}`;"file"===a.kind?i.push(a.getFile().then(t=>(t.directoryHandle=e,t.handle=a,Object.defineProperty(t,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>s})))):"directory"!==a.kind||!t||r&&r(a)||o.push(vA(a,t,s,r))}}catch(e){l=!0,a=e}finally{try{s&&null!=c.return&&await c.return()}finally{if(l)throw a}}return[...(await Promise.all(o)).flat(),...await Promise.all(i)]};var mY=async(e={})=>{e.recursive=e.recursive||!1,e.mode=e.mode||"read";const t=await window.showDirectoryPicker({id:e.id,startIn:e.startIn,mode:e.mode});return(await(await t.values()).next()).done?[t]:vA(t,e.recursive,void 0,e.skipDirectory)},vY={__proto__:null,default:mY},yY=async(e,t=[{}],n=null,r=!1,o=null)=>{Array.isArray(t)||(t=[t]),t[0].fileName=t[0].fileName||"Untitled";const i=[];let a=null;if(e instanceof Blob&&e.type?a=e.type:e.headers&&e.headers.get("content-type")&&(a=e.headers.get("content-type")),t.forEach((e,t)=>{i[t]={description:e.description||"Files",accept:{}},e.mimeTypes?(0===t&&a&&e.mimeTypes.push(a),e.mimeTypes.map(n=>{i[t].accept[n]=e.extensions||[]})):a?i[t].accept[a]=e.extensions||[]:i[t].accept["*/*"]=e.extensions||[]}),n)try{await n.getFile()}catch(e){if(n=null,r)throw e}const s=n||await window.showSaveFilePicker({suggestedName:t[0].fileName,id:t[0].id,startIn:t[0].startIn,types:i,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1});!n&&o&&o(s);const l=await s.createWritable();return"stream"in e?(await e.stream().pipeTo(l),s):"body"in e?(await e.body.pipeTo(l),s):(await l.write(await e),await l.close(),s)},wY={__proto__:null,default:yY},CY=async(e=[{}])=>(Array.isArray(e)||(e=[e]),new Promise((t,n)=>{const r=document.createElement("input");r.type="file";const o=[...e.map(e=>e.mimeTypes||[]),...e.map(e=>e.extensions||[])].join();r.multiple=e[0].multiple||!1,r.accept=o||"",r.style.display="none",document.body.append(r);const i=e=>{"function"==typeof a&&a(),t(e)},a=e[0].legacySetup&&e[0].legacySetup(i,()=>a(n),r),s=()=>{window.removeEventListener("focus",s),r.remove()};r.addEventListener("click",()=>{window.addEventListener("focus",s)}),r.addEventListener("change",()=>{window.removeEventListener("focus",s),r.remove(),i(r.multiple?Array.from(r.files):r.files[0])}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),xY={__proto__:null,default:CY},EY=async(e=[{}])=>(Array.isArray(e)||(e=[e]),e[0].recursive=e[0].recursive||!1,new Promise((t,n)=>{const r=document.createElement("input");r.type="file",r.webkitdirectory=!0;const o=e=>{"function"==typeof i&&i(),t(e)},i=e[0].legacySetup&&e[0].legacySetup(o,()=>i(n),r);r.addEventListener("change",()=>{let t=Array.from(r.files);e[0].recursive?e[0].recursive&&e[0].skipDirectory&&(t=t.filter(t=>t.webkitRelativePath.split("/").every(t=>!e[0].skipDirectory({name:t,kind:"directory"})))):t=t.filter(e=>2===e.webkitRelativePath.split("/").length),o(t)}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),PY={__proto__:null,default:EY},SY=async(e,t={})=>{Array.isArray(t)&&(t=t[0]);const n=document.createElement("a");let r=e;"body"in e&&(r=await async function(e,t){const n=e.getReader(),r=new ReadableStream({start:e=>async function t(){return n.read().then(({done:n,value:r})=>{if(!n)return e.enqueue(r),t();e.close()})}()}),o=new Response(r),i=await o.blob();return n.releaseLock(),new Blob([i],{type:t})}(e.body,e.headers.get("content-type"))),n.download=t.fileName||"Untitled",n.href=URL.createObjectURL(await r);const o=()=>{"function"==typeof i&&i()},i=t.legacySetup&&t.legacySetup(o,()=>i(),n);return n.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(n.href),3e4),o()}),n.click(),null},TY={__proto__:null,default:SY};const yA=e=>{var t,n;const r=null==(t=e.extensions)?void 0:t.reduce((e,t)=>(e.push(ry[t]),e),[]),o=null==(n=e.extensions)?void 0:n.reduce((e,t)=>"jpg"===t?e.concat(".jpg",".jpeg"):e.concat(`.${t}`),[]);return cY({description:e.description,extensions:o,mimeTypes:r,multiple:e.multiple??!1})},DY=(e,t)=>hY(e,{fileName:`${t.name}.${t.extension}`,description:t.description,extensions:[`.${t.extension}`]},t.fileHandle);var oy=(e=>(e.drawnix="drawnix",e))(oy||{});const AY=()=>(new Date).getTime().toString(),wA=async(e,t=AY())=>{const n=MY(e),r=new Blob([n],{type:ry.drawnix});return{fileHandle:await DY(r,{name:t,extension:"drawnix",description:"Drawnix file"})}},BY=async e=>{const t=await yA({description:"Drawnix files"});return bY(e,await IY(t))},RY=e=>e&&e.type===oy.drawnix&&Array.isArray(e.elements)&&"object"==typeof e.viewport,MY=e=>{const t={type:oy.drawnix,version:uY.drawnix,source:"web",elements:e.children,viewport:e.viewport};return JSON.stringify(t,null,2)},bY=async(e,t)=>{const n=await FY(t);let r;try{if(r=JSON.parse(n),RY(r))return r;throw new Error("Error: invalid file")}catch{throw new Error("Error: invalid file")}},kY=(e,t,n)=>new File([e],n||"",{type:t}),OY=e=>"arrayBuffer"in e?e.arrayBuffer():new Promise((t,n)=>{const r=new FileReader;r.onload=e=>{var r;if(null==(r=e.target)||!r.result)return n(new Error("Couldn't convert blob to ArrayBuffer"));t(e.target.result)},r.readAsArrayBuffer(e)}),IY=async e=>{var t;return e.type||null!=(t=null==e?void 0:e.name)&&t.endsWith(".drawnix")&&(e=kY(await OY(e),ry.drawnix,e.name)),e},FY=async e=>{let t;return t="text"in Blob?await e.text():await new Promise(t=>{const n=new FileReader;n.readAsText(e,"utf8"),n.onloadend=()=>{n.readyState===FileReader.DONE&&t(n.result)}}),t},LY=async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const e=r.result;t(e)},r.onerror=e=>n(e),r.readAsDataURL(e)}),$x=e=>!!e&&Object.values(ny).includes(e),_Y=e=>new Promise((t,n)=>{const r=new Image;r.onload=()=>{t(r)},r.onerror=e=>{n(e)},r.src=e}),NY=(e,t,n)=>{const r=e.width>n?n:e.width;return{url:t,width:r,height:r/e.width*e.height}},u4=async(e,t,n,r)=>{const o=Qe(e)[0]||fo(e),i=o?240:400,a=await LY(t),s=await _Y(a),l=NY(s,a,i),u=n&&Qa(e,n);r&&u&&Me.isMindElement(e,u)?Sr.setImage(e,u,l):o&&Me.isMindElement(e,o)&&!r?Sr.setImage(e,o,l):$i.insertImage(e,l,n)};class HY{constructor(e={}){this.overlay=null,this.imageContainer=null,this.image=null,this.closeButton=null,this.controlsContainer=null,this.delegationHandler=null,this.dragHandler=null,this.mouseUpHandler=null,this.animationFrameId=null,this.pendingUpdate=!1,this.state={zoom:1,x:0,y:0,isDragging:!1,dragStartX:0,dragStartY:0,imageStartX:0,imageStartY:0},this.styleElement=null,this.options={zoomStep:e.zoomStep||.2,minZoom:e.minZoom||.1,maxZoom:e.maxZoom||5,enableKeyboard:!1!==e.enableKeyboard},this.addStyles(),this.bindEvents()}open(e,t=""){this.createOverlay(),this.createImage(e,t),this.resetState(),document.body.style.overflow="hidden"}close(){this.overlay&&(this.cleanupDragEvents(),document.removeEventListener("mousemove",this.delegationHandler),document.removeEventListener("mouseup",this.delegationHandler),document.removeEventListener("keydown",this.delegationHandler),document.removeEventListener("wheel",this.delegationHandler),this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),document.body.removeChild(this.overlay),this.overlay=null,this.image=null,this.imageContainer=null,this.closeButton=null,this.controlsContainer=null,this.delegationHandler=null,this.dragHandler=null,this.mouseUpHandler=null,this.pendingUpdate=!1),document.body.style.overflow=""}createOverlay(){this.overlay=document.createElement("div"),this.overlay.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(45, 45, 45, 0.95);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 9999;\n      cursor: grab;\n    ",this.overlay.addEventListener("click",e=>{e.target===this.overlay&&this.close()}),this.createCloseButton(),this.createControls(),document.body.appendChild(this.overlay)}createCloseButton(){this.closeButton=document.createElement("div"),this.closeButton.innerHTML="",this.closeButton.className="image-viewer-close-btn",this.closeButton.addEventListener("click",()=>this.close()),this.overlay.appendChild(this.closeButton)}createControls(){this.controlsContainer=document.createElement("div"),this.controlsContainer.style.cssText="\n      position: absolute;\n      bottom: 30px;\n      left: 50%;\n      transform: translateX(-50%);\n      display: flex;\n      gap: 10px;\n      z-index: 10001;\n    ",this.addStyles();const e=document.createElement("button");e.innerHTML="+",e.className="image-viewer-control-btn",e.addEventListener("click",()=>this.zoomIn());const t=document.createElement("button");t.innerHTML="-",t.className="image-viewer-control-btn",t.addEventListener("click",()=>this.zoomOut());const n=document.createElement("button");n.innerHTML="",n.className="image-viewer-control-btn",n.addEventListener("click",()=>this.resetState()),this.controlsContainer.appendChild(t),this.controlsContainer.appendChild(n),this.controlsContainer.appendChild(e),this.overlay.appendChild(this.controlsContainer)}createImage(e,t){this.imageContainer=document.createElement("div"),this.imageContainer.style.cssText="\n      position: relative;\n      cursor: grab;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      max-width: calc(100vw - 80px);\n      max-height: calc(100vh - 160px);\n    ",this.image=document.createElement("img"),this.image.src=e,this.image.alt=t,this.image.style.cssText="\n      max-width: calc(100vw - 80px);\n      max-height: calc(100vh - 160px);\n      width: auto;\n      height: auto;\n      display: block;\n      user-select: none;\n      pointer-events: none;\n      object-fit: contain;\n    ",this.imageContainer.appendChild(this.image),this.overlay.appendChild(this.imageContainer),this.bindDragEvents()}bindDragEvents(){this.imageContainer&&(this.dragHandler=e=>{if(!this.state.isDragging)return;const t=e.clientX-this.state.dragStartX,n=e.clientY-this.state.dragStartY;this.state.x=this.state.imageStartX+t,this.state.y=this.state.imageStartY+n,this.pendingUpdate||(this.pendingUpdate=!0,this.animationFrameId=requestAnimationFrame(()=>{this.updateImageTransform(),this.pendingUpdate=!1}))},this.mouseUpHandler=()=>{this.state.isDragging&&(this.state.isDragging=!1,this.imageContainer&&(this.imageContainer.style.cursor="grab"),this.overlay&&(this.overlay.style.cursor="grab"),this.cleanupDragEvents())},this.imageContainer.addEventListener("mousedown",e=>{e.preventDefault(),this.state.isDragging=!0,this.state.dragStartX=e.clientX,this.state.dragStartY=e.clientY,this.state.imageStartX=this.state.x,this.state.imageStartY=this.state.y,this.imageContainer&&(this.imageContainer.style.cursor="grabbing"),this.overlay&&(this.overlay.style.cursor="grabbing"),this.dragHandler&&this.mouseUpHandler&&(document.addEventListener("mousemove",this.dragHandler,{passive:!0}),document.addEventListener("mouseup",this.mouseUpHandler,{once:!0}))}))}cleanupDragEvents(){this.dragHandler&&document.removeEventListener("mousemove",this.dragHandler),this.mouseUpHandler&&document.removeEventListener("mouseup",this.mouseUpHandler)}bindEvents(){this.delegationHandler=e=>{if(this.overlay)if("keydown"===e.type&&this.options.enableKeyboard){const t=e;switch(t.key){case"Escape":this.close();break;case"+":case"=":t.preventDefault(),this.zoomIn();break;case"-":t.preventDefault(),this.zoomOut();break;case"0":t.preventDefault(),this.resetState()}}else if("wheel"===e.type){const t=e;t.preventDefault(),t.deltaY<0?this.zoomIn():this.zoomOut()}},document.addEventListener("keydown",this.delegationHandler),document.addEventListener("wheel",this.delegationHandler,{passive:!1})}zoomIn(){this.state.zoom=Math.min(this.state.zoom+this.options.zoomStep,this.options.maxZoom),this.updateImageTransform()}zoomOut(){this.state.zoom=Math.max(this.state.zoom-this.options.zoomStep,this.options.minZoom),this.updateImageTransform()}resetState(){this.state.zoom=1,this.state.x=0,this.state.y=0,this.updateImageTransform()}updateImageTransform(){this.imageContainer&&(this.imageContainer.style.transform=`\n      translate(${this.state.x}px, ${this.state.y}px) \n      scale(${this.state.zoom})\n    `)}addStyles(){this.styleElement||(this.styleElement=document.createElement("style"),this.styleElement.textContent="\n        .image-viewer-control-btn {\n          background: rgba(0, 0, 0, 0.8);\n          color: white;\n          border: none;\n          padding: 8px 14px;\n          border-radius: 4px;\n          cursor: pointer;\n          font-size: 18px;\n          transition: background 0.2s;\n          user-select: none;\n        }\n        \n        .image-viewer-control-btn:hover {\n          background: rgba(0, 0, 0, 0.4);\n        }\n        \n        .image-viewer-close-btn {\n          position: absolute;\n          top: 20px;\n          right: 30px;\n          color: white;\n          font-size: 18px;\n          cursor: pointer;\n          z-index: 10001;\n          user-select: none;\n          width: 36px;\n          height: 34px;\n          display: flex;\n          border-radius: 50%;\n          justify-content: center;\n          background: rgba(0, 0, 0, 0.8);\n          transition: all 0.2s ease;\n          line-height: 34px;\n          padding-bottom:2px;\n        }\n        \n        .image-viewer-close-btn:hover {\n          background: rgba(0, 0, 0, 0.4);\n        }\n      ",document.head.appendChild(this.styleElement))}removeStyles(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}destroy(){this.close(),this.removeStyles()}}const GY=e=>{const t=e,{insertFragment:n,drop:r,pointerUp:o}=t,i=new HY({zoomStep:.3,minZoom:.1,maxZoom:5,enableKeyboard:!0});return t.insertFragment=(t,r,o)=>{var i;if(null!=(i=null==t?void 0:t.files)&&i.length&&$x(t.files[0].type)){const n=t.files[0];return void u4(e,n,r,!1)}n(t,r,o)},t.drop=t=>{var n,o;if(null!=(o=null==(n=t.dataTransfer)?void 0:n.files)&&o.length){const n=t.dataTransfer.files[0];if($x(n.type)){const r=At(e,Ot(e,t.x,t.y));return u4(e,n,r,!0),!0}}return r(t)},t.pointerUp=t=>{const n=fo(e);if(n&&!Gu(e)&&!gi(e)&&!cc(e)){const r=At(e,Ot(e,t.x,t.y)),o=Qa(e,r);o&&Me.isMindElement(e,o)&&Me.hasImage(o)&&qD(e,o,r)&&n===o&&i.open(o.data.image.url)}o(t)},t},CA=e=>{const t=e;return t.renderImage=(e,t)=>{const n=z3.createRoot(e);n.render(b.jsx(jx,{...t}));let r={...t};return{destroy:()=>{setTimeout(()=>{n.unmount()},0)},update:e=>{r={...r,...e},n.render(b.jsx(jx,{...r}))}}},GY(t)},Rs=xt.forwardRef(({children:e,padding:t,className:n,style:r,...o},i)=>b.jsx("div",{className:Dn("island",n),style:{"--padding":t,...r},ref:i,...o,children:e})),jY=j.forwardRef(({children:e,gap:t,align:n,justifyContent:r,className:o,style:i},a)=>b.jsx("div",{className:Dn("stack stack_horizontal",o),style:{"--gap":t,alignItems:n,justifyContent:r,...i},ref:a,children:e})),$Y=j.forwardRef(({children:e,gap:t,align:n,justifyContent:r,className:o,style:i},a)=>b.jsx("div",{className:Dn("stack stack_vertical",o),style:{"--gap":t,justifyItems:n,justifyContent:r,...i},ref:a,children:e})),Wo={Row:jY,Col:$Y};class WY extends DOMException{constructor(e="Request Aborted"){super(e,"AbortError")}}const zY=e=>!!e&&"object"==typeof e&&"then"in e&&"catch"in e&&"finally"in e,VY=(e,t,{checkForDefaultPrevented:n=!0}={})=>function(r){if(null==e||e(r),!n||null==r||!r.defaultPrevented)return null==t?void 0:t(r)},UY=e=>{const t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[1]);let o=r.length;const i=new Uint8Array(o);for(;o--;)i[o]=r.charCodeAt(o);return new Blob([i],{type:n})},XY=(e,t={})=>PI(e,{fillStyle:"transparent",inlineStyleClassNames:".extend,.emojis,.text",padding:20,ratio:4,...t});function KY(e,t){const n=document.createElement("a"),r=window.URL.createObjectURL(e);n.href=r,n.download=t,document.body.append(n),n.click(),window.URL.revokeObjectURL(r),n.remove()}const xA=(e,t)=>{const n=[];for(let r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n},Wx=e=>(e=e.replace(/\bAlt\b/i,"Alt").replace(/\bShift\b/i,"Shift").replace(/\b(Enter|Return)\b/i,"Enter"),s3||MO?e.replace(/\bCtrlOrCmd\b/gi,"Cmd").replace(/\bAlt\b/i,"Option"):e.replace(/\bCtrlOrCmd\b/gi,"Ctrl")),qn=xt.forwardRef((e,t)=>{const{id:n}={id:"drawnix"},r=xt.useRef(null);xt.useImperativeHandle(t,()=>r.current);const o=`tool-icon_size_${e.size||"medium"}`,[i,a]=j.useState(!1),s=j.useRef(!0),l=async t=>{var n;const r="onClick"in e&&(null==(n=e.onClick)?void 0:n.call(e,t));if(zY(r))try{a(!0),await r}catch(e){if(!(e instanceof WY))throw e;console.warn(e)}finally{s.current&&a(!1)}};j.useEffect(()=>(s.current=!0,()=>{s.current=!1}),[]);const u=j.useRef(null);if("button"===e.type||"icon"===e.type||"submit"===e.type){const t="icon"===e.type?"button":e.type;return b.jsxs("button",{className:Dn("tool-icon_type_button",o,e.className,e.visible&&!e.hidden?"tool-icon_type_button--show":"tool-icon_type_button--hide",{"tool-icon":!e.hidden,"tool-icon--selected":e.selected}),style:e.style,"data-testid":e["data-testid"],hidden:e.hidden,title:e.title,"aria-label":e["aria-label"],type:t,onClick:l,onPointerDown:t=>{var n;null==(n=e.onPointerDown)||n.call(e,{pointerType:t.pointerType||null,event:t})},onPointerUp:t=>{var n;null==(n=e.onPointerUp)||n.call(e,{pointerType:t.pointerType||null})},ref:r,disabled:i||!!e.disabled,children:[(e.icon||e.label)&&b.jsxs("div",{className:"tool-icon__icon","aria-hidden":"true","aria-disabled":!!e.disabled,children:[e.icon||e.label,e.keyBindingLabel&&b.jsx("span",{className:"tool-icon__keybinding",children:e.keyBindingLabel})]}),e.showAriaLabel&&b.jsx("div",{className:"tool-icon__label",children:e["aria-label"]}),e.children&&b.jsx("div",{className:"tool-icon__icon",children:e.children})]})}return b.jsxs("label",{className:Dn("tool-icon",e.className),title:e.title,onPointerDown:t=>{var n;u.current=t.pointerType||null,null==(n=e.onPointerDown)||n.call(e,{pointerType:t.pointerType||null,event:t})},onPointerUp:t=>{var n;null==(n=e.onPointerUp)||n.call(e,{pointerType:t.pointerType||null}),requestAnimationFrame(()=>{u.current=null})},children:[b.jsx("input",{className:`tool-icon_type_radio ${o}`,type:"radio",name:e.name,"aria-label":e["aria-label"],"aria-keyshortcuts":e["aria-keyshortcuts"],"data-testid":e["data-testid"],id:`${n}-${e.id}`,onChange:()=>{var t;null==(t=e.onChange)||t.call(e,{pointerType:u.current})},checked:e.checked,ref:r}),b.jsxs("div",{className:"tool-icon__icon",children:[e.icon,e.keyBindingLabel&&b.jsx("span",{className:"tool-icon__keybinding",children:e.keyBindingLabel})]})]})});qn.displayName="ToolButton";const Kt=e=>e,YY=Kt(b.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"Hand",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M8.44583468,0.500225887 C9.07406934,0.510185679 9.54739531,0.839591366 9.86192311,1.34305279 C9.89696656,1.39914649 9.92878401,1.45492964 9.9576026,1.50991157 L9.9576026,1.50991157 L10.0210033,1.64201027 L10.061978,1.62350755 C10.1972891,1.56834247 10.3444107,1.53218464 10.5027907,1.51755353 L10.5027907,1.51755353 L10.6649031,1.51019133 C11.4883708,1.51019133 12.0208782,1.99343346 12.3023042,2.66393278 C12.3903714,2.87392911 12.4344191,3.10047818 12.4339446,3.3257952 L12.4339446,3.3257952 L12.4360033,3.80501027 L12.5160535,3.78341501 C12.6124478,3.76124046 12.7138812,3.74739854 12.820201,3.74250274 L12.820201,3.74250274 L12.9833264,3.74194533 C13.6121166,3.7657478 14.0645887,4.0801724 14.3087062,4.56112689 C14.4521117,4.8436609 14.4987984,5.11349437 14.4999262,5.33449618 L14.4999262,5.33449618 L14.3922653,12.049414 C14.3784752,12.909177 14.0717787,13.7360948 13.5212406,14.3825228 C13.4055676,14.5183496 13.2843697,14.643961 13.1582361,14.7596335 C12.4634771,15.3967716 11.755103,15.6538706 11.1897396,15.7000055 L11.1897396,15.7000055 L7.4723083,15.6798158 C7.14276373,15.634268 6.81580098,15.5154267 6.49455235,15.3472501 C6.25643701,15.2225944 6.06881706,15.0975452 5.88705731,14.9494308 L5.88705731,14.9494308 L2.55198782,11.500873 C2.39559475,11.3769079 2.17626793,11.1748532 1.9548636,10.9139403 C1.57867502,10.4706225 1.33501976,10.0139923 1.30330257,9.52833025 C1.28093191,9.18578476 1.37200912,8.85641102 1.5826788,8.56872564 C1.82538833,8.23725279 2.12881965,8.02107162 2.47470569,7.92957033 C2.95807982,7.80169771 3.42705723,7.92468989 3.86509644,8.18731167 C4.04431391,8.29475961 4.1816109,8.40304483 4.26225571,8.47866867 L4.26225571,8.47866867 L4.61400328,8.79701027 L4.57247249,3.59275349 L4.57628524,3.46204923 C4.5897691,3.23444442 4.64087578,2.95701848 4.75937106,2.66961597 C5.01017272,2.06131302 5.49670227,1.64692543 6.21363856,1.60818786 C6.44223508,1.59583681 6.65042099,1.62176802 6.83696985,1.68057551 L6.83696985,1.68057551 L6.86400328,1.69001027 C6.88501862,1.63593052 6.90764242,1.58175442 6.9331867,1.52672633 L6.9331867,1.52672633 L7.01883595,1.35955614 C7.31549194,0.832047939 7.79476072,0.48993549 8.44583468,0.500225887 Z M8.42684173,1.70001476 C8.26825412,1.69756905 8.16339456,1.77242008 8.06478367,1.94776814 C8.03967773,1.99241107 8.01831703,2.03811495 8.00083464,2.07855067 L8.00083464,2.07855067 L7.94879157,2.2035905 L7.94354455,2.20731401 L7.943,3.161 L7.97170661,3.16123746 L7.97170661,7.60991883 L6.77170661,7.60991883 L6.771,3.338 L6.74362358,3.33880359 C6.74284189,3.29064626 6.73014163,3.20282206 6.7002616,3.11094408 L6.66446012,3.01903385 C6.58982025,2.85766739 6.49843292,2.79455071 6.27838133,2.80644008 C6.07001018,2.81769881 5.95642108,2.91444507 5.86877664,3.12702089 C5.79792279,3.29887224 5.77228127,3.48655908 5.77246879,3.58977183 L5.77246879,3.58977183 L5.83613619,11.5252021 L3.41863956,9.33477657 L3.31637296,9.25979571 L3.24805011,9.21651224 C3.06096922,9.10434987 2.89279975,9.06024641 2.78159879,9.0896637 C2.71007735,9.10858411 2.63607367,9.1613084 2.55086305,9.27768211 C2.51020424,9.33320478 2.49638061,9.38319687 2.50075171,9.4501283 C2.51206889,9.62341997 2.64503022,9.87260054 2.86983366,10.1375191 C3.03268834,10.3294345 3.19762053,10.4813781 3.35554956,10.6131022 L3.35554956,10.6131022 L6.68454317,14.0569073 C6.71106575,14.0773808 6.74806086,14.1037158 6.79369091,14.1335929 L6.79369091,14.1335929 L6.95464838,14.2315311 L7.05111031,14.2841211 C7.25978123,14.3933622 7.46253523,14.4670573 7.55685495,14.4854708 L7.55685495,14.4854708 L11.1407985,14.5022108 C11.1503576,14.5013899 11.1627905,14.4997539 11.1779002,14.4971772 L11.1779002,14.4971772 L11.2991076,14.4694224 C11.3491682,14.4557375 11.4083624,14.437284 11.4751158,14.4130563 C11.769383,14.3062543 12.066676,14.1324596 12.3471758,13.8752234 C12.4371203,13.7927386 12.5240597,13.7026333 12.607654,13.6044743 C12.9760464,13.1719172 13.183059,12.6137678 13.1924195,12.030173 L13.1924195,12.030173 L13.3000132,5.32832551 C13.2997939,5.29016685 13.2826117,5.19085946 13.2386527,5.10425262 C13.1843838,4.99733326 13.1129774,4.94771265 12.9379578,4.94108739 C12.6814739,4.93138871 12.534132,5.11189595 12.4756792,5.39480062 L12.4768718,7.52734922 L11.2768718,7.52734922 L11.276,5.688 L11.2462883,5.6883208 L11.2339541,3.32771285 C11.2341,3.2560396 11.2209054,3.18817621 11.1957482,3.12818892 C11.0820579,2.85732094 10.9199288,2.71019133 10.6649031,2.71019133 C10.456829,2.71019133 10.3197487,2.87378067 10.2524297,3.11264939 L10.2530225,7.512783 L9.05302254,7.512783 L9.053,3.288 L9.01554331,3.28724203 L8.98800328,2.29901027 L8.9629175,2.22263368 C8.94515567,2.17417174 8.92167756,2.11937748 8.8924232,2.06330056 L8.8924232,2.06330056 L8.84420197,1.9788544 C8.72758855,1.79219249 8.59915015,1.70280728 8.42684173,1.70001476 Z"})})})),qY=Kt(b.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"selection",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M1.38232686,2.38218266 L5.4143451,14.2246629 L5.45540179,14.3136477 C5.6738376,14.7029541 6.25143564,14.7273637 6.49230627,14.3232393 L8.11486037,11.5990854 L10.8833927,14.4351257 C11.1162256,14.673686 11.4988798,14.6767204 11.7354668,14.4418826 L14.1933351,12.0021862 L14.263123,11.9192708 C14.4260847,11.6858139 14.4039042,11.3621027 14.1959502,11.1531274 L11.3598604,8.30408543 L14.0003903,6.44278167 C14.4042341,6.15799031 14.3099422,5.5344405 13.8399491,5.38178897 L2.13023795,1.60291226 C1.65322163,1.44797961 1.20794286,1.91192855 1.38232686,2.38218266 Z M2.93689198,3.12556703 L12.3288604,6.15308543 L10.0883903,7.73315528 L10.0121747,7.79676991 C9.78025886,8.02517222 9.77056424,8.40723513 10.0088753,8.64671667 L12.9218604,11.5730854 L11.3198604,13.1630854 L8.42938714,10.2026992 L8.35682877,10.1391916 C8.07802132,9.93187508 7.66955488,10.0042813 7.48460396,10.3145856 L6.10286037,12.6310854 L2.93689198,3.12556703 Z"})})})),ZY=Kt(b.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"Mind",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M14.5,1.5 C15.3284271,1.5 16,2.17157288 16,3 L16,4.5 C16,5.32842712 15.3284271,6 14.5,6 L10.5,6 C9.70541385,6 9.05512881,5.38217354 9.00332687,4.60070262 L7.75,4.6 C6.70187486,4.6 5.75693372,5.0417832 5.09122946,5.7492967 L5.5,5.75 C6.32842712,5.75 7,6.42157288 7,7.25 L7,8.75 C7,9.57842712 6.32842712,10.25 5.5,10.25 L4.69703093,10.2512226 C5.3493111,11.2442937 6.47308134,11.9 7.75,11.9 L9.004,11.9 L9.00686658,11.85554 C9.07955132,11.0948881 9.72030388,10.5 10.5,10.5 L14.5,10.5 C15.3284271,10.5 16,11.1715729 16,12 L16,13.5 C16,14.3284271 15.3284271,15 14.5,15 L10.5,15 C9.67157288,15 9,14.3284271 9,13.5 L9,13.1 L7.75,13.1 C5.78479628,13.1 4.09258608,11.9311758 3.33061658,10.2507745 L1.5,10.25 C0.671572875,10.25 0,9.57842712 0,8.75 L0,7.25 C0,6.42157288 0.671572875,5.75 1.5,5.75 L3.5932906,5.74973863 C4.44206161,4.34167555 5.98606075,3.4 7.75,3.4 L9,3.4 L9,3 C9,2.17157288 9.67157288,1.5 10.5,1.5 L14.5,1.5 Z M14.5,11.7 L10.5,11.7 C10.3343146,11.7 10.2,11.8343146 10.2,12 L10.2,13.5 C10.2,13.6656854 10.3343146,13.8 10.5,13.8 L14.5,13.8 C14.6656854,13.8 14.8,13.6656854 14.8,13.5 L14.8,12 C14.8,11.8343146 14.6656854,11.7 14.5,11.7 Z M5.5,6.95 L1.5,6.95 C1.33431458,6.95 1.2,7.08431458 1.2,7.25 L1.2,8.75 C1.2,8.91568542 1.33431458,9.05 1.5,9.05 L5.5,9.05 C5.66568542,9.05 5.8,8.91568542 5.8,8.75 L5.8,7.25 C5.8,7.08431458 5.66568542,6.95 5.5,6.95 Z M14.5,2.7 L10.5,2.7 C10.3343146,2.7 10.2,2.83431458 10.2,3 L10.2,4.5 C10.2,4.66568542 10.3343146,4.8 10.5,4.8 L14.5,4.8 C14.6656854,4.8 14.8,4.66568542 14.8,4.5 L14.8,3 C14.8,2.83431458 14.6656854,2.7 14.5,2.7 Z"})})})),QY=Kt(b.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"geometry",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M9.3,6.7 L1.7,6.7 L1.7,14.3 L9.3,14.3 L9.3,6.7 Z M10.5,9.8 C12.8748244,9.8 14.8,7.87482442 14.8,5.5 C14.8,3.12517558 12.8748244,1.2 10.5,1.2 C8.12517558,1.2 6.2,3.12517558 6.2,5.5 L9.5,5.5 C10.0522847,5.5 10.5,5.94771525 10.5,6.5 L10.5,9.8 Z M10.5,14.5 C10.5,15.0522847 10.0522847,15.5 9.5,15.5 L1.5,15.5 C0.94771525,15.5 0.5,15.0522847 0.5,14.5 L0.5,6.5 C0.5,5.94771525 0.94771525,5.5 1.5,5.5 L5,5.5 C5,2.46243388 7.46243388,0 10.5,0 C13.5375661,0 16,2.46243388 16,5.5 C16,8.53756612 13.5375661,11 10.5,11 L10.5,14.5 Z"})})})),JY=Kt(b.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"font",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M4.75,14.5069828 C4.41862915,14.5069828 4.15,14.2383536 4.15,13.9069828 C4.15,13.5756119 4.41862915,13.3069828 4.75,13.3069828 L7.3993606,13.306 L7.3993606,2.7 L2.7113606,2.7 L2.7113606,4.10415313 C2.7113606,4.40238689 2.49377099,4.64979988 2.20868371,4.69630014 L2.1113606,4.70415313 C1.77998975,4.70415313 1.5113606,4.43552397 1.5113606,4.10415313 L1.5113606,2.1 C1.5113606,1.76862915 1.77998975,1.5 2.1113606,1.5 L13.8810378,1.5 C14.2124087,1.5 14.4810378,1.76862915 14.4810378,2.1 L14.4810378,4.10415313 C14.4810378,4.43552397 14.2124087,4.70415313 13.8810378,4.70415313 C13.549667,4.70415313 13.2810378,4.43552397 13.2810378,4.10415313 L13.2810378,2.7 L8.5993606,2.7 L8.5993606,13.306 L11.25,13.3069828 C11.5813708,13.3069828 11.85,13.5756119 11.85,13.9069828 C11.85,14.2383536 11.5813708,14.5069828 11.25,14.5069828 L4.75,14.5069828 Z"})})})),eq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{id:"straight-line",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M8.55595221,-1.5261864 C8.88741773,-1.5261864 9.15621426,-1.25765205 9.15653772,-0.926186684 L9.16739175,10.3828136 L10.9946787,10.3836977 C11.2708211,10.3836977 11.4946787,10.6075553 11.4946787,10.8836977 C11.4946787,10.9607525 11.4768694,11.0367648 11.4426413,11.1058002 L8.8378495,16.3594519 C8.7642512,16.5078936 8.58425218,16.5685662 8.43581043,16.4949679 C8.37895485,16.4667786 8.33250284,16.4212859 8.30313336,16.3650308 L5.56226325,11.1150985 C5.43446412,10.8703088 5.52930372,10.5682659 5.77409341,10.4404667 C5.84552557,10.4031736 5.92491301,10.3836977 6.0054942,10.3836977 L7.96739175,10.3828136 L7.95653772,-0.926186684 C7.95621467,-1.25723416 8.22431979,-1.52586306 8.55536727,-1.52618611 Z",id:"",transform:"translate(8.500035, 7.500035) rotate(-135.000000) translate(-8.500035, -7.500035) "})})})),tq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:b.jsx("path",{d:"M3 3h18v18H3z",stroke:"currentColor",strokeWidth:"2",fill:"none"})})),nq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:b.jsx("g",{id:"terminal",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M11,3 C13.7614237,3 16,5.23857625 16,8 C16,10.7614237 13.7614237,13 11,13 L5,13 C2.23857625,13 0,10.7614237 0,8 C0,5.23857625 2.23857625,3 5,3 L11,3 Z M11,4.2 L5,4.2 C2.90131795,4.2 1.2,5.90131795 1.2,8 C1.2,10.0330982 2.79664702,11.6932796 4.8044525,11.7950555 L5,11.8 L11,11.8 C13.098682,11.8 14.8,10.098682 14.8,8 C14.8,5.96690176 13.203353,4.30672042 11.1955475,4.20494454 L11,4.2 Z"})})})),rq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{id:"ellipse",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M8,1 C11.8659932,1 15,4.13400675 15,8 C15,11.8659932 11.8659932,15 8,15 C4.13400675,15 1,11.8659932 1,8 C1,4.13400675 4.13400675,1 8,1 Z M8,2.2 C4.79674845,2.2 2.2,4.79674845 2.2,8 C2.2,11.2032515 4.79674845,13.8 8,13.8 C11.2032515,13.8 13.8,11.2032515 13.8,8 C13.8,4.79674845 11.2032515,2.2 8,2.2 Z"})})})),iq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{id:"triangle",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M8.23125547,1.21366135 C8.3114266,1.25857939 8.37766784,1.32472334 8.42270367,1.40482837 L15.6471754,14.2549655 C15.7825042,14.4956743 15.6970768,14.800513 15.456368,14.9358418 C15.3815505,14.977905 15.2971646,15 15.2113335,15 L0.787227066,15 C0.511084691,15 0.287227066,14.7761424 0.287227066,14.5 C0.287227066,14.414418 0.309194147,14.3302684 0.351025556,14.2556064 L7.55066033,1.40546924 C7.6856352,1.1645618 7.99034802,1.07868648 8.23125547,1.21366135 Z M7.98695902,3.07926294 L1.98095902,13.7992629 L14.014959,13.7992629 L7.98695902,3.07926294 Z"})})})),oq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M13.7636471,2.6449804 C13.7716713,2.69552516 13.7718878,2.74700226 13.7642892,2.79761274 L12.3875778,11.9671885 C12.3550099,12.1841069 12.184864,12.3544698 11.9679874,12.3873141 L2.78433018,13.7781116 C2.511301,13.8194599 2.25644773,13.6316454 2.21509947,13.3586162 C2.20737253,13.307594 2.20759072,13.2556831 2.21574631,13.2047277 L3.67471119,4.08923146 C3.70888725,3.87570215 3.87646006,3.70834166 4.09003253,3.67443635 L13.1914362,2.22955927 C13.4641633,2.18626298 13.7203508,2.37225335 13.7636471,2.6449804 Z M12.4355704,3.5645263 L4.77957044,4.7795263 L3.55157044,12.4485263 L11.2775704,11.2775263 L12.4355704,3.5645263 Z",transform:"translate(7.989647, 8.003560) rotate(-315.000000) translate(-7.989647, -8.003560) "})})})),sq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M15.3062871,3.5 C15.5824294,3.5 15.8062871,3.72385763 15.8062871,4 C15.8062871,4.05374105 15.7976231,4.10713065 15.7806287,4.15811388 L13.113962,12.1581139 C13.045905,12.362285 12.8548356,12.5 12.6396204,12.5 L0.693712943,12.5 C0.417570568,12.5 0.193712943,12.2761424 0.193712943,12 C0.193712943,11.946259 0.202376883,11.8928694 0.219371294,11.8418861 L2.88603796,3.84188612 C2.95409498,3.63771505 3.14516441,3.5 3.36037961,3.5 L15.3062871,3.5 Z M14.335,4.7 L3.864,4.7 L1.664,11.3 L12.134,11.3 L14.335,4.7 Z"})})})),aq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M11,3 C13.7614237,3 16,5.23857625 16,8 C16,10.7614237 13.7614237,13 11,13 L5,13 C2.23857625,13 0,10.7614237 0,8 C0,5.23857625 2.23857625,3 5,3 L11,3 Z M11,4.2 L5,4.2 C2.90131795,4.2 1.2,5.90131795 1.2,8 C1.2,10.0330982 2.79664702,11.6932796 4.8044525,11.7950555 L5,11.8 L11,11.8 C13.098682,11.8 14.8,10.098682 14.8,8 C14.8,5.96690176 13.203353,4.30672042 11.1955475,4.20494454 L11,4.2 Z"})})})),uq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M8.55595221,-1.5261864 C8.88741773,-1.5261864 9.15621426,-1.25765205 9.15653772,-0.926186684 L9.16739175,10.3828136 L10.9946787,10.3836977 C11.2708211,10.3836977 11.4946787,10.6075553 11.4946787,10.8836977 C11.4946787,10.9607525 11.4768694,11.0367648 11.4426413,11.1058002 L8.8378495,16.3594519 C8.7642512,16.5078936 8.58425218,16.5685662 8.43581043,16.4949679 C8.37895485,16.4667786 8.33250284,16.4212859 8.30313336,16.3650308 L5.56226325,11.1150985 C5.43446412,10.8703088 5.52930372,10.5682659 5.77409341,10.4404667 C5.84552557,10.4031736 5.92491301,10.3836977 6.0054942,10.3836977 L7.96739175,10.3828136 L7.95653772,-0.926186684 C7.95621467,-1.25723416 8.22431979,-1.52586306 8.55536727,-1.52618611 Z",transform:"translate(8.500035, 7.500035) rotate(-135.000000) translate(-8.500035, -7.500035) "})})})),lq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M10.0153197,2.75391207 C10.0923746,2.75391207 10.1683869,2.77172133 10.2374222,2.80594949 L15.4910739,5.41074126 C15.6395156,5.48433956 15.7001882,5.66433859 15.6265899,5.81278033 C15.5984006,5.86963592 15.5529079,5.91608792 15.4966529,5.9454574 L10.2467205,8.68632752 C10.0019308,8.81412664 9.69988791,8.71928704 9.57208878,8.47449735 C9.53479568,8.40306519 9.51531974,8.32367776 9.51531974,8.24309656 L9.51458753,6.62591207 L6.16858753,6.62651279 L6.16914066,12.0061269 C6.16914066,12.3043606 5.95155104,12.5517736 5.66646377,12.5982739 L5.56914066,12.6061269 L0.534587532,12.6061269 C0.203216682,12.6061269 -0.0654124678,12.3374977 -0.0654124678,12.0061269 C-0.0654124678,11.674756 0.203216682,11.4061269 0.534587532,11.4061269 L4.96858753,11.4055128 L4.96914066,6.02651279 C4.96914066,5.72827903 5.18673027,5.48086604 5.47181754,5.43436578 L5.56914066,5.42651279 L9.51458753,5.42591207 L9.51531974,3.25391207 C9.51531974,2.9777697 9.73917736,2.75391207 10.0153197,2.75391207 Z"})})})),cq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M10.0153197,2.75391207 C10.0923746,2.75391207 10.1683869,2.77172133 10.2374222,2.80594949 L15.4910739,5.41074126 C15.6395156,5.48433956 15.7001882,5.66433859 15.6265899,5.81278033 C15.5984006,5.86963592 15.5529079,5.91608792 15.4966529,5.9454574 L10.2467205,8.68632752 C10.0019308,8.81412664 9.69988791,8.71928704 9.57208878,8.47449735 C9.53479568,8.40306519 9.51531974,8.32367776 9.51531974,8.24309656 L9.51423005,6.39035523 C5.97984781,6.85936966 3.21691607,9.08498364 1.18879108,13.1285821 C1.04022695,13.4247836 0.679673152,13.5444674 0.383471635,13.3959033 C0.0872701176,13.2473391 -0.0324136308,12.8867853 0.116150501,12.5905838 C2.34388813,8.14900524 5.48945543,5.65776043 9.51468497,5.18078677 L9.51531974,3.25391207 C9.51531974,2.9777697 9.73917736,2.75391207 10.0153197,2.75391207 Z"})})})),fq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:b.jsxs("g",{strokeWidth:"1.5",children:[b.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),b.jsx("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),b.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),b.jsx("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]})})),hq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:b.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",d:"M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5",strokeWidth:"1.25"})})),dq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:b.jsxs("g",{strokeWidth:"1.25",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",children:[b.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),b.jsx("path",{d:"M15 8h.01"}),b.jsx("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),b.jsx("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),b.jsx("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),b.jsx("path",{d:"M19 16v6"}),b.jsx("path",{d:"M22 19l-3 3l-3 -3"})]})})),gq=Kt(b.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"zoom-out",stroke:"none",fill:"currentColor",strokeWidth:"1",children:b.jsx("path",{fillRule:"nonzero",d:"M6.85,2.73225886e-13 C10.6331505,2.73225886e-13 13.7,3.06684946 13.7,6.85 C13.7,8.54194045 13.0865836,10.0906098 12.0700142,11.2857448 L15.4201976,14.5717081 C15.6567367,14.8037768 15.6603607,15.1836585 15.4282919,15.4201976 C15.1962232,15.6567367 14.8163415,15.6603607 14.5798024,15.4282919 L14.5798024,15.4282919 L11.2163456,12.128262 C10.0309427,13.1099691 8.50937591,13.7 6.85,13.7 C3.06684946,13.7 4.58522109e-14,10.6331505 4.58522109e-14,6.85 C4.58522109e-14,3.06684946 3.06684946,2.73225886e-13 6.85,2.73225886e-13 Z M6.85,1.2 C3.72959116,1.2 1.2,3.72959116 1.2,6.85 C1.2,9.97040884 3.72959116,12.5 6.85,12.5 C8.31753357,12.5 9.65438791,11.9404957 10.6588859,11.0231643 C10.6855412,10.9625408 10.7245275,10.9050898 10.7743982,10.8542584 C10.8288931,10.7987137 10.8915387,10.7560124 10.9585649,10.7261903 C11.9144009,9.71595758 12.5,8.35136579 12.5,6.85 C12.5,3.72959116 9.97040884,1.2 6.85,1.2 Z M4.6,6.2 L9.12944565,6.2 C9.4608165,6.2 9.72944565,6.46862915 9.72944565,6.8 C9.72944565,7.09823376 9.51185604,7.34564675 9.22676876,7.39214701 L9.12944565,7.4 L4.6,7.4 C4.26862915,7.4 4,7.13137085 4,6.8 C4,6.50176624 4.21758961,6.25435325 4.50267688,6.20785299 L4.6,6.2 L9.12944565,6.2 Z"})})})),pq=Kt(b.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"zoom-in",stroke:"none",fill:"currentColor",strokeWidth:"1",children:b.jsx("path",{fillRule:"nonzero",d:"M6.85,-1.81188398e-13 C10.6331505,-1.81188398e-13 13.7,3.06684946 13.7,6.85 C13.7,8.54194045 13.0865836,10.0906098 12.0700142,11.2857448 L15.4201976,14.5717081 C15.6567367,14.8037768 15.6603607,15.1836585 15.4282919,15.4201976 C15.1962232,15.6567367 14.8163415,15.6603607 14.5798024,15.4282919 L14.5798024,15.4282919 L11.2163456,12.128262 C10.0309427,13.1099691 8.50937591,13.7 6.85,13.7 C3.06684946,13.7 4.61852778e-14,10.6331505 4.61852778e-14,6.85 C4.61852778e-14,3.06684946 3.06684946,-1.81188398e-13 6.85,-1.81188398e-13 Z M6.85,1.2 C3.72959116,1.2 1.2,3.72959116 1.2,6.85 C1.2,9.97040884 3.72959116,12.5 6.85,12.5 C8.31753357,12.5 9.65438791,11.9404957 10.6588859,11.0231643 C10.6855412,10.9625408 10.7245275,10.9050898 10.7743982,10.8542584 C10.8288931,10.7987137 10.8915387,10.7560124 10.9585649,10.7261903 C11.9144009,9.71595758 12.5,8.35136579 12.5,6.85 C12.5,3.72959116 9.97040884,1.2 6.85,1.2 Z M6.86472282,3.93527718 C7.16295659,3.93527718 7.41036958,4.15286679 7.45686984,4.43795406 L7.46472282,4.53527718 L7.464,6.19927718 L9.12944565,6.2 C9.42767941,6.2 9.6750924,6.41758961 9.72159266,6.70267688 L9.72944565,6.8 C9.72944565,7.09823376 9.51185604,7.34564675 9.22676876,7.39214701 L9.12944565,7.4 L7.464,7.39927718 L7.46472282,9.06472282 C7.46472282,9.36295659 7.24713321,9.61036958 6.96204594,9.65686984 L6.86472282,9.66472282 C6.56648906,9.66472282 6.31907607,9.44713321 6.27257581,9.16204594 L6.26472282,9.06472282 L6.264,7.39927718 L4.6,7.4 C4.30176624,7.4 4.05435325,7.18241039 4.00785299,6.89732312 L4,6.8 C4,6.50176624 4.21758961,6.25435325 4.50267688,6.20785299 L4.6,6.2 L6.264,6.19927718 L6.26472282,4.53527718 C6.26472282,4.2701805 6.43664548,4.0452385 6.67507642,3.96586557 L6.76739971,3.94313016 L6.86472282,3.93527718 Z"})})})),mq=Kt(b.jsx("svg",{viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"save-file",stroke:"none",fill:"currentColor",children:b.jsx("path",{fillRule:"nonzero",d:"M11.064 9.1l2.645 2.595.03-.029.848.849-3.523 3.323-.848-.848 1.994-1.883H7.5v-1.2h4.712l-1.996-1.958.848-.849zM9.356.3L13.7 3.71V7.9h-1.2l-.001-2.633H8.5V1.5L3.1 1.5a.4.4 0 0 0-.392.32L2.7 1.9v12a.4.4 0 0 0 .32.392l.08.008h3.418v1.2H3.1a1.6 1.6 0 0 1-1.593-1.454L1.5 13.9v-12A1.6 1.6 0 0 1 2.954.307L3.1.3h6.256zM9.7 2.095v1.973l2.51-.001L9.7 2.095z"})})})),vq=Kt(b.jsx("svg",{viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"save-file",stroke:"currentColor",fill:"none",children:b.jsx("path",{d:"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",strokeWidth:"1.25"})})})),yq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"background-color-icon",children:b.jsxs("g",{transform:"translate(1 1)",fillRule:"evenodd",fill:"#000",stroke:"none",children:[b.jsx("circle",{fillOpacity:".04",r:"11",cy:"11",cx:"11"}),b.jsx("path",{d:"M17 20.221V17h3.221A11.06 11.06 0 0 1 17 20.221zm-12 0A11.06 11.06 0 0 1 1.779 17H5v3.221zM20.221 5H17V1.779A11.06 11.06 0 0 1 20.221 5zM9 .181V1H6.411A10.919 10.919 0 0 1 9 .181zM15.589 1H13V.181c.907.167 1.775.445 2.589.819zM13 21.819V21h2.589c-.814.374-1.682.652-2.589.819zm-4 0A10.919 10.919 0 0 1 6.411 21H9v.819zm-8-6.23A10.919 10.919 0 0 1 .181 13H1v2.589zm0-9.178V9H.181C.348 8.093.626 7.225 1 6.411zM21.819 9H21V6.411c.374.814.652 1.682.819 2.589zM21 15.589V13h.819A10.919 10.919 0 0 1 21 15.589zM5 1.779V5H1.779A11.06 11.06 0 0 1 5 1.779zM5 13h4v4H5v-4zm8 0h4v4h-4v-4zM5 5h4v4H5V5zm8 0h4v4h-4V5zm0 12v4H9v-4h4zm8-8v4h-4V9h4zm-8 0v4H9V9h4zM5 9v4H1V9h4zm8-8v4H9V1h4z",fillOpacity:".12"})]})})),wq=Kt(b.jsx("svg",{viewBox:"0 0 32 32",className:"no-color-icon",children:b.jsxs("g",{xmlns:"http://www.w3.org/2000/svg",fillRule:"nonzero",fill:"currentColor",stroke:"none",children:[b.jsx("path",{d:"M2 16c0 7.733 6.267 14 14 14s14-6.267 14-14S23.733 2 16 2 2 8.267 2 16zm-1 0C1 7.716 7.714 1 16 1c8.284 0 15 6.714 15 15 0 8.284-6.714 15-15 15-8.284 0-15-6.714-15-15z"}),b.jsx("path",{d:"M6.354 26.354l-.708-.708 20-20 .708.708z"})]})})),Cq=Kt(b.jsx("svg",{className:"selected-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:b.jsx("polyline",{points:"20 6 9 17 4 12"})})),xq=Kt(b.jsx("svg",{viewBox:"0 0 24 24",className:"stroke-icon",children:b.jsxs("g",{xmlns:"http://www.w3.org/2000/svg",stroke:"none",fillRule:"evenodd",fill:"#000",children:[b.jsx("path",{d:"M12 5a7 7 0 1 0 0 14 7 7 0 0 0 0-14zm0-4c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1z",fillRule:"nonzero",fillOpacity:".04"}),b.jsx("path",{d:"M12 5V1c1.491 0 2.914.297 4.21.835L14.68 5.53A6.979 6.979 0 0 0 12 5zm4.95 2.048l2.828-2.828a11.016 11.016 0 0 1 2.388 3.568l-3.697 1.53a7.01 7.01 0 0 0-1.519-2.27zM19 12h4c0 1.491-.297 2.914-.835 4.21l-3.696-1.53c.342-.826.531-1.73.531-2.68zm-2.05 4.95l2.828 2.828a11.016 11.016 0 0 1-3.567 2.387l-1.532-3.696a7.01 7.01 0 0 0 2.27-1.52zM12 19v4c-1.491 0-2.914-.297-4.21-.835l1.53-3.696c.826.342 1.73.531 2.68.531zm-4.95-2.05l-2.828 2.828a11.016 11.016 0 0 1-2.387-3.567l3.696-1.532a7.01 7.01 0 0 0 1.52 2.27zM5 12H1c0-1.491.297-2.914.835-4.21L5.53 9.32A6.979 6.979 0 0 0 5 12zm2.05-4.95L4.222 4.222a11.016 11.016 0 0 1 3.567-2.387L9.321 5.53a7.01 7.01 0 0 0-2.27 1.52z",fillOpacity:".12"})]})})),Eq=Kt(b.jsx("svg",{viewBox:"0 0 24 24",children:b.jsx("g",{xmlns:"http://www.w3.org/2000/svg",id:"icon-border-white",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",opacity:"0.1",children:b.jsxs("g",{id:"Group",children:[b.jsx("path",{d:"M12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 C6.4771525,2 2,6.4771525 2,12 C2,17.5228475 6.4771525,22 12,22 Z M12,23 C5.92486775,23 1,18.0751322 1,12 C1,5.92486775 5.92486775,1 12,1 C18.0751322,1 23,5.92486775 23,12 C23,18.0751322 18.0751322,23 12,23 Z",fill:"#000000",fillRule:"nonzero"}),b.jsx("path",{d:"M12,19 C15.8659932,19 19,15.8659932 19,12 C19,8.13400675 15.8659932,5 12,5 C8.13400675,5 5,8.13400675 5,12 C5,15.8659932 8.13400675,19 12,19 Z M12,20 C7.581722,20 4,16.418278 4,12 C4,7.581722 7.581722,4 12,4 C16.418278,4 20,7.581722 20,12 C20,16.418278 16.418278,20 12,20 Z",fill:"#000000",fillRule:"nonzero"})]})})})),Pq=Kt(b.jsx("svg",{viewBox:"0 0 24 32",xmlns:"http://www.w3.org/2000/svg",children:b.jsxs("g",{transform:"translate(0 14)",fillRule:"evenodd",fill:"none",children:[b.jsx("path",{d:"M-18-19h60v40h-60z"}),b.jsx("path",{d:"M0 0h24v2H0z",fill:"currentColor"})]})})),Sq=Kt(b.jsx("svg",{viewBox:"0 0 24 32",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{transform:"translate(0 14)",fillRule:"evenodd",fill:"none",children:b.jsx("g",{fill:"currentColor",children:b.jsx("path",{d:"M0 0h6v2H0zM9 0h6v2H9zM18 0h6v2h-6z"})})})})),Tq=Kt(b.jsx("svg",{viewBox:"0 0 24 32",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{transform:"translate(0 14)",fillRule:"evenodd",fill:"none",children:b.jsxs("g",{fill:"currentColor",children:[b.jsx("rect",{rx:"1",height:"2",width:"2"}),b.jsx("rect",{rx:"1",x:"4",height:"2",width:"2"}),b.jsx("rect",{rx:"1",x:"8",height:"2",width:"2"}),b.jsx("rect",{rx:"1",x:"12",height:"2",width:"2"}),b.jsx("rect",{rx:"1",x:"16",height:"2",width:"2"}),b.jsx("rect",{rx:"1",x:"20",height:"2",width:"2"})]})})})),Dq=({currentColor:e})=>b.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",className:"font-color-icon",children:b.jsxs("g",{id:"font-color",strokeWidth:"1",fillRule:"evenodd",stroke:"none",fill:"currentColor",children:[b.jsx("path",{id:"secondary-color",d:"M1.999 15.011h11.998V13.81H1.999z",fill:e||"#333333"}),b.jsx("path",{d:"M6.034 7.59h4.104L8.086 2.297 6.034 7.59zm-.465 1.2l-1.437 3.707H2.845L7.301 1h1.287l-.001.004h.286l4.454 11.492h-1.288L10.603 8.79H5.569z",id:"A"})]})}),Aq=Kt(b.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("g",{id:"undo-cion",transform:"translate(1 1)",children:b.jsx("path",{d:"M3.84 5.825a.6.6 0 0 1 .063.774l-.064.075a.6.6 0 0 1-.774.063l-.074-.063L.176 3.859a.6.6 0 0 1-.064-.775l.064-.074L3.01.176a.6.6 0 0 1 .912.774l-.063.074-1.795 1.794h6.851a5.1 5.1 0 0 1 .216 10.196l-.216.004h-4a.6.6 0 0 1-.097-1.192l.097-.008h4a3.9 3.9 0 0 0 .201-7.795l-.2-.005H2.033l1.805 1.807z",id:"undo-icon-path"})})})})),Bq=Kt(b.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("g",{id:"redo-cion",transform:"matrix(-1 0 0 1 15.015 1)",children:b.jsx("path",{d:"M3.84 5.825a.6.6 0 0 1 .063.774l-.064.075a.6.6 0 0 1-.774.063l-.074-.063L.176 3.859a.6.6 0 0 1-.064-.775l.064-.074L3.01.176a.6.6 0 0 1 .912.774l-.063.074-1.795 1.794h6.851a5.1 5.1 0 0 1 .216 10.196l-.216.004h-4a.6.6 0 0 1-.097-1.192l.097-.008h4a3.9 3.9 0 0 0 .201-7.795l-.2-.005H2.033l1.805 1.807z",id:"redo-icon-path"})})})})),O3=Kt(b.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",children:b.jsx("path",{strokeWidth:"1.25",d:"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"})})),Rq=Kt(b.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:b.jsxs("g",{strokeWidth:"1.25",children:[b.jsx("path",{d:"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"}),b.jsx("path",{d:"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"})]})})),EA=Kt(b.jsx("svg",{viewBox:"0 0 1024 1024",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("path",{d:"M170.794667 896c3.456 0 6.912-0.426667 10.325333-1.28l170.666667-42.666667c7.509333-1.877333 14.378667-5.76 19.84-11.221333L896.128 316.330667c16.128-16.128 25.002667-37.546667 25.002667-60.330667s-8.874667-44.202667-25.002667-60.330667L828.458667 128c-32.256-32.256-88.405333-32.256-120.661334 0L183.296 652.501333a42.794667 42.794667 0 0 0-11.221333 19.797334l-42.666667 170.666666A42.666667 42.666667 0 0 0 170.794667 896z m597.333333-707.669333L835.797333 256l-67.669333 67.669333L700.458667 256l67.669333-67.669333zM251.989333 704.469333l388.138667-388.138666L707.797333 384l-388.181333 388.138667-90.197333 22.528 22.570666-90.197334z"})})),Mq=Kt(b.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"image",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M10.496 7c-.824 0-1.572-.675-1.498-1.5 0-.825.674-1.5 1.498-1.5.823 0 1.497.675 1.497 1.5S11.319 7 10.496 7zM13.8 9.476V2.2H2.2v5.432l.1-.078C3.132 6.904 4.029 6.5 5 6.5c.823 0 1.552.27 2.342.778.226.145.449.304.735.518.06.045.546.413.69.52 1.634 1.21 2.833 1.6 4.798 1.207l.235-.047zm0 1.523V10.7c-5 1-6.3-3-8.8-3-1.5 0-2.8 1.6-2.8 1.6v4.6h11.6V11zM14 1c.6 0 1 .536 1 1.071v11.784c0 .642-.4 1.071-1 1.071H2c-.6 0-1-.429-1-1.07V2.07c0-.535.4-1.07 1-1.07h12z"})})})),PA=Kt(b.jsx("svg",{stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:b.jsxs("g",{strokeWidth:1.8,fill:"none",children:[b.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),b.jsx("path",{d:"M12 3l-4 7h8z"}),b.jsx("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),b.jsx("path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"})]})})),bq=Kt(b.jsx("svg",{stroke:"currentColor",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("path",{stroke:"none",fill:"currentColor",d:"M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z"})})),kq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M14.85,2.5 C15.4851275,2.5 16,3.01487254 16,3.65 L16,12.35 C16,12.9851275 15.4851275,13.5 14.85,13.5 L1.15,13.5 C0.514872538,13.5 0,12.9851275 0,12.35 L0,3.65 C0,3.01487254 0.514872538,2.5 1.15,2.5 L14.85,2.5 Z M14.85,3.7 L1.15,3.7 C1.17735931,3.7 1.2,3.72264069 1.2,3.75 L1.2,12.25 C1.2,12.2773593 1.17735931,12.3 1.15,12.3 L14.85,12.3 C14.8226407,12.3 14.8,12.2773593 14.8,12.25 L14.8,3.75 C14.8,3.72264069 14.8226407,3.7 14.85,3.7 Z M3.5,10.5 L3.5,5.5 L5.25,5.5 L7,7.8 L8.75,5.5 L10.5,5.5 L10.5,10.5 L8.75,10.5 L8.75,7.5 L7,9.8 L5.25,7.5 L5.25,10.5 L3.5,10.5 Z M12.5,10.5 L11,8.5 L12.5,8.5 L12.5,5.5 L11,5.5 L12.5,5.5 L12.5,8.5 L14,8.5 L12.5,10.5 Z"})})})),Oq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M12.253 4.13h-1.2v-1a2.8 2.8 0 0 0-5.6 0v4a2.8 2.8 0 0 0 2.8 2.8v1.2a4 4 0 0 1-4-4v-4a4 4 0 0 1 8 0v1zm-8 8h1.2v1a2.8 2.8 0 0 0 5.6 0v-4a2.8 2.8 0 0 0-2.8-2.8v-1.2a4 4 0 0 1 4 4v4a4 4 0 0 1-8 0v-1z",transform:"rotate(46 8.253 8.13)"})})})),Iq=[{icon:tq,title:"Rectangle  R",pointer:pt.rectangle},{icon:rq,title:"Ellipse  O",pointer:pt.ellipse},{icon:iq,title:"Triangle",pointer:pt.triangle},{icon:nq,title:"Terminal",pointer:gt.terminal},{icon:oq,title:"Diamond",pointer:pt.diamond},{icon:sq,title:"Parallelogram",pointer:pt.parallelogram},{icon:aq,title:"RoundRectangle",pointer:pt.roundRectangle}],Fq=xA(Iq,5),Lq=({onPointerUp:e})=>{const t=Zr();return b.jsx(Rs,{padding:1,children:b.jsx(Wo.Col,{gap:1,children:Fq.map((n,r)=>b.jsx(Wo.Row,{gap:1,children:n.map((n,r)=>b.jsx(qn,{className:Dn({fillable:!1}),type:"icon",size:"small",visible:!0,icon:n.icon,title:n.title,"aria-label":n.title,onPointerDown:()=>{na(t,Gi.dnd),vn.updatePointerType(t,n.pointer)},onPointerUp:()=>{na(t,Gi.drawing),e(n.pointer)}},r))},r))})})},_q=[{icon:uq,title:"Straight Arrow Line",pointer:Fn.straight},{icon:lq,title:"Elbow Arrow Line",pointer:Fn.elbow},{icon:cq,title:"Curve Arrow Line",pointer:Fn.curve}],Nq=({onPointerUp:e})=>{const t=Zr();return b.jsx(Rs,{padding:1,children:b.jsx(Wo.Row,{gap:1,children:_q.map((n,r)=>b.jsx(qn,{className:Dn({fillable:!1}),type:"icon",size:"small",visible:!0,icon:n.icon,title:n.title,"aria-label":n.title,onPointerDown:()=>{na(t,Gi.drawing),vn.updatePointerType(t,n.pointer)},onPointerUp:()=>{e(n.pointer)}},r))})})};function Bv(){return typeof window<"u"}function Dc(e){return SA(e)?(e.nodeName||"").toLowerCase():"#document"}function zo(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function nu(e){var t;return null==(t=(SA(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function SA(e){return!!Bv()&&(e instanceof Node||e instanceof zo(e).Node)}function hr(e){return!!Bv()&&(e instanceof Element||e instanceof zo(e).Element)}function Kr(e){return!!Bv()&&(e instanceof HTMLElement||e instanceof zo(e).HTMLElement)}function l4(e){return!(!Bv()||typeof ShadowRoot>"u")&&(e instanceof ShadowRoot||e instanceof zo(e).ShadowRoot)}function Ip(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=As(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function Hq(e){return["table","td","th"].includes(Dc(e))}function Rv(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function sy(e){const t=Mv(),n=hr(e)?As(e):e;return["transform","translate","scale","rotate","perspective"].some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some(e=>(n.willChange||"").includes(e))||["paint","layout","strict","content"].some(e=>(n.contain||"").includes(e))}function Gq(e){let t=el(e);for(;Kr(t)&&!mc(t);){if(sy(t))return t;if(Rv(t))return null;t=el(t)}return null}function Mv(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function mc(e){return["html","body","#document"].includes(Dc(e))}function As(e){return zo(e).getComputedStyle(e)}function bv(e){return hr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function el(e){if("html"===Dc(e))return e;const t=e.assignedSlot||e.parentNode||l4(e)&&e.host||nu(e);return l4(t)?t.host:t}function TA(e){const t=el(e);return mc(t)?e.ownerDocument?e.ownerDocument.body:e.body:Kr(t)&&Ip(t)?t:TA(t)}function ac(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const o=TA(e),i=o===(null==(r=e.ownerDocument)?void 0:r.body),a=zo(o);if(i){const e=c4(a);return t.concat(a,a.visualViewport||[],Ip(o)?o:[],e&&n?ac(e):[])}return t.concat(o,ac(o,[],n))}function c4(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function kf(e){let t=e.activeElement;for(;null!=(null==(n=t)||null==(n=n.shadowRoot)?void 0:n.activeElement);){var n;t=t.shadowRoot.activeElement}return t}function Ho(e,t){if(!e||!t)return!1;const n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&l4(n)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}function DA(){const e=navigator.userAgentData;return null!=e&&e.platform?e.platform:navigator.platform}function AA(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(e=>{let{brand:t,version:n}=e;return t+"/"+n}).join(" "):navigator.userAgent}function jq(e){return!(0!==e.mozInputSource||!e.isTrusted)||(f4()&&e.pointerType?"click"===e.type&&1===e.buttons:0===e.detail&&!e.pointerType)}function $q(e){return!zq()&&(!f4()&&0===e.width&&0===e.height||f4()&&1===e.width&&1===e.height&&0===e.pressure&&0===e.detail&&"mouse"===e.pointerType||e.width<1&&e.height<1&&0===e.pressure&&0===e.detail&&"touch"===e.pointerType)}function Wq(){return/apple/i.test(navigator.vendor)}function f4(){const e=/android/i;return e.test(DA())||e.test(AA())}function zq(){return AA().includes("jsdom/")}function zx(e,t){return["mouse","pen"].includes(e)}function Vq(e){return"nativeEvent"in e}function Uq(e){return e.matches("html,body")}function Js(e){return(null==e?void 0:e.ownerDocument)||document}function L5(e,t){if(null==t)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return null!=n.target&&t.contains(n.target)}function If(e){return"composedPath"in e?e.composedPath()[0]:e.target}const Xq="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function BA(e){return Kr(e)&&e.matches(Xq)}function _5(e){e.preventDefault(),e.stopPropagation()}function Kq(e){return!!e&&("combobox"===e.getAttribute("role")&&BA(e))}const I3=Math.min,zf=Math.max,F3=Math.round,Dm=Math.floor,Wa=e=>({x:e,y:e}),Yq={left:"right",right:"left",bottom:"top",top:"bottom"},qq={start:"end",end:"start"};function Vx(e,t,n){return zf(e,I3(t,n))}function kv(e,t){return"function"==typeof e?e(t):e}function eh(e){return e.split("-")[0]}function Ov(e){return e.split("-")[1]}function RA(e){return"x"===e?"y":"x"}function MA(e){return"y"===e?"height":"width"}function S0(e){return["top","bottom"].includes(eh(e))?"y":"x"}function bA(e){return RA(S0(e))}function Zq(e,t,n){void 0===n&&(n=!1);const r=Ov(e),o=bA(e),i=MA(o);let a="x"===o?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=L3(a)),[a,L3(a)]}function Qq(e){const t=L3(e);return[h4(e),t,h4(t)]}function h4(e){return e.replace(/start|end/g,e=>qq[e])}function Jq(e,t,n){const r=["left","right"],o=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?i:a;default:return[]}}function eZ(e,t,n,r){const o=Ov(e);let i=Jq(eh(e),"start"===n,r);return o&&(i=i.map(e=>e+"-"+o),t&&(i=i.concat(i.map(h4)))),i}function L3(e){return e.replace(/left|right|bottom|top/g,e=>Yq[e])}function tZ(e){return{top:0,right:0,bottom:0,left:0,...e}}function nZ(e){return"number"!=typeof e?tZ(e):{top:e,right:e,bottom:e,left:e}}function _3(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}
/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var rZ=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],N3=rZ.join(","),kA=typeof Element>"u",T0=kA?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,H3=!kA&&Element.prototype.getRootNode?function(e){var t;return null==e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}:function(e){return null==e?void 0:e.ownerDocument},G3=function e(t,n){var r;void 0===n&&(n=!0);var o=null==t||null===(r=t.getAttribute)||void 0===r?void 0:r.call(t,"inert");return""===o||"true"===o||n&&t&&e(t.parentNode)},iZ=function(e){var t,n=null==e||null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,"contenteditable");return""===n||"true"===n},oZ=function(e,t,n){if(G3(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(N3));return t&&T0.call(e,N3)&&r.unshift(e),r=r.filter(n)},sZ=function e(t,n,r){for(var o=[],i=Array.from(t);i.length;){var a=i.shift();if(!G3(a,!1))if("SLOT"===a.tagName){var s=a.assignedElements(),l=e(s.length?s:a.children,!0,r);r.flatten?o.push.apply(o,l):o.push({scopeParent:a,candidates:l})}else{T0.call(a,N3)&&r.filter(a)&&(n||!t.includes(a))&&o.push(a);var u=a.shadowRoot||"function"==typeof r.getShadowRoot&&r.getShadowRoot(a),c=!G3(u,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(a));if(u&&c){var d=e(!0===u?a.children:u.children,!0,r);r.flatten?o.push.apply(o,d):o.push({scopeParent:a,candidates:d})}else i.unshift.apply(i,a.children)}}return o},OA=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},IA=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||iZ(e))&&!OA(e)?0:e.tabIndex},aZ=function(e,t){var n=IA(e);return n<0&&t&&!OA(e)?0:n},uZ=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},FA=function(e){return"INPUT"===e.tagName},lZ=function(e){return FA(e)&&"hidden"===e.type},cZ=function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some(function(e){return"SUMMARY"===e.tagName})},fZ=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]},hZ=function(e){if(!e.name)return!0;var t,n=e.form||H3(e),r=function(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')};if(typeof window<"u"&&typeof window.CSS<"u"&&"function"==typeof window.CSS.escape)t=r(window.CSS.escape(e.name));else try{t=r(e.name)}catch(e){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",e.message),!1}var o=fZ(t,e.form);return!o||o===e},dZ=function(e){return FA(e)&&"radio"===e.type},gZ=function(e){return dZ(e)&&!hZ(e)},pZ=function(e){var t,n,r,o,i=e&&H3(e),a=null===(t=i)||void 0===t?void 0:t.host,s=!1;if(i&&i!==e)for(s=!!(null!==(n=a)&&void 0!==n&&null!==(r=n.ownerDocument)&&void 0!==r&&r.contains(a)||null!=e&&null!==(o=e.ownerDocument)&&void 0!==o&&o.contains(e));!s&&a;){var l,u,c;s=!(null===(u=a=null===(l=i=H3(a))||void 0===l?void 0:l.host)||void 0===u||null===(c=u.ownerDocument)||void 0===c||!c.contains(a))}return s},Ux=function(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;return 0===n&&0===r},mZ=function(e,t){var n=t.displayCheck,r=t.getShadowRoot;if("hidden"===getComputedStyle(e).visibility)return!0;var o=T0.call(e,"details>summary:first-of-type")?e.parentElement:e;if(T0.call(o,"details:not([open]) *"))return!0;if(n&&"full"!==n&&"legacy-full"!==n){if("non-zero-area"===n)return Ux(e)}else{if("function"==typeof r){for(var i=e;e;){var a=e.parentElement,s=H3(e);if(a&&!a.shadowRoot&&!0===r(a))return Ux(e);e=e.assignedSlot?e.assignedSlot:a||s===e.ownerDocument?a:s.host}e=i}if(pZ(e))return!e.getClientRects().length;if("legacy-full"!==n)return!0}return!1},vZ=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var n=0;n<t.children.length;n++){var r=t.children.item(n);if("LEGEND"===r.tagName)return!!T0.call(t,"fieldset[disabled] *")||!r.contains(e)}return!0}t=t.parentElement}return!1},yZ=function(e,t){return!(t.disabled||G3(t)||lZ(t)||mZ(t,e)||cZ(t)||vZ(t))},d4=function(e,t){return!(gZ(t)||IA(t)<0||!yZ(e,t))},wZ=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},CZ=function e(t){var n=[],r=[];return t.forEach(function(t,o){var i=!!t.scopeParent,a=i?t.scopeParent:t,s=aZ(a,i),l=i?e(t.candidates):a;0===s?i?n.push.apply(n,l):n.push(a):r.push({documentOrder:o,tabIndex:s,item:t,isScope:i,content:l})}),r.sort(uZ).reduce(function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e},[]).concat(n)},Iv=function(e,t){var n;return n=(t=t||{}).getShadowRoot?sZ([e],t.includeContainer,{filter:d4.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:wZ}):oZ(e,t.includeContainer,d4.bind(null,t)),CZ(n)},xZ=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==T0.call(e,N3)&&d4(t,e)};function Xx(e,t,n){let{reference:r,floating:o}=e;const i=S0(t),a=bA(t),s=MA(a),l=eh(t),u="y"===i,c=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,h=r[s]/2-o[s]/2;let f;switch(l){case"top":f={x:c,y:r.y-o.height};break;case"bottom":f={x:c,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:d};break;case"left":f={x:r.x-o.width,y:d};break;default:f={x:r.x,y:r.y}}switch(Ov(t)){case"start":f[a]-=h*(n&&u?-1:1);break;case"end":f[a]+=h*(n&&u?-1:1)}return f}const EZ=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:a}=n,s=i.filter(Boolean),l=await(null==a.isRTL?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:o}),{x:c,y:d}=Xx(u,r,l),h=r,f={},p=0;for(let n=0;n<s.length;n++){const{name:i,fn:g}=s[n],{x:m,y:v,data:y,reset:b}=await g({x:c,y:d,initialPlacement:r,placement:h,strategy:o,middlewareData:f,rects:u,platform:a,elements:{reference:e,floating:t}});c=m??c,d=v??d,f={...f,[i]:{...f[i],...y}},b&&p<=50&&(p++,"object"==typeof b&&(b.placement&&(h=b.placement),b.rects&&(u=!0===b.rects?await a.getElementRects({reference:e,floating:t,strategy:o}):b.rects),({x:c,y:d}=Xx(u,h,l))),n=-1)}return{x:c,y:d,placement:h,strategy:o,middlewareData:f}};async function LA(e,t){var n;void 0===t&&(t={});const{x:r,y:o,platform:i,rects:a,elements:s,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=kv(t,e),p=nZ(f),g=s[h?"floating"===d?"reference":"floating":d],m=_3(await i.getClippingRect({element:null==(n=await(null==i.isElement?void 0:i.isElement(g)))||n?g:g.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(s.floating)),boundary:u,rootBoundary:c,strategy:l})),v="floating"===d?{x:r,y:o,width:a.floating.width,height:a.floating.height}:a.reference,y=await(null==i.getOffsetParent?void 0:i.getOffsetParent(s.floating)),b=await(null==i.isElement?void 0:i.isElement(y))&&await(null==i.getScale?void 0:i.getScale(y))||{x:1,y:1},w=_3(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:v,offsetParent:y,strategy:l}):v);return{top:(m.top-w.top+p.top)/b.y,bottom:(w.bottom-m.bottom+p.bottom)/b.y,left:(m.left-w.left+p.left)/b.x,right:(w.right-m.right+p.right)/b.x}}const PZ=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:i,rects:a,initialPlacement:s,platform:l,elements:u}=t,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...m}=kv(e,t);if(null!=(n=i.arrow)&&n.alignmentOffset)return{};const v=eh(o),y=S0(s),b=eh(s)===s,w=await(null==l.isRTL?void 0:l.isRTL(u.floating)),x=h||(b||!g?[L3(s)]:Qq(s)),C="none"!==p;!h&&C&&x.push(...eZ(s,g,p,w));const E=[s,...x],D=await LA(t,m),S=[];let P=(null==(r=i.flip)?void 0:r.overflows)||[];if(c&&S.push(D[v]),d){const e=Zq(o,a,w);S.push(D[e[0]],D[e[1]])}if(P=[...P,{placement:o,overflows:S}],!S.every(e=>e<=0)){var T,A;const e=((null==(T=i.flip)?void 0:T.index)||0)+1,t=E[e];if(t)return{data:{index:e,overflows:P},reset:{placement:t}};let n=null==(A=P.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:A.placement;if(!n)switch(f){case"bestFit":{var M;const e=null==(M=P.filter(e=>{if(C){const t=S0(e.placement);return t===y||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:M[0];e&&(n=e);break}case"initialPlacement":n=s}if(o!==n)return{reset:{placement:n}}}return{}}}};async function SZ(e,t){const{placement:n,platform:r,elements:o}=e,i=await(null==r.isRTL?void 0:r.isRTL(o.floating)),a=eh(n),s=Ov(n),l="y"===S0(n),u=["left","top"].includes(a)?-1:1,c=i&&l?-1:1,d=kv(t,e);let{mainAxis:h,crossAxis:f,alignmentAxis:p}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&"number"==typeof p&&(f="end"===s?-1*p:p),l?{x:f*c,y:h*u}:{x:h*u,y:f*c}}const TZ=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:i,placement:a,middlewareData:s}=t,l=await SZ(t,e);return a===(null==(n=s.offset)?void 0:n.placement)&&null!=(r=s.arrow)&&r.alignmentOffset?{}:{x:o+l.x,y:i+l.y,data:{...l,placement:a}}}}},DZ=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:i=!0,crossAxis:a=!1,limiter:s={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=kv(e,t),u={x:n,y:r},c=await LA(t,l),d=S0(eh(o)),h=RA(d);let f=u[h],p=u[d];if(i){const e="y"===h?"bottom":"right";f=Vx(f+c["y"===h?"top":"left"],f,f-c[e])}if(a){const e="y"===d?"bottom":"right";p=Vx(p+c["y"===d?"top":"left"],p,p-c[e])}const g=s.fn({...t,[h]:f,[d]:p});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[h]:i,[d]:a}}}}}};function _A(e){const t=As(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=Kr(e),i=o?e.offsetWidth:n,a=o?e.offsetHeight:r,s=F3(n)!==i||F3(r)!==a;return s&&(n=i,r=a),{width:n,height:r,$:s}}function ay(e){return hr(e)?e:e.contextElement}function c0(e){const t=ay(e);if(!Kr(t))return Wa(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:i}=_A(t);let a=(i?F3(n.width):n.width)/r,s=(i?F3(n.height):n.height)/o;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}const AZ=Wa(0);function NA(e){const t=zo(e);return Mv()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:AZ}function BZ(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==zo(e))&&t}function th(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const o=e.getBoundingClientRect(),i=ay(e);let a=Wa(1);t&&(r?hr(r)&&(a=c0(r)):a=c0(e));const s=BZ(i,n,r)?NA(i):Wa(0);let l=(o.left+s.x)/a.x,u=(o.top+s.y)/a.y,c=o.width/a.x,d=o.height/a.y;if(i){const e=zo(i),t=r&&hr(r)?zo(r):r;let n=e,o=c4(n);for(;o&&r&&t!==n;){const e=c0(o),t=o.getBoundingClientRect(),r=As(o),i=t.left+(o.clientLeft+parseFloat(r.paddingLeft))*e.x,a=t.top+(o.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,u*=e.y,c*=e.x,d*=e.y,l+=i,u+=a,n=zo(o),o=c4(n)}}return _3({width:c,height:d,x:l,y:u})}function uy(e,t){const n=bv(e).scrollLeft;return t?t.left+n:th(nu(e)).left+n}function HA(e,t,n){void 0===n&&(n=!1);const r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-(n?0:uy(e,r)),y:r.top+t.scrollTop}}function RZ(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const i="fixed"===o,a=nu(r),s=!!t&&Rv(t.floating);if(r===a||s&&i)return n;let l={scrollLeft:0,scrollTop:0},u=Wa(1);const c=Wa(0),d=Kr(r);if((d||!d&&!i)&&(("body"!==Dc(r)||Ip(a))&&(l=bv(r)),Kr(r))){const e=th(r);u=c0(r),c.x=e.x+r.clientLeft,c.y=e.y+r.clientTop}const h=!a||d||i?Wa(0):HA(a,l,!0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x+h.x,y:n.y*u.y-l.scrollTop*u.y+c.y+h.y}}function MZ(e){return Array.from(e.getClientRects())}function bZ(e){const t=nu(e),n=bv(e),r=e.ownerDocument.body,o=zf(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=zf(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+uy(e);const s=-n.scrollTop;return"rtl"===As(r).direction&&(a+=zf(t.clientWidth,r.clientWidth)-o),{width:o,height:i,x:a,y:s}}function kZ(e,t){const n=zo(e),r=nu(e),o=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,s=0,l=0;if(o){i=o.width,a=o.height;const e=Mv();(!e||e&&"fixed"===t)&&(s=o.offsetLeft,l=o.offsetTop)}return{width:i,height:a,x:s,y:l}}function OZ(e,t){const n=th(e,!0,"fixed"===t),r=n.top+e.clientTop,o=n.left+e.clientLeft,i=Kr(e)?c0(e):Wa(1);return{width:e.clientWidth*i.x,height:e.clientHeight*i.y,x:o*i.x,y:r*i.y}}function Kx(e,t,n){let r;if("viewport"===t)r=kZ(e,n);else if("document"===t)r=bZ(nu(e));else if(hr(t))r=OZ(t,n);else{const n=NA(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return _3(r)}function GA(e,t){const n=el(e);return!(n===t||!hr(n)||mc(n))&&("fixed"===As(n).position||GA(n,t))}function IZ(e,t){const n=t.get(e);if(n)return n;let r=ac(e,[],!1).filter(e=>hr(e)&&"body"!==Dc(e)),o=null;const i="fixed"===As(e).position;let a=i?el(e):e;for(;hr(a)&&!mc(a);){const t=As(a),n=sy(a);!n&&"fixed"===t.position&&(o=null),(i?!n&&!o:!n&&"static"===t.position&&o&&["absolute","fixed"].includes(o.position)||Ip(a)&&!n&&GA(e,a))?r=r.filter(e=>e!==a):o=t,a=el(a)}return t.set(e,r),r}function FZ(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const i=[..."clippingAncestors"===n?Rv(t)?[]:IZ(t,this._c):[].concat(n),r],a=i[0],s=i.reduce((e,n)=>{const r=Kx(t,n,o);return e.top=zf(r.top,e.top),e.right=I3(r.right,e.right),e.bottom=I3(r.bottom,e.bottom),e.left=zf(r.left,e.left),e},Kx(t,a,o));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}}function LZ(e){const{width:t,height:n}=_A(e);return{width:t,height:n}}function _Z(e,t,n){const r=Kr(t),o=nu(t),i="fixed"===n,a=th(e,!0,i,t);let s={scrollLeft:0,scrollTop:0};const l=Wa(0);if(r||!r&&!i)if(("body"!==Dc(t)||Ip(o))&&(s=bv(t)),r){const e=th(t,!0,i,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else o&&(l.x=uy(o));const u=!o||r||i?Wa(0):HA(o,s);return{x:a.left+s.scrollLeft-l.x-u.x,y:a.top+s.scrollTop-l.y-u.y,width:a.width,height:a.height}}function N5(e){return"static"===As(e).position}function Yx(e,t){if(!Kr(e)||"fixed"===As(e).position)return null;if(t)return t(e);let n=e.offsetParent;return nu(e)===n&&(n=n.ownerDocument.body),n}function jA(e,t){const n=zo(e);if(Rv(e))return n;if(!Kr(e)){let t=el(e);for(;t&&!mc(t);){if(hr(t)&&!N5(t))return t;t=el(t)}return n}let r=Yx(e,t);for(;r&&Hq(r)&&N5(r);)r=Yx(r,t);return r&&mc(r)&&N5(r)&&!sy(r)?n:r||Gq(e)||n}const NZ=async function(e){const t=this.getOffsetParent||jA,n=this.getDimensions,r=await n(e.floating);return{reference:_Z(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function HZ(e){return"rtl"===As(e).direction}const GZ={convertOffsetParentRelativeRectToViewportRelativeRect:RZ,getDocumentElement:nu,getClippingRect:FZ,getOffsetParent:jA,getElementRects:NZ,getClientRects:MZ,getDimensions:LZ,getScale:c0,isElement:hr,isRTL:HZ};function $A(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function jZ(e,t){let n,r=null;const o=nu(e);function i(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function a(s,l){void 0===s&&(s=!1),void 0===l&&(l=1),i();const u=e.getBoundingClientRect(),{left:c,top:d,width:h,height:f}=u;if(s||t(),!h||!f)return;const p={rootMargin:-Dm(d)+"px "+-Dm(o.clientWidth-(c+h))+"px "+-Dm(o.clientHeight-(d+f))+"px "+-Dm(c)+"px",threshold:zf(0,I3(1,l))||1};let g=!0;function m(t){const r=t[0].intersectionRatio;if(r!==l){if(!g)return a();r?a(!1,r):n=setTimeout(()=>{a(!1,1e-7)},1e3)}1===r&&!$A(u,e.getBoundingClientRect())&&a(),g=!1}try{r=new IntersectionObserver(m,{...p,root:o.ownerDocument})}catch{r=new IntersectionObserver(m,p)}r.observe(e)}(!0),i}function $Z(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:a="function"==typeof ResizeObserver,layoutShift:s="function"==typeof IntersectionObserver,animationFrame:l=!1}=r,u=ay(e),c=o||i?[...u?ac(u):[],...ac(t)]:[];c.forEach(e=>{o&&e.addEventListener("scroll",n,{passive:!0}),i&&e.addEventListener("resize",n)});const d=u&&s?jZ(u,n):null;let h=-1,f=null;a&&(f=new ResizeObserver(e=>{let[r]=e;r&&r.target===u&&f&&(f.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var e;null==(e=f)||e.observe(t)})),n()}),u&&!l&&f.observe(u),f.observe(t));let p,g=l?th(e):null;return l&&function t(){const r=th(e);g&&!$A(g,r)&&n(),g=r,p=requestAnimationFrame(t)}(),n(),()=>{var e;c.forEach(e=>{o&&e.removeEventListener("scroll",n),i&&e.removeEventListener("resize",n)}),null==d||d(),null==(e=f)||e.disconnect(),f=null,l&&cancelAnimationFrame(p)}}const WZ=TZ,zZ=DZ,VZ=PZ,UZ=(e,t,n)=>{const r=new Map,o={platform:GZ,...n},i={...o.platform,_c:r};return EZ(e,t,{...o,platform:i})};var Xm=typeof document<"u"?j.useLayoutEffect:j.useEffect;function j3(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!==r--;)if(!j3(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;0!==r--;){const n=o[r];if(!("_owner"===n&&e.$$typeof||j3(e[n],t[n])))return!1}return!0}return e!=e&&t!=t}function WA(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function qx(e,t){const n=WA(e);return Math.round(t*n)/n}function H5(e){const t=j.useRef(e);return Xm(()=>{t.current=e}),t}function XZ(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:i,floating:a}={},transform:s=!0,whileElementsMounted:l,open:u}=e,[c,d]=j.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,f]=j.useState(r);j3(h,r)||f(r);const[p,g]=j.useState(null),[m,v]=j.useState(null),y=j.useCallback(e=>{e!==C.current&&(C.current=e,g(e))},[]),b=j.useCallback(e=>{e!==E.current&&(E.current=e,v(e))},[]),w=i||p,x=a||m,C=j.useRef(null),E=j.useRef(null),D=j.useRef(c),S=null!=l,P=H5(l),T=H5(o),A=H5(u),M=j.useCallback(()=>{if(!C.current||!E.current)return;const e={placement:t,strategy:n,middleware:h};T.current&&(e.platform=T.current),UZ(C.current,E.current,e).then(e=>{const t={...e,isPositioned:!1!==A.current};k.current&&!j3(D.current,t)&&(D.current=t,l8.flushSync(()=>{d(t)}))})},[h,t,n,T,A]);Xm(()=>{!1===u&&D.current.isPositioned&&(D.current.isPositioned=!1,d(e=>({...e,isPositioned:!1})))},[u]);const k=j.useRef(!1);Xm(()=>(k.current=!0,()=>{k.current=!1}),[]),Xm(()=>{if(w&&(C.current=w),x&&(E.current=x),w&&x){if(P.current)return P.current(w,x,M);M()}},[w,x,M,P,S]);const B=j.useMemo(()=>({reference:C,floating:E,setReference:y,setFloating:b}),[y,b]),F=j.useMemo(()=>({reference:w,floating:x}),[w,x]),I=j.useMemo(()=>{const e={position:n,left:0,top:0};if(!F.floating)return e;const t=qx(F.floating,c.x),r=qx(F.floating,c.y);return s?{...e,transform:"translate("+t+"px, "+r+"px)",...WA(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}},[n,s,F.floating,c.x,c.y]);return j.useMemo(()=>({...c,update:M,refs:B,elements:F,floatingStyles:I}),[c,M,B,F,I])}const ly=(e,t)=>({...WZ(e),options:[e,t]}),KZ=(e,t)=>({...zZ(e),options:[e,t]}),cy=(e,t)=>({...VZ(e),options:[e,t]});function Fv(e){return j.useMemo(()=>e.every(e=>null==e)?null:t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})},e)}const zA={...lb},YZ=zA.useInsertionEffect,qZ=YZ||(e=>e());function ec(e){const t=j.useRef(()=>{});return qZ(()=>{t.current=e}),j.useCallback(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)},[])}var $o=typeof document<"u"?j.useLayoutEffect:j.useEffect;function fp(){return fp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fp.apply(this,arguments)}let Zx=!1,ZZ=0;const Qx=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+ZZ++;function QZ(){const[e,t]=j.useState(()=>Zx?Qx():void 0);return $o(()=>{null==e&&t(Qx())},[]),j.useEffect(()=>{Zx=!0},[]),e}const JZ=zA.useId,Fp=JZ||QZ;function eQ(){const e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach(e=>e(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,(null==(r=e.get(t))?void 0:r.filter(e=>e!==n))||[])}}}const tQ=j.createContext(null),nQ=j.createContext(null),VA=()=>{var e;return(null==(e=j.useContext(tQ))?void 0:e.id)||null},fy=()=>j.useContext(nQ);function hp(e){return"data-floating-ui-"+e}function G5(e){const t=j.useRef(e);return $o(()=>{t.current=e}),t}let Jx=0;function Vd(e,t){void 0===t&&(t={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:o=!1}=t;r&&cancelAnimationFrame(Jx);const i=()=>null==e?void 0:e.focus({preventScroll:n});o?i():Jx=requestAnimationFrame(i)}function rQ(e,t){var n;let r=[],o=null==(n=e.find(e=>e.id===t))?void 0:n.parentId;for(;o;){const t=e.find(e=>e.id===o);o=null==t?void 0:t.parentId,t&&(r=r.concat(t))}return r}function Ig(e,t){let n=e.filter(e=>{var n;return e.parentId===t&&(null==(n=e.context)?void 0:n.open)}),r=n;for(;r.length;)r=e.filter(e=>{var t;return null==(t=r)?void 0:t.some(t=>{var n;return e.parentId===t.id&&(null==(n=e.context)?void 0:n.open)})}),n=n.concat(r);return n}let Ud=new WeakMap,Am=new WeakSet,Bm={},j5=0;const iQ=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,UA=e=>e&&(e.host||UA(e.parentNode)),oQ=(e,t)=>t.map(t=>{if(e.contains(t))return t;const n=UA(t);return e.contains(n)?n:null}).filter(e=>null!=e);function sQ(e,t,n,r){const o="data-floating-ui-inert",i=r?"inert":n?"aria-hidden":null,a=oQ(t,e),s=new Set,l=new Set(a),u=[];Bm[o]||(Bm[o]=new WeakMap);const c=Bm[o];return a.forEach(function e(t){!t||s.has(t)||(s.add(t),t.parentNode&&e(t.parentNode))}),function e(t){!t||l.has(t)||[].forEach.call(t.children,t=>{if("script"!==Dc(t))if(s.has(t))e(t);else{const e=i?t.getAttribute(i):null,n=null!==e&&"false"!==e,r=(Ud.get(t)||0)+1,a=(c.get(t)||0)+1;Ud.set(t,r),c.set(t,a),u.push(t),1===r&&n&&Am.add(t),1===a&&t.setAttribute(o,""),!n&&i&&t.setAttribute(i,"true")}})}(t),s.clear(),j5++,()=>{u.forEach(e=>{const t=(Ud.get(e)||0)-1,n=(c.get(e)||0)-1;Ud.set(e,t),c.set(e,n),t||(!Am.has(e)&&i&&e.removeAttribute(i),Am.delete(e)),n||e.removeAttribute(o)}),j5--,j5||(Ud=new WeakMap,Ud=new WeakMap,Am=new WeakSet,Bm={})}}function eE(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);const r=Js(e[0]).body;return sQ(e.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,t,n)}const dp=()=>({getShadowRoot:!0,displayCheck:"function"==typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function XA(e,t){const n=Iv(e,dp());"prev"===t&&n.reverse();const r=n.indexOf(kf(Js(e)));return n.slice(r+1)[0]}function KA(){return XA(document.body,"next")}function YA(){return XA(document.body,"prev")}function Fg(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!Ho(n,r)}function aQ(e){Iv(e,dp()).forEach(e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")})}function tE(e){e.querySelectorAll("[data-tabindex]").forEach(e=>{const t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")})}const Lv={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let uQ;function nE(e){"Tab"===e.key&&(e.target,clearTimeout(uQ))}const $3=j.forwardRef(function(e,t){const[n,r]=j.useState();$o(()=>(Wq()&&r("button"),document.addEventListener("keydown",nE),()=>{document.removeEventListener("keydown",nE)}),[]);const o={ref:t,tabIndex:0,role:n,"aria-hidden":!n||void 0,[hp("focus-guard")]:"",style:Lv};return j.createElement("span",fp({},e,o))}),qA=j.createContext(null),rE=hp("portal");function lQ(e){void 0===e&&(e={});const{id:t,root:n}=e,r=Fp(),o=QA(),[i,a]=j.useState(null),s=j.useRef(null);return $o(()=>()=>{null==i||i.remove(),queueMicrotask(()=>{s.current=null})},[i]),$o(()=>{if(!r||s.current)return;const e=t?document.getElementById(t):null;if(!e)return;const n=document.createElement("div");n.id=r,n.setAttribute(rE,""),e.appendChild(n),s.current=n,a(n)},[t,r]),$o(()=>{if(null===n||!r||s.current)return;let e=n||(null==o?void 0:o.portalNode);e&&!hr(e)&&(e=e.current),e=e||document.body;let i=null;t&&(i=document.createElement("div"),i.id=t,e.appendChild(i));const l=document.createElement("div");l.id=r,l.setAttribute(rE,""),e=i||e,e.appendChild(l),s.current=l,a(l)},[t,n,r,o]),i}function ZA(e){const{children:t,id:n,root:r,preserveTabOrder:o=!0}=e,i=lQ({id:n,root:r}),[a,s]=j.useState(null),l=j.useRef(null),u=j.useRef(null),c=j.useRef(null),d=j.useRef(null),h=null==a?void 0:a.modal,f=null==a?void 0:a.open,p=!!a&&!a.modal&&a.open&&o&&!(!r&&!i);return j.useEffect(()=>{if(i&&o&&!h)return i.addEventListener("focusin",e,!0),i.addEventListener("focusout",e,!0),()=>{i.removeEventListener("focusin",e,!0),i.removeEventListener("focusout",e,!0)};function e(e){i&&Fg(e)&&("focusin"===e.type?tE:aQ)(i)}},[i,o,h]),j.useEffect(()=>{i&&(f||tE(i))},[f,i]),j.createElement(qA.Provider,{value:j.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:l,afterOutsideRef:u,beforeInsideRef:c,afterInsideRef:d,portalNode:i,setFocusManagerState:s}),[o,i])},p&&i&&j.createElement($3,{"data-type":"outside",ref:l,onFocus:e=>{if(Fg(e,i)){var t;null==(t=c.current)||t.focus()}else{const e=YA()||(null==a?void 0:a.refs.domReference.current);null==e||e.focus()}}}),p&&i&&j.createElement("span",{"aria-owns":i.id,style:Lv}),i&&l8.createPortal(t,i),p&&i&&j.createElement($3,{"data-type":"outside",ref:u,onFocus:e=>{if(Fg(e,i)){var t;null==(t=d.current)||t.focus()}else{const t=KA()||(null==a?void 0:a.refs.domReference.current);null==t||t.focus(),null!=a&&a.closeOnFocusOut&&(null==a||a.onOpenChange(!1,e.nativeEvent,"focus-out"))}}}))}const QA=()=>j.useContext(qA),g4="data-floating-ui-focusable";function cQ(e){return e?e.hasAttribute(g4)?e:e.querySelector("["+g4+"]")||e:null}const fQ=20;let Of=[];function $5(e){Of=Of.filter(e=>e.isConnected);let t=e;if(t&&"body"!==Dc(t)){if(!xZ(t,dp())){const e=Iv(t,dp())[0];e&&(t=e)}Of.push(t),Of.length>20&&(Of=Of.slice(-20))}}function iE(){return Of.slice().reverse().find(e=>e.isConnected)}const hQ=j.forwardRef(function(e,t){return j.createElement("button",fp({},e,{type:"button",ref:t,tabIndex:-1,style:Lv}))});function JA(e){const{context:t,children:n,disabled:r=!1,order:o=["content"],guards:i=!0,initialFocus:a=0,returnFocus:s=!0,restoreFocus:l=!1,modal:u=!0,visuallyHiddenDismiss:c=!1,closeOnFocusOut:d=!0}=e,{open:h,refs:f,nodeId:p,onOpenChange:g,events:m,dataRef:v,floatingId:y,elements:{domReference:b,floating:w}}=t,x="number"==typeof a&&a<0,C=Kq(b)&&x,E=!iQ()||i,D=G5(o),S=G5(a),P=G5(s),T=fy(),A=QA(),M=j.useRef(null),k=j.useRef(null),B=j.useRef(!1),F=j.useRef(!1),I=j.useRef(-1),R=null!=A,_=cQ(w),O=ec(function(e){return void 0===e&&(e=_),e?Iv(e,dp()):[]}),L=ec(e=>{const t=O(e);return D.current.map(e=>b&&"reference"===e?b:_&&"floating"===e?_:t).filter(Boolean).flat()});function N(e){return!r&&c&&u?j.createElement(hQ,{ref:"start"===e?M:k,onClick:e=>g(!1,e.nativeEvent)},"string"==typeof c?c:"Dismiss"):null}j.useEffect(()=>{if(r||!u)return;function e(e){if("Tab"===e.key){Ho(_,kf(Js(_)))&&0===O().length&&!C&&_5(e);const t=L(),n=If(e);"reference"===D.current[0]&&n===b&&(_5(e),e.shiftKey?Vd(t[t.length-1]):Vd(t[1])),"floating"===D.current[1]&&n===_&&e.shiftKey&&(_5(e),Vd(t[0]))}}const t=Js(_);return t.addEventListener("keydown",e),()=>{t.removeEventListener("keydown",e)}},[r,b,_,u,D,C,O,L]),j.useEffect(()=>{if(!r&&w)return w.addEventListener("focusin",e),()=>{w.removeEventListener("focusin",e)};function e(e){const t=If(e),n=O().indexOf(t);-1!==n&&(I.current=n)}},[r,w,O]),j.useEffect(()=>{if(!r&&d)return w&&Kr(b)?(b.addEventListener("focusout",t),b.addEventListener("pointerdown",e),w.addEventListener("focusout",t),()=>{b.removeEventListener("focusout",t),b.removeEventListener("pointerdown",e),w.removeEventListener("focusout",t)}):void 0;function e(){F.current=!0,setTimeout(()=>{F.current=!1})}function t(e){const t=e.relatedTarget;queueMicrotask(()=>{const n=!(Ho(b,t)||Ho(w,t)||Ho(t,w)||Ho(null==A?void 0:A.portalNode,t)||null!=t&&t.hasAttribute(hp("focus-guard"))||T&&(Ig(T.nodesRef.current,p).find(e=>{var n,r;return Ho(null==(n=e.context)?void 0:n.elements.floating,t)||Ho(null==(r=e.context)?void 0:r.elements.domReference,t)})||rQ(T.nodesRef.current,p).find(e=>{var n,r;return(null==(n=e.context)?void 0:n.elements.floating)===t||(null==(r=e.context)?void 0:r.elements.domReference)===t})));if(l&&n&&kf(Js(_))===Js(_).body){Kr(_)&&_.focus();const e=I.current,t=O(),n=t[e]||t[t.length-1]||_;Kr(n)&&n.focus()}(C||!u)&&t&&n&&!F.current&&t!==iE()&&(B.current=!0,g(!1,e,"focus-out"))})}},[r,b,w,_,u,p,T,A,g,d,l,O,C]),j.useEffect(()=>{var e;if(r)return;const t=Array.from((null==A||null==(e=A.portalNode)?void 0:e.querySelectorAll("["+hp("portal")+"]"))||[]);if(w){const e=[w,...t,M.current,k.current,D.current.includes("reference")||C?b:null].filter(e=>null!=e),n=u||C?eE(e,E,!E):eE(e);return()=>{n()}}},[r,b,w,u,D,A,C,E]),$o(()=>{if(r||!Kr(_))return;const e=kf(Js(_));queueMicrotask(()=>{const t=L(_),n=S.current,r=("number"==typeof n?t[n]:n.current)||_,o=Ho(_,e);!x&&!o&&h&&Vd(r,{preventScroll:r===_})})},[r,h,_,x,L,S]),$o(()=>{if(r||!_)return;let e=!1;const t=Js(_),n=kf(t);let o=v.current.openEvent;function i(t){let{open:n,reason:r,event:i,nested:a}=t;n&&(o=i),"escape-key"===r&&f.domReference.current&&$5(f.domReference.current),"hover"===r&&"mouseleave"===i.type&&(B.current=!0),"outside-press"===r&&(a?(B.current=!1,e=!0):B.current=!(jq(i)||$q(i)))}$5(n),m.on("openchange",i);const a=t.createElement("span");return a.setAttribute("tabindex","-1"),a.setAttribute("aria-hidden","true"),Object.assign(a.style,Lv),R&&b&&b.insertAdjacentElement("afterend",a),()=>{m.off("openchange",i);const n=kf(t),r=Ho(w,n)||T&&Ig(T.nodesRef.current,p).some(e=>{var t;return Ho(null==(t=e.context)?void 0:t.elements.floating,n)});(r||o&&["click","mousedown"].includes(o.type))&&f.domReference.current&&$5(f.domReference.current);const s="boolean"==typeof P.current?iE()||a:P.current.current||a;queueMicrotask(()=>{P.current&&!B.current&&Kr(s)&&(!(s!==n&&n!==t.body)||r)&&s.focus({preventScroll:e}),a.remove()})}},[r,w,_,P,v,f,m,T,p,R,b]),j.useEffect(()=>{queueMicrotask(()=>{B.current=!1})},[r]),$o(()=>{if(!r&&A)return A.setFocusManagerState({modal:u,closeOnFocusOut:d,open:h,onOpenChange:g,refs:f}),()=>{A.setFocusManagerState(null)}},[r,A,u,h,g,f,d]),$o(()=>{if(r||!_||"function"!=typeof MutationObserver||x)return;const e=()=>{const e=_.getAttribute("tabindex"),t=O(),n=kf(Js(w)),r=t.indexOf(n);-1!==r&&(I.current=r),D.current.includes("floating")||n!==f.domReference.current&&0===t.length?"0"!==e&&_.setAttribute("tabindex","0"):"-1"!==e&&_.setAttribute("tabindex","-1")};e();const t=new MutationObserver(e);return t.observe(_,{childList:!0,subtree:!0,attributes:!0}),()=>{t.disconnect()}},[r,w,_,f,D,O,x]);const G=!r&&E&&(!u||!C)&&(R||u);return j.createElement(j.Fragment,null,G&&j.createElement($3,{"data-type":"inside",ref:null==A?void 0:A.beforeInsideRef,onFocus:e=>{if(u){const e=L();Vd("reference"===o[0]?e[0]:e[e.length-1])}else if(null!=A&&A.preserveTabOrder&&A.portalNode)if(B.current=!1,Fg(e,A.portalNode)){const e=KA()||b;null==e||e.focus()}else{var t;null==(t=A.beforeOutsideRef.current)||t.focus()}}}),!C&&N("start"),n,N("end"),G&&j.createElement($3,{"data-type":"inside",ref:null==A?void 0:A.afterInsideRef,onFocus:e=>{if(u)Vd(L()[0]);else if(null!=A&&A.preserveTabOrder&&A.portalNode)if(d&&(B.current=!0),Fg(e,A.portalNode)){const e=YA()||b;null==e||e.focus()}else{var t;null==(t=A.afterOutsideRef.current)||t.focus()}}}))}let Rm=0;function dQ(){const e=/iP(hone|ad|od)|iOS/.test(DA()),t=document.body.style,n=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",r=window.innerWidth-document.documentElement.clientWidth,o=t.left?parseFloat(t.left):window.scrollX,i=t.top?parseFloat(t.top):window.scrollY;if(t.overflow="hidden",r&&(t[n]=r+"px"),e){var a,s;const e=(null==(a=window.visualViewport)?void 0:a.offsetLeft)||0,n=(null==(s=window.visualViewport)?void 0:s.offsetTop)||0;Object.assign(t,{position:"fixed",top:-(i-Math.floor(n))+"px",left:-(o-Math.floor(e))+"px",right:"0"})}return()=>{Object.assign(t,{overflow:"",[n]:""}),e&&(Object.assign(t,{position:"",top:"",left:"",right:""}),window.scrollTo(o,i))}}let oE=()=>{};const gQ=j.forwardRef(function(e,t){const{lockScroll:n=!1,...r}=e;return $o(()=>{if(n)return Rm++,1===Rm&&(oE=dQ()),()=>{Rm--,0===Rm&&oE()}},[n]),j.createElement("div",fp({ref:t},r,{style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...r.style}}))});function sE(e){return Kr(e.target)&&"BUTTON"===e.target.tagName}function aE(e){return BA(e)}function eB(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,dataRef:o,elements:{domReference:i}}=e,{enabled:a=!0,event:s="click",toggle:l=!0,ignoreMouse:u=!1,keyboardHandlers:c=!0,stickIfOpen:d=!0}=t,h=j.useRef(),f=j.useRef(!1),p=j.useMemo(()=>({onPointerDown(e){h.current=e.pointerType},onMouseDown(e){const t=h.current;0===e.button&&"click"!==s&&(zx(t)&&u||(!n||!l||o.current.openEvent&&d&&"mousedown"!==o.current.openEvent.type?(e.preventDefault(),r(!0,e.nativeEvent,"click")):r(!1,e.nativeEvent,"click")))},onClick(e){const t=h.current;"mousedown"===s&&h.current?h.current=void 0:zx(t)&&u||(!n||!l||o.current.openEvent&&d&&"click"!==o.current.openEvent.type?r(!0,e.nativeEvent,"click"):r(!1,e.nativeEvent,"click"))},onKeyDown(e){h.current=void 0,!e.defaultPrevented&&c&&!sE(e)&&(" "===e.key&&!aE(i)&&(e.preventDefault(),f.current=!0),"Enter"===e.key&&r(!(n&&l),e.nativeEvent,"click"))},onKeyUp(e){e.defaultPrevented||!c||sE(e)||aE(i)||" "===e.key&&f.current&&(f.current=!1,r(!(n&&l),e.nativeEvent,"click"))}}),[o,i,s,u,c,r,n,d,l]);return j.useMemo(()=>a?{reference:p}:{},[a,p])}const pQ={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},mQ={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},uE=e=>{var t,n;return{escapeKey:"boolean"==typeof e?e:null!=(t=null==e?void 0:e.escapeKey)&&t,outsidePress:"boolean"==typeof e?e:null==(n=null==e?void 0:e.outsidePress)||n}};function tB(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,elements:o,dataRef:i}=e,{enabled:a=!0,escapeKey:s=!0,outsidePress:l=!0,outsidePressEvent:u="pointerdown",referencePress:c=!1,referencePressEvent:d="pointerdown",ancestorScroll:h=!1,bubbles:f,capture:p}=t,g=fy(),m=ec("function"==typeof l?l:()=>!1),v="function"==typeof l?m:l,y=j.useRef(!1),b=j.useRef(!1),{escapeKey:w,outsidePress:x}=uE(f),{escapeKey:C,outsidePress:E}=uE(p),D=j.useRef(!1),S=ec(e=>{var t;if(!n||!a||!s||"Escape"!==e.key||D.current)return;const o=null==(t=i.current.floatingContext)?void 0:t.nodeId,l=g?Ig(g.nodesRef.current,o):[];if(!w&&(e.stopPropagation(),l.length>0)){let e=!0;if(l.forEach(t=>{var n;null==(n=t.context)||!n.open||t.context.dataRef.current.__escapeKeyBubbles||(e=!1)}),!e)return}r(!1,Vq(e)?e.nativeEvent:e,"escape-key")}),P=ec(e=>{var t;const n=()=>{var t;S(e),null==(t=If(e))||t.removeEventListener("keydown",n)};null==(t=If(e))||t.addEventListener("keydown",n)}),T=ec(e=>{var t;const n=y.current;y.current=!1;const a=b.current;if(b.current=!1,"click"===u&&a||n||"function"==typeof v&&!v(e))return;const s=If(e),l="["+hp("inert")+"]",c=Js(o.floating).querySelectorAll(l);let d=hr(s)?s:null;for(;d&&!mc(d);){const e=el(d);if(mc(e)||!hr(e))break;d=e}if(c.length&&hr(s)&&!Uq(s)&&!Ho(s,o.floating)&&Array.from(c).every(e=>!Ho(d,e)))return;if(Kr(s)&&k){const t=s.clientWidth>0&&s.scrollWidth>s.clientWidth,n=s.clientHeight>0&&s.scrollHeight>s.clientHeight;let r=n&&e.offsetX>s.clientWidth;if(n&&"rtl"===As(s).direction&&(r=e.offsetX<=s.offsetWidth-s.clientWidth),r||t&&e.offsetY>s.clientHeight)return}const h=null==(t=i.current.floatingContext)?void 0:t.nodeId,f=g&&Ig(g.nodesRef.current,h).some(t=>{var n;return L5(e,null==(n=t.context)?void 0:n.elements.floating)});if(L5(e,o.floating)||L5(e,o.domReference)||f)return;const p=g?Ig(g.nodesRef.current,h):[];if(p.length>0){let e=!0;if(p.forEach(t=>{var n;null==(n=t.context)||!n.open||t.context.dataRef.current.__outsidePressBubbles||(e=!1)}),!e)return}r(!1,e,"outside-press")}),A=ec(e=>{var t;const n=()=>{var t;T(e),null==(t=If(e))||t.removeEventListener(u,n)};null==(t=If(e))||t.addEventListener(u,n)});j.useEffect(()=>{if(!n||!a)return;i.current.__escapeKeyBubbles=w,i.current.__outsidePressBubbles=x;let e=-1;function t(e){r(!1,e,"ancestor-scroll")}function l(){window.clearTimeout(e),D.current=!0}function c(){e=window.setTimeout(()=>{D.current=!1},Mv()?5:0)}const d=Js(o.floating);s&&(d.addEventListener("keydown",C?P:S,C),d.addEventListener("compositionstart",l),d.addEventListener("compositionend",c)),v&&d.addEventListener(u,E?A:T,E);let f=[];return h&&(hr(o.domReference)&&(f=ac(o.domReference)),hr(o.floating)&&(f=f.concat(ac(o.floating))),!hr(o.reference)&&o.reference&&o.reference.contextElement&&(f=f.concat(ac(o.reference.contextElement)))),f=f.filter(e=>{var t;return e!==(null==(t=d.defaultView)?void 0:t.visualViewport)}),f.forEach(e=>{e.addEventListener("scroll",t,{passive:!0})}),()=>{s&&(d.removeEventListener("keydown",C?P:S,C),d.removeEventListener("compositionstart",l),d.removeEventListener("compositionend",c)),v&&d.removeEventListener(u,E?A:T,E),f.forEach(e=>{e.removeEventListener("scroll",t)}),window.clearTimeout(e)}},[i,o,s,v,u,n,r,h,a,w,x,S,C,P,T,E,A]),j.useEffect(()=>{y.current=!1},[v,u]);const M=j.useMemo(()=>({onKeyDown:S,[pQ[d]]:e=>{c&&r(!1,e.nativeEvent,"reference-press")}}),[S,r,c,d]),k=j.useMemo(()=>({onKeyDown:S,onMouseDown(){b.current=!0},onMouseUp(){b.current=!0},[mQ[u]]:()=>{y.current=!0}}),[S,u]);return j.useMemo(()=>a?{reference:M,floating:k}:{},[a,M,k])}function vQ(e){const{open:t=!1,onOpenChange:n,elements:r}=e,o=Fp(),i=j.useRef({}),[a]=j.useState(()=>eQ()),s=null!=VA(),[l,u]=j.useState(r.reference),c=ec((e,t,r)=>{i.current.openEvent=e?t:void 0,a.emit("openchange",{open:e,event:t,reason:r,nested:s}),null==n||n(e,t,r)}),d=j.useMemo(()=>({setPositionReference:u}),[]),h=j.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return j.useMemo(()=>({dataRef:i,open:t,onOpenChange:c,elements:h,events:a,floatingId:o,refs:d}),[t,c,h,a,o,d])}function _v(e){void 0===e&&(e={});const{nodeId:t}=e,n=vQ({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,o=r.elements,[i,a]=j.useState(null),[s,l]=j.useState(null),u=(null==o?void 0:o.domReference)||i,c=j.useRef(null),d=fy();$o(()=>{u&&(c.current=u)},[u]);const h=XZ({...e,elements:{...o,...s&&{reference:s}}}),f=j.useCallback(e=>{const t=hr(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;l(t),h.refs.setReference(t)},[h.refs]),p=j.useCallback(e=>{(hr(e)||null===e)&&(c.current=e,a(e)),(hr(h.refs.reference.current)||null===h.refs.reference.current||null!==e&&!hr(e))&&h.refs.setReference(e)},[h.refs]),g=j.useMemo(()=>({...h.refs,setReference:p,setPositionReference:f,domReference:c}),[h.refs,p,f]),m=j.useMemo(()=>({...h.elements,domReference:u}),[h.elements,u]),v=j.useMemo(()=>({...h,...r,refs:g,elements:m,nodeId:t}),[h,g,m,t,r]);return $o(()=>{r.dataRef.current.floatingContext=v;const e=null==d?void 0:d.nodesRef.current.find(e=>e.id===t);e&&(e.context=v)}),j.useMemo(()=>({...h,context:v,refs:g,elements:m}),[h,g,m,v])}const lE="active",cE="selected";function W5(e,t,n){const r=new Map,o="item"===n;let i=e;if(o&&e){const{[lE]:t,[cE]:n,...r}=e;i=r}return{..."floating"===n&&{tabIndex:-1,[g4]:""},...i,...t.map(t=>{const r=t?t[n]:null;return"function"==typeof r?e?r(e):null:r}).concat(e).reduce((e,t)=>(t&&Object.entries(t).forEach(t=>{let[n,i]=t;if(!o||![lE,cE].includes(n))if(0===n.indexOf("on")){var a;if(r.has(n)||r.set(n,[]),"function"==typeof i)null==(a=r.get(n))||a.push(i),e[n]=function(){for(var e,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return null==(e=r.get(n))?void 0:e.map(e=>e(...o)).find(e=>void 0!==e)}}else e[n]=i}),e),{})}}function nB(e){void 0===e&&(e=[]);const t=e.map(e=>null==e?void 0:e.reference),n=e.map(e=>null==e?void 0:e.floating),r=e.map(e=>null==e?void 0:e.item),o=j.useCallback(t=>W5(t,e,"reference"),t),i=j.useCallback(t=>W5(t,e,"floating"),n),a=j.useCallback(t=>W5(t,e,"item"),r);return j.useMemo(()=>({getReferenceProps:o,getFloatingProps:i,getItemProps:a}),[o,i,a])}const yQ=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function rB(e,t){var n;void 0===t&&(t={});const{open:r,floatingId:o}=e,{enabled:i=!0,role:a="dialog"}=t,s=null!=(n=yQ.get(a))?n:a,l=Fp(),u=null!=VA(),c=j.useMemo(()=>"tooltip"===s||"label"===a?{["aria-"+("label"===a?"labelledby":"describedby")]:r?o:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":"alertdialog"===s?"dialog":s,"aria-controls":r?o:void 0,..."listbox"===s&&{role:"combobox"},..."menu"===s&&{id:l},..."menu"===s&&u&&{role:"menuitem"},..."select"===a&&{"aria-autocomplete":"none"},..."combobox"===a&&{"aria-autocomplete":"list"}},[s,o,u,r,l,a]),d=j.useMemo(()=>{const e={id:o,...s&&{role:s}};return"tooltip"===s||"label"===a?e:{...e,..."menu"===s&&{"aria-labelledby":l}}},[s,o,l,a]),h=j.useCallback(e=>{let{active:t,selected:n}=e;const r={role:"option",...t&&{id:o+"-option"}};switch(a){case"select":return{...r,"aria-selected":t&&n};case"combobox":return{...r,...t&&{"aria-selected":!0}}}return{}},[o,a]);return j.useMemo(()=>i?{reference:c,floating:d,item:h}:{},[i,c,d,h])}function wQ({initialOpen:e=!1,placement:t="bottom",modal:n,sideOffset:r,open:o,onOpenChange:i}={}){const[a,s]=j.useState(e),[l,u]=j.useState(),[c,d]=j.useState(),h=o??a,f=i??s,p=_v({placement:t,open:h,onOpenChange:f,whileElementsMounted:$Z,middleware:[ly(r||4),cy({crossAxis:t.includes("-"),fallbackAxisSideDirection:"end",padding:5}),KZ({padding:5})]}),g=p.context,m=nB([eB(g,{enabled:null==o}),tB(g),rB(g)]);return j.useMemo(()=>({open:h,setOpen:f,...m,...p,modal:n,labelId:l,descriptionId:c,setLabelId:u,setDescriptionId:d}),[h,f,m,p,n,l,c])}const iB=j.createContext(null),oB=()=>{const e=j.useContext(iB);if(null==e)throw new Error("Popover components must be wrapped in <Popover />");return e};function tl({children:e,modal:t=!1,...n}){const r=wQ({modal:t,...n});return b.jsx(iB.Provider,{value:r,children:e})}const nl=j.forwardRef(function({children:e,asChild:t=!1,...n},r){const o=oB(),i=e.ref,a=Fv([o.refs.setReference,r,i]);return t&&j.isValidElement(e)?j.cloneElement(e,o.getReferenceProps({ref:a,...n,...e.props,"data-state":o.open?"open":"closed"})):b.jsx("button",{ref:a,type:"button","data-state":o.open?"open":"closed",...o.getReferenceProps(n),children:e})}),rl=j.forwardRef(function({container:e,style:t,...n},r){const{context:o,...i}=oB(),a=Fv([i.refs.setFloating,r]);return o.open?b.jsx(ZA,{root:e,children:b.jsx(JA,{context:o,modal:i.modal,children:b.jsx("div",{ref:a,style:{...i.floatingStyles,...t},"aria-labelledby":i.labelId,"aria-describedby":i.descriptionId,...i.getFloatingProps(n),children:n.children})})}):null}),sB={[fr.default]:{strokeColor:qr,fill:"#FFFFFF"},[fr.colorful]:{strokeColor:"#06ADBF",fill:"#CDEFF2"},[fr.soft]:{strokeColor:"#6D89C1",fill:"#DADFEB"},[fr.retro]:{strokeColor:"#E9C358",fill:"#F6EDCF"},[fr.dark]:{strokeColor:"#FFFFFF",fill:"#434343"},[fr.starry]:{strokeColor:"#42ABE5",fill:"#163F5A"}};var gp=(e=>(e.nibPen="nibPen",e.feltTipPen="feltTipPen",e.artisticBrush="artisticBrush",e.markerHighlight="markerHighlight",e))(gp||{});const aB="freehand",ea={isFreehand:e=>e.type===aB};var _f=(e=>(e.mermaidToDrawnix="mermaidToDrawnix",e.markdownToDrawnix="markdownToDrawnix",e))(_f||{});const uB=j.createContext(null),Ms=()=>{const e=j.useContext(uB);if(!e)throw new Error("The `useDrawnix` hook must be used inside the <Drawnix> component's context.");return e},CQ=()=>{const{appState:e,setAppState:t}=Ms();return n=>{t({...e,pointer:n})}},hy=xt.createContext({}),p4=(e="",t=!1)=>`menu-item menu-item-base ${e} ${t?"menu-item--active":""}`.trim(),lB=(e,t)=>{const n=j.useContext(hy);return VY(e,e=>{var r;const o=new CustomEvent(cp.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});null==t||t(o),o.defaultPrevented||null==(r=n.onSelect)||r.call(n,o)})},Lp=({children:e,className:t="",onSelect:n,style:r})=>{const o=Dn(`menu ${t}`).trim();return b.jsx(hy.Provider,{value:{onSelect:n},children:b.jsx("div",{className:o,style:r,"data-testid":"menu",children:b.jsx(Rs,{className:"menu-container",padding:2,children:e})})})};Lp.displayName="Menu";const cB=({icon:e,shortcut:t,children:n})=>b.jsxs(b.Fragment,{children:[e&&b.jsx("div",{className:"menu-item__icon",children:e}),b.jsx("div",{className:"menu-item__text",children:n}),t&&b.jsx("div",{className:"menu-item__shortcut",children:t})]}),Ts=({icon:e,onSelect:t,children:n,shortcut:r,className:o,selected:i,submenu:a,...s})=>{const[l,u]=j.useState(!1),c=j.useRef(),d=lB(s.onClick,t),h=b.jsx(cB,{icon:e,shortcut:r,children:n}),f=()=>{c.current&&window.clearTimeout(c.current),u(!0)},p=()=>{c.current=window.setTimeout(()=>{u(!1)},100)};return a?b.jsxs(tl,{open:l,onOpenChange:u,placement:"right-start",children:[b.jsx(nl,{asChild:!0,children:b.jsx("button",{...s,type:"button",className:p4(o,i||l),title:s.title??s["aria-label"],onClick:d,onMouseEnter:f,onMouseLeave:p,children:h})}),b.jsx(rl,{onMouseEnter:f,onMouseLeave:p,children:a})]}):b.jsx("button",{...s,onClick:d,type:"button",className:p4(o,i),title:s.title??s["aria-label"],children:h})};Ts.displayName="MenuItem";const fB=({children:e})=>b.jsx("div",{style:{display:"inline-flex",marginLeft:"auto",padding:"2px 4px",background:"var(--color-promo)",color:"var(--color-surface-lowest)",borderRadius:6,fontSize:9,fontFamily:"Cascadia, monospace"},children:e});fB.displayName="MenuItemBadge",Ts.Badge=fB;const dy=()=>{const{appState:e,setAppState:t}=Ms();return b.jsx(Ts,{"data-testid":"marmaid-to-drawnix-button",onSelect:()=>{t({...e,openDialogType:_f.mermaidToDrawnix})},icon:bq,"aria-label":"Mermaid  Drawnix",children:"Mermaid  Drawnix"})};dy.displayName="MermaidToDrawnix";const xQ=()=>{const{appState:e,setAppState:t}=Ms();return b.jsx(Ts,{"data-testid":"markdown-to-drawnix-button",onSelect:()=>{t({...e,openDialogType:_f.markdownToDrawnix})},icon:kq,"aria-label":"Markdown  Drawnix",children:"Markdown  Drawnix"})};dy.displayName="MarkdownToDrawnix";const EQ=()=>{const e=Zr(),t=I.getBoardContainer(e),[n,r]=j.useState(!1);return b.jsxs(tl,{sideOffset:12,open:n,onOpenChange:e=>{r(e)},placement:"bottom-start",children:[b.jsx(nl,{asChild:!0,children:b.jsx(qn,{type:"icon",visible:!0,selected:n,icon:PA,title:"Extra Tools","aria-label":"Extra Tools",onPointerDown:()=>{r(!n)}})}),b.jsx(rl,{container:t,children:b.jsxs(Lp,{onSelect:()=>{r(!1)},children:[b.jsx(dy,{}),b.jsx(xQ,{})]})})]},0)},Km=(e,t)=>{const n=Qe(e);XY(e,{elements:n.length>0?n:void 0,fillStyle:t?"transparent":"white"}).then(e=>{if(e){const n=t?"png":"jpg";KY(UY(e),`drawnix-${(new Date).getTime()}.${n}`)}})},hB=async e=>{const t=await yA({description:"Image",extensions:Object.keys(ny)});u4(e,t)},z5=e=>e===Zt.hand||e===Zt.selection,PQ=[{icon:YY,pointer:Zt.hand,title:"Hand  H"},{icon:qY,pointer:Zt.selection,title:"Selection  V"},{icon:ZY,pointer:$u.mind,title:"Mind  M"},{icon:JY,pointer:pt.text,title:"Text  T"},{icon:EA,pointer:gp.feltTipPen,title:"Pen  P"},{icon:eq,title:"Arrow  A",key:"arrow",pointer:Fn.straight},{icon:QY,title:"Shape",key:"shape",pointer:pt.rectangle},{icon:Mq,title:"Image  Cmd+U",key:"image"},{icon:PA,title:"More Tools",key:"extra-tools"}],SQ=e=>Object.keys(Fn).includes(e.pointer),TQ=e=>Object.keys(pt).includes(e.pointer)||Object.keys(gt).includes(e.pointer),DQ=()=>{const e=Zr(),{appState:t}=Ms(),n=CQ(),r=I.getBoardContainer(e),[o,i]=j.useState(!1),[a,s]=j.useState(!1),l=t=>I.isPointer(e,t.pointer)&&!o&&!a;return b.jsx(Rs,{padding:1,className:Dn("draw-toolbar",il),children:b.jsx(Wo.Row,{gap:1,children:PQ.map((u,c)=>t.isMobile&&u.pointer===Zt.hand?b.jsx(b.Fragment,{}):"shape"===u.key?b.jsxs(tl,{open:a,sideOffset:12,onOpenChange:e=>{s(e)},children:[b.jsx(nl,{asChild:!0,children:b.jsx(qn,{type:"icon",visible:!0,selected:a||TQ(e)&&!I.isPointer(e,pt.text),icon:u.icon,title:"Shape","aria-label":"Shape",onPointerDown:()=>{s(!a)}})}),b.jsx(rl,{container:r,children:b.jsx(Lq,{onPointerUp:e=>{s(!1),n(e)}})})]},c):"arrow"===u.key?b.jsxs(tl,{open:o,sideOffset:12,onOpenChange:e=>{i(e)},children:[b.jsx(nl,{asChild:!0,children:b.jsx(qn,{type:"icon",visible:!0,selected:o||SQ(e),icon:u.icon,title:u.title,"aria-label":u.title,onPointerDown:()=>{i(!a)}})}),b.jsx(rl,{container:r,children:b.jsx(Nq,{onPointerUp:e=>{i(!1),n(e)}})})]},c):"extra-tools"===u.key?b.jsx(EQ,{},c):b.jsx(qn,{type:"radio",icon:u.icon,checked:l(u),title:`${u.title}`,"aria-label":`${u.title}`,onPointerDown:()=>{u.pointer&&!z5(u.pointer)&&(t=>{na(e,Gi.dnd),vn.updatePointerType(e,t),n(t)})(u.pointer)},onPointerUp:()=>{u.pointer&&!z5(u.pointer)?na(e,Gi.drawing):u.pointer&&z5(u.pointer)&&(vn.updatePointerType(e,u.pointer),n(u.pointer)),"image"===u.key&&hB(e)}},c))})})},AQ=()=>{var e;const t=Zr(),n=I.getBoardContainer(t),[r,o]=j.useState(!1);return b.jsx(Rs,{padding:1,className:Dn("zoom-toolbar",il),children:b.jsxs(Wo.Row,{gap:1,children:[b.jsx(qn,{type:"button",icon:gq,visible:!0,title:"  Cmd+-","aria-label":"  Cmd+-",onPointerUp:()=>{vn.updateZoom(t,t.viewport.zoom-.1)},className:"zoom-out-button"},0),b.jsxs(tl,{sideOffset:12,open:r,onOpenChange:e=>{o(e)},placement:"bottom-end",children:[b.jsx(nl,{asChild:!0,children:b.jsxs("div",{title:"","aria-label":"",className:Dn("zoom-menu-trigger",{active:r}),onPointerUp:()=>{o(!r)},children:[Number((100*((null==(e=null==t?void 0:t.viewport)?void 0:e.zoom)||1)).toFixed(0)),"%"]},1)}),b.jsx(rl,{container:n,children:b.jsxs(Lp,{onSelect:()=>{o(!1)},children:[b.jsx(Ts,{"data-testid":"open-button",onSelect:()=>{vn.fitViewport(t)},"aria-label":"",shortcut:"Cmd+Shift+=",children:""}),b.jsx(Ts,{"data-testid":"open-button",onSelect:()=>{vn.updateZoom(t,1)},"aria-label":" 100%",shortcut:"Cmd+0",children:" 100%"})]})})]}),b.jsx(qn,{type:"button",icon:pq,visible:!0,title:"  Cmd++","aria-label":"  Cmd++",onPointerUp:()=>{vn.updateZoom(t,t.viewport.zoom+.1)},className:"zoom-in-button"},2)]})})},BQ="TRANSPARENT",gy="NO_COLOR",py="#FFFFFF",dB=[{name:"Topic Color",value:gy},{name:"Basic Black",value:qr},{name:"White",value:py},{name:"Gray",value:"#808080"},{name:"Deep Blue",value:"#1E90FF"},{name:"Red",value:"#FF4500"},{name:"Green",value:"#2ECC71"},{name:"Yellow",value:"#FFD700"},{name:"Purple",value:"#8A2BE2"},{name:"Orange",value:"#FFA500"},{name:"Pastel Pink",value:"#FFB3BA"},{name:"Cyan",value:"#00CED1"},{name:"Brown",value:"#8B4513"},{name:"Forest Green",value:"#228B22"},{name:"Light Gray",value:"#D3D3D3"}];function RQ(e){return Math.round((100-e)/100*255)}function MQ(e){return Math.round(100*(1-e/255))}function G0(e,t){return`${e}${RQ(100-t).toString(16).padStart(2,"0")}`}function j0(e){let t;if(8===(e=e.replace(/^#/,"")).length)t=parseInt(e.slice(6,8),16);else{if(4!==e.length)return 100;t=parseInt(e.slice(3,4).repeat(2),16)}return 100-MQ(t)}function bQ(e){return"none"!==e}function lh(e){const t=e.replace(/^#/,"").toUpperCase();return 8===t.length?"#"+t.slice(0,6):4===t.length?"#"+t.slice(0,3):6===t.length||3===t.length?"#"+t:e}function gB(e){return e===py}function pB(e){return 0===e}function _p(e){return 100===e}function f0(e){return e===gy}function kQ(e){return!e||e===qr}var fE,xg={exports:{}},OQ=xg.exports;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */function IQ(){return fE||(fE=1,e=xg,t=xg.exports,function(){var n,r="Expected a function",o="__lodash_hash_undefined__",i="__lodash_placeholder__",a=32,s=128,l=256,u=1/0,c=9007199254740991,d=NaN,h=4294967295,f=h-1,p=h>>>1,g=[["ary",s],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",a],["partialRight",64],["rearg",l]],m="[object Arguments]",v="[object Array]",y="[object Boolean]",b="[object Date]",w="[object Error]",x="[object Function]",C="[object GeneratorFunction]",E="[object Map]",D="[object Number]",S="[object Object]",P="[object Promise]",T="[object RegExp]",A="[object Set]",M="[object String]",k="[object Symbol]",B="[object WeakMap]",F="[object ArrayBuffer]",I="[object DataView]",R="[object Float32Array]",_="[object Float64Array]",O="[object Int8Array]",L="[object Int16Array]",j="[object Int32Array]",N="[object Uint8Array]",G="[object Uint8ClampedArray]",H="[object Uint16Array]",z="[object Uint32Array]",W=/\b__p \+= '';/g,V=/\b(__p \+=) '' \+/g,$=/(__e\(.*?\)|\b__t\)) \+\n'';/g,K=/&(?:amp|lt|gt|quot|#39);/g,X=/[&<>"']/g,U=RegExp(K.source),q=RegExp(X.source),Q=/<%-([\s\S]+?)%>/g,Y=/<%([\s\S]+?)%>/g,Z=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ee=/^\w*$/,te=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ne=/[\\^$.*+?()[\]{}|]/g,re=RegExp(ne.source),oe=/^\s+/,ie=/\s/,ae=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,se=/\{\n\/\* \[wrapped with (.+)\] \*/,le=/,? & /,ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ce=/[()=,{}\[\]\/\s]/,de=/\\(\\)?/g,he=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,fe=/\w*$/,pe=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,me=/^\[object .+?Constructor\]$/,ve=/^0o[0-7]+$/i,ye=/^(?:0|[1-9]\d*)$/,be=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,we=/($^)/,xe=/['\n\r\u2028\u2029\\]/g,Ce="\\ud800-\\udfff",Ee="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",De="\\u2700-\\u27bf",Se="a-z\\xdf-\\xf6\\xf8-\\xff",Pe="A-Z\\xc0-\\xd6\\xd8-\\xde",Te="\\ufe0e\\ufe0f",Ae="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Me="[']",ke="["+Ce+"]",Be="["+Ae+"]",Fe="["+Ee+"]",Ie="\\d+",Re="["+De+"]",_e="["+Se+"]",Oe="[^"+Ce+Ae+Ie+De+Se+Pe+"]",Le="\\ud83c[\\udffb-\\udfff]",je="[^"+Ce+"]",Ne="(?:\\ud83c[\\udde6-\\uddff]){2}",Ge="[\\ud800-\\udbff][\\udc00-\\udfff]",He="["+Pe+"]",ze="\\u200d",We="(?:"+_e+"|"+Oe+")",Ve="(?:"+He+"|"+Oe+")",$e="(?:['](?:d|ll|m|re|s|t|ve))?",Ke="(?:['](?:D|LL|M|RE|S|T|VE))?",Xe="(?:"+Fe+"|"+Le+")?",Ue="["+Te+"]?",qe=Ue+Xe+"(?:"+ze+"(?:"+[je,Ne,Ge].join("|")+")"+Ue+Xe+")*",Qe="(?:"+[Re,Ne,Ge].join("|")+")"+qe,Ye="(?:"+[je+Fe+"?",Fe,Ne,Ge,ke].join("|")+")",Ze=RegExp(Me,"g"),Je=RegExp(Fe,"g"),et=RegExp(Le+"(?="+Le+")|"+Ye+qe,"g"),tt=RegExp([He+"?"+_e+"+"+$e+"(?="+[Be,He,"$"].join("|")+")",Ve+"+"+Ke+"(?="+[Be,He+We,"$"].join("|")+")",He+"?"+We+"+"+$e,He+"+"+Ke,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ie,Qe].join("|"),"g"),nt=RegExp("["+ze+Ce+Ee+Te+"]"),rt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ot=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],it=-1,at={};at[R]=at[_]=at[O]=at[L]=at[j]=at[N]=at[G]=at[H]=at[z]=!0,at[m]=at[v]=at[F]=at[y]=at[I]=at[b]=at[w]=at[x]=at[E]=at[D]=at[S]=at[T]=at[A]=at[M]=at[B]=!1;var st={};st[m]=st[v]=st[F]=st[I]=st[y]=st[b]=st[R]=st[_]=st[O]=st[L]=st[j]=st[E]=st[D]=st[S]=st[T]=st[A]=st[M]=st[k]=st[N]=st[G]=st[H]=st[z]=!0,st[w]=st[x]=st[B]=!1;var lt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ut=parseFloat,ct=parseInt,dt="object"==typeof Cs&&Cs&&Cs.Object===Object&&Cs,ht="object"==typeof self&&self&&self.Object===Object&&self,ft=dt||ht||Function("return this")(),pt=t&&!t.nodeType&&t,gt=pt&&e&&!e.nodeType&&e,mt=gt&&gt.exports===pt,vt=mt&&dt.process,yt=function(){try{return gt&&gt.require&&gt.require("util").types||vt&&vt.binding&&vt.binding("util")}catch{}}(),bt=yt&&yt.isArrayBuffer,wt=yt&&yt.isDate,xt=yt&&yt.isMap,Ct=yt&&yt.isRegExp,Et=yt&&yt.isSet,Dt=yt&&yt.isTypedArray;function St(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Pt(e,t,n,r){for(var o=-1,i=null==e?0:e.length;++o<i;){var a=e[o];t(r,a,n(a),e)}return r}function Tt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function At(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Mt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function kt(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}function Bt(e,t){return!(null==e||!e.length)&&Ht(e,t,0)>-1}function Ft(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}function It(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}function Rt(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function _t(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function Ot(e,t,n,r){var o=null==e?0:e.length;for(r&&o&&(n=e[--o]);o--;)n=t(n,e[o],o,e);return n}function Lt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var jt=$t("length");function Nt(e,t,n){var r;return n(e,function(e,n,o){if(t(e,n,o))return r=n,!1}),r}function Gt(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function Ht(e,t,n){return t==t?function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}(e,t,n):Gt(e,Wt,n)}function zt(e,t,n,r){for(var o=n-1,i=e.length;++o<i;)if(r(e[o],t))return o;return-1}function Wt(e){return e!=e}function Vt(e,t){var n=null==e?0:e.length;return n?Ut(e,t)/n:d}function $t(e){return function(t){return null==t?n:t[e]}}function Kt(e){return function(t){return null==e?n:e[t]}}function Xt(e,t,n,r,o){return o(e,function(e,o,i){n=r?(r=!1,e):t(n,e,o,i)}),n}function Ut(e,t){for(var r,o=-1,i=e.length;++o<i;){var a=t(e[o]);a!==n&&(r=r===n?a:r+a)}return r}function qt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Qt(e){return e&&e.slice(0,fn(e)+1).replace(oe,"")}function Yt(e){return function(t){return e(t)}}function Zt(e,t){return It(t,function(t){return e[t]})}function Jt(e,t){return e.has(t)}function en(e,t){for(var n=-1,r=e.length;++n<r&&Ht(t,e[n],0)>-1;);return n}function tn(e,t){for(var n=e.length;n--&&Ht(t,e[n],0)>-1;);return n}var nn=Kt({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),rn=Kt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function on(e){return"\\"+lt[e]}function an(e){return nt.test(e)}function sn(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function ln(e,t){return function(n){return e(t(n))}}function un(e,t){for(var n=-1,r=e.length,o=0,a=[];++n<r;){var s=e[n];(s===t||s===i)&&(e[n]=i,a[o++]=n)}return a}function cn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function dn(e){return an(e)?function(e){for(var t=et.lastIndex=0;et.test(e);)++t;return t}(e):jt(e)}function hn(e){return an(e)?function(e){return e.match(et)||[]}(e):function(e){return e.split("")}(e)}function fn(e){for(var t=e.length;t--&&ie.test(e.charAt(t)););return t}var pn=Kt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),gn=function e(t){var ie,Ce=(t=null==t?ft:gn.defaults(ft.Object(),t,gn.pick(ft,ot))).Array,Ee=t.Date,De=t.Error,Se=t.Function,Pe=t.Math,Te=t.Object,Ae=t.RegExp,Me=t.String,ke=t.TypeError,Be=Ce.prototype,Fe=Se.prototype,Ie=Te.prototype,Re=t["__core-js_shared__"],_e=Fe.toString,Oe=Ie.hasOwnProperty,Le=0,je=(ie=/[^.]+$/.exec(Re&&Re.keys&&Re.keys.IE_PROTO||""))?"Symbol(src)_1."+ie:"",Ne=Ie.toString,Ge=_e.call(Te),He=ft._,ze=Ae("^"+_e.call(Oe).replace(ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),We=mt?t.Buffer:n,Ve=t.Symbol,$e=t.Uint8Array,Ke=We?We.allocUnsafe:n,Xe=ln(Te.getPrototypeOf,Te),Ue=Te.create,qe=Ie.propertyIsEnumerable,Qe=Be.splice,Ye=Ve?Ve.isConcatSpreadable:n,et=Ve?Ve.iterator:n,nt=Ve?Ve.toStringTag:n,lt=function(){try{var e=hi(Te,"defineProperty");return e({},"",{}),e}catch{}}(),dt=t.clearTimeout!==ft.clearTimeout&&t.clearTimeout,ht=Ee&&Ee.now!==ft.Date.now&&Ee.now,pt=t.setTimeout!==ft.setTimeout&&t.setTimeout,gt=Pe.ceil,vt=Pe.floor,yt=Te.getOwnPropertySymbols,jt=We?We.isBuffer:n,Kt=t.isFinite,mn=Be.join,vn=ln(Te.keys,Te),yn=Pe.max,bn=Pe.min,wn=Ee.now,xn=t.parseInt,Cn=Pe.random,En=Be.reverse,Dn=hi(t,"DataView"),Sn=hi(t,"Map"),Pn=hi(t,"Promise"),Tn=hi(t,"Set"),An=hi(t,"WeakMap"),Mn=hi(Te,"create"),kn=An&&new An,Bn={},Fn=ji(Dn),In=ji(Sn),Rn=ji(Pn),_n=ji(Tn),On=ji(An),Ln=Ve?Ve.prototype:n,jn=Ln?Ln.valueOf:n,Nn=Ln?Ln.toString:n;function Gn(e){if(ts(e)&&!Va(e)&&!(e instanceof Vn)){if(e instanceof Wn)return e;if(Oe.call(e,"__wrapped__"))return Ni(e)}return new Wn(e)}var Hn=function(){function e(){}return function(t){if(!es(t))return{};if(Ue)return Ue(t);e.prototype=t;var r=new e;return e.prototype=n,r}}();function zn(){}function Wn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}function Vn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=h,this.__views__=[]}function $n(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Xn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Un(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Xn;++t<n;)this.add(e[t])}function qn(e){var t=this.__data__=new Kn(e);this.size=t.size}function Qn(e,t){var n=Va(e),r=!n&&Wa(e),o=!n&&!r&&Ua(e),i=!n&&!r&&!o&&us(e),a=n||r||o||i,s=a?qt(e.length,Me):[],l=s.length;for(var u in e)(t||Oe.call(e,u))&&(!a||!("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||bi(u,l)))&&s.push(u);return s}function Yn(e){var t=e.length;return t?e[Ur(0,t-1)]:n}function Zn(e,t){return _i(ko(e),sr(t,0,e.length))}function Jn(e){return _i(ko(e))}function er(e,t,r){(r!==n&&!Ga(e[t],r)||r===n&&!(t in e))&&ir(e,t,r)}function tr(e,t,r){var o=e[t];(!Oe.call(e,t)||!Ga(o,r)||r===n&&!(t in e))&&ir(e,t,r)}function nr(e,t){for(var n=e.length;n--;)if(Ga(e[n][0],t))return n;return-1}function rr(e,t,n,r){return hr(e,function(e,o,i){t(r,e,n(e),i)}),r}function or(e,t){return e&&Bo(t,Bs(t),e)}function ir(e,t,n){"__proto__"==t&&lt?lt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ar(e,t){for(var r=-1,o=t.length,i=Ce(o),a=null==e;++r<o;)i[r]=a?n:Ps(e,t[r]);return i}function sr(e,t,r){return e==e&&(r!==n&&(e=e<=r?e:r),t!==n&&(e=e>=t?e:t)),e}function lr(e,t,r,o,i,a){var s,l=1&t,u=2&t,c=4&t;if(r&&(s=i?r(e,o,i,a):r(e)),s!==n)return s;if(!es(e))return e;var d=Va(e);if(d){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Oe.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!l)return ko(e,s)}else{var h=gi(e),f=h==x||h==C;if(Ua(e))return Do(e,l);if(h==S||h==m||f&&!i){if(s=u||f?{}:vi(e),!l)return u?function(e,t){return Bo(e,pi(e),t)}(e,function(e,t){return e&&Bo(t,Fs(t),e)}(s,e)):function(e,t){return Bo(e,fi(e),t)}(e,or(s,e))}else{if(!st[h])return i?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case F:return So(e);case y:case b:return new r(+e);case I:return function(e,t){var n=t?So(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case R:case _:case O:case L:case j:case N:case G:case H:case z:return Po(e,n);case E:return new r;case D:case M:return new r(e);case T:return function(e){var t=new e.constructor(e.source,fe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case A:return new r;case k:return function(e){return jn?Te(jn.call(e)):{}}(e)}}(e,h,l)}}a||(a=new qn);var p=a.get(e);if(p)return p;a.set(e,s),as(e)?e.forEach(function(n){s.add(lr(n,t,r,n,e,a))}):ns(e)&&e.forEach(function(n,o){s.set(o,lr(n,t,r,o,e,a))});var g=d?n:(c?u?ii:oi:u?Fs:Bs)(e);return Tt(g||e,function(n,o){g&&(n=e[o=n]),tr(s,o,lr(n,t,r,o,e,a))}),s}function ur(e,t,r){var o=r.length;if(null==e)return!o;for(e=Te(e);o--;){var i=r[o],a=t[i],s=e[i];if(s===n&&!(i in e)||!a(s))return!1}return!0}function cr(e,t,o){if("function"!=typeof e)throw new ke(r);return Bi(function(){e.apply(n,o)},t)}function dr(e,t,n,r){var o=-1,i=Bt,a=!0,s=e.length,l=[],u=t.length;if(!s)return l;n&&(t=It(t,Yt(n))),r?(i=Ft,a=!1):t.length>=200&&(i=Jt,a=!1,t=new Un(t));e:for(;++o<s;){var c=e[o],d=null==n?c:n(c);if(c=r||0!==c?c:0,a&&d==d){for(var h=u;h--;)if(t[h]===d)continue e;l.push(c)}else i(t,d,r)||l.push(c)}return l}Gn.templateSettings={escape:Q,evaluate:Y,interpolate:Z,variable:"",imports:{_:Gn}},Gn.prototype=zn.prototype,Gn.prototype.constructor=Gn,Wn.prototype=Hn(zn.prototype),Wn.prototype.constructor=Wn,Vn.prototype=Hn(zn.prototype),Vn.prototype.constructor=Vn,$n.prototype.clear=function(){this.__data__=Mn?Mn(null):{},this.size=0},$n.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},$n.prototype.get=function(e){var t=this.__data__;if(Mn){var r=t[e];return r===o?n:r}return Oe.call(t,e)?t[e]:n},$n.prototype.has=function(e){var t=this.__data__;return Mn?t[e]!==n:Oe.call(t,e)},$n.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Mn&&t===n?o:t,this},Kn.prototype.clear=function(){this.__data__=[],this.size=0},Kn.prototype.delete=function(e){var t=this.__data__,n=nr(t,e);return!(n<0||(n==t.length-1?t.pop():Qe.call(t,n,1),--this.size,0))},Kn.prototype.get=function(e){var t=this.__data__,r=nr(t,e);return r<0?n:t[r][1]},Kn.prototype.has=function(e){return nr(this.__data__,e)>-1},Kn.prototype.set=function(e,t){var n=this.__data__,r=nr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Xn.prototype.clear=function(){this.size=0,this.__data__={hash:new $n,map:new(Sn||Kn),string:new $n}},Xn.prototype.delete=function(e){var t=ci(this,e).delete(e);return this.size-=t?1:0,t},Xn.prototype.get=function(e){return ci(this,e).get(e)},Xn.prototype.has=function(e){return ci(this,e).has(e)},Xn.prototype.set=function(e,t){var n=ci(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Un.prototype.add=Un.prototype.push=function(e){return this.__data__.set(e,o),this},Un.prototype.has=function(e){return this.__data__.has(e)},qn.prototype.clear=function(){this.__data__=new Kn,this.size=0},qn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},qn.prototype.get=function(e){return this.__data__.get(e)},qn.prototype.has=function(e){return this.__data__.has(e)},qn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Kn){var r=n.__data__;if(!Sn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Xn(r)}return n.set(e,t),this.size=n.size,this};var hr=Ro(wr),fr=Ro(xr,!0);function pr(e,t){var n=!0;return hr(e,function(e,r,o){return n=!!t(e,r,o)}),n}function gr(e,t,r){for(var o=-1,i=e.length;++o<i;){var a=e[o],s=t(a);if(null!=s&&(l===n?s==s&&!ls(s):r(s,l)))var l=s,u=a}return u}function mr(e,t){var n=[];return hr(e,function(e,r,o){t(e,r,o)&&n.push(e)}),n}function vr(e,t,n,r,o){var i=-1,a=e.length;for(n||(n=yi),o||(o=[]);++i<a;){var s=e[i];t>0&&n(s)?t>1?vr(s,t-1,n,r,o):Rt(o,s):r||(o[o.length]=s)}return o}var yr=_o(),br=_o(!0);function wr(e,t){return e&&yr(e,t,Bs)}function xr(e,t){return e&&br(e,t,Bs)}function Cr(e,t){return kt(t,function(t){return Ya(e[t])})}function Er(e,t){for(var r=0,o=(t=wo(t,e)).length;null!=e&&r<o;)e=e[Li(t[r++])];return r&&r==o?e:n}function Dr(e,t,n){var r=t(e);return Va(e)?r:Rt(r,n(e))}function Sr(e){return null==e?e===n?"[object Undefined]":"[object Null]":nt&&nt in Te(e)?function(e){var t=Oe.call(e,nt),r=e[nt];try{e[nt]=n;var o=!0}catch{}var i=Ne.call(e);return o&&(t?e[nt]=r:delete e[nt]),i}(e):function(e){return Ne.call(e)}(e)}function Pr(e,t){return e>t}function Tr(e,t){return null!=e&&Oe.call(e,t)}function Ar(e,t){return null!=e&&t in Te(e)}function Mr(e,t,r){for(var o=r?Ft:Bt,i=e[0].length,a=e.length,s=a,l=Ce(a),u=1/0,c=[];s--;){var d=e[s];s&&t&&(d=It(d,Yt(t))),u=bn(d.length,u),l[s]=!r&&(t||i>=120&&d.length>=120)?new Un(s&&d):n}d=e[0];var h=-1,f=l[0];e:for(;++h<i&&c.length<u;){var p=d[h],g=t?t(p):p;if(p=r||0!==p?p:0,!(f?Jt(f,g):o(c,g,r))){for(s=a;--s;){var m=l[s];if(!(m?Jt(m,g):o(e[s],g,r)))continue e}f&&f.push(g),c.push(p)}}return c}function kr(e,t,r){var o=null==(e=Ai(e,t=wo(t,e)))?e:e[Li(Qi(t))];return null==o?n:St(o,e,r)}function Br(e){return ts(e)&&Sr(e)==m}function Fr(e,t,r,o,i){return e===t||(null==e||null==t||!ts(e)&&!ts(t)?e!=e&&t!=t:function(e,t,r,o,i,a){var s=Va(e),l=Va(t),u=s?v:gi(e),c=l?v:gi(t),d=(u=u==m?S:u)==S,h=(c=c==m?S:c)==S,f=u==c;if(f&&Ua(e)){if(!Ua(t))return!1;s=!0,d=!1}if(f&&!d)return a||(a=new qn),s||us(e)?ni(e,t,r,o,i,a):function(e,t,n,r,o,i,a){switch(n){case I:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case F:return!(e.byteLength!=t.byteLength||!i(new $e(e),new $e(t)));case y:case b:case D:return Ga(+e,+t);case w:return e.name==t.name&&e.message==t.message;case T:case M:return e==t+"";case E:var s=sn;case A:var l=1&r;if(s||(s=cn),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;r|=2,a.set(e,t);var c=ni(s(e),s(t),r,o,i,a);return a.delete(e),c;case k:if(jn)return jn.call(e)==jn.call(t)}return!1}(e,t,u,r,o,i,a);if(!(1&r)){var p=d&&Oe.call(e,"__wrapped__"),g=h&&Oe.call(t,"__wrapped__");if(p||g){var x=p?e.value():e,C=g?t.value():t;return a||(a=new qn),i(x,C,r,o,a)}}return!!f&&(a||(a=new qn),function(e,t,r,o,i,a){var s=1&r,l=oi(e),u=l.length,c=oi(t),d=c.length;if(u!=d&&!s)return!1;for(var h=u;h--;){var f=l[h];if(!(s?f in t:Oe.call(t,f)))return!1}var p=a.get(e),g=a.get(t);if(p&&g)return p==t&&g==e;var m=!0;a.set(e,t),a.set(t,e);for(var v=s;++h<u;){var y=e[f=l[h]],b=t[f];if(o)var w=s?o(b,y,f,t,e,a):o(y,b,f,e,t,a);if(!(w===n?y===b||i(y,b,r,o,a):w)){m=!1;break}v||(v="constructor"==f)}if(m&&!v){var x=e.constructor,C=t.constructor;x!=C&&"constructor"in e&&"constructor"in t&&!("function"==typeof x&&x instanceof x&&"function"==typeof C&&C instanceof C)&&(m=!1)}return a.delete(e),a.delete(t),m}(e,t,r,o,i,a))}(e,t,r,o,Fr,i))}function Ir(e,t,r,o){var i=r.length,a=i,s=!o;if(null==e)return!a;for(e=Te(e);i--;){var l=r[i];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<a;){var u=(l=r[i])[0],c=e[u],d=l[1];if(s&&l[2]){if(c===n&&!(u in e))return!1}else{var h=new qn;if(o)var f=o(c,d,u,e,t,h);if(!(f===n?Fr(d,c,3,o,h):f))return!1}}return!0}function Rr(e){return!(!es(e)||function(e){return!!je&&je in e}(e))&&(Ya(e)?ze:me).test(ji(e))}function _r(e){return"function"==typeof e?e:null==e?rl:"object"==typeof e?Va(e)?Hr(e[0],e[1]):Gr(e):hl(e)}function Or(e){if(!Di(e))return vn(e);var t=[];for(var n in Te(e))Oe.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Lr(e){if(!es(e))return function(e){var t=[];if(null!=e)for(var n in Te(e))t.push(n);return t}(e);var t=Di(e),n=[];for(var r in e)"constructor"==r&&(t||!Oe.call(e,r))||n.push(r);return n}function jr(e,t){return e<t}function Nr(e,t){var n=-1,r=Ka(e)?Ce(e.length):[];return hr(e,function(e,o,i){r[++n]=t(e,o,i)}),r}function Gr(e){var t=di(e);return 1==t.length&&t[0][2]?Pi(t[0][0],t[0][1]):function(n){return n===e||Ir(n,e,t)}}function Hr(e,t){return xi(e)&&Si(t)?Pi(Li(e),t):function(r){var o=Ps(r,e);return o===n&&o===t?Ts(r,e):Fr(t,o,3)}}function zr(e,t,r,o,i){e!==t&&yr(t,function(a,s){if(i||(i=new qn),es(a))!function(e,t,r,o,i,a,s){var l=Mi(e,r),u=Mi(t,r),c=s.get(u);if(c)er(e,r,c);else{var d=a?a(l,u,r+"",e,t,s):n,h=d===n;if(h){var f=Va(u),p=!f&&Ua(u),g=!f&&!p&&us(u);d=u,f||p||g?Va(l)?d=l:Xa(l)?d=ko(l):p?(h=!1,d=Do(u,!0)):g?(h=!1,d=Po(u,!0)):d=[]:os(u)||Wa(u)?(d=l,Wa(l)?d=vs(l):(!es(l)||Ya(l))&&(d=vi(u))):h=!1}h&&(s.set(u,d),i(d,u,o,a,s),s.delete(u)),er(e,r,d)}}(e,t,s,r,zr,o,i);else{var l=o?o(Mi(e,s),a,s+"",e,t,i):n;l===n&&(l=a),er(e,s,l)}},Fs)}function Wr(e,t){var r=e.length;if(r)return bi(t+=t<0?r:0,r)?e[t]:n}function Vr(e,t,n){t=t.length?It(t,function(e){return Va(e)?function(t){return Er(t,1===e.length?e[0]:e)}:e}):[rl];var r=-1;return t=It(t,Yt(ui())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Nr(e,function(e,n,o){return{criteria:It(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return function(e,t,n){for(var r=-1,o=e.criteria,i=t.criteria,a=o.length,s=n.length;++r<a;){var l=To(o[r],i[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)})}function $r(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var a=t[r],s=Er(e,a);n(s,a)&&Jr(i,wo(a,e),s)}return i}function Kr(e,t,n,r){var o=r?zt:Ht,i=-1,a=t.length,s=e;for(e===t&&(t=ko(t)),n&&(s=It(e,Yt(n)));++i<a;)for(var l=0,u=t[i],c=n?n(u):u;(l=o(s,c,l,r))>-1;)s!==e&&Qe.call(s,l,1),Qe.call(e,l,1);return e}function Xr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var o=t[n];if(n==r||o!==i){var i=o;bi(o)?Qe.call(e,o,1):ho(e,o)}}return e}function Ur(e,t){return e+vt(Cn()*(t-e+1))}function qr(e,t){var n="";if(!e||t<1||t>c)return n;do{t%2&&(n+=e),(t=vt(t/2))&&(e+=e)}while(t);return n}function Qr(e,t){return Fi(Ti(e,t,rl),e+"")}function Yr(e){return Yn(Gs(e))}function Zr(e,t){var n=Gs(e);return _i(n,sr(t,0,n.length))}function Jr(e,t,r,o){if(!es(e))return e;for(var i=-1,a=(t=wo(t,e)).length,s=a-1,l=e;null!=l&&++i<a;){var u=Li(t[i]),c=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(i!=s){var d=l[u];(c=o?o(d,u,l):n)===n&&(c=es(d)?d:bi(t[i+1])?[]:{})}tr(l,u,c),l=l[u]}return e}var eo=kn?function(e,t){return kn.set(e,t),e}:rl,to=lt?function(e,t){return lt(e,"toString",{configurable:!0,enumerable:!1,value:el(t),writable:!0})}:rl;function no(e){return _i(Gs(e))}function ro(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Ce(o);++r<o;)i[r]=e[r+t];return i}function oo(e,t){var n;return hr(e,function(e,r,o){return!(n=t(e,r,o))}),!!n}function io(e,t,n){var r=0,o=null==e?r:e.length;if("number"==typeof t&&t==t&&o<=p){for(;r<o;){var i=r+o>>>1,a=e[i];null!==a&&!ls(a)&&(n?a<=t:a<t)?r=i+1:o=i}return o}return ao(e,t,rl,n)}function ao(e,t,r,o){var i=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=r(t))!=t,l=null===t,u=ls(t),c=t===n;i<a;){var d=vt((i+a)/2),h=r(e[d]),p=h!==n,g=null===h,m=h==h,v=ls(h);if(s)var y=o||m;else y=c?m&&(o||p):l?m&&p&&(o||!g):u?m&&p&&!g&&(o||!v):!g&&!v&&(o?h<=t:h<t);y?i=d+1:a=d}return bn(a,f)}function so(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Ga(s,l)){var l=s;i[o++]=0===a?0:a}}return i}function lo(e){return"number"==typeof e?e:ls(e)?d:+e}function uo(e){if("string"==typeof e)return e;if(Va(e))return It(e,uo)+"";if(ls(e))return Nn?Nn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function co(e,t,n){var r=-1,o=Bt,i=e.length,a=!0,s=[],l=s;if(n)a=!1,o=Ft;else if(i>=200){var u=t?null:Qo(e);if(u)return cn(u);a=!1,o=Jt,l=new Un}else l=t?[]:s;e:for(;++r<i;){var c=e[r],d=t?t(c):c;if(c=n||0!==c?c:0,a&&d==d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),s.push(c)}else o(l,d,n)||(l!==s&&l.push(d),s.push(c))}return s}function ho(e,t){return null==(e=Ai(e,t=wo(t,e)))||delete e[Li(Qi(t))]}function fo(e,t,n,r){return Jr(e,t,n(Er(e,t)),r)}function po(e,t,n,r){for(var o=e.length,i=r?o:-1;(r?i--:++i<o)&&t(e[i],i,e););return n?ro(e,r?0:i,r?i+1:o):ro(e,r?i+1:0,r?o:i)}function go(e,t){var n=e;return n instanceof Vn&&(n=n.value()),_t(t,function(e,t){return t.func.apply(t.thisArg,Rt([e],t.args))},n)}function mo(e,t,n){var r=e.length;if(r<2)return r?co(e[0]):[];for(var o=-1,i=Ce(r);++o<r;)for(var a=e[o],s=-1;++s<r;)s!=o&&(i[o]=dr(i[o]||a,e[s],t,n));return co(vr(i,1),t,n)}function vo(e,t,r){for(var o=-1,i=e.length,a=t.length,s={};++o<i;){var l=o<a?t[o]:n;r(s,e[o],l)}return s}function yo(e){return Xa(e)?e:[]}function bo(e){return"function"==typeof e?e:rl}function wo(e,t){return Va(e)?e:xi(e,t)?[e]:Oi(ys(e))}var xo=Qr;function Co(e,t,r){var o=e.length;return r=r===n?o:r,!t&&r>=o?e:ro(e,t,r)}var Eo=dt||function(e){return ft.clearTimeout(e)};function Do(e,t){if(t)return e.slice();var n=e.length,r=Ke?Ke(n):new e.constructor(n);return e.copy(r),r}function So(e){var t=new e.constructor(e.byteLength);return new $e(t).set(new $e(e)),t}function Po(e,t){var n=t?So(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function To(e,t){if(e!==t){var r=e!==n,o=null===e,i=e==e,a=ls(e),s=t!==n,l=null===t,u=t==t,c=ls(t);if(!l&&!c&&!a&&e>t||a&&s&&u&&!l&&!c||o&&s&&u||!r&&u||!i)return 1;if(!o&&!a&&!c&&e<t||c&&r&&i&&!o&&!a||l&&r&&i||!s&&i||!u)return-1}return 0}function Ao(e,t,n,r){for(var o=-1,i=e.length,a=n.length,s=-1,l=t.length,u=yn(i-a,0),c=Ce(l+u),d=!r;++s<l;)c[s]=t[s];for(;++o<a;)(d||o<i)&&(c[n[o]]=e[o]);for(;u--;)c[s++]=e[o++];return c}function Mo(e,t,n,r){for(var o=-1,i=e.length,a=-1,s=n.length,l=-1,u=t.length,c=yn(i-s,0),d=Ce(c+u),h=!r;++o<c;)d[o]=e[o];for(var f=o;++l<u;)d[f+l]=t[l];for(;++a<s;)(h||o<i)&&(d[f+n[a]]=e[o++]);return d}function ko(e,t){var n=-1,r=e.length;for(t||(t=Ce(r));++n<r;)t[n]=e[n];return t}function Bo(e,t,r,o){var i=!r;r||(r={});for(var a=-1,s=t.length;++a<s;){var l=t[a],u=o?o(r[l],e[l],l,r,e):n;u===n&&(u=e[l]),i?ir(r,l,u):tr(r,l,u)}return r}function Fo(e,t){return function(n,r){var o=Va(n)?Pt:rr,i=t?t():{};return o(n,e,ui(r,2),i)}}function Io(e){return Qr(function(t,r){var o=-1,i=r.length,a=i>1?r[i-1]:n,s=i>2?r[2]:n;for(a=e.length>3&&"function"==typeof a?(i--,a):n,s&&wi(r[0],r[1],s)&&(a=i<3?n:a,i=1),t=Te(t);++o<i;){var l=r[o];l&&e(t,l,o,a)}return t})}function Ro(e,t){return function(n,r){if(null==n)return n;if(!Ka(n))return e(n,r);for(var o=n.length,i=t?o:-1,a=Te(n);(t?i--:++i<o)&&!1!==r(a[i],i,a););return n}}function _o(e){return function(t,n,r){for(var o=-1,i=Te(t),a=r(t),s=a.length;s--;){var l=a[e?s:++o];if(!1===n(i[l],l,i))break}return t}}function Oo(e){return function(t){var r=an(t=ys(t))?hn(t):n,o=r?r[0]:t.charAt(0),i=r?Co(r,1).join(""):t.slice(1);return o[e]()+i}}function Lo(e){return function(t){return _t(Ys(Ws(t).replace(Ze,"")),e,"")}}function jo(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Hn(e.prototype),r=e.apply(n,t);return es(r)?r:n}}function No(e){return function(t,r,o){var i=Te(t);if(!Ka(t)){var a=ui(r,3);t=Bs(t),r=function(e){return a(i[e],e,i)}}var s=e(t,r,o);return s>-1?i[a?t[s]:s]:n}}function Go(e){return ri(function(t){var o=t.length,i=o,a=Wn.prototype.thru;for(e&&t.reverse();i--;){var s=t[i];if("function"!=typeof s)throw new ke(r);if(a&&!l&&"wrapper"==si(s))var l=new Wn([],!0)}for(i=l?i:o;++i<o;){var u=si(s=t[i]),c="wrapper"==u?ai(s):n;l=c&&Ci(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[si(c[0])].apply(l,c[3]):1==s.length&&Ci(s)?l[u]():l.thru(s)}return function(){var e=arguments,n=e[0];if(l&&1==e.length&&Va(n))return l.plant(n).value();for(var r=0,i=o?t[r].apply(this,e):n;++r<o;)i=t[r].call(this,i);return i}})}function Ho(e,t,r,o,i,a,l,u,c,d){var h=t&s,f=1&t,p=2&t,g=24&t,m=512&t,v=p?n:jo(e);return function s(){for(var y=arguments.length,b=Ce(y),w=y;w--;)b[w]=arguments[w];if(g)var x=li(s),C=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(b,x);if(o&&(b=Ao(b,o,i,g)),a&&(b=Mo(b,a,l,g)),y-=C,g&&y<d){var E=un(b,x);return Uo(e,t,Ho,s.placeholder,r,b,E,u,c,d-y)}var D=f?r:this,S=p?D[e]:e;return y=b.length,u?b=function(e,t){for(var r=e.length,o=bn(t.length,r),i=ko(e);o--;){var a=t[o];e[o]=bi(a,r)?i[a]:n}return e}(b,u):m&&y>1&&b.reverse(),h&&c<y&&(b.length=c),this&&this!==ft&&this instanceof s&&(S=v||jo(S)),S.apply(D,b)}}function zo(e,t){return function(n,r){return function(e,t,n,r){return wr(e,function(e,o,i){t(r,n(e),o,i)}),r}(n,e,t(r),{})}}function Wo(e,t){return function(r,o){var i;if(r===n&&o===n)return t;if(r!==n&&(i=r),o!==n){if(i===n)return o;"string"==typeof r||"string"==typeof o?(r=uo(r),o=uo(o)):(r=lo(r),o=lo(o)),i=e(r,o)}return i}}function Vo(e){return ri(function(t){return t=It(t,Yt(ui())),Qr(function(n){var r=this;return e(t,function(e){return St(e,r,n)})})})}function $o(e,t){var r=(t=t===n?" ":uo(t)).length;if(r<2)return r?qr(t,e):t;var o=qr(t,gt(e/dn(t)));return an(t)?Co(hn(o),0,e).join(""):o.slice(0,e)}function Ko(e){return function(t,r,o){return o&&"number"!=typeof o&&wi(t,r,o)&&(r=o=n),t=fs(t),r===n?(r=t,t=0):r=fs(r),function(e,t,n,r){for(var o=-1,i=yn(gt((t-e)/(n||1)),0),a=Ce(i);i--;)a[r?i:++o]=e,e+=n;return a}(t,r,o=o===n?t<r?1:-1:fs(o),e)}}function Xo(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ms(t),n=ms(n)),e(t,n)}}function Uo(e,t,r,o,i,s,l,u,c,d){var h=8&t;t|=h?a:64,4&(t&=~(h?64:a))||(t&=-4);var f=[e,t,i,h?s:n,h?l:n,h?n:s,h?n:l,u,c,d],p=r.apply(n,f);return Ci(e)&&ki(p,f),p.placeholder=o,Ii(p,e,t)}function qo(e){var t=Pe[e];return function(e,n){if(e=ms(e),(n=null==n?0:bn(ps(n),292))&&Kt(e)){var r=(ys(e)+"e").split("e");return+((r=(ys(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Qo=Tn&&1/cn(new Tn([,-0]))[1]==u?function(e){return new Tn(e)}:ll;function Yo(e){return function(t){var n=gi(t);return n==E?sn(t):n==A?function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}(t):function(e,t){return It(t,function(t){return[t,e[t]]})}(t,e(t))}}function Zo(e,t,o,u,c,d,h,f){var p=2&t;if(!p&&"function"!=typeof e)throw new ke(r);var g=u?u.length:0;if(g||(t&=-97,u=c=n),h=h===n?h:yn(ps(h),0),f=f===n?f:ps(f),g-=c?c.length:0,64&t){var m=u,v=c;u=c=n}var y=p?n:ai(e),b=[e,t,o,u,c,m,v,d,h,f];if(y&&function(e,t){var n=e[1],r=t[1],o=n|r,a=o<131,u=r==s&&8==n||r==s&&n==l&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!a&&!u)return e;1&r&&(e[2]=t[2],o|=1&n?0:4);var c=t[3];if(c){var d=e[3];e[3]=d?Ao(d,c,t[4]):c,e[4]=d?un(e[3],i):t[4]}(c=t[5])&&(d=e[5],e[5]=d?Mo(d,c,t[6]):c,e[6]=d?un(e[5],i):t[6]),(c=t[7])&&(e[7]=c),r&s&&(e[8]=null==e[8]?t[8]:bn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o}(b,y),e=b[0],t=b[1],o=b[2],u=b[3],c=b[4],!(f=b[9]=b[9]===n?p?0:e.length:yn(b[9]-g,0))&&24&t&&(t&=-25),t&&1!=t)w=8==t||16==t?function(e,t,r){var o=jo(e);return function i(){for(var a=arguments.length,s=Ce(a),l=a,u=li(i);l--;)s[l]=arguments[l];var c=a<3&&s[0]!==u&&s[a-1]!==u?[]:un(s,u);return(a-=c.length)<r?Uo(e,t,Ho,i.placeholder,n,s,c,n,n,r-a):St(this&&this!==ft&&this instanceof i?o:e,this,s)}}(e,t,f):t!=a&&33!=t||c.length?Ho.apply(n,b):function(e,t,n,r){var o=1&t,i=jo(e);return function t(){for(var a=-1,s=arguments.length,l=-1,u=r.length,c=Ce(u+s),d=this&&this!==ft&&this instanceof t?i:e;++l<u;)c[l]=r[l];for(;s--;)c[l++]=arguments[++a];return St(d,o?n:this,c)}}(e,t,o,u);else var w=function(e,t,n){var r=1&t,o=jo(e);return function t(){return(this&&this!==ft&&this instanceof t?o:e).apply(r?n:this,arguments)}}(e,t,o);return Ii((y?eo:ki)(w,b),e,t)}function Jo(e,t,r,o){return e===n||Ga(e,Ie[r])&&!Oe.call(o,r)?t:e}function ei(e,t,r,o,i,a){return es(e)&&es(t)&&(a.set(t,e),zr(e,t,n,ei,a),a.delete(t)),e}function ti(e){return os(e)?n:e}function ni(e,t,r,o,i,a){var s=1&r,l=e.length,u=t.length;if(l!=u&&!(s&&u>l))return!1;var c=a.get(e),d=a.get(t);if(c&&d)return c==t&&d==e;var h=-1,f=!0,p=2&r?new Un:n;for(a.set(e,t),a.set(t,e);++h<l;){var g=e[h],m=t[h];if(o)var v=s?o(m,g,h,t,e,a):o(g,m,h,e,t,a);if(v!==n){if(v)continue;f=!1;break}if(p){if(!Lt(t,function(e,t){if(!Jt(p,t)&&(g===e||i(g,e,r,o,a)))return p.push(t)})){f=!1;break}}else if(g!==m&&!i(g,m,r,o,a)){f=!1;break}}return a.delete(e),a.delete(t),f}function ri(e){return Fi(Ti(e,n,$i),e+"")}function oi(e){return Dr(e,Bs,fi)}function ii(e){return Dr(e,Fs,pi)}var ai=kn?function(e){return kn.get(e)}:ll;function si(e){for(var t=e.name+"",n=Bn[t],r=Oe.call(Bn,t)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==e)return o.name}return t}function li(e){return(Oe.call(Gn,"placeholder")?Gn:e).placeholder}function ui(){var e=Gn.iteratee||ol;return e=e===ol?_r:e,arguments.length?e(arguments[0],arguments[1]):e}function ci(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function di(e){for(var t=Bs(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,Si(o)]}return t}function hi(e,t){var r=function(e,t){return null==e?n:e[t]}(e,t);return Rr(r)?r:n}var fi=yt?function(e){return null==e?[]:(e=Te(e),kt(yt(e),function(t){return qe.call(e,t)}))}:gl,pi=yt?function(e){for(var t=[];e;)Rt(t,fi(e)),e=Xe(e);return t}:gl,gi=Sr;function mi(e,t,n){for(var r=-1,o=(t=wo(t,e)).length,i=!1;++r<o;){var a=Li(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&Ja(o)&&bi(a,o)&&(Va(e)||Wa(e))}function vi(e){return"function"!=typeof e.constructor||Di(e)?{}:Hn(Xe(e))}function yi(e){return Va(e)||Wa(e)||!!(Ye&&e&&e[Ye])}function bi(e,t){var n=typeof e;return!!(t=t??c)&&("number"==n||"symbol"!=n&&ye.test(e))&&e>-1&&e%1==0&&e<t}function wi(e,t,n){if(!es(n))return!1;var r=typeof t;return!!("number"==r?Ka(n)&&bi(t,n.length):"string"==r&&t in n)&&Ga(n[t],e)}function xi(e,t){if(Va(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ls(e))||ee.test(e)||!J.test(e)||null!=t&&e in Te(t)}function Ci(e){var t=si(e),n=Gn[t];if("function"!=typeof n||!(t in Vn.prototype))return!1;if(e===n)return!0;var r=ai(n);return!!r&&e===r[0]}(Dn&&gi(new Dn(new ArrayBuffer(1)))!=I||Sn&&gi(new Sn)!=E||Pn&&gi(Pn.resolve())!=P||Tn&&gi(new Tn)!=A||An&&gi(new An)!=B)&&(gi=function(e){var t=Sr(e),r=t==S?e.constructor:n,o=r?ji(r):"";if(o)switch(o){case Fn:return I;case In:return E;case Rn:return P;case _n:return A;case On:return B}return t});var Ei=Re?Ya:ml;function Di(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ie)}function Si(e){return e==e&&!es(e)}function Pi(e,t){return function(r){return null!=r&&r[e]===t&&(t!==n||e in Te(r))}}function Ti(e,t,r){return t=yn(t===n?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=yn(n.length-t,0),a=Ce(i);++o<i;)a[o]=n[t+o];o=-1;for(var s=Ce(t+1);++o<t;)s[o]=n[o];return s[t]=r(a),St(e,this,s)}}function Ai(e,t){return t.length<2?e:Er(e,ro(t,0,-1))}function Mi(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var ki=Ri(eo),Bi=pt||function(e,t){return ft.setTimeout(e,t)},Fi=Ri(to);function Ii(e,t,n){var r=t+"";return Fi(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ae,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Tt(g,function(n){var r="_."+n[0];t&n[1]&&!Bt(e,r)&&e.push(r)}),e.sort()}(function(e){var t=e.match(se);return t?t[1].split(le):[]}(r),n)))}function Ri(e){var t=0,r=0;return function(){var o=wn(),i=16-(o-r);if(r=o,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(n,arguments)}}function _i(e,t){var r=-1,o=e.length,i=o-1;for(t=t===n?o:t;++r<t;){var a=Ur(r,i),s=e[a];e[a]=e[r],e[r]=s}return e.length=t,e}var Oi=function(e){var t=Ra(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(te,function(e,n,r,o){t.push(r?o.replace(de,"$1"):n||e)}),t});function Li(e){if("string"==typeof e||ls(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ji(e){if(null!=e){try{return _e.call(e)}catch{}try{return e+""}catch{}}return""}function Ni(e){if(e instanceof Vn)return e.clone();var t=new Wn(e.__wrapped__,e.__chain__);return t.__actions__=ko(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Gi=Qr(function(e,t){return Xa(e)?dr(e,vr(t,1,Xa,!0)):[]}),Hi=Qr(function(e,t){var r=Qi(t);return Xa(r)&&(r=n),Xa(e)?dr(e,vr(t,1,Xa,!0),ui(r,2)):[]}),zi=Qr(function(e,t){var r=Qi(t);return Xa(r)&&(r=n),Xa(e)?dr(e,vr(t,1,Xa,!0),n,r):[]});function Wi(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:ps(n);return o<0&&(o=yn(r+o,0)),Gt(e,ui(t,3),o)}function Vi(e,t,r){var o=null==e?0:e.length;if(!o)return-1;var i=o-1;return r!==n&&(i=ps(r),i=r<0?yn(o+i,0):bn(i,o-1)),Gt(e,ui(t,3),i,!0)}function $i(e){return null!=e&&e.length?vr(e,1):[]}function Ki(e){return e&&e.length?e[0]:n}var Xi=Qr(function(e){var t=It(e,yo);return t.length&&t[0]===e[0]?Mr(t):[]}),Ui=Qr(function(e){var t=Qi(e),r=It(e,yo);return t===Qi(r)?t=n:r.pop(),r.length&&r[0]===e[0]?Mr(r,ui(t,2)):[]}),qi=Qr(function(e){var t=Qi(e),r=It(e,yo);return(t="function"==typeof t?t:n)&&r.pop(),r.length&&r[0]===e[0]?Mr(r,n,t):[]});function Qi(e){var t=null==e?0:e.length;return t?e[t-1]:n}var Yi=Qr(Zi);function Zi(e,t){return e&&e.length&&t&&t.length?Kr(e,t):e}var Ji=ri(function(e,t){var n=null==e?0:e.length,r=ar(e,t);return Xr(e,It(t,function(e){return bi(e,n)?+e:e}).sort(To)),r});function ea(e){return null==e?e:En.call(e)}var ta=Qr(function(e){return co(vr(e,1,Xa,!0))}),na=Qr(function(e){var t=Qi(e);return Xa(t)&&(t=n),co(vr(e,1,Xa,!0),ui(t,2))}),ra=Qr(function(e){var t=Qi(e);return t="function"==typeof t?t:n,co(vr(e,1,Xa,!0),n,t)});function oa(e){if(!e||!e.length)return[];var t=0;return e=kt(e,function(e){if(Xa(e))return t=yn(e.length,t),!0}),qt(t,function(t){return It(e,$t(t))})}function ia(e,t){if(!e||!e.length)return[];var r=oa(e);return null==t?r:It(r,function(e){return St(t,n,e)})}var aa=Qr(function(e,t){return Xa(e)?dr(e,t):[]}),sa=Qr(function(e){return mo(kt(e,Xa))}),la=Qr(function(e){var t=Qi(e);return Xa(t)&&(t=n),mo(kt(e,Xa),ui(t,2))}),ua=Qr(function(e){var t=Qi(e);return t="function"==typeof t?t:n,mo(kt(e,Xa),n,t)}),ca=Qr(oa),da=Qr(function(e){var t=e.length,r=t>1?e[t-1]:n;return r="function"==typeof r?(e.pop(),r):n,ia(e,r)});function ha(e){var t=Gn(e);return t.__chain__=!0,t}function fa(e,t){return t(e)}var pa=ri(function(e){var t=e.length,r=t?e[0]:0,o=this.__wrapped__,i=function(t){return ar(t,e)};return!(t>1||this.__actions__.length)&&o instanceof Vn&&bi(r)?((o=o.slice(r,+r+(t?1:0))).__actions__.push({func:fa,args:[i],thisArg:n}),new Wn(o,this.__chain__).thru(function(e){return t&&!e.length&&e.push(n),e})):this.thru(i)}),ga=Fo(function(e,t,n){Oe.call(e,n)?++e[n]:ir(e,n,1)}),ma=No(Wi),va=No(Vi);function ya(e,t){return(Va(e)?Tt:hr)(e,ui(t,3))}function ba(e,t){return(Va(e)?At:fr)(e,ui(t,3))}var wa=Fo(function(e,t,n){Oe.call(e,n)?e[n].push(t):ir(e,n,[t])}),xa=Qr(function(e,t,n){var r=-1,o="function"==typeof t,i=Ka(e)?Ce(e.length):[];return hr(e,function(e){i[++r]=o?St(t,e,n):kr(e,t,n)}),i}),Ca=Fo(function(e,t,n){ir(e,n,t)});function Ea(e,t){return(Va(e)?It:Nr)(e,ui(t,3))}var Da=Fo(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Sa=Qr(function(e,t){if(null==e)return[];var n=t.length;return n>1&&wi(e,t[0],t[1])?t=[]:n>2&&wi(t[0],t[1],t[2])&&(t=[t[0]]),Vr(e,vr(t,1),[])}),Pa=ht||function(){return ft.Date.now()};function Ta(e,t,r){return t=r?n:t,t=e&&null==t?e.length:t,Zo(e,s,n,n,n,n,t)}function Aa(e,t){var o;if("function"!=typeof t)throw new ke(r);return e=ps(e),function(){return--e>0&&(o=t.apply(this,arguments)),e<=1&&(t=n),o}}var Ma=Qr(function(e,t,n){var r=1;if(n.length){var o=un(n,li(Ma));r|=a}return Zo(e,r,t,n,o)}),ka=Qr(function(e,t,n){var r=3;if(n.length){var o=un(n,li(ka));r|=a}return Zo(t,r,e,n,o)});function Ba(e,t,o){var i,a,s,l,u,c,d=0,h=!1,f=!1,p=!0;if("function"!=typeof e)throw new ke(r);function g(t){var r=i,o=a;return i=a=n,d=t,l=e.apply(o,r)}function m(e){var r=e-c;return c===n||r>=t||r<0||f&&e-d>=s}function v(){var e=Pa();if(m(e))return y(e);u=Bi(v,function(e){var n=t-(e-c);return f?bn(n,s-(e-d)):n}(e))}function y(e){return u=n,p&&i?g(e):(i=a=n,l)}function b(){var e=Pa(),r=m(e);if(i=arguments,a=this,c=e,r){if(u===n)return function(e){return d=e,u=Bi(v,t),h?g(e):l}(c);if(f)return Eo(u),u=Bi(v,t),g(c)}return u===n&&(u=Bi(v,t)),l}return t=ms(t)||0,es(o)&&(h=!!o.leading,s=(f="maxWait"in o)?yn(ms(o.maxWait)||0,t):s,p="trailing"in o?!!o.trailing:p),b.cancel=function(){u!==n&&Eo(u),d=0,i=c=a=u=n},b.flush=function(){return u===n?l:y(Pa())},b}var Fa=Qr(function(e,t){return cr(e,1,t)}),Ia=Qr(function(e,t,n){return cr(e,ms(t)||0,n)});function Ra(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ke(r);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(Ra.Cache||Xn),n}function _a(e){if("function"!=typeof e)throw new ke(r);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ra.Cache=Xn;var Oa=xo(function(e,t){var n=(t=1==t.length&&Va(t[0])?It(t[0],Yt(ui())):It(vr(t,1),Yt(ui()))).length;return Qr(function(r){for(var o=-1,i=bn(r.length,n);++o<i;)r[o]=t[o].call(this,r[o]);return St(e,this,r)})}),La=Qr(function(e,t){var r=un(t,li(La));return Zo(e,a,n,t,r)}),ja=Qr(function(e,t){var r=un(t,li(ja));return Zo(e,64,n,t,r)}),Na=ri(function(e,t){return Zo(e,l,n,n,n,t)});function Ga(e,t){return e===t||e!=e&&t!=t}var Ha=Xo(Pr),za=Xo(function(e,t){return e>=t}),Wa=Br(function(){return arguments}())?Br:function(e){return ts(e)&&Oe.call(e,"callee")&&!qe.call(e,"callee")},Va=Ce.isArray,$a=bt?Yt(bt):function(e){return ts(e)&&Sr(e)==F};function Ka(e){return null!=e&&Ja(e.length)&&!Ya(e)}function Xa(e){return ts(e)&&Ka(e)}var Ua=jt||ml,qa=wt?Yt(wt):function(e){return ts(e)&&Sr(e)==b};function Qa(e){if(!ts(e))return!1;var t=Sr(e);return t==w||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!os(e)}function Ya(e){if(!es(e))return!1;var t=Sr(e);return t==x||t==C||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Za(e){return"number"==typeof e&&e==ps(e)}function Ja(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=c}function es(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ts(e){return null!=e&&"object"==typeof e}var ns=xt?Yt(xt):function(e){return ts(e)&&gi(e)==E};function rs(e){return"number"==typeof e||ts(e)&&Sr(e)==D}function os(e){if(!ts(e)||Sr(e)!=S)return!1;var t=Xe(e);if(null===t)return!0;var n=Oe.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&_e.call(n)==Ge}var is=Ct?Yt(Ct):function(e){return ts(e)&&Sr(e)==T},as=Et?Yt(Et):function(e){return ts(e)&&gi(e)==A};function ss(e){return"string"==typeof e||!Va(e)&&ts(e)&&Sr(e)==M}function ls(e){return"symbol"==typeof e||ts(e)&&Sr(e)==k}var us=Dt?Yt(Dt):function(e){return ts(e)&&Ja(e.length)&&!!at[Sr(e)]},cs=Xo(jr),ds=Xo(function(e,t){return e<=t});function hs(e){if(!e)return[];if(Ka(e))return ss(e)?hn(e):ko(e);if(et&&e[et])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[et]());var t=gi(e);return(t==E?sn:t==A?cn:Gs)(e)}function fs(e){return e?(e=ms(e))===u||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ps(e){var t=fs(e),n=t%1;return t==t?n?t-n:t:0}function gs(e){return e?sr(ps(e),0,h):0}function ms(e){if("number"==typeof e)return e;if(ls(e))return d;if(es(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=es(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Qt(e);var n=ge.test(e);return n||ve.test(e)?ct(e.slice(2),n?2:8):pe.test(e)?d:+e}function vs(e){return Bo(e,Fs(e))}function ys(e){return null==e?"":uo(e)}var bs=Io(function(e,t){if(Di(t)||Ka(t))Bo(t,Bs(t),e);else for(var n in t)Oe.call(t,n)&&tr(e,n,t[n])}),ws=Io(function(e,t){Bo(t,Fs(t),e)}),xs=Io(function(e,t,n,r){Bo(t,Fs(t),e,r)}),Cs=Io(function(e,t,n,r){Bo(t,Bs(t),e,r)}),Es=ri(ar),Ds=Qr(function(e,t){e=Te(e);var r=-1,o=t.length,i=o>2?t[2]:n;for(i&&wi(t[0],t[1],i)&&(o=1);++r<o;)for(var a=t[r],s=Fs(a),l=-1,u=s.length;++l<u;){var c=s[l],d=e[c];(d===n||Ga(d,Ie[c])&&!Oe.call(e,c))&&(e[c]=a[c])}return e}),Ss=Qr(function(e){return e.push(n,ei),St(Rs,n,e)});function Ps(e,t,r){var o=null==e?n:Er(e,t);return o===n?r:o}function Ts(e,t){return null!=e&&mi(e,t,Ar)}var As=zo(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ne.call(t)),e[t]=n},el(rl)),Ms=zo(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ne.call(t)),Oe.call(e,t)?e[t].push(n):e[t]=[n]},ui),ks=Qr(kr);function Bs(e){return Ka(e)?Qn(e):Or(e)}function Fs(e){return Ka(e)?Qn(e,!0):Lr(e)}var Is=Io(function(e,t,n){zr(e,t,n)}),Rs=Io(function(e,t,n,r){zr(e,t,n,r)}),_s=ri(function(e,t){var n={};if(null==e)return n;var r=!1;t=It(t,function(t){return t=wo(t,e),r||(r=t.length>1),t}),Bo(e,ii(e),n),r&&(n=lr(n,7,ti));for(var o=t.length;o--;)ho(n,t[o]);return n}),Os=ri(function(e,t){return null==e?{}:function(e,t){return $r(e,t,function(t,n){return Ts(e,n)})}(e,t)});function Ls(e,t){if(null==e)return{};var n=It(ii(e),function(e){return[e]});return t=ui(t),$r(e,n,function(e,n){return t(e,n[0])})}var js=Yo(Bs),Ns=Yo(Fs);function Gs(e){return null==e?[]:Zt(e,Bs(e))}var Hs=Lo(function(e,t,n){return t=t.toLowerCase(),e+(n?zs(t):t)});function zs(e){return Qs(ys(e).toLowerCase())}function Ws(e){return(e=ys(e))&&e.replace(be,nn).replace(Je,"")}var Vs=Lo(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),$s=Lo(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Ks=Oo("toLowerCase"),Xs=Lo(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Us=Lo(function(e,t,n){return e+(n?" ":"")+Qs(t)}),qs=Lo(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Qs=Oo("toUpperCase");function Ys(e,t,r){return e=ys(e),(t=r?n:t)===n?function(e){return rt.test(e)}(e)?function(e){return e.match(tt)||[]}(e):function(e){return e.match(ue)||[]}(e):e.match(t)||[]}var Zs=Qr(function(e,t){try{return St(e,n,t)}catch(e){return Qa(e)?e:new De(e)}}),Js=ri(function(e,t){return Tt(t,function(t){t=Li(t),ir(e,t,Ma(e[t],e))}),e});function el(e){return function(){return e}}var tl=Go(),nl=Go(!0);function rl(e){return e}function ol(e){return _r("function"==typeof e?e:lr(e,1))}var il=Qr(function(e,t){return function(n){return kr(n,e,t)}}),al=Qr(function(e,t){return function(n){return kr(e,n,t)}});function sl(e,t,n){var r=Bs(t),o=Cr(t,r);null==n&&(!es(t)||!o.length&&r.length)&&(n=t,t=e,e=this,o=Cr(t,Bs(t)));var i=!(es(n)&&"chain"in n&&!n.chain),a=Ya(e);return Tt(o,function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(i||t){var n=e(this.__wrapped__);return(n.__actions__=ko(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Rt([this.value()],arguments))})}),e}function ll(){}var ul=Vo(It),cl=Vo(Mt),dl=Vo(Lt);function hl(e){return xi(e)?$t(Li(e)):function(e){return function(t){return Er(t,e)}}(e)}var fl=Ko(),pl=Ko(!0);function gl(){return[]}function ml(){return!1}var vl=Wo(function(e,t){return e+t},0),yl=qo("ceil"),bl=Wo(function(e,t){return e/t},1),wl=qo("floor"),xl=Wo(function(e,t){return e*t},1),Cl=qo("round"),El=Wo(function(e,t){return e-t},0);return Gn.after=function(e,t){if("function"!=typeof t)throw new ke(r);return e=ps(e),function(){if(--e<1)return t.apply(this,arguments)}},Gn.ary=Ta,Gn.assign=bs,Gn.assignIn=ws,Gn.assignInWith=xs,Gn.assignWith=Cs,Gn.at=Es,Gn.before=Aa,Gn.bind=Ma,Gn.bindAll=Js,Gn.bindKey=ka,Gn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Va(e)?e:[e]},Gn.chain=ha,Gn.chunk=function(e,t,r){t=(r?wi(e,t,r):t===n)?1:yn(ps(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var i=0,a=0,s=Ce(gt(o/t));i<o;)s[a++]=ro(e,i,i+=t);return s},Gn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,o=[];++t<n;){var i=e[t];i&&(o[r++]=i)}return o},Gn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=Ce(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Rt(Va(n)?ko(n):[n],vr(t,1))},Gn.cond=function(e){var t=null==e?0:e.length,n=ui();return e=t?It(e,function(e){if("function"!=typeof e[1])throw new ke(r);return[n(e[0]),e[1]]}):[],Qr(function(n){for(var r=-1;++r<t;){var o=e[r];if(St(o[0],this,n))return St(o[1],this,n)}})},Gn.conforms=function(e){return function(e){var t=Bs(e);return function(n){return ur(n,e,t)}}(lr(e,1))},Gn.constant=el,Gn.countBy=ga,Gn.create=function(e,t){var n=Hn(e);return null==t?n:or(n,t)},Gn.curry=function e(t,r,o){var i=Zo(t,8,n,n,n,n,n,r=o?n:r);return i.placeholder=e.placeholder,i},Gn.curryRight=function e(t,r,o){var i=Zo(t,16,n,n,n,n,n,r=o?n:r);return i.placeholder=e.placeholder,i},Gn.debounce=Ba,Gn.defaults=Ds,Gn.defaultsDeep=Ss,Gn.defer=Fa,Gn.delay=Ia,Gn.difference=Gi,Gn.differenceBy=Hi,Gn.differenceWith=zi,Gn.drop=function(e,t,r){var o=null==e?0:e.length;return o?ro(e,(t=r||t===n?1:ps(t))<0?0:t,o):[]},Gn.dropRight=function(e,t,r){var o=null==e?0:e.length;return o?ro(e,0,(t=o-(t=r||t===n?1:ps(t)))<0?0:t):[]},Gn.dropRightWhile=function(e,t){return e&&e.length?po(e,ui(t,3),!0,!0):[]},Gn.dropWhile=function(e,t){return e&&e.length?po(e,ui(t,3),!0):[]},Gn.fill=function(e,t,r,o){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&wi(e,t,r)&&(r=0,o=i),function(e,t,r,o){var i=e.length;for((r=ps(r))<0&&(r=-r>i?0:i+r),(o=o===n||o>i?i:ps(o))<0&&(o+=i),o=r>o?0:gs(o);r<o;)e[r++]=t;return e}(e,t,r,o)):[]},Gn.filter=function(e,t){return(Va(e)?kt:mr)(e,ui(t,3))},Gn.flatMap=function(e,t){return vr(Ea(e,t),1)},Gn.flatMapDeep=function(e,t){return vr(Ea(e,t),u)},Gn.flatMapDepth=function(e,t,r){return r=r===n?1:ps(r),vr(Ea(e,t),r)},Gn.flatten=$i,Gn.flattenDeep=function(e){return null!=e&&e.length?vr(e,u):[]},Gn.flattenDepth=function(e,t){return null!=e&&e.length?vr(e,t=t===n?1:ps(t)):[]},Gn.flip=function(e){return Zo(e,512)},Gn.flow=tl,Gn.flowRight=nl,Gn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var o=e[t];r[o[0]]=o[1]}return r},Gn.functions=function(e){return null==e?[]:Cr(e,Bs(e))},Gn.functionsIn=function(e){return null==e?[]:Cr(e,Fs(e))},Gn.groupBy=wa,Gn.initial=function(e){return null!=e&&e.length?ro(e,0,-1):[]},Gn.intersection=Xi,Gn.intersectionBy=Ui,Gn.intersectionWith=qi,Gn.invert=As,Gn.invertBy=Ms,Gn.invokeMap=xa,Gn.iteratee=ol,Gn.keyBy=Ca,Gn.keys=Bs,Gn.keysIn=Fs,Gn.map=Ea,Gn.mapKeys=function(e,t){var n={};return t=ui(t,3),wr(e,function(e,r,o){ir(n,t(e,r,o),e)}),n},Gn.mapValues=function(e,t){var n={};return t=ui(t,3),wr(e,function(e,r,o){ir(n,r,t(e,r,o))}),n},Gn.matches=function(e){return Gr(lr(e,1))},Gn.matchesProperty=function(e,t){return Hr(e,lr(t,1))},Gn.memoize=Ra,Gn.merge=Is,Gn.mergeWith=Rs,Gn.method=il,Gn.methodOf=al,Gn.mixin=sl,Gn.negate=_a,Gn.nthArg=function(e){return e=ps(e),Qr(function(t){return Wr(t,e)})},Gn.omit=_s,Gn.omitBy=function(e,t){return Ls(e,_a(ui(t)))},Gn.once=function(e){return Aa(2,e)},Gn.orderBy=function(e,t,r,o){return null==e?[]:(Va(t)||(t=null==t?[]:[t]),Va(r=o?n:r)||(r=null==r?[]:[r]),Vr(e,t,r))},Gn.over=ul,Gn.overArgs=Oa,Gn.overEvery=cl,Gn.overSome=dl,Gn.partial=La,Gn.partialRight=ja,Gn.partition=Da,Gn.pick=Os,Gn.pickBy=Ls,Gn.property=hl,Gn.propertyOf=function(e){return function(t){return null==e?n:Er(e,t)}},Gn.pull=Yi,Gn.pullAll=Zi,Gn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Kr(e,t,ui(n,2)):e},Gn.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?Kr(e,t,n,r):e},Gn.pullAt=Ji,Gn.range=fl,Gn.rangeRight=pl,Gn.rearg=Na,Gn.reject=function(e,t){return(Va(e)?kt:mr)(e,_a(ui(t,3)))},Gn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,o=[],i=e.length;for(t=ui(t,3);++r<i;){var a=e[r];t(a,r,e)&&(n.push(a),o.push(r))}return Xr(e,o),n},Gn.rest=function(e,t){if("function"!=typeof e)throw new ke(r);return Qr(e,t=t===n?t:ps(t))},Gn.reverse=ea,Gn.sampleSize=function(e,t,r){return t=(r?wi(e,t,r):t===n)?1:ps(t),(Va(e)?Zn:Zr)(e,t)},Gn.set=function(e,t,n){return null==e?e:Jr(e,t,n)},Gn.setWith=function(e,t,r,o){return o="function"==typeof o?o:n,null==e?e:Jr(e,t,r,o)},Gn.shuffle=function(e){return(Va(e)?Jn:no)(e)},Gn.slice=function(e,t,r){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&wi(e,t,r)?(t=0,r=o):(t=null==t?0:ps(t),r=r===n?o:ps(r)),ro(e,t,r)):[]},Gn.sortBy=Sa,Gn.sortedUniq=function(e){return e&&e.length?so(e):[]},Gn.sortedUniqBy=function(e,t){return e&&e.length?so(e,ui(t,2)):[]},Gn.split=function(e,t,r){return r&&"number"!=typeof r&&wi(e,t,r)&&(t=r=n),(r=r===n?h:r>>>0)?(e=ys(e))&&("string"==typeof t||null!=t&&!is(t))&&!(t=uo(t))&&an(e)?Co(hn(e),0,r):e.split(t,r):[]},Gn.spread=function(e,t){if("function"!=typeof e)throw new ke(r);return t=null==t?0:yn(ps(t),0),Qr(function(n){var r=n[t],o=Co(n,0,t);return r&&Rt(o,r),St(e,this,o)})},Gn.tail=function(e){var t=null==e?0:e.length;return t?ro(e,1,t):[]},Gn.take=function(e,t,r){return e&&e.length?ro(e,0,(t=r||t===n?1:ps(t))<0?0:t):[]},Gn.takeRight=function(e,t,r){var o=null==e?0:e.length;return o?ro(e,(t=o-(t=r||t===n?1:ps(t)))<0?0:t,o):[]},Gn.takeRightWhile=function(e,t){return e&&e.length?po(e,ui(t,3),!1,!0):[]},Gn.takeWhile=function(e,t){return e&&e.length?po(e,ui(t,3)):[]},Gn.tap=function(e,t){return t(e),e},Gn.throttle=function(e,t,n){var o=!0,i=!0;if("function"!=typeof e)throw new ke(r);return es(n)&&(o="leading"in n?!!n.leading:o,i="trailing"in n?!!n.trailing:i),Ba(e,t,{leading:o,maxWait:t,trailing:i})},Gn.thru=fa,Gn.toArray=hs,Gn.toPairs=js,Gn.toPairsIn=Ns,Gn.toPath=function(e){return Va(e)?It(e,Li):ls(e)?[e]:ko(Oi(ys(e)))},Gn.toPlainObject=vs,Gn.transform=function(e,t,n){var r=Va(e),o=r||Ua(e)||us(e);if(t=ui(t,4),null==n){var i=e&&e.constructor;n=o?r?new i:[]:es(e)&&Ya(i)?Hn(Xe(e)):{}}return(o?Tt:wr)(e,function(e,r,o){return t(n,e,r,o)}),n},Gn.unary=function(e){return Ta(e,1)},Gn.union=ta,Gn.unionBy=na,Gn.unionWith=ra,Gn.uniq=function(e){return e&&e.length?co(e):[]},Gn.uniqBy=function(e,t){return e&&e.length?co(e,ui(t,2)):[]},Gn.uniqWith=function(e,t){return t="function"==typeof t?t:n,e&&e.length?co(e,n,t):[]},Gn.unset=function(e,t){return null==e||ho(e,t)},Gn.unzip=oa,Gn.unzipWith=ia,Gn.update=function(e,t,n){return null==e?e:fo(e,t,bo(n))},Gn.updateWith=function(e,t,r,o){return o="function"==typeof o?o:n,null==e?e:fo(e,t,bo(r),o)},Gn.values=Gs,Gn.valuesIn=function(e){return null==e?[]:Zt(e,Fs(e))},Gn.without=aa,Gn.words=Ys,Gn.wrap=function(e,t){return La(bo(t),e)},Gn.xor=sa,Gn.xorBy=la,Gn.xorWith=ua,Gn.zip=ca,Gn.zipObject=function(e,t){return vo(e||[],t||[],tr)},Gn.zipObjectDeep=function(e,t){return vo(e||[],t||[],Jr)},Gn.zipWith=da,Gn.entries=js,Gn.entriesIn=Ns,Gn.extend=ws,Gn.extendWith=xs,sl(Gn,Gn),Gn.add=vl,Gn.attempt=Zs,Gn.camelCase=Hs,Gn.capitalize=zs,Gn.ceil=yl,Gn.clamp=function(e,t,r){return r===n&&(r=t,t=n),r!==n&&(r=(r=ms(r))==r?r:0),t!==n&&(t=(t=ms(t))==t?t:0),sr(ms(e),t,r)},Gn.clone=function(e){return lr(e,4)},Gn.cloneDeep=function(e){return lr(e,5)},Gn.cloneDeepWith=function(e,t){return lr(e,5,t="function"==typeof t?t:n)},Gn.cloneWith=function(e,t){return lr(e,4,t="function"==typeof t?t:n)},Gn.conformsTo=function(e,t){return null==t||ur(e,t,Bs(t))},Gn.deburr=Ws,Gn.defaultTo=function(e,t){return null==e||e!=e?t:e},Gn.divide=bl,Gn.endsWith=function(e,t,r){e=ys(e),t=uo(t);var o=e.length,i=r=r===n?o:sr(ps(r),0,o);return(r-=t.length)>=0&&e.slice(r,i)==t},Gn.eq=Ga,Gn.escape=function(e){return(e=ys(e))&&q.test(e)?e.replace(X,rn):e},Gn.escapeRegExp=function(e){return(e=ys(e))&&re.test(e)?e.replace(ne,"\\$&"):e},Gn.every=function(e,t,r){var o=Va(e)?Mt:pr;return r&&wi(e,t,r)&&(t=n),o(e,ui(t,3))},Gn.find=ma,Gn.findIndex=Wi,Gn.findKey=function(e,t){return Nt(e,ui(t,3),wr)},Gn.findLast=va,Gn.findLastIndex=Vi,Gn.findLastKey=function(e,t){return Nt(e,ui(t,3),xr)},Gn.floor=wl,Gn.forEach=ya,Gn.forEachRight=ba,Gn.forIn=function(e,t){return null==e?e:yr(e,ui(t,3),Fs)},Gn.forInRight=function(e,t){return null==e?e:br(e,ui(t,3),Fs)},Gn.forOwn=function(e,t){return e&&wr(e,ui(t,3))},Gn.forOwnRight=function(e,t){return e&&xr(e,ui(t,3))},Gn.get=Ps,Gn.gt=Ha,Gn.gte=za,Gn.has=function(e,t){return null!=e&&mi(e,t,Tr)},Gn.hasIn=Ts,Gn.head=Ki,Gn.identity=rl,Gn.includes=function(e,t,n,r){e=Ka(e)?e:Gs(e),n=n&&!r?ps(n):0;var o=e.length;return n<0&&(n=yn(o+n,0)),ss(e)?n<=o&&e.indexOf(t,n)>-1:!!o&&Ht(e,t,n)>-1},Gn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:ps(n);return o<0&&(o=yn(r+o,0)),Ht(e,t,o)},Gn.inRange=function(e,t,r){return t=fs(t),r===n?(r=t,t=0):r=fs(r),function(e,t,n){return e>=bn(t,n)&&e<yn(t,n)}(e=ms(e),t,r)},Gn.invoke=ks,Gn.isArguments=Wa,Gn.isArray=Va,Gn.isArrayBuffer=$a,Gn.isArrayLike=Ka,Gn.isArrayLikeObject=Xa,Gn.isBoolean=function(e){return!0===e||!1===e||ts(e)&&Sr(e)==y},Gn.isBuffer=Ua,Gn.isDate=qa,Gn.isElement=function(e){return ts(e)&&1===e.nodeType&&!os(e)},Gn.isEmpty=function(e){if(null==e)return!0;if(Ka(e)&&(Va(e)||"string"==typeof e||"function"==typeof e.splice||Ua(e)||us(e)||Wa(e)))return!e.length;var t=gi(e);if(t==E||t==A)return!e.size;if(Di(e))return!Or(e).length;for(var n in e)if(Oe.call(e,n))return!1;return!0},Gn.isEqual=function(e,t){return Fr(e,t)},Gn.isEqualWith=function(e,t,r){var o=(r="function"==typeof r?r:n)?r(e,t):n;return o===n?Fr(e,t,n,r):!!o},Gn.isError=Qa,Gn.isFinite=function(e){return"number"==typeof e&&Kt(e)},Gn.isFunction=Ya,Gn.isInteger=Za,Gn.isLength=Ja,Gn.isMap=ns,Gn.isMatch=function(e,t){return e===t||Ir(e,t,di(t))},Gn.isMatchWith=function(e,t,r){return r="function"==typeof r?r:n,Ir(e,t,di(t),r)},Gn.isNaN=function(e){return rs(e)&&e!=+e},Gn.isNative=function(e){if(Ei(e))throw new De("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Rr(e)},Gn.isNil=function(e){return null==e},Gn.isNull=function(e){return null===e},Gn.isNumber=rs,Gn.isObject=es,Gn.isObjectLike=ts,Gn.isPlainObject=os,Gn.isRegExp=is,Gn.isSafeInteger=function(e){return Za(e)&&e>=-9007199254740991&&e<=c},Gn.isSet=as,Gn.isString=ss,Gn.isSymbol=ls,Gn.isTypedArray=us,Gn.isUndefined=function(e){return e===n},Gn.isWeakMap=function(e){return ts(e)&&gi(e)==B},Gn.isWeakSet=function(e){return ts(e)&&"[object WeakSet]"==Sr(e)},Gn.join=function(e,t){return null==e?"":mn.call(e,t)},Gn.kebabCase=Vs,Gn.last=Qi,Gn.lastIndexOf=function(e,t,r){var o=null==e?0:e.length;if(!o)return-1;var i=o;return r!==n&&(i=(i=ps(r))<0?yn(o+i,0):bn(i,o-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):Gt(e,Wt,i,!0)},Gn.lowerCase=$s,Gn.lowerFirst=Ks,Gn.lt=cs,Gn.lte=ds,Gn.max=function(e){return e&&e.length?gr(e,rl,Pr):n},Gn.maxBy=function(e,t){return e&&e.length?gr(e,ui(t,2),Pr):n},Gn.mean=function(e){return Vt(e,rl)},Gn.meanBy=function(e,t){return Vt(e,ui(t,2))},Gn.min=function(e){return e&&e.length?gr(e,rl,jr):n},Gn.minBy=function(e,t){return e&&e.length?gr(e,ui(t,2),jr):n},Gn.stubArray=gl,Gn.stubFalse=ml,Gn.stubObject=function(){return{}},Gn.stubString=function(){return""},Gn.stubTrue=function(){return!0},Gn.multiply=xl,Gn.nth=function(e,t){return e&&e.length?Wr(e,ps(t)):n},Gn.noConflict=function(){return ft._===this&&(ft._=He),this},Gn.noop=ll,Gn.now=Pa,Gn.pad=function(e,t,n){e=ys(e);var r=(t=ps(t))?dn(e):0;if(!t||r>=t)return e;var o=(t-r)/2;return $o(vt(o),n)+e+$o(gt(o),n)},Gn.padEnd=function(e,t,n){e=ys(e);var r=(t=ps(t))?dn(e):0;return t&&r<t?e+$o(t-r,n):e},Gn.padStart=function(e,t,n){e=ys(e);var r=(t=ps(t))?dn(e):0;return t&&r<t?$o(t-r,n)+e:e},Gn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),xn(ys(e).replace(oe,""),t||0)},Gn.random=function(e,t,r){if(r&&"boolean"!=typeof r&&wi(e,t,r)&&(t=r=n),r===n&&("boolean"==typeof t?(r=t,t=n):"boolean"==typeof e&&(r=e,e=n)),e===n&&t===n?(e=0,t=1):(e=fs(e),t===n?(t=e,e=0):t=fs(t)),e>t){var o=e;e=t,t=o}if(r||e%1||t%1){var i=Cn();return bn(e+i*(t-e+ut("1e-"+((i+"").length-1))),t)}return Ur(e,t)},Gn.reduce=function(e,t,n){var r=Va(e)?_t:Xt,o=arguments.length<3;return r(e,ui(t,4),n,o,hr)},Gn.reduceRight=function(e,t,n){var r=Va(e)?Ot:Xt,o=arguments.length<3;return r(e,ui(t,4),n,o,fr)},Gn.repeat=function(e,t,r){return t=(r?wi(e,t,r):t===n)?1:ps(t),qr(ys(e),t)},Gn.replace=function(){var e=arguments,t=ys(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Gn.result=function(e,t,r){var o=-1,i=(t=wo(t,e)).length;for(i||(i=1,e=n);++o<i;){var a=null==e?n:e[Li(t[o])];a===n&&(o=i,a=r),e=Ya(a)?a.call(e):a}return e},Gn.round=Cl,Gn.runInContext=e,Gn.sample=function(e){return(Va(e)?Yn:Yr)(e)},Gn.size=function(e){if(null==e)return 0;if(Ka(e))return ss(e)?dn(e):e.length;var t=gi(e);return t==E||t==A?e.size:Or(e).length},Gn.snakeCase=Xs,Gn.some=function(e,t,r){var o=Va(e)?Lt:oo;return r&&wi(e,t,r)&&(t=n),o(e,ui(t,3))},Gn.sortedIndex=function(e,t){return io(e,t)},Gn.sortedIndexBy=function(e,t,n){return ao(e,t,ui(n,2))},Gn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=io(e,t);if(r<n&&Ga(e[r],t))return r}return-1},Gn.sortedLastIndex=function(e,t){return io(e,t,!0)},Gn.sortedLastIndexBy=function(e,t,n){return ao(e,t,ui(n,2),!0)},Gn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=io(e,t,!0)-1;if(Ga(e[n],t))return n}return-1},Gn.startCase=Us,Gn.startsWith=function(e,t,n){return e=ys(e),n=null==n?0:sr(ps(n),0,e.length),t=uo(t),e.slice(n,n+t.length)==t},Gn.subtract=El,Gn.sum=function(e){return e&&e.length?Ut(e,rl):0},Gn.sumBy=function(e,t){return e&&e.length?Ut(e,ui(t,2)):0},Gn.template=function(e,t,r){var o=Gn.templateSettings;r&&wi(e,t,r)&&(t=n),e=ys(e),t=xs({},t,o,Jo);var i,a,s=xs({},t.imports,o.imports,Jo),l=Bs(s),u=Zt(s,l),c=0,d=t.interpolate||we,h="__p += '",f=Ae((t.escape||we).source+"|"+d.source+"|"+(d===Z?he:we).source+"|"+(t.evaluate||we).source+"|$","g"),p="//# sourceURL="+(Oe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++it+"]")+"\n";e.replace(f,function(t,n,r,o,s,l){return r||(r=o),h+=e.slice(c,l).replace(xe,on),n&&(i=!0,h+="' +\n__e("+n+") +\n'"),s&&(a=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+t.length,t}),h+="';\n";var g=Oe.call(t,"variable")&&t.variable;if(g){if(ce.test(g))throw new De("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(a?h.replace(W,""):h).replace(V,"$1").replace($,"$1;"),h="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=Zs(function(){return Se(l,p+"return "+h).apply(n,u)});if(m.source=h,Qa(m))throw m;return m},Gn.times=function(e,t){if((e=ps(e))<1||e>c)return[];var n=h,r=bn(e,h);t=ui(t),e-=h;for(var o=qt(r,t);++n<e;)t(n);return o},Gn.toFinite=fs,Gn.toInteger=ps,Gn.toLength=gs,Gn.toLower=function(e){return ys(e).toLowerCase()},Gn.toNumber=ms,Gn.toSafeInteger=function(e){return e?sr(ps(e),-9007199254740991,c):0===e?e:0},Gn.toString=ys,Gn.toUpper=function(e){return ys(e).toUpperCase()},Gn.trim=function(e,t,r){if((e=ys(e))&&(r||t===n))return Qt(e);if(!e||!(t=uo(t)))return e;var o=hn(e),i=hn(t);return Co(o,en(o,i),tn(o,i)+1).join("")},Gn.trimEnd=function(e,t,r){if((e=ys(e))&&(r||t===n))return e.slice(0,fn(e)+1);if(!e||!(t=uo(t)))return e;var o=hn(e);return Co(o,0,tn(o,hn(t))+1).join("")},Gn.trimStart=function(e,t,r){if((e=ys(e))&&(r||t===n))return e.replace(oe,"");if(!e||!(t=uo(t)))return e;var o=hn(e);return Co(o,en(o,hn(t))).join("")},Gn.truncate=function(e,t){var r=30,o="...";if(es(t)){var i="separator"in t?t.separator:i;r="length"in t?ps(t.length):r,o="omission"in t?uo(t.omission):o}var a=(e=ys(e)).length;if(an(e)){var s=hn(e);a=s.length}if(r>=a)return e;var l=r-dn(o);if(l<1)return o;var u=s?Co(s,0,l).join(""):e.slice(0,l);if(i===n)return u+o;if(s&&(l+=u.length-l),is(i)){if(e.slice(l).search(i)){var c,d=u;for(i.global||(i=Ae(i.source,ys(fe.exec(i))+"g")),i.lastIndex=0;c=i.exec(d);)var h=c.index;u=u.slice(0,h===n?l:h)}}else if(e.indexOf(uo(i),l)!=l){var f=u.lastIndexOf(i);f>-1&&(u=u.slice(0,f))}return u+o},Gn.unescape=function(e){return(e=ys(e))&&U.test(e)?e.replace(K,pn):e},Gn.uniqueId=function(e){var t=++Le;return ys(e)+t},Gn.upperCase=qs,Gn.upperFirst=Qs,Gn.each=ya,Gn.eachRight=ba,Gn.first=Ki,sl(Gn,function(){var e={};return wr(Gn,function(t,n){Oe.call(Gn.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),Gn.VERSION="4.17.21",Tt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){Gn[e].placeholder=Gn}),Tt(["drop","take"],function(e,t){Vn.prototype[e]=function(r){r=r===n?1:yn(ps(r),0);var o=this.__filtered__&&!t?new Vn(this):this.clone();return o.__filtered__?o.__takeCount__=bn(r,o.__takeCount__):o.__views__.push({size:bn(r,h),type:e+(o.__dir__<0?"Right":"")}),o},Vn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Tt(["filter","map","takeWhile"],function(e,t){var n=t+1,r=1==n||3==n;Vn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ui(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),Tt(["head","last"],function(e,t){var n="take"+(t?"Right":"");Vn.prototype[e]=function(){return this[n](1).value()[0]}}),Tt(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Vn.prototype[e]=function(){return this.__filtered__?new Vn(this):this[n](1)}}),Vn.prototype.compact=function(){return this.filter(rl)},Vn.prototype.find=function(e){return this.filter(e).head()},Vn.prototype.findLast=function(e){return this.reverse().find(e)},Vn.prototype.invokeMap=Qr(function(e,t){return"function"==typeof e?new Vn(this):this.map(function(n){return kr(n,e,t)})}),Vn.prototype.reject=function(e){return this.filter(_a(ui(e)))},Vn.prototype.slice=function(e,t){e=ps(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Vn(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==n&&(r=(t=ps(t))<0?r.dropRight(-t):r.take(t-e)),r)},Vn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Vn.prototype.toArray=function(){return this.take(h)},wr(Vn.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),i=Gn[o?"take"+("last"==t?"Right":""):t],a=o||/^find/.test(t);i&&(Gn.prototype[t]=function(){var t=this.__wrapped__,s=o?[1]:arguments,l=t instanceof Vn,u=s[0],c=l||Va(t),d=function(e){var t=i.apply(Gn,Rt([e],s));return o&&h?t[0]:t};c&&r&&"function"==typeof u&&1!=u.length&&(l=c=!1);var h=this.__chain__,f=!!this.__actions__.length,p=a&&!h,g=l&&!f;if(!a&&c){t=g?t:new Vn(this);var m=e.apply(t,s);return m.__actions__.push({func:fa,args:[d],thisArg:n}),new Wn(m,h)}return p&&g?e.apply(this,s):(m=this.thru(d),p?o?m.value()[0]:m.value():m)})}),Tt(["pop","push","shift","sort","splice","unshift"],function(e){var t=Be[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Gn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var o=this.value();return t.apply(Va(o)?o:[],e)}return this[n](function(n){return t.apply(Va(n)?n:[],e)})}}),wr(Vn.prototype,function(e,t){var n=Gn[t];if(n){var r=n.name+"";Oe.call(Bn,r)||(Bn[r]=[]),Bn[r].push({name:t,func:n})}}),Bn[Ho(n,2).name]=[{name:"wrapper",func:n}],Vn.prototype.clone=function(){var e=new Vn(this.__wrapped__);return e.__actions__=ko(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ko(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ko(this.__views__),e},Vn.prototype.reverse=function(){if(this.__filtered__){var e=new Vn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Vn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Va(e),r=t<0,o=n?e.length:0,i=function(e,t,n){for(var r=-1,o=n.length;++r<o;){var i=n[r],a=i.size;switch(i.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=bn(t,e+a);break;case"takeRight":e=yn(e,t-a)}}return{start:e,end:t}}(0,o,this.__views__),a=i.start,s=i.end,l=s-a,u=r?s:a-1,c=this.__iteratees__,d=c.length,h=0,f=bn(l,this.__takeCount__);if(!n||!r&&o==l&&f==l)return go(e,this.__actions__);var p=[];e:for(;l--&&h<f;){for(var g=-1,m=e[u+=t];++g<d;){var v=c[g],y=v.iteratee,b=v.type,w=y(m);if(2==b)m=w;else if(!w){if(1==b)continue e;break e}}p[h++]=m}return p},Gn.prototype.at=pa,Gn.prototype.chain=function(){return ha(this)},Gn.prototype.commit=function(){return new Wn(this.value(),this.__chain__)},Gn.prototype.next=function(){this.__values__===n&&(this.__values__=hs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?n:this.__values__[this.__index__++]}},Gn.prototype.plant=function(e){for(var t,r=this;r instanceof zn;){var o=Ni(r);o.__index__=0,o.__values__=n,t?i.__wrapped__=o:t=o;var i=o;r=r.__wrapped__}return i.__wrapped__=e,t},Gn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Vn){var t=e;return this.__actions__.length&&(t=new Vn(this)),(t=t.reverse()).__actions__.push({func:fa,args:[ea],thisArg:n}),new Wn(t,this.__chain__)}return this.thru(ea)},Gn.prototype.toJSON=Gn.prototype.valueOf=Gn.prototype.value=function(){return go(this.__wrapped__,this.__actions__)},Gn.prototype.first=Gn.prototype.head,et&&(Gn.prototype[et]=function(){return this}),Gn}();gt?((gt.exports=gn)._=gn,pt._=gn):ft._=gn}.call(OQ)),xg.exports;var e,t}var FQ=IQ();const LQ=({min:e=0,max:t=100,step:n=1,defaultValue:r=100,disabled:o=!1,onChange:i,beforeStart:a,afterEnd:s})=>{const[l,u]=j.useState(!1),[c,d]=j.useState(r),h=j.useRef(0),f=j.useRef(null),p=j.useRef(null);j.useEffect(()=>{if(f.current&&p.current){const e=f.current.getBoundingClientRect(),t=p.current.getBoundingClientRect();h.current=wO(t.width/2/e.width*100)}},[p,f]),j.useEffect(()=>{d(r)},[r]);const g=j.useCallback(FQ.throttle(r=>{if(f.current&&p.current){const o=f.current.getBoundingClientRect(),a=r.clientX-o.left;let s=Math.min(Math.max(a/o.width,0),1);s>=(100-h.current)/100?s=1:s<=h.current/100&&(s=0);const l=Math.round(s*(t-e)/n)*n+e;d(l),i&&i(l)}},50,{leading:!0,trailing:!0}),[e,t,n,i]),m=j.useCallback(()=>{const e=e=>{u(!0),g(e)},t=()=>{document.removeEventListener("pointermove",e),document.removeEventListener("pointerup",t),s&&s(),setTimeout(()=>{u(!1)},0)};document.addEventListener("pointermove",e),document.addEventListener("pointerup",t)},[g]);let v=(c-e)/(t-e)*100;return v>=100-h.current&&(v=100-h.current),v<=h.current&&(v=h.current),b.jsx("div",{className:Dn("slider-container",{disabled:o}),children:b.jsxs("div",{ref:f,className:"slider-track",onClick:e=>{o||l||g(e)},onPointerDown:e=>{e.preventDefault(),!o&&(a&&a(),m())},children:[b.jsx("div",{className:"slider-range",style:{width:`${v}%`}}),b.jsx("div",{ref:p,className:"slider-thumb",style:{left:`${v}%`}})]})})},hE=xA(dB,4),my=xt.forwardRef((e,t)=>{const n=Zr(),{currentColor:r,onColorChange:o,onOpacityChange:i}=e,[a,s]=j.useState(r&&lh(r)||hE[0][0].value),[l,u]=j.useState(()=>{const e=r&&j0(r);return Xo(e)?100:e});return b.jsxs(Wo.Col,{gap:3,children:[b.jsx(LQ,{step:5,defaultValue:l,onChange:e=>{u(e),i(e)},beforeStart:()=>{br.set(n,!0),vs.setSplittingOnce(n,!0)},afterEnd:()=>{br.set(n,!1)},disabled:a===dB[0].value}),b.jsx(Wo.Col,{gap:2,children:hE.map((e,t)=>b.jsx(Wo.Row,{gap:2,children:e.map(e=>b.jsxs("button",{className:`color-select-item ${a===e.value?"active":""} ${f0(e.value)?"no-color":""}`,style:{backgroundColor:f0(e.value)?BQ:e.value,color:kQ(e.value)?py:qr},onClick:()=>{s(e.value),e.value===gy&&u(100),o(e.value)},title:e.name,children:[f0(e.value)&&wq,a===e.value&&Cq]},e.value))},t))})]})}),mB=(e,t)=>Me.isMindElement(e,t)||fe.isDrawElement(t)&&Ap(t)||pv(e,t),vB=(e,t)=>{let n=t.fill;return n||(Me.isMindElement(e,t)&&(n=jD(e,t)),(fe.isDrawElement(t)||fe.isCustomGeometryElement(e,t))&&(n=mv(e,t))),n},yB=(e,t)=>{let n=t.strokeColor;return n||(Me.isMindElement(e,t)&&(n=V8(e,t)),(fe.isDrawElement(t)||fe.isCustomGeometryElement(e,t))&&(n=H0(e,t))),n},_Q=(e,t)=>{tu.setFillColor(e,null,{getMemorizeKey:_0,callback:(n,r)=>{if(!mB(e,n))return;const o=vB(e,n);if(!bQ(o))return;const i=lh(o),a=_p(t)?i:G0(i,t);Xe.setNode(e,{fill:a},r)}})},NQ=(e,t)=>{tu.setFillColor(e,null,{getMemorizeKey:_0,callback:(n,r)=>{if(!mB(e,n))return;const o=j0(vB(e,n));f0(t)?Xe.setNode(e,{fill:null},r):Xo(o)||_p(o)?Xe.setNode(e,{fill:t},r):Xe.setNode(e,{fill:G0(t,o)},r)}})},HQ=(e,t)=>{tu.setStrokeColor(e,null,{getMemorizeKey:_0,callback:(n,r)=>{const o=lh(yB(e,n)),i=_p(t)?o:G0(o,t);Xe.setNode(e,{strokeColor:i},r)}})},GQ=(e,t)=>{tu.setStrokeColor(e,null,{getMemorizeKey:_0,callback:(n,r)=>{const o=j0(yB(e,n));f0(t)?Xe.setNode(e,{strokeColor:null},r):Xo(o)||_p(o)?Xe.setNode(e,{strokeColor:t},r):Xe.setNode(e,{strokeColor:G0(t,o)},r)}})},jQ=(e,t,n)=>{const r=j0(t);f0(n)?W6.setTextColor(e,null):W6.setTextColor(e,G0(n,r))},$Q=(e,t,n)=>{const r=lh(t),o=_p(n)?r:G0(r,n);W6.setTextColor(e,o)},WQ=({board:e,currentColor:t,fontColorIcon:n,title:r})=>{const[o,i]=j.useState(!1),a=I.getBoardContainer(e);return b.jsxs(tl,{sideOffset:12,open:o,onOpenChange:e=>{i(e)},placement:"top",children:[b.jsx(nl,{asChild:!0,children:b.jsx(qn,{className:Dn("property-button"),selected:o,visible:!0,icon:n,type:"button",title:r,"aria-label":r,onPointerUp:()=>{i(!o)}})}),b.jsx(rl,{container:a,children:b.jsx(Rs,{padding:4,className:Dn(`${il}`),children:b.jsx(my,{onColorChange:n=>{jQ(e,t||n,n)},onOpacityChange:n=>{t&&$Q(e,t,n)},currentColor:t})})})]})},zQ=({board:e,currentColor:t,title:n,hasStrokeStyle:r,children:o})=>{const[i,a]=j.useState(!1),s=t&&lh(t),l=t?j0(t):100,u=I.getBoardContainer(e),c=pB(l)?xq:gB(s)?Eq:void 0,d=t=>{tu.setStrokeStyle(e,t,{getMemorizeKey:_0})};return b.jsxs(tl,{sideOffset:12,open:i,onOpenChange:e=>{a(e)},placement:"top",children:[b.jsx(nl,{asChild:!0,children:b.jsx(qn,{className:Dn("property-button"),visible:!0,icon:c,type:"button",title:n,"aria-label":n,onPointerUp:()=>{a(!i)},children:!c&&o})}),b.jsx(rl,{container:u,children:b.jsx(Rs,{padding:4,className:Dn(`${il}`,"stroke-setting",{"has-stroke-style":r}),children:b.jsxs(Wo.Col,{children:[r&&b.jsxs(Wo.Row,{className:Dn("stroke-style-picker"),children:[b.jsx(qn,{visible:!0,icon:Pq,type:"button",title:n,"aria-label":n,onPointerUp:()=>{d(Ss.solid)}}),b.jsx(qn,{visible:!0,icon:Sq,type:"button",title:n,"aria-label":n,onPointerUp:()=>{d(Ss.dashed)}}),b.jsx(qn,{visible:!0,icon:Tq,type:"button",title:n,"aria-label":n,onPointerUp:()=>{d(Ss.dotted)}})]}),b.jsx(my,{onColorChange:t=>{GQ(e,t)},onOpacityChange:t=>{HQ(e,t)},currentColor:t})]})})})]})},VQ=({board:e,currentColor:t,title:n,children:r})=>{const[o,i]=j.useState(!1),a=t&&lh(t),s=t?j0(t):100,l=I.getBoardContainer(e),u=!a||pB(s)?yq:void 0;return b.jsxs(tl,{sideOffset:12,open:o,onOpenChange:e=>{i(e)},placement:"top",children:[b.jsx(nl,{asChild:!0,children:b.jsx(qn,{className:Dn("property-button"),visible:!0,icon:u,type:"button",title:n,"aria-label":n,onPointerUp:()=>{i(!o)},children:!u&&r})}),b.jsx(rl,{container:l,children:b.jsx(Rs,{padding:4,className:Dn(`${il}`),children:b.jsx(my,{onColorChange:t=>{NQ(e,t)},onOpacityChange:t=>{_Q(e,t)},currentColor:t})})})]})},UQ=({board:e,title:t})=>{const{appState:n,setAppState:r}=Ms();return b.jsx(qn,{className:Dn("property-button"),visible:!0,icon:Oq,type:"button",title:t,"aria-label":t,onPointerUp:()=>{const t=Qe(e)[0],o=cv(t);$a.getLinkElement(o)||$a.wrapLink(o,"",""),setTimeout(()=>{const e=$a.getLinkElement(o)[0],t=ze.toDOMNode(o,e);r({...n,linkState:{editor:o,targetDom:t,targetElement:e,isEditing:!0,isHovering:!1,isHoveringOrigin:!1}})},0)}})},XQ=()=>{var e,t;const n=Zr(),r=Qe(n),[o,i]=j.useState(!1),a=j.useRef(o),s=r.length>0&&!gi(n)&&!r.some(fe.isImage),{viewport:l,selection:u,children:c}=n,{refs:d,floatingStyles:h}=_v({placement:"right-start",middleware:[ly(32),cy()]});let f={fill:"red"};if(s&&!o){const e=r.some(e=>ZQ(n,e))&&!I.hasBeenTextEditing(n),t=r.some(e=>JQ(n,e)),o=r.some(e=>wB(n,e))&&!I.hasBeenTextEditing(n),i=r.some(e=>QQ(n,e))&&!I.hasBeenTextEditing(n);f={...qQ(n),hasFill:e,hasFontColor:t,hasStroke:o,hasStrokeStyle:i,hasText:t}}return j.useEffect(()=>{if(s){const e=r.length>0;if(!o&&e){const e=Qe(n),t=on(n,e,!1),[r,o]=M.getPoints(t),i=C6(n,a3(n,r)),a=C6(n,a3(n,o)),s=a[0]-i[0],l=a[1]-i[1];d.setPositionReference({getBoundingClientRect:()=>({width:s,height:l,x:i[0],y:i[1],top:i[1],left:i[0],right:i[0]+s,bottom:i[1]+l})})}}},[l,u,c,o]),j.useEffect(()=>{a.current=o},[o]),j.useEffect(()=>{const{pointerUp:e,pointerMove:t}=n;return n.pointerMove=e=>{(fc(n)||cc(n))&&!a.current&&i(!0),t(e)},n.pointerUp=t=>{a.current&&(fc(n)||cc(n))&&i(!1),e(t)},()=>{n.pointerUp=e,n.pointerMove=t}},[n]),b.jsx(b.Fragment,{children:s&&!o&&b.jsx(Rs,{padding:1,className:Dn("popup-toolbar",il),ref:d.setFloating,style:h,children:b.jsxs(Wo.Row,{gap:1,children:[f.hasFontColor&&b.jsx(WQ,{board:n,currentColor:null==(e=f.marks)?void 0:e.color,title:"Font Color",fontColorIcon:b.jsx(Dq,{currentColor:null==(t=f.marks)?void 0:t.color})},0),f.hasStroke&&b.jsx(zQ,{board:n,currentColor:f.strokeColor,title:"Stroke",hasStrokeStyle:f.hasStrokeStyle||!1,children:b.jsx("label",{className:Dn("stroke-label","color-label"),style:{borderColor:f.strokeColor}})},1),f.hasFill&&b.jsx(VQ,{board:n,currentColor:f.fill,title:"Fill Color",children:b.jsx("label",{className:Dn("fill-label","color-label",{"color-white":f.fill&&gB(lh(f.fill))}),style:{backgroundColor:f.fill}})},2),f.hasText&&b.jsx(UQ,{board:n,title:"Link"},3)]})})})},KQ=(e,t)=>{const n=uT(t);return{fill:t.fill,strokeColor:V8(e,t),marks:n}},YQ=(e,t)=>{const n=uT(t);return{fill:t.fill,strokeColor:H0(e,t),marks:n}},qQ=e=>{const t=Qe(e)[0];return Me.isMindElement(e,t)?KQ(e,t):YQ(e,t)},ZQ=(e,t)=>!(!Me.isMindElement(e,t)&&!pv(e,t))||!!fe.isDrawElement(t)&&(fe.isShapeElement(t)&&!fe.isImage(t)&&!fe.isText(t)&&Ap(t)),wB=(e,t)=>!(!Me.isMindElement(e,t)&&!ea.isFreehand(t))||!!fe.isDrawElement(t)&&(fe.isShapeElement(t)&&!fe.isImage(t)&&!fe.isText(t)||fe.isArrowLine(t)||fe.isVectorLine(t)||fe.isTable(t)),QQ=(e,t)=>wB(e,t),JQ=(e,t)=>!!Me.isMindElement(e,t)||!!fe.isDrawElement(t)&&hz([t]),CB=({icon:e,shortcut:t,href:n,children:r,onSelect:o,className:i="",selected:a,...s})=>{const l=lB(s.onClick,o);return b.jsx("a",{...s,href:n,target:"_blank",rel:"noreferrer",className:p4(i,a),title:s.title??s["aria-label"],onClick:l,children:b.jsx(cB,{icon:e,shortcut:t,children:r})})};CB.displayName="MenuItemLink";const xB=()=>{const e=Zr();return b.jsx(Ts,{"data-testid":"save-button",onSelect:()=>{wA(e)},icon:mq,"aria-label":"",shortcut:"Cmd+S",children:""})};xB.displayName="SaveToFile";const EB=()=>{const e=Zr(),t=eS();return b.jsx(Ts,{"data-testid":"open-button",onSelect:()=>{BY(e).then(n=>{((n,r)=>{e.children=n,e.viewport=r||{zoom:1},e.theme={themeColorMode:fr.default},t.update(e.children,{board:e,parent:e,parentG:I.getElementHost(e)}),vn.fitViewport(e)})(n.elements,n.viewport)})},icon:vq,"aria-label":"",children:""})};EB.displayName="OpenFile";const PB=()=>{const e=Zr(),t=j.useContext(hy);return b.jsx(Ts,{icon:dq,"data-testid":"image-export-button",onSelect:()=>{Km(e,!0)},submenu:b.jsxs(Lp,{onSelect:()=>{var e;const n=new CustomEvent(cp.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});null==(e=t.onSelect)||e.call(t,n)},children:[b.jsx(Ts,{onSelect:()=>{Km(e,!0)},"aria-label":"",children:"PNG"}),b.jsx(Ts,{onSelect:()=>{Km(e,!1)},"aria-label":"",children:"JPG"})]}),shortcut:"Cmd+Shift+E","aria-label":"",children:""})};PB.displayName="SaveAsImage";const SB=()=>{const{appState:e,setAppState:t}=Ms();return b.jsx(Ts,{icon:O3,"data-testid":"reset-button",onSelect:()=>{t({...e,openCleanConfirm:!0})},shortcut:"Cmd+Backspace","aria-label":"",children:""})};SB.displayName="CleanBoard";const TB=()=>b.jsx(CB,{icon:hq,href:"https://github.com/plait-board/drawnix","aria-label":"GitHub",children:"GitHub"});TB.displayName="Socials";const DB=()=>b.jsx("div",{style:{height:"1px",backgroundColor:"var(--color-gray-10)",margin:".5rem 0"}});DB.displayName="MenuSeparator";const eJ=()=>{const e=Zr(),t=I.getBoardContainer(e),n=Qe(e),[r,o]=j.useState(!1),i=e.history.undos.length<=0,a=e.history.redos.length<=0;return b.jsx(Rs,{padding:1,className:Dn("app-toolbar",il),children:b.jsxs(Wo.Row,{gap:1,children:[b.jsxs(tl,{sideOffset:12,open:r,onOpenChange:e=>{o(e)},placement:"bottom-start",children:[b.jsx(nl,{asChild:!0,children:b.jsx(qn,{type:"icon",visible:!0,selected:r,icon:fq,title:"App Menu","aria-label":"App Menu",onPointerDown:()=>{o(!r)}})}),b.jsx(rl,{container:t,children:b.jsxs(Lp,{onSelect:()=>{o(!1)},children:[b.jsx(EB,{}),b.jsx(xB,{}),b.jsx(PB,{}),b.jsx(SB,{}),b.jsx(DB,{}),b.jsx(TB,{})]})})]},0),b.jsx(qn,{type:"icon",icon:Aq,visible:!0,title:"Undo","aria-label":"Undo",onPointerUp:()=>{e.undo()},disabled:i},1),b.jsx(qn,{type:"icon",icon:Bq,visible:!0,title:"Redo","aria-label":"Redo",onPointerUp:()=>{e.redo()},disabled:a},2),n.length>0&&b.jsx(qn,{className:"duplicate",type:"icon",icon:Rq,visible:!0,title:"Duplicate","aria-label":"Duplicate",onPointerUp:()=>{Y4(e)}},3),n.length>0&&b.jsx(qn,{className:"trash",type:"icon",icon:O3,visible:!0,title:"Trash","aria-label":"Trash",onPointerUp:()=>{K4(e)}},4)]})})},tJ=e=>t=>{const{globalKeyDown:n}=t;return t.globalKeyDown=r=>{if(!(r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement)&&(I.getMovingPointInBoard(t)||I.isMovingPointInBoard(t))&&!I.hasBeenTextEditing(t)){if(nn.isHotkey(["mod+shift+e"],{byKey:!0})(r))return Km(t,!0),void r.preventDefault();if(nn.isHotkey(["mod+s"],{byKey:!0})(r))return wA(t),void r.preventDefault();if(nn.isHotkey(["mod+backspace"])(r)||nn.isHotkey(["mod+delete"])(r))return e({openCleanConfirm:!0}),void r.preventDefault();if("h"===r.key&&(vn.updatePointerType(t,Zt.hand),e({pointer:Zt.hand})),"v"===r.key&&(vn.updatePointerType(t,Zt.selection),e({pointer:Zt.selection})),"m"===r.key&&(na(t,Gi.dnd),vn.updatePointerType(t,$u.mind),e({pointer:$u.mind})),"p"===r.key&&(na(t,Gi.drawing),vn.updatePointerType(t,gp.feltTipPen),e({pointer:gp.feltTipPen})),"a"===r.key&&!nn.isHotkey(["mod+a"])(r)&&0===Qe(t).length&&(na(t,Gi.drawing),vn.updatePointerType(t,Fn.straight),e({pointer:Fn.straight})),"r"===r.key||"o"===r.key||"t"===r.key){const n={r:pt.rectangle,o:pt.ellipse,t:pt.text};n[r.key]===pt.text?na(t,Gi.dnd):na(t,Gi.drawing),vn.updatePointerType(t,n[r.key]),e({pointer:n[r.key]})}nn.isHotkey(["mod+u"])(r)&&hB(t)}n(r)},t};function nJ(){return[gp.feltTipPen]}const dE=(e,t)=>({id:En(),type:"freehand",shape:e,points:t}),rJ=(e,t,n)=>{const r=hc(e,n,t)||n,o=t.points;return Bp(t.points)&&lc(r,o)||Jg(o,r)},iJ=(e,t,n)=>{const r=M.getRectangleByPoints([n.anchor,n.focus]);return S3(r,t.points,t.angle)},gE=e=>Qe(e).filter(e=>ea.isFreehand(e)),oJ=e=>sB[e].strokeColor,sJ=e=>sB[e].fill,aJ=(e,t)=>{const n=oJ(e.theme.themeColorMode);return t.strokeColor||n},uJ=(e,t)=>{const n=ea.isFreehand(t)&&pv(e,t)?sJ(e.theme.themeColorMode):dv.fill;return t.fill||n};function lJ(e,t){return Math.exp(-e*e/(2*t*t))}function cJ(e,t,n){if(e.length<2)return e;const r=Math.floor(n/2),o=[];function i(t){if(t<0){const n=-t-1;if(n<e.length)return[2*e[0][0]-e[n][0],2*e[0][1]-e[n][1]]}else if(t>=e.length){const n=2*e.length-t-1;if(n>=0)return[2*e[e.length-1][0]-e[n][0],2*e[e.length-1][1]-e[n][1]]}return e[t]}function a(t){const n=Math.min(t,e.length-1-t);return Math.min(r,n+Math.floor(r/2))}for(let n=0;n<e.length;n++){let s=0,l=0,u=0;const c=a(n);for(let o=-c;o<=c;o++){const a=i(n+o);let d=lJ(o,t);if(n<r||n>=e.length-r){const e=1+.5*(1-Math.abs(o)/c);d*=0===o?e:1}s+=a[0]*d,l+=a[1]*d,u+=d}0===n||n===e.length-1?o.push([e[n][0],e[n][1]]):o.push([s/u,l/u])}return o}class AB extends Yo{draw(e){const t={strokeWidth:zt(e),stroke:aJ(this.board,e),fill:uJ(this.board,e),fillStyle:"solid"},n=I.getRoughSVG(this.board).curve(cJ(e.points,1,3),t);return Wt(n,"round"),n}canDraw(e){return!0}}class fJ extends Ec{constructor(){super()}initializeGenerator(){this.activeGenerator=Ep(this.board,{getRectangle:e=>M.getRectangleByPoints(e.points),getStrokeWidth:()=>1,getStrokeOpacity:()=>1,hasResizeHandle:()=>uv(this.board,this.element)}),this.generator=new AB(this.board)}initialize(){super.initialize(),this.initializeGenerator(),this.generator.processDrawing(this.element,this.getElementG())}onContextChanged(e,t){e.element!==t.element||e.hasThemeChanged?(this.generator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})):(e.selected!==t.selected||e.selected)&&this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})}destroy(){var e;super.destroy(),null==(e=this.activeGenerator)||e.destroy()}}class hJ{constructor(e={}){this.defaultOptions={smoothing:.65,velocityWeight:.2,curvatureWeight:.3,minDistance:.2,maxPoints:8,pressureSensitivity:.5,tiltSensitivity:.3,velocityThreshold:800,samplingRate:5},this.points=[],this.lastProcessedTime=0,this.movingAverageVelocity=[],this.velocityWindowSize=3,this.options={...this.defaultOptions,...e}}process(e,t={}){const n=t.timestamp??Date.now();if(0===this.points.length){const r={point:e,timestamp:n,...t};return this.points.push(r),this.lastProcessedTime=n,e}if(n-this.lastProcessedTime<this.options.samplingRate&&n-this.lastProcessedTime<2)return null;const r={point:e,timestamp:n,...t};if(!this.checkDistance(e)&&this.points.length>1&&n-this.lastProcessedTime<32)return null;this.updatePoints(r);const o=this.calculateDynamicParameters(r),i=this.smooth(e,o);return this.lastProcessedTime=n,i}reset(){this.points=[],this.lastProcessedTime=0,this.movingAverageVelocity=[]}updatePoints(e){this.points.push(e),this.points.length>this.options.maxPoints&&this.points.shift()}checkDistance(e){if(0===this.points.length)return!0;const t=this.points[this.points.length-1].point,n=this.getDistance(t,e);let r=this.options.minDistance;if(this.movingAverageVelocity.length>0){const e=this.getAverageVelocity();r*=Math.max(.5,Math.min(1.5,e/200))}return n>=r}calculateDynamicParameters(e){const t=this.calculateVelocity(e);this.updateMovingAverage(t);const n=this.getAverageVelocity(),r={...this.options};if(void 0!==e.pressure){const t=Math.pow(e.pressure,1.2);r.smoothing*=1-t*r.pressureSensitivity*.8}const o=Math.min(n/r.velocityThreshold,1);if(r.velocityWeight=.2+.3*o,r.smoothing*=1+.2*o,void 0!==e.tiltX&&void 0!==e.tiltY){const t=Math.sqrt(e.tiltX**2+e.tiltY**2)/90;r.smoothing*=1+t*r.tiltSensitivity*.7}return r}smooth(e,t){if(this.points.length<2)return e;const n=this.calculateWeights(t),r=n.reduce((e,t)=>e+t,0);if(0===r)return e;const o=[0,0];for(let e=0;e<this.points.length;e++){const t=n[e]/r;o[0]+=this.points[e].point[0]*t,o[1]+=this.points[e].point[1]*t}return o}calculateWeights(e){const t=[],n=this.points.length-1;for(let r=0;r<this.points.length;r++){let o=Math.pow(e.smoothing,.8*(n-r));if(r<n){o*=1+this.getPointVelocity(r)*e.velocityWeight*.8}if(r>0&&r<n){o*=1+this.getPointCurvature(r)*e.curvatureWeight*.7}t.push(o)}return t}getDistance(e,t){return Tt(e[0],e[1],t[0],t[1])}calculateVelocity(e){if(this.points.length<2)return 0;const t=this.points[this.points.length-1],n=this.getDistance(t.point,e.point),r=e.timestamp-t.timestamp;return r>0?n/r:0}updateMovingAverage(e){this.movingAverageVelocity.push(e),this.movingAverageVelocity.length>this.velocityWindowSize&&this.movingAverageVelocity.shift()}getAverageVelocity(){return 0===this.movingAverageVelocity.length?0:this.movingAverageVelocity.reduce((e,t)=>e+t)/this.movingAverageVelocity.length}getPointVelocity(e){if(e>=this.points.length-1)return 0;const t=this.points[e],n=this.points[e+1],r=this.getDistance(t.point,n.point),o=n.timestamp-t.timestamp;return o>0?r/o:0}getPointCurvature(e){if(e<=0||e>=this.points.length-1)return 0;const t=this.points[e-1].point,n=this.points[e].point,r=this.points[e+1].point,o=this.getDistance(t,n),i=this.getDistance(n,r),a=this.getDistance(t,r),s=(o+i+a)/2;return 4*Math.sqrt(Math.max(0,s*(s-o)*(s-i)*(s-a)))/(o*i*a+1e-4)}}const dJ=e=>{const{pointerDown:t,pointerMove:n,pointerUp:r,globalPointerUp:o}=e;let i=!1,a=!1,s=[],l=null;const u=new AB(e),c=new hJ({smoothing:.7,pressureSensitivity:.6});let d=null;const h=t=>{if(i){const t=I.getPointer(e);a&&s.push(s[0]),d=dE(t,s)}d&&!t&&Xe.insertNode(e,d,[e.children.length]),null==u||u.destroy(),d=null,i=!1,s=[],c.reset()};return e.pointerDown=n=>{const r=nJ();if(I.isInPointer(e,r)&&F0(e)){i=!0,l=[n.x,n.y];const t=c.process(l),r=At(e,Ot(e,t[0],t[1]));s.push(r)}t(n)},e.pointerMove=t=>{if(i){const n=[t.x,t.y];a=!!(l&&Tt(l[0],l[1],n[0],n[1])<8);const r=c.process(n);if(r){null==u||u.destroy();const t=At(e,Ot(e,r[0],r[1]));s.push(t);const n=I.getPointer(e);d=dE(n,s),u.processDrawing(d,I.getElementTopHost(e))}return}n(t)},e.pointerUp=e=>{h(),r(e)},e.globalPointerUp=e=>{h(!0),o(e)},e},gJ=e=>{const t=e,{getDeletedFragment:n,buildFragment:r,insertFragment:o}=t;return t.getDeletedFragment=e=>{const r=gE(t);return r.length&&e.push(...r),n(e)},t.buildFragment=(e,n,o,i)=>{const a=gE(t);if(a.length){const t=nT(0,a,n?[n.x,n.y]:[0,0]);e=iv(e,{text:"",type:Xu.elements,elements:t})}return r(e,n,o,i)},t.insertFragment=(e,n,r)=>{var i;const a=null==(i=null==e?void 0:e.elements)?void 0:i.filter(e=>ea.isFreehand(e));a&&a.length>0&&rT(t,a,n),o(e,n,r)},t},pJ=e=>{const{getRectangle:t,drawElement:n,isHit:r,isRectangleHit:o,getOneHitElement:i,isMovable:a,isAlign:s}=e;return e.drawElement=e=>ea.isFreehand(e.element)?fJ:n(e),e.getRectangle=e=>ea.isFreehand(e)?M.getRectangleByPoints(e.points):t(e),e.isRectangleHit=(e,t)=>ea.isFreehand(e)?iJ(0,e,t):o(e,t),e.isHit=(t,n,o)=>ea.isFreehand(t)?rJ(e,t,n):r(t,n,o),e.getOneHitElement=t=>t.every(e=>ea.isFreehand(e))?GT(e,t):i(t),e.isMovable=e=>!!ea.isFreehand(e)||a(e),e.isAlign=e=>!!ea.isFreehand(e)||s(e),e.setPluginOptions(cT,{customGeometryTypes:[aB]}),gJ(dJ(e))},mJ=()=>{const e=Zr(),t=e.theme;return b.jsx(Rs,{padding:1,className:Dn("theme-toolbar",il),children:b.jsxs("select",{onChange:t=>{const n=t.target.value;vn.updateThemeColor(e,n)},value:t.themeColorMode,children:[b.jsx("option",{value:"default",children:""}),b.jsx("option",{value:"colorful",children:""}),b.jsx("option",{value:"soft",children:""}),b.jsx("option",{value:"retro",children:""}),b.jsx("option",{value:"dark",children:""}),b.jsx("option",{value:"starry",children:""})]})})},BB=new WeakMap,pE=e=>!!BB.get(e),RB=(e,t)=>{BB.set(e,t)},vJ=e=>t=>{const{pointerDown:n}=t;return t.pointerDown=r=>{D6(r)&&!pE(t)&&(RB(t,!0),e({isPencilMode:!0})),(!pE(t)||D6(r))&&n(r)},t},yJ=()=>{const e=Zr(),{appState:t,setAppState:n}=Ms();return b.jsx(b.Fragment,{children:t.isPencilMode&&b.jsx("div",{className:"pencil-mode-toolbar",children:b.jsx(qn,{type:"button",visible:!0,title:"X Pencil","aria-label":"Arrow",label:"Pencil X",onPointerDown:()=>{n({...t,isPencilMode:!1}),RB(e,!1)}})})})};function wJ({initialOpen:e=!1,open:t,onOpenChange:n}={}){const[r,o]=j.useState(e),[i,a]=j.useState(),[s,l]=j.useState(),u=t??r,c=n??o,d=_v({open:u,onOpenChange:c}),h=d.context,f=nB([eB(h,{enabled:null==t}),tB(h,{outsidePressEvent:"mousedown"}),rB(h)]);return j.useMemo(()=>({open:u,setOpen:c,...f,...d,labelId:i,descriptionId:s,setLabelId:a,setDescriptionId:l}),[u,c,f,d,i,s])}const MB=j.createContext(null),Np=()=>{const e=j.useContext(MB);if(null==e)throw new Error("Dialog components must be wrapped in <Dialog />");return e};function m4({children:e,...t}){const n=wJ(t);return b.jsx(MB.Provider,{value:n,children:e})}j.forwardRef(function({children:e,asChild:t=!1,...n},r){const o=Np(),i=e.ref,a=Fv([o.refs.setReference,r,i]);return t&&j.isValidElement(e)?j.cloneElement(e,o.getReferenceProps({ref:a,...n,...e.props,"data-state":o.open?"open":"closed"})):b.jsx("button",{ref:a,"data-state":o.open?"open":"closed",...o.getReferenceProps(n),children:e})});const v4=j.forwardRef(function(e,t){const{context:n,...r}=Np(),o=Fv([r.refs.setFloating,t]);return n.open?b.jsx(ZA,{root:e.container,children:b.jsx(gQ,{className:"Dialog-overlay",lockScroll:!0,children:b.jsx(JA,{context:n,children:b.jsx("div",{ref:o,"aria-labelledby":r.labelId,"aria-describedby":r.descriptionId,...r.getFloatingProps(e),children:e.children})})})}):null});j.forwardRef(function({children:e,...t},n){const{setLabelId:r}=Np(),o=Fp();return j.useLayoutEffect(()=>(r(o),()=>r(void 0)),[o,r]),b.jsx("h2",{...t,ref:n,id:o,children:e})}),j.forwardRef(function({children:e,...t},n){const{setDescriptionId:r}=Np(),o=Fp();return j.useLayoutEffect(()=>(r(o),()=>r(void 0)),[o,r]),b.jsx("p",{...t,ref:n,id:o,children:e})}),j.forwardRef(function(e,t){const{setOpen:n}=Np();return b.jsx("button",{type:"button",...e,ref:t,onClick:()=>n(!1)})});const CJ="modulepreload",xJ=function(e){return"/"+e},mE={},bB=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));r=Promise.allSettled(t.map(e=>{if((e=xJ(e))in mE)return;mE[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":CJ,t||(o.as="script"),o.crossOrigin="",o.href=e,n&&o.setAttribute("nonce",n),document.head.appendChild(o),t?new Promise((t,n)=>{o.addEventListener("load",t),o.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function o(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&o(e.reason);return e().catch(o)})},kB=({children:e})=>b.jsx("div",{className:"ttd-dialog-panels",children:e}),W3=({label:e,children:t,panelAction:n,panelActionDisabled:r=!1,onTextSubmitInProgress:o,renderTopRight:i,renderSubmitShortcut:a,renderBottomRight:s})=>b.jsxs("div",{className:"ttd-dialog-panel",children:[b.jsxs("div",{className:"ttd-dialog-panel__header",children:[b.jsx("label",{children:e}),null==i?void 0:i()]}),t,b.jsxs("div",{className:Dn("ttd-dialog-panel-button-container",{invisible:!n}),style:{display:"flex",alignItems:"center"},children:[b.jsx("button",{className:"ttd-dialog-panel-button drawnix-button ",onClick:n&&n.action,disabled:r||o,children:b.jsxs("div",{className:Dn({invisible:o}),children:[null==n?void 0:n.label,(null==n?void 0:n.icon)&&b.jsx("span",{children:n.icon})]})}),!r&&!o&&(null==a?void 0:a()),null==s?void 0:s()]})]}),vE={CTRL_OR_CMD:bO||s3?"metaKey":"ctrlKey",ENTER:"Enter"},OB=({input:e,placeholder:t,onChange:n,onKeyboardSubmit:r})=>{const o=j.useRef(null),i=j.useRef(r);return i.current=r,j.useEffect(()=>{if(!i.current)return;const e=o.current;if(e){const t=e=>{var t;e[vE.CTRL_OR_CMD]&&e.key===vE.ENTER&&(e.preventDefault(),null==(t=i.current)||t.call(i))};return e.addEventListener(cp.KEYDOWN,t),()=>{e.removeEventListener(cp.KEYDOWN,t)}}},[]),b.jsx("textarea",{className:"ttd-dialog-input",onChange:n,value:e,placeholder:t,autoFocus:!0,ref:o})},EJ=({error:e})=>b.jsxs("div",{"data-testid":"ttd-dialog-output-error",className:"ttd-dialog-output-error",children:["Error! ",b.jsx("p",{children:e})]}),IB=({error:e,value:t,loaded:n})=>{const r=[yD,mA,oT,CA],o={readonly:!0,hideScrollbar:!1,disabledScrollOnNonFocus:!0,themeColors:BD};return b.jsxs("div",{className:"ttd-dialog-output-wrapper",children:[e&&b.jsx(EJ,{error:e.message}),b.jsx("div",{style:{opacity:e?"0.15":1},className:"ttd-dialog-output-canvas-container",children:b.jsx(lT,{value:t,options:o,plugins:r,children:b.jsx(tS,{})})})]})},FB=()=>b.jsxs("div",{className:"ttd-dialog-submit-shortcut",children:[b.jsx("div",{className:"ttd-dialog-submit-shortcut__key",children:Wx("CtrlOrCmd")}),b.jsx("div",{className:"ttd-dialog-submit-shortcut__key",children:Wx("Enter")})]}),PJ="flowchart TD\n A[Christmas] --\x3e|Get money| B(Go shopping)\n B --\x3e C{Let me think}\n C --\x3e|One| D[Laptop]\n C --\x3e|Two| E[iPhone]\n C --\x3e|Three| F[Car]",SJ=()=>{const{appState:e,setAppState:t}=Ms(),[n,r]=j.useState({loaded:!1,api:Promise.resolve({parseMermaidToDrawnix:async()=>({elements:[]})})});j.useEffect(()=>{(async()=>{try{const e=await bB(()=>import("./index-BkkyqH7o.js").then(e=>e.b6),[]);r({loaded:!0,api:Promise.resolve(e)})}catch(e){console.error("Failed to load mermaid library:",e),c(new Error(" Mermaid "))}})()},[]);const[o,i]=j.useState(()=>PJ),[a,s]=j.useState(()=>[]),l=j.useDeferredValue(o.trim()),[u,c]=j.useState(null),d=Zr();j.useEffect(()=>{(async()=>{try{const e=await n.api;let t;try{t=await e.parseMermaidToDrawnix(l)}catch{t=await e.parseMermaidToDrawnix(l.replace(/"/g,"'"))}const{elements:r}=t;s(r),c(null)}catch(e){c(e)}})()},[l,n]);const h=()=>{if(!a.length)return;const n=I.getBoardContainer(d).getBoundingClientRect(),r=[n.width/2,n.height/2],o=d.viewport.zoom,i=b0(d),s=i[0]+r[0]/o,l=i[1]+r[1]/o,u=a,c=M.getBoundingRectangle(u.filter(e=>!wo.isGroup(e)).map(e=>M.getRectangleByPoints(e.points))),h=[s-c.width/2,l-c.height/2];d.insertFragment({elements:JSON.parse(JSON.stringify(u))},h,aa.paste),t({...e,openDialogType:null})};return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"ttd-dialog-desc",children:["",b.jsx("a",{href:"https://mermaid.js.org/syntax/flowchart.html",target:"_blank",rel:"noreferrer",children:""}),"",b.jsx("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",target:"_blank",rel:"noreferrer",children:""}),"",b.jsx("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",target:"_blank",rel:"noreferrer",children:""})," Drawnix "]}),b.jsxs(kB,{children:[b.jsx(W3,{label:"Mermaid ",children:b.jsx(OB,{input:o,placeholder:" Mermaid ...",onChange:e=>i(e.target.value),onKeyboardSubmit:()=>{h()}})}),b.jsx(W3,{label:"",panelAction:{action:()=>{h()},label:""},renderSubmitShortcut:()=>b.jsx(FB,{}),children:b.jsx(IB,{value:a,loaded:n.loaded,error:u})})]})]})},TJ="# \n\n-  bug   \n  -  \n    -    \n\n-    \n  -  \n    -    \n\n-   \n  -   \n    -    \n    \n##      \n\n### Hello world    \n\n####       ",DJ=()=>{const{appState:e,setAppState:t}=Ms(),[n,r]=j.useState({loaded:!1,api:Promise.resolve({parseMarkdownToDrawnix:(e,t)=>null})});j.useEffect(()=>{(async()=>{try{const e=await bB(()=>import("./index-Tjjv2xOT.js"),__vite__mapDeps([0,1]));r({loaded:!0,api:Promise.resolve(e)})}catch(e){console.error("Failed to load mermaid library:",e),c(new Error(" Mermaid "))}})()},[]);const[o,i]=j.useState(()=>TJ),[a,s]=j.useState(()=>[]),l=j.useDeferredValue(o.trim()),[u,c]=j.useState(null),d=Zr();j.useEffect(()=>{(async()=>{try{const e=await n.api;let t;try{t=await e.parseMarkdownToDrawnix(l)}catch{t=await e.parseMarkdownToDrawnix(l.replace(/"/g,"'"))}const r=t;r.points=[[0,0]],r&&(s([r]),c(null))}catch(e){c(e)}})()},[l,n]);return b.jsxs(kB,{children:[b.jsx(W3,{label:"Markdown ",children:b.jsx(OB,{input:o,placeholder:" Markdown ...",onChange:e=>i(e.target.value),onKeyboardSubmit:()=>{}})}),b.jsx(W3,{label:"",panelAction:{action:()=>{(()=>{if(!a.length)return;const n=I.getBoardContainer(d).getBoundingClientRect(),r=[n.width/4,n.height/2-20],o=d.viewport.zoom,i=b0(d),s=i[0]+r[0]/o,l=i[1]+r[1]/o,u=a;d.insertFragment({elements:JSON.parse(JSON.stringify(u))},[s,l],aa.paste),t({...e,openDialogType:null})})()},label:""},renderSubmitShortcut:()=>b.jsx(FB,{}),children:b.jsx(IB,{value:a,loaded:n.loaded,error:u})})]})},AJ=({container:e})=>{const{appState:t,setAppState:n}=Ms();return b.jsxs(b.Fragment,{children:[b.jsx(m4,{open:t.openDialogType===_f.mermaidToDrawnix,onOpenChange:e=>{n({...t,openDialogType:e?_f.mermaidToDrawnix:null})},children:b.jsx(v4,{className:"Dialog ttd-dialog",container:e,children:b.jsx(SJ,{})})}),b.jsx(m4,{open:t.openDialogType===_f.markdownToDrawnix,onOpenChange:e=>{n({...t,openDialogType:e?_f.markdownToDrawnix:null})},children:b.jsx(v4,{className:"Dialog ttd-dialog",container:e,children:b.jsx(DJ,{})})})]})},BJ=({container:e})=>{const{appState:t,setAppState:n}=Ms(),r=Zr();return b.jsx(m4,{open:t.openCleanConfirm,onOpenChange:e=>{n({...t,openCleanConfirm:e})},children:b.jsxs(v4,{className:"clean-confirm",container:e,children:[b.jsx("h2",{className:"clean-confirm__title",children:""}),b.jsx("p",{className:"clean-confirm__description",children:"?"}),b.jsxs("div",{className:"clean-confirm__actions",children:[b.jsx("button",{className:"clean-confirm__button clean-confirm__button--cancel",onClick:()=>{n({...t,openCleanConfirm:!1})},children:""}),b.jsx("button",{className:"clean-confirm__button clean-confirm__button--ok",autoFocus:!0,onClick:()=>{r.deleteFragment(r.children),n({...t,openCleanConfirm:!1})},children:""})]})]})})},yE=e=>{const{appState:t}=e;return t&&t.linkState&&t.linkState.isHovering},wE=e=>{const{appState:t}=e;return t&&t.linkState&&t.linkState.isEditing},RJ=e=>t=>{const{pointerMove:n}=t;let r=null,o=null;return t.pointerMove=i=>{(I.isPointer(t,Zt.selection)||I.isPointer(t,Zt.hand))&&!fc(t)&&!Gu(t)&&!yE(t)&&!wE(t)&&Ua(t,"with-text-link",()=>{const n=i.target.closest(".plait-board-link");if(n&&n!==r){const t=n.closest(".plait-text-container"),i=ze.toSlateNode(void 0,t),a=ze.toSlateNode(void 0,n);r=n,e({linkState:{targetDom:n,targetElement:a,editor:i,isEditing:!1,isHovering:!1,isHoveringOrigin:!0}}),clearTimeout(o)}else!n&&r&&(o=setTimeout(()=>{!yE(t)&&!wE(t)&&e({linkState:null})},300),r=null)}),n(i)},t},MJ=()=>{var e,t,n,r;const[o,i]=j.useState(""),{appState:a,setAppState:s}=Ms(),l=Zr(),{refs:u,floatingStyles:c}=_v({placement:"top",middleware:[ly(20),cy()]}),d=a.linkState,h=(null==(e=a.linkState)?void 0:e.targetDom)||null,f=(null==(t=a.linkState)?void 0:t.isEditing)||!1,p=(null==(n=a.linkState)?void 0:n.isHoveringOrigin)||!1,g=(null==(r=a.linkState)?void 0:r.isHovering)||!1,m=f||p||g,v=j.useRef(a.linkState);j.useEffect(()=>{v.current=a.linkState,a.linkState?i(a.linkState.targetElement.url):i("")},[a.linkState]),j.useEffect(()=>{if(h){const e=h.getBoundingClientRect();u.setPositionReference({getBoundingClientRect:()=>({x:e.x,y:e.y,width:e.width,height:e.height,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height})})}},[l.viewport,h]),j.useEffect(()=>{const e=e=>{if(u.floating.current&&!u.floating.current.contains(e.target)){if(v.current){const e=$a.getLinkElement(v.current.editor);e&&!e[0].url.trim()&&$a.unwrapLink(v.current.editor)}s({...a,linkState:null})}};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);return m&&b.jsx(Rs,{ref:u.setFloating,style:c,padding:1,className:Dn("link-popup"),onPointerEnter:()=>{g||s({...a,linkState:{...a.linkState,isHovering:!0}})},onPointerLeave:()=>{f||s({...a,linkState:{...a.linkState,isHovering:!1}})},children:b.jsx(Wo.Row,{gap:1,align:"center",children:f?b.jsxs(b.Fragment,{children:[b.jsx("input",{type:"text",value:o,onChange:e=>{i(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(()=>{if(o!==d.targetElement.url){const e=d.editor,t=d.targetElement,n=ze.findPath(e,t);Re.setNodes(e,{url:o},{at:n})}const e=$a.getLinkElement(d.editor);s({...a,linkState:{...a.linkState,targetElement:e[0],isEditing:!1,isHoveringOrigin:!0}})})()},className:"link-popup__input",autoFocus:!0}),b.jsx(qn,{type:"icon",visible:!0,icon:O3,title:"Delete link","aria-label":"Delete link",onPointerDown:()=>{const e=d.editor,t=d.targetElement,n=ze.findPath(e,t);Re.unwrapNodes(e,{at:n}),s({...a,linkState:null})}})]}):b.jsxs(b.Fragment,{children:[b.jsx("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"link-popup__link",children:o}),b.jsx(qn,{className:"link-popup__edit",type:"icon",visible:!0,icon:EA,title:"Edit link","aria-label":"Edit link",onPointerDown:({event:e})=>{e.preventDefault(),s({...a,linkState:{...a.linkState,isEditing:!0}})}}),b.jsx(qn,{type:"icon",visible:!0,icon:O3,title:"Delete link","aria-label":"Delete link",onPointerDown:()=>{const e=d.editor,t=d.targetElement,n=ze.findPath(e,t);Re.unwrapNodes(e,{at:n}),s({...a,linkState:null})}})]})})})},bJ=({value:e,viewport:t,theme:n,onChange:r,onSelectionChange:o,onViewportChange:i,onThemeChange:a,onValueChange:s,afterInit:l})=>{const u={readonly:!1,hideScrollbar:!1,disabledScrollOnNonFocus:!1,themeColors:BD},[c,d]=j.useState(()=>{const e=new sY(window.navigator.userAgent);return{pointer:Zt.hand,isMobile:null!==e.mobile(),isPencilMode:!1,openDialogType:null,openCleanConfirm:!1}}),[h,f]=j.useState(null);h&&(h.appState=c);const p=e=>{d({...c,...e})},g=[yD,oT,mA,aY,CA,tJ(p),pJ,vJ(p),RJ(p)],m=j.useRef(null);return b.jsx(uB.Provider,{value:{appState:c,setAppState:d},children:b.jsx("div",{className:Dn("drawnix",{"drawnix--mobile":c.isMobile}),ref:m,children:b.jsxs(lT,{value:e,viewport:t,theme:n,options:u,plugins:g,onChange:e=>{r&&r(e)},onSelectionChange:o,onViewportChange:i,onThemeChange:a,onValueChange:s,children:[b.jsx(tS,{afterInit:e=>{f(e),l&&l(e)}}),b.jsx(eJ,{}),b.jsx(DQ,{}),b.jsx(AQ,{}),b.jsx(mJ,{}),b.jsx(XQ,{}),b.jsx(MJ,{}),b.jsx(yJ,{}),b.jsx(AJ,{container:m.current}),b.jsx(BJ,{container:m.current})]})})})};function Mm(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var CE,V5={exports:{}};
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/function kJ(){return CE||(CE=1,V5.exports=function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof Mm&&Mm;if(!s&&l)return l(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){return o(t[a][1][e]||e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof Mm&&Mm,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){(function(e){var n,r=e.MutationObserver||e.WebKitMutationObserver;if(r){var o=0,i=new r(c),a=e.document.createTextNode("");i.observe(a,{characterData:!0}),n=function(){a.data=o=++o%2}}else if(!e.setImmediate&&typeof e.MessageChannel<"u"){var s=new e.MessageChannel;s.port1.onmessage=c,n=function(){s.port2.postMessage(0)}}else n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){c(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(c,0)};var l,u=[];function c(){l=!0;for(var e,t,n=u.length;n;){for(t=u,u=[],e=-1;++e<n;)t[e]();n=u.length}l=!1}function d(e){1===u.push(e)&&!l&&n()}t.exports=d}).call(this,typeof Cs<"u"?Cs:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(e,t,n){var r=e(1);function o(){}var i={},a=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==o&&f(this,e)}function c(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r(function(){var r;try{r=t(n)}catch(t){return i.reject(e,t)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)})}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var n=!1;function r(t){n||(n=!0,i.reject(e,t))}function o(t){n||(n=!0,i.resolve(e,t))}function a(){t(o,r)}var s=p(a);"error"===s.status&&r(s.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}function g(e){return e instanceof this?e:i.resolve(new this(o),e)}function m(e){var t=new this(o);return i.reject(t,e)}function v(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,l=-1,u=new this(o);++l<n;)c(e[l],l);return u;function c(e,o){function l(e){a[o]=e,++s===n&&!r&&(r=!0,i.resolve(u,a))}t.resolve(e).then(l,function(e){r||(r=!0,i.reject(u,e))})}}function y(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=-1,s=new this(o);++a<n;)l(e[a]);return s;function l(e){t.resolve(e).then(function(e){r||(r=!0,i.resolve(s,e))},function(e){r||(r=!0,i.reject(s,e))})}}t.exports=u,u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(o);return this.state!==l?d(n,this.state===s?e:t,this.outcome):this.queue.push(new c(n,e,t)),n},c.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},c.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},c.prototype.callRejected=function(e){i.reject(this.promise,e)},c.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},i.resolve=function(e,t){var n=p(h,t);if("error"===n.status)return i.reject(e,n.value);var r=n.value;if(r)f(e,r);else{e.state=s,e.outcome=t;for(var o=-1,a=e.queue.length;++o<a;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},u.resolve=g,u.reject=m,u.all=v,u.race=y},{1:1}],3:[function(e,t,n){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,typeof Cs<"u"?Cs:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var a=i();function s(){try{if(!a||!a.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function l(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var n=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}typeof Promise>"u"&&e(3);var u=Promise;function c(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function d(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function h(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function f(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var p="local-forage-detect-blob-support",g=void 0,m={},v=Object.prototype.toString,y="readonly",b="readwrite";function w(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}function x(e){return new u(function(t){var n=e.transaction(p,b),r=l([""]);n.objectStore(p).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}}).catch(function(){return!1})}function C(e){return"boolean"==typeof g?u.resolve(g):x(e).then(function(e){return g=e})}function E(e){var t=m[e.name],n={};n.promise=new u(function(e,t){n.resolve=e,n.reject=t}),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then(function(){return n.promise}):t.dbReady=n.promise}function D(e){var t=m[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function S(e,t){var n=m[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function P(e,t){return new u(function(n,r){if(m[e.name]=m[e.name]||O(),e.db){if(!t)return n(e.db);E(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var i=a.open.apply(a,o);t&&(i.onupgradeneeded=function(t){var n=i.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(p)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),i.onerror=function(e){e.preventDefault(),r(i.error)},i.onsuccess=function(){var t=i.result;t.onversionchange=function(e){e.target.close()},n(t),D(e)}})}function T(e){return P(e,!1)}function A(e){return P(e,!0)}function M(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||n){if(n){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function k(e){return new u(function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)})}function B(e){return l([w(atob(e.data))],{type:e.type})}function F(e){return e&&e.__local_forage_encoded_blob}function I(e){var t=this,n=t._initReady().then(function(){var e=m[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return d(n,e,e),n}function R(e){E(e);for(var t=m[e.name],n=t.forages,r=0;r<n.length;r++){var o=n[r];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,T(e).then(function(t){return e.db=t,M(e)?A(e):t}).then(function(r){e.db=t.db=r;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=r}).catch(function(t){throw S(e,t),t})}function _(e,t,n,r){void 0===r&&(r=1);try{var o=e.db.transaction(e.storeName,t);n(null,o)}catch(o){if(r>0&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return u.resolve().then(function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),A(e)}).then(function(){return R(e).then(function(){_(e,t,n,r-1)})}).catch(n);n(o)}}function O(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function L(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var o=m[n.name];o||(o=O(),m[n.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=I);var i=[];function a(){return u.resolve()}for(var s=0;s<o.forages.length;s++){var l=o.forages[s];l!==t&&i.push(l._initReady().catch(a))}var c=o.forages.slice(0);return u.all(i).then(function(){return n.db=o.db,T(n)}).then(function(e){return n.db=e,M(n,t._defaultConfig.version)?A(n):e}).then(function(e){n.db=o.db=e,t._dbInfo=n;for(var r=0;r<c.length;r++){var i=c[r];i!==t&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}})}function j(e,t){var n=this;e=h(e);var r=new u(function(t,r){n.ready().then(function(){_(n._dbInfo,y,function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),F(e)&&(e=B(e)),t(e)},a.onerror=function(){r(a.error)}}catch(e){r(e)}})}).catch(r)});return c(r,t),r}function N(e,t){var n=this,r=new u(function(t,r){n.ready().then(function(){_(n._dbInfo,y,function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;F(r)&&(r=B(r));var o=e(r,n.key,s++);void 0!==o?t(o):n.continue()}else t()},a.onerror=function(){r(a.error)}}catch(e){r(e)}})}).catch(r)});return c(r,t),r}function G(e,t,n){var r=this;e=h(e);var o=new u(function(n,o){var i;r.ready().then(function(){return i=r._dbInfo,"[object Blob]"===v.call(t)?C(i.db).then(function(e){return e?t:k(t)}):t}).then(function(t){_(r._dbInfo,b,function(i,a){if(i)return o(i);try{var s=a.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var l=s.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),n(t)},a.onabort=a.onerror=function(){var e=l.error?l.error:l.transaction.error;o(e)}}catch(e){o(e)}})}).catch(o)});return c(o,n),o}function H(e,t){var n=this;e=h(e);var r=new u(function(t,r){n.ready().then(function(){_(n._dbInfo,b,function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){r(a.error)},i.onabort=function(){var e=a.error?a.error:a.transaction.error;r(e)}}catch(e){r(e)}})}).catch(r)});return c(r,t),r}function z(e){var t=this,n=new u(function(e,n){t.ready().then(function(){_(t._dbInfo,b,function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=i.error?i.error:i.transaction.error;n(e)}}catch(e){n(e)}})}).catch(n)});return c(n,e),n}function W(e){var t=this,n=new u(function(e,n){t.ready().then(function(){_(t._dbInfo,y,function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){n(i.error)}}catch(e){n(e)}})}).catch(n)});return c(n,e),n}function V(e,t){var n=this,r=new u(function(t,r){e<0?t(null):n.ready().then(function(){_(n._dbInfo,y,function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName),s=!1,l=a.openKeyCursor();l.onsuccess=function(){var n=l.result;n?0===e||s?t(n.key):(s=!0,n.advance(e)):t(null)},l.onerror=function(){r(l.error)}}catch(e){r(e)}})}).catch(r)});return c(r,t),r}function $(e){var t=this,n=new u(function(e,n){t.ready().then(function(){_(t._dbInfo,y,function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).openKeyCursor(),a=[];i.onsuccess=function(){var t=i.result;t?(a.push(t.key),t.continue()):e(a)},i.onerror=function(){n(i.error)}}catch(e){n(e)}})}).catch(n)});return c(n,e),n}function K(e,t){t=f.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;if(e.name){var i=e.name===n.name&&o._dbInfo.db?u.resolve(o._dbInfo.db):T(e).then(function(t){var n=m[e.name],r=n.forages;n.db=t;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=t;return t});r=e.storeName?i.then(function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;E(e);var r=m[e.name],o=r.forages;t.close();for(var i=0;i<o.length;i++){var s=o[i];s._dbInfo.db=null,s._dbInfo.version=n}return new u(function(t,r){var o=a.open(e.name,n);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}}).then(function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,D(n._dbInfo)}}).catch(function(t){throw(S(e,t)||u.resolve()).catch(function(){}),t})}}):i.then(function(t){E(e);var n=m[e.name],r=n.forages;t.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;return new u(function(t,n){var r=a.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}).then(function(e){n.db=e;for(var t=0;t<r.length;t++)D(r[t]._dbInfo)}).catch(function(t){throw(S(e,t)||u.resolve()).catch(function(){}),t})})}else r=u.reject("Invalid arguments");return c(r,t),r}var X={_driver:"asyncStorage",_initStorage:L,_support:s(),iterate:N,getItem:j,setItem:G,removeItem:H,clear:z,length:W,key:V,keys:$,dropInstance:K};function U(){return"function"==typeof openDatabase}var q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Q="~~local_forage_type~",Y=/^~~local_forage_type~([^~]+)~/,Z="__lfsc__:",J=Z.length,ee="arbf",te="blob",ne="si08",re="ui08",oe="uic8",ie="si16",ae="si32",se="ur16",le="ui32",ue="fl32",ce="fl64",de=J+ee.length,he=Object.prototype.toString;function fe(e){var t,n,r,o,i,a=.75*e.length,s=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),c=new Uint8Array(u);for(t=0;t<s;t+=4)n=q.indexOf(e[t]),r=q.indexOf(e[t+1]),o=q.indexOf(e[t+2]),i=q.indexOf(e[t+3]),c[l++]=n<<2|r>>4,c[l++]=(15&r)<<4|o>>2,c[l++]=(3&o)<<6|63&i;return u}function pe(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=q[n[t]>>2],r+=q[(3&n[t])<<4|n[t+1]>>4],r+=q[(15&n[t+1])<<2|n[t+2]>>6],r+=q[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function ge(e,t){var n="";if(e&&(n=he.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===he.call(e.buffer))){var r,o=Z;e instanceof ArrayBuffer?(r=e,o+=ee):(r=e.buffer,"[object Int8Array]"===n?o+=ne:"[object Uint8Array]"===n?o+=re:"[object Uint8ClampedArray]"===n?o+=oe:"[object Int16Array]"===n?o+=ie:"[object Uint16Array]"===n?o+=se:"[object Int32Array]"===n?o+=ae:"[object Uint32Array]"===n?o+=le:"[object Float32Array]"===n?o+=ue:"[object Float64Array]"===n?o+=ce:t(new Error("Failed to get type for BinaryArray"))),t(o+pe(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n=Q+e.type+"~"+pe(this.result);t(Z+te+n)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}}function me(e){if(e.substring(0,J)!==Z)return JSON.parse(e);var t,n=e.substring(de),r=e.substring(J,de);if(r===te&&Y.test(n)){var o=n.match(Y);t=o[1],n=n.substring(o[0].length)}var i=fe(n);switch(r){case ee:return i;case te:return l([i],{type:t});case ne:return new Int8Array(i);case re:return new Uint8Array(i);case oe:return new Uint8ClampedArray(i);case ie:return new Int16Array(i);case se:return new Uint16Array(i);case ae:return new Int32Array(i);case le:return new Uint32Array(i);case ue:return new Float32Array(i);case ce:return new Float64Array(i);default:throw new Error("Unkown type: "+r)}}var ve={serialize:ge,deserialize:me,stringToBuffer:fe,bufferToString:pe};function ye(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function be(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var o=new u(function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction(function(o){ye(o,n,function(){t._dbInfo=n,e()},function(e,t){r(t)})},r)});return n.serializer=ve,o}function we(e,t,n,r,o,i){e.executeSql(n,r,o,function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],function(e,s){s.rows.length?i(e,a):ye(e,t,function(){e.executeSql(n,r,o,i)},i)},i):i(e,a)},i)}function xe(e,t){var n=this;e=h(e);var r=new u(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){we(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),t(r)},function(e,t){r(t)})})}).catch(r)});return c(r,t),r}function Ce(e,t){var n=this,r=new u(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){we(n,o,"SELECT * FROM "+o.storeName,[],function(n,r){for(var i=r.rows,a=i.length,s=0;s<a;s++){var l=i.item(s),u=l.value;if(u&&(u=o.serializer.deserialize(u)),void 0!==(u=e(u,l.key,s+1)))return void t(u)}t()},function(e,t){r(t)})})}).catch(r)});return c(r,t),r}function Ee(e,t,n,r){var o=this;e=h(e);var i=new u(function(i,a){o.ready().then(function(){void 0===t&&(t=null);var s=t,l=o._dbInfo;l.serializer.serialize(t,function(t,u){u?a(u):l.db.transaction(function(n){we(n,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[e,t],function(){i(s)},function(e,t){a(t)})},function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void i(Ee.apply(o,[e,s,n,r-1]));a(t)}})})}).catch(a)});return c(i,n),i}function De(e,t,n){return Ee.apply(this,[e,t,n,1])}function Se(e,t){var n=this;e=h(e);var r=new u(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){we(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){r(t)})})}).catch(r)});return c(r,t),r}function Pe(e){var t=this,n=new u(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){we(t,r,"DELETE FROM "+r.storeName,[],function(){e()},function(e,t){n(t)})})}).catch(n)});return c(n,e),n}function Te(e){var t=this,n=new u(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){we(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],function(t,n){var r=n.rows.item(0).c;e(r)},function(e,t){n(t)})})}).catch(n)});return c(n,e),n}function Ae(e,t){var n=this,r=new u(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){we(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)},function(e,t){r(t)})})}).catch(r)});return c(r,t),r}function Me(e){var t=this,n=new u(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){we(t,r,"SELECT key FROM "+r.storeName,[],function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)},function(e,t){n(t)})})}).catch(n)});return c(n,e),n}function ke(e){return new u(function(t,n){e.transaction(function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(n,r){for(var o=[],i=0;i<r.rows.length;i++)o.push(r.rows.item(i).name);t({db:e,storeNames:o})},function(e,t){n(t)})},function(e){n(e)})})}function Be(e,t){t=f.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;return c(r=e.name?new u(function(t){var r;r=e.name===n.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(ke(r))}).then(function(e){return new u(function(t,n){e.db.transaction(function(r){function o(e){return new u(function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],function(){t()},function(e,t){n(t)})})}for(var i=[],a=0,s=e.storeNames.length;a<s;a++)i.push(o(e.storeNames[a]));u.all(i).then(function(){t()}).catch(function(e){n(e)})},function(e){n(e)})})}):u.reject("Invalid arguments"),t),r}var Fe={_driver:"webSQLStorage",_initStorage:be,_support:U(),iterate:Ce,getItem:xe,setItem:De,removeItem:Se,clear:Pe,length:Te,key:Ae,keys:Me,dropInstance:Be};function Ie(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Re(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function _e(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}function Oe(){return!_e()||localStorage.length>0}function Le(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=Re(e,t._defaultConfig),Oe()?(t._dbInfo=n,n.serializer=ve,u.resolve()):u.reject()}function je(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}});return c(n,e),n}function Ne(e,t){var n=this;e=h(e);var r=n.ready().then(function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r});return c(r,t),r}function Ge(e,t){var n=this,r=n.ready().then(function(){for(var t=n._dbInfo,r=t.keyPrefix,o=r.length,i=localStorage.length,a=1,s=0;s<i;s++){var l=localStorage.key(s);if(0===l.indexOf(r)){var u=localStorage.getItem(l);if(u&&(u=t.serializer.deserialize(u)),void 0!==(u=e(u,l.substring(o),a++)))return u}}});return c(r,t),r}function He(e,t){var n=this,r=n.ready().then(function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch{t=null}return t&&(t=t.substring(r.keyPrefix.length)),t});return c(r,t),r}function ze(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++){var i=localStorage.key(o);0===i.indexOf(e.keyPrefix)&&r.push(i.substring(e.keyPrefix.length))}return r});return c(n,e),n}function We(e){var t=this.keys().then(function(e){return e.length});return c(t,e),t}function Ve(e,t){var n=this;e=h(e);var r=n.ready().then(function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return c(r,t),r}function $e(e,t,n){var r=this;e=h(e);var o=r.ready().then(function(){void 0===t&&(t=null);var n=t;return new u(function(o,i){var a=r._dbInfo;a.serializer.serialize(t,function(t,r){if(r)i(r);else try{localStorage.setItem(a.keyPrefix+e,t),o(n)}catch(e){("QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&i(e),i(e)}})})});return c(o,n),o}function Ke(e,t){if(t=f.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,o=this;return c(r=e.name?new u(function(t){e.storeName?t(Re(e,o._defaultConfig)):t(e.name+"/")}).then(function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}}):u.reject("Invalid arguments"),t),r}var Xe={_driver:"localStorageWrapper",_initStorage:Le,_support:Ie(),iterate:Ge,getItem:Ne,setItem:$e,removeItem:Ve,clear:je,length:We,key:He,keys:ze,dropInstance:Ke},Ue=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},qe=function(e,t){for(var n=e.length,r=0;r<n;){if(Ue(e[r],t))return!0;r++}return!1},Qe=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Ye={},Ze={},Je={INDEXEDDB:X,WEBSQL:Fe,LOCALSTORAGE:Xe},et=[Je.INDEXEDDB._driver,Je.WEBSQL._driver,Je.LOCALSTORAGE._driver],tt=["dropInstance"],nt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),rt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ot(e,t){e[t]=function(){var n=arguments;return e.ready().then(function(){return e[t].apply(e,n)})}}function it(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Qe(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var at=function(){function e(t){for(var n in o(this,e),Je)if(Je.hasOwnProperty(n)){var r=Je[n],i=r._driver;this[n]=i,Ye[i]||this.defineDriver(r)}this._defaultConfig=it({},rt),this._config=it({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(e){if("object"===(typeof e>"u"?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new u(function(t,n){try{var r=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(o);for(var i=nt.concat("_initStorage"),a=0,s=i.length;a<s;a++){var l=i[a];if((!qe(tt,l)||e[l])&&"function"!=typeof e[l])return void n(o)}var d=function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=u.reject(t);return c(n,arguments[arguments.length-1]),n}},n=0,r=tt.length;n<r;n++){var o=tt[n];e[o]||(e[o]=t(o))}};d();var h=function(n){Ye[r]&&console.info("Redefining LocalForage driver: "+r),Ye[r]=e,Ze[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(h,n):h(!!e._support):h(!0)}catch(e){n(e)}});return d(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=Ye[e]?u.resolve(Ye[e]):u.reject(new Error("Driver not found."));return d(r,t,n),r},e.prototype.getSerializer=function(e){var t=u.resolve(ve);return d(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return d(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;Qe(e)||(e=[e]);var o=this._getSupportedDrivers(e);function i(){r._config.driver=r.driver()}function a(e){return r._extend(e),i(),r._ready=r._initStorage(r._config),r._ready}function s(e){return function(){var t=0;function n(){for(;t<e.length;){var o=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(o).then(a).catch(n)}i();var s=new Error("No available storage method found.");return r._driverSet=u.reject(s),r._driverSet}return n()}}var l=null!==this._driverSet?this._driverSet.catch(function(){return u.resolve()}):u.resolve();return this._driverSet=l.then(function(){var e=o[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then(function(e){r._driver=e._driver,i(),r._wrapLibraryMethodsWithReady(),r._initDriver=s(o)})}).catch(function(){i();var e=new Error("No available storage method found.");return r._driverSet=u.reject(e),r._driverSet}),d(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Ze[e]},e.prototype._extend=function(e){it(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=nt.length;e<t;e++)ot(this,nt[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),st=new at;t.exports=st},{3:3}]},{},[4])(4)),V5.exports}var OJ=kJ();const h0=vc(OJ),xE="drawnix-local-data",U5="main_board_content";function IJ(){const[e,t]=j.useState({children:[]});return j.useEffect(()=>{(async()=>{const e=await h0.getItem(U5);if(e)return void t(e);const n=localStorage.getItem(xE);if(n){const e=JSON.parse(n);return t(e),await h0.setItem(U5,e),void localStorage.removeItem(xE)}t({children:gb})})()},[]),b.jsx(bJ,{value:e.children,viewport:e.viewport,theme:e.theme,onChange:e=>{h0.setItem(U5,e)},afterInit:e=>{console.log("board initialized"),console.log("add __drawnix__web__debug_log to window, so you can call add log anywhere, like: window.__drawnix__web__console('some thing')"),window.__drawnix__web__console=t=>{FJ(e,t)}}})}h0.config({name:"Drawnix",storeName:"drawnix_store",driver:[h0.INDEXEDDB,h0.LOCALSTORAGE]});const FJ=(e,t)=>{const n=I.getBoardContainer(e).closest(".drawnix");let r=n.querySelector(".drawnix-console");r||(r=document.createElement("div"),r.classList.add("drawnix-console"),n.append(r));const o=document.createElement("div");o.innerHTML=t,r.append(o)},LJ=z3.createRoot(document.getElementById("root"));LJ.render(b.jsx(j.StrictMode,{children:b.jsx(IJ,{})}));export{Vr as A,pt as B,hv as D,gt as F,Je as M,Ke as N,wo as P,M as R,Ss as S,bB as _,Rp as a,eu as b,qI as c,k8 as d,a0 as e,WW as f,vc as g,CT as h,Fn as i,lt as j,En as k,Tv as l,Sp as m,Dv as n,Cs as o,Mm as p};